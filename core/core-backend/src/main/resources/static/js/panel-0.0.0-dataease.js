var W=Object.defineProperty;var Y=(s,t,e)=>t in s?W(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var a=(s,t,e)=>(Y(s,typeof t!="symbol"?t+"":t,e),e);import{p as Z,u as G,b as U,s as H,c as B,d as M,a as N}from"../assets/chunk/index-0.0.0-dataease.js";import{a as r}from"../assets/chunk/library-0.0.0-dataease.js";import{d as X,s as q,r as R,o as j,f as k,g as y,m as C,n as x,p as i,q as z,x as K,l as $}from"../assets/chunk/vue-0.0.0-dataease.js";import"../assets/chunk/lodash-0.0.0-dataease.js";const J=X({__name:"App",props:{componentName:Z.string.def("Iframe")},setup(s){const t=i(()=>r(()=>import("../assets/chunk/index-0.0.0-dataease5.js"),[],import.meta.url)),e=i(()=>r(()=>import("../assets/chunk/index-0.0.0-dataease6.js"),[],import.meta.url)),l=i(()=>r(()=>import("../assets/chunk/DashboardPreview-0.0.0-dataease.js"),[],import.meta.url)),c=i(()=>r(()=>import("../assets/chunk/ViewWrapper-0.0.0-dataease.js"),[],import.meta.url)),I=i(()=>r(()=>import("../assets/chunk/Iframe-0.0.0-dataease.js"),[],import.meta.url)),D=i(()=>r(()=>import("../assets/chunk/index-0.0.0-dataease7.js"),[],import.meta.url)),d=i(()=>r(()=>import("../assets/chunk/index-0.0.0-dataease8.js"),[],import.meta.url)),_=i(()=>r(()=>import("../assets/chunk/index-0.0.0-dataease9.js"),[],import.meta.url)),L=i(()=>r(()=>import("../assets/chunk/PreviewShow-0.0.0-dataease.js"),[],import.meta.url)),h=i(()=>r(()=>import("../assets/chunk/DashboardPreviewShow-0.0.0-dataease.js"),[],import.meta.url)),f=i(()=>r(()=>import("../assets/chunk/index-0.0.0-dataease10.js"),[],import.meta.url)),n=i(()=>r(()=>import("../assets/chunk/PreviewCanvas-0.0.0-dataease.js"),[],import.meta.url)),o=i(()=>r(()=>import("../assets/chunk/DashboardEmpty-0.0.0-dataease.js"),[],import.meta.url)),A=i(()=>r(()=>import("../assets/chunk/index-0.0.0-dataease11.js"),[],import.meta.url)),g=s,m=q(),w={DashboardEditor:e,VisualizationEditor:t,ViewWrapper:c,Preview:n,Dashboard:l,Dataset:D,Iframe:I,Datasource:_,ScreenPanel:L,DashboardPanel:h,DatasetEditor:d,DashboardEmpty:o,Copilot:f},E=R(!1),p=R(""),v=R(!1),b=u=>{E.value=!1,v.value=!0,m.value=void 0,u&&u.includes("DataFilling")?(u==="DataFilling"?p.value="L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvbWFuYWdlL2luZGV4":u==="DataFillingEditor"?p.value="L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvbWFuYWdlL2Zvcm0vaW5kZXg=":u==="DataFillingHandler"&&(p.value="L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvZmlsbC9UYWJQYW5lVGFibGU="),x(()=>{m.value=A,E.value=!0})):x(()=>{m.value=w[u],v.value=!1})};return G({name:"changeCurrentComponent",callback:b}),j(()=>{b(g.componentName)}),(u,P)=>!E.value&&!v.value?(k(),y(C(m.value),{key:0})):(k(),y(C(m.value),{key:1,jsname:p.value},null,8,["jsname"]))}}),Q=[],O=z({history:K(),routes:Q}),tt=O.install;O.install=s=>{const t=window.location.hash;tt(s),setTimeout(()=>{window.location.hash=t},100)};const et=s=>{s.use(O)},S="0.0.0-dataease",F=document.querySelector("head"),st=F.appendChild.bind(F),rt=(s,t)=>{if(["SCRIPT","LINK"].includes(s.nodeName)){let e="";if(s instanceof HTMLLinkElement?e=s.href:s instanceof HTMLScriptElement&&(e=s.src),e.includes(S)||e.includes("dataease-private")){const l=new URL(e).origin,c=e.replace(l,t);s instanceof HTMLLinkElement?s.href=c:s instanceof HTMLScriptElement&&(s.src=c)}}return s},at=()=>{let s="";return Array.from(document.querySelector("head").children).some(t=>{if(["SCRIPT","LINK"].includes(t.nodeName)){let e="";if(t instanceof HTMLLinkElement?e=t.href:t instanceof HTMLScriptElement&&(e=t.src),e.includes(S)){s=new URL(e).origin;const l=e.indexOf(`/js/div_import_${S}`);return l>0&&(s=e.substring(0,l)),!0}}}),s};document.querySelector("head").appendChild=s=>{const t=rt(s,at());return st(t),t};const it=async(s,t,e,l,c,I,D,d,_,L,h,f)=>{const n=$(J,{componentName:t});n.provide("embeddedParams",{chartId:L,resourceId:h,dfId:f,dvId:d,pid:_,busiFlag:e,outerParams:l,suffixId:c}),H(n);const o=U();o.setType(t),o.setBusiFlag(e),o.setOuterParams(l),o.setSuffixId(c),o.setToken(I),o.setBaseUrl(D),o.setDvId(d),o.setPid(_),o.setResourceId(h),o.setDfId(f),await(await r(()=>import("../assets/chunk/ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js").then(T=>T.aW),[],import.meta.url)).setupI18n(n),et(n),B(n),M(n),(await r(()=>import("../assets/chunk/index-0.0.0-dataease2.js"),[],import.meta.url)).installDirective(n),(await r(()=>import("../assets/chunk/ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js").then(T=>T.aV),[],import.meta.url)).userStore().setUser(),(await r(()=>import("../assets/chunk/app-0.0.0-dataease.js"),[],import.meta.url)).useAppStoreWithOut().setIsDataEaseBi(!0),(await r(()=>import("../assets/chunk/appearance-0.0.0-dataease.js"),[],import.meta.url)).useAppearanceStoreWithOut().setAppearance(!0);const P=await(await r(()=>import("../assets/chunk/common-0.0.0-dataease.js"),[],import.meta.url)).getDefaultSettings(),{wsCache:V}=N();return V.set("TreeSort-backend",P["basic.defaultSort"]??"1"),V.set("open-backend",P["basic.defaultOpen"]??"0"),n.mount(s),n},ot={container:"#designer",lng:"zh",theme:"default"};class nt{constructor(t,e){a(this,"baseUrl");a(this,"token");a(this,"type");a(this,"dvId");a(this,"busiFlag");a(this,"outerParams");a(this,"suffixId");a(this,"resourceId");a(this,"dfId");a(this,"pid");a(this,"chartId");a(this,"deOptions");a(this,"vm");this.type=t,this.token=e.token,this.busiFlag=e.busiFlag,this.outerParams=e.outerParams,this.suffixId=e.suffixId,this.baseUrl=e.baseUrl,this.dvId=e.dvId,this.pid=e.pid,this.chartId=e.chartId,this.resourceId=e.resourceId,this.dfId=e.dfId}async initialize(t){this.deOptions={...ot,...t},this.vm=await it(this.deOptions.container,this.type,this.busiFlag,this.outerParams,this.suffixId,this.token,this.baseUrl,this.dvId,this.pid,this.chartId,this.resourceId,this.dfId)}destroy(){const t=U();t.setType(null),t.setBusiFlag(null),t.setOuterParams(null),t.setSuffixId(null),t.setToken(null),t.setChartId(null),t.clearState(),this.vm.unmount(),this.type=null,this.token=null,this.busiFlag=null,this.outerParams=null,this.suffixId=null,this.dvId=null,this.pid=null,this.chartId=null,this.resourceId=null,this.dfId=null,this.vm=null}}window.DataEaseBi=nt;

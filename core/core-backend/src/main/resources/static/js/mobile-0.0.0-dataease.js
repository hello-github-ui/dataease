import{a as p,s as u,c as m,d as l}from"../assets/chunk/index-0.0.0-dataease.js";import{d as f,e as d,f as h,g as w,i as _,k as g,l as v}from"../assets/chunk/vue-0.0.0-dataease.js";import{_ as S,u as E,a as k,s as C}from"../assets/chunk/ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{r as c,s as R}from"../assets/chunk/mobile-0.0.0-dataease.js";import{u as A,a as y,s as P}from"../assets/chunk/usePageLoading-0.0.0-dataease.js";import{installDirective as X}from"../assets/chunk/index-0.0.0-dataease2.js";import{getRoleRouters as I}from"../assets/chunk/common-0.0.0-dataease.js";import{i as L}from"../assets/chunk/interactive-0.0.0-dataease.js";import{useAppearanceStoreWithOut as O}from"../assets/chunk/appearance-0.0.0-dataease.js";import"../assets/chunk/lodash-0.0.0-dataease.js";import"../assets/chunk/library-0.0.0-dataease.js";import"../assets/chunk/axios-0.0.0-dataease.js";import"../assets/chunk/echarts-0.0.0-dataease.js";import"../assets/chunk/tinymce-0.0.0-dataease.js";import"../assets/chunk/app-0.0.0-dataease.js";import"../assets/chunk/dataVisualization-0.0.0-dataease.js";import"../assets/chunk/dataset-0.0.0-dataease.js";import"../assets/chunk/datasource-0.0.0-dataease.js";import"../assets/chunk/font-0.0.0-dataease.js";import"../assets/chunk/antv-0.0.0-dataease.js";const W=f({__name:"App",setup(t){let a=0,e=0;return document.addEventListener("touchstart",function(s){a=s.touches[0].pageX}),document.addEventListener("touchend",function(s){e=s.changedTouches[0].pageX;const o=e-a;o>150?window.history.back():o<-150&&window.history.forward()}),(s,r)=>{const o=d("router-view");return h(),w(S,null,{default:_(()=>[g(o)]),_:1})}}}),b=O(),i=E(),{wsCache:D}=p(),n=k(),{start:U,done:B}=A(),N=L(),{loadStart:T,loadDone:V}=y(),$=["/login","/panel","/DashboardEmpty","/preview"];c.beforeEach(async(t,a,e)=>{if(U(),T(),await b.setAppearance(),t.name==="link")e();else if(D.get("user.token"))if(n.getUid||await n.setUser(),t.path==="/login")e({path:"/index"});else{const r=await I()||[];r.forEach(o=>o.top=!0),await i.generateRoutes(r),i.setIsAddRouters(!0),await N.initInteractive(!0),e()}else $.includes(t.path)||t.name==="link"?e():e("/login")});c.afterEach(()=>{B(),V()});const j=async()=>{const t=v(W);X(t),await C(t),u(t),R(t),m(t),P(t),l(t),t.mount("#app")};j();

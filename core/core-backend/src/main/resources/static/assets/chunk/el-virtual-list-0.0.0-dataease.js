import{L as X}from"./lodash-0.0.0-dataease.js";import{G as d,B as Q,d as tt,r as F,Z as et,j as y,w as nt,a as rt,h as B,ab as at}from"./vue-0.0.0-dataease.js";import{J as k,Z as m,i as N,o as g,f as G,ax as ot}from"./index-0.0.0-dataease.js";import{m as st}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";const lt=t=>k?window.requestAnimationFrame(t):setTimeout(t,16),it=t=>k?window.cancelAnimationFrame(t):clearTimeout(t);var P=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function ct(t,e){return!!(t===e||P(t)&&P(e))}function ut(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!ct(t[r],e[r]))return!1;return!0}function dt(t,e){e===void 0&&(e=ut);var r=null;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(r&&r.lastThis===this&&e(a,r.lastArgs))return r.lastResult;var c=t.apply(this,a);return r={lastResult:c,lastArgs:a,lastThis:this},c}return i.clear=function(){r=null},i}const At=()=>{const e=Q().proxy.$props;return d(()=>{const r=(i,a,o)=>({});return e.perfMode?X(r):dt(r)})},Mt=50,_t="itemRendered",zt="scroll",mt="forward",ft="backward",Ct="auto",It="smart",xt="start",Ot="center",Dt="end",T="horizontal",q="vertical",vt="ltr",H="rtl",ht="negative",gt="positive-ascending",St="positive-descending",bt={[T]:"left",[q]:"top"},pt=20,w=m({type:g([Number,Function]),required:!0}),A=m({type:Number}),M=m({type:Number,default:2}),yt=m({type:String,values:["ltr","rtl"],default:"ltr"}),_=m({type:Number,default:0}),E=m({type:Number,required:!0}),V=m({type:String,values:["horizontal","vertical"],default:q}),$=N({className:{type:String,default:""},containerElement:{type:g([String,Object]),default:"div"},data:{type:g(Array),default:()=>st([])},direction:yt,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:g([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Ft=N({cache:M,estimatedItemSize:A,layout:V,initScrollOffset:_,total:E,itemSize:w,...$}),z={type:Number,default:6},Z={type:Number,default:0},j={type:Number,default:2},Bt=N({columnCache:M,columnWidth:w,estimatedColumnWidth:A,estimatedRowHeight:A,initScrollLeft:_,initScrollTop:_,itemKey:{type:g(Function),default:({columnIndex:t,rowIndex:e})=>`${e}:${t}`},rowCache:M,rowHeight:w,totalColumn:E,totalRow:E,hScrollbarSize:z,vScrollbarSize:z,scrollbarStartGap:Z,scrollbarEndGap:j,...$}),Tt=N({alwaysOn:Boolean,class:String,layout:V,total:E,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:z,startGap:Z,endGap:j,visible:Boolean}),Gt=(t,e)=>t<e?mt:ft,Pt=t=>t===vt||t===H||t===T,kt=t=>t===H;let v=null;function qt(t=!1){if(v===null||t){const e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";const i=document.createElement("div"),a=i.style;return a.width="100px",a.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?v=St:(e.scrollLeft=1,e.scrollLeft===0?v=ht:v=gt),document.body.removeChild(e),v}return v}function Et({move:t,size:e,bar:r},i){const a={},o=`translate${r.axis}(${t}px)`;return a[r.size]=e,a.transform=o,a.msTransform=o,a.webkitTransform=o,i==="horizontal"?a.height="100%":a.width="100%",a}const Ht=tt({name:"ElVirtualScrollBar",props:Tt,emits:["scroll","start-move","stop-move"],setup(t,{emit:e}){const r=d(()=>t.startGap+t.endGap),i=G("virtual-scrollbar"),a=G("scrollbar"),o=F(),c=F();let C=null,L=null;const l=et({isDragging:!1,traveled:0}),s=d(()=>ot[t.layout]),I=d(()=>t.clientSize-y(r)),K=d(()=>({position:"absolute",width:`${T===t.layout?I.value:t.scrollbarSize}px`,height:`${T===t.layout?t.scrollbarSize:I.value}px`,[bt[t.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),R=d(()=>{const n=t.ratio,u=t.clientSize;if(n>=100)return Number.POSITIVE_INFINITY;if(n>=50)return n*u/100;const f=u/3;return Math.floor(Math.min(Math.max(n*u,pt),f))}),U=d(()=>{if(!Number.isFinite(R.value))return{display:"none"};const n=`${R.value}px`;return Et({bar:s.value,size:n,move:l.traveled},t.layout)}),h=d(()=>Math.floor(t.clientSize-R.value-y(r))),W=()=>{window.addEventListener("mousemove",b),window.addEventListener("mouseup",S);const n=y(c);n&&(L=document.onselectstart,document.onselectstart=()=>!1,n.addEventListener("touchmove",b),n.addEventListener("touchend",S))},x=()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",S),document.onselectstart=L,L=null;const n=y(c);n&&(n.removeEventListener("touchmove",b),n.removeEventListener("touchend",S))},O=n=>{n.stopImmediatePropagation(),!(n.ctrlKey||[1,2].includes(n.button))&&(l.isDragging=!0,l[s.value.axis]=n.currentTarget[s.value.offset]-(n[s.value.client]-n.currentTarget.getBoundingClientRect()[s.value.direction]),e("start-move"),W())},S=()=>{l.isDragging=!1,l[s.value.axis]=0,e("stop-move"),x()},b=n=>{const{isDragging:u}=l;if(!u||!c.value||!o.value)return;const f=l[s.value.axis];if(!f)return;it(C);const p=(o.value.getBoundingClientRect()[s.value.direction]-n[s.value.client])*-1,J=c.value[s.value.offset]-f,D=p-J;C=lt(()=>{l.traveled=Math.max(t.startGap,Math.min(D,h.value)),e("scroll",D,h.value)})},Y=n=>{const u=Math.abs(n.target.getBoundingClientRect()[s.value.direction]-n[s.value.client]),f=c.value[s.value.offset]/2,p=u-f;l.traveled=Math.max(0,Math.min(p,h.value)),e("scroll",p,h.value)};return nt(()=>t.scrollFrom,n=>{l.isDragging||(l.traveled=Math.ceil(n*h.value))}),rt(()=>{x()}),()=>B("div",{role:"presentation",ref:o,class:[i.b(),t.class,(t.alwaysOn||l.isDragging)&&"always-on"],style:K.value,onMousedown:at(Y,["stop","prevent"]),onTouchstartPrevent:O},B("div",{ref:c,class:a.e("thumb"),style:U.value,onMousedown:O},[]))}});export{Ct as A,ft as B,Ot as C,Mt as D,Dt as E,mt as F,T as H,_t as I,H as R,zt as S,q as V,qt as a,gt as b,it as c,ht as d,Ht as e,St as f,Gt as g,xt as h,kt as i,It as j,Ft as k,Tt as l,Pt as m,lt as r,At as u,Bt as v};

import{E as Ne}from"./el-input-number-0.0.0-dataease.js";import{c as Ee,E as Te}from"./index-0.0.0-dataease3.js";import{i as fe,o as le,x as me,H as Pe,t as Me,a1 as ye,f as ve,w as ze}from"./index-0.0.0-dataease.js";import{a7 as Ve,a8 as te,an as ge,ak as Be,aa as Ie,E as Ye,H as Re,ab as Xe,a6 as Fe}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{H as Ke,r as q,o as Ae,n as se,G as v,s as $e,Q as pe,w as re,d as ae,Z as xe,t as ce,f as T,L as p,k as Ce,i as we,M as Z,a6 as We,j as t,U as W,V as Q,J as he,h as Ue,R as Oe,g as ie,a0 as ne,Y as oe,a9 as ue}from"./vue-0.0.0-dataease.js";import{e as Se}from"./lodash-0.0.0-dataease.js";const Le=Symbol("sliderContextKey"),He=fe({modelValue:{type:le([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Ve,inputSize:Ve,showStops:Boolean,showTooltip:{type:Boolean,default:!0},tooltipTheme:{type:String,default:"dark"},formatTooltip:{type:le(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:le(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ee,default:"top"},marks:{type:le(Object)},validateEvent:{type:Boolean,default:!0}}),de=e=>me(e)||Ke(e)&&e.every(me),je={[te]:de,[ge]:de,[Be]:de},Ge=(e,l,u)=>{const a=q();return Ae(async()=>{e.range?(Array.isArray(e.modelValue)?(l.firstValue=Math.max(e.min,e.modelValue[0]),l.secondValue=Math.min(e.max,e.modelValue[1])):(l.firstValue=e.min,l.secondValue=e.max),l.oldValue=[l.firstValue,l.secondValue]):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?l.firstValue=e.min:l.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),l.oldValue=l.firstValue),Pe(window,"resize",u),await se(),u()}),{sliderWrapper:a}},Je=e=>v(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((u,a)=>u-a).filter(u=>u<=e.max&&u>=e.min).map(u=>({point:u,position:(u-e.min)*100/(e.max-e.min),mark:e.marks[u]})):[]),Qe=(e,l,u)=>{const{form:a,formItem:s}=Ie(),c=$e(),i=q(),y=q(),V={firstButton:i,secondButton:y},d=v(()=>e.disabled||(a==null?void 0:a.disabled)||!1),f=v(()=>Math.min(l.firstValue,l.secondValue)),r=v(()=>Math.max(l.firstValue,l.secondValue)),S=v(()=>e.range?`${100*(r.value-f.value)/(e.max-e.min)}%`:`${100*(l.firstValue-e.min)/(e.max-e.min)}%`),K=v(()=>e.range?`${100*(f.value-e.min)/(e.max-e.min)}%`:"0%"),M=v(()=>e.vertical?{height:e.height}:{}),P=v(()=>e.vertical?{height:S.value,bottom:K.value}:{width:S.value,left:K.value}),B=()=>{c.value&&(l.sliderSize=c.value[`client${e.vertical?"Height":"Width"}`])},z=m=>{const w=e.min+m*(e.max-e.min)/100;if(!e.range)return i;let k;return Math.abs(f.value-w)<Math.abs(r.value-w)?k=l.firstValue<l.secondValue?"firstButton":"secondButton":k=l.firstValue>l.secondValue?"firstButton":"secondButton",V[k]},x=m=>{const w=z(m);return w.value.setPosition(m),w},I=m=>{l.firstValue=m,L(e.range?[f.value,r.value]:m)},C=m=>{l.secondValue=m,e.range&&L([f.value,r.value])},L=m=>{u(te,m),u(ge,m)},g=async()=>{await se(),u(Be,e.range?[f.value,r.value]:e.modelValue)},b=m=>{var w,k,H,j,G,J;if(d.value||l.dragging)return;B();let R=0;if(e.vertical){const A=(H=(k=(w=m.touches)==null?void 0:w.item(0))==null?void 0:k.clientY)!=null?H:m.clientY;R=(c.value.getBoundingClientRect().bottom-A)/l.sliderSize*100}else{const A=(J=(G=(j=m.touches)==null?void 0:j.item(0))==null?void 0:G.clientX)!=null?J:m.clientX,$=c.value.getBoundingClientRect().left;R=(A-$)/l.sliderSize*100}if(!(R<0||R>100))return x(R)};return{elFormItem:s,slider:c,firstButton:i,secondButton:y,sliderDisabled:d,minValue:f,maxValue:r,runwayStyle:M,barStyle:P,resetSize:B,setPosition:x,emitChange:g,onSliderWrapperPrevent:m=>{var w,k;((w=V.firstButton.value)!=null&&w.dragging||(k=V.secondButton.value)!=null&&k.dragging)&&m.preventDefault()},onSliderClick:m=>{b(m)&&g()},onSliderDown:async m=>{const w=b(m);w&&(await se(),w.value.onButtonDown(m))},setFirstValue:I,setSecondValue:C}},{left:Ze,down:qe,right:_e,up:De,home:el,end:ll,pageUp:tl,pageDown:al}=Ye,nl=(e,l,u)=>{const a=q(),s=q(!1),c=v(()=>l.value instanceof Function),i=v(()=>c.value&&l.value(e.modelValue)||e.modelValue),y=Se(()=>{u.value&&(s.value=!0)},50),V=Se(()=>{u.value&&(s.value=!1)},50);return{tooltip:a,tooltipVisible:s,formatValue:i,displayTooltip:y,hideTooltip:V}},ol=(e,l,u)=>{const{disabled:a,min:s,max:c,step:i,showTooltip:y,tooltipTheme:V,precision:d,sliderSize:f,formatTooltip:r,emitChange:S,resetSize:K,updateDragging:M}=pe(Le),{tooltip:P,tooltipVisible:B,formatValue:z,displayTooltip:x,hideTooltip:I}=nl(e,r,y),C=q(),L=v(()=>`${(e.modelValue-s.value)/(c.value-s.value)*100}%`),g=v(()=>e.vertical?{bottom:L.value}:{left:L.value}),b=()=>{l.hovering=!0,x()},O=()=>{l.hovering=!1,l.dragging||I()},_=o=>{a.value||(o.preventDefault(),A(o),window.addEventListener("mousemove",$),window.addEventListener("touchmove",$),window.addEventListener("mouseup",U),window.addEventListener("touchend",U),window.addEventListener("contextmenu",U),C.value.focus())},Y=o=>{a.value||(l.newPosition=Number.parseFloat(L.value)+o/(c.value-s.value)*100,N(l.newPosition),S())},m=()=>{Y(-i.value)},w=()=>{Y(i.value)},k=()=>{Y(-i.value*4)},H=()=>{Y(i.value*4)},j=()=>{a.value||(N(0),S())},G=()=>{a.value||(N(100),S())},J=o=>{let h=!0;[Ze,qe].includes(o.key)?m():[_e,De].includes(o.key)?w():o.key===el?j():o.key===ll?G():o.key===al?k():o.key===tl?H():h=!1,h&&o.preventDefault()},R=o=>{let h,X;return o.type.startsWith("touch")?(X=o.touches[0].clientY,h=o.touches[0].clientX):(X=o.clientY,h=o.clientX),{clientX:h,clientY:X}},A=o=>{l.dragging=!0,l.isClick=!0;const{clientX:h,clientY:X}=R(o);e.vertical?l.startY=X:l.startX=h,l.startPosition=Number.parseFloat(L.value),l.newPosition=l.startPosition},$=o=>{if(l.dragging){l.isClick=!1,x(),K();let h;const{clientX:X,clientY:n}=R(o);e.vertical?(l.currentY=n,h=(l.startY-l.currentY)/f.value*100):(l.currentX=X,h=(l.currentX-l.startX)/f.value*100),l.newPosition=l.startPosition+h,N(l.newPosition)}},U=()=>{l.dragging&&(setTimeout(()=>{l.dragging=!1,l.hovering||I(),l.isClick||N(l.newPosition),S()},0),window.removeEventListener("mousemove",$),window.removeEventListener("touchmove",$),window.removeEventListener("mouseup",U),window.removeEventListener("touchend",U),window.removeEventListener("contextmenu",U))},N=async o=>{if(o===null||Number.isNaN(+o))return;o<0?o=0:o>100&&(o=100);const h=100/((c.value-s.value)/i.value);let n=Math.round(o/h)*h*(c.value-s.value)*.01+s.value;n=Number.parseFloat(n.toFixed(d.value)),n!==e.modelValue&&u(te,n),!l.dragging&&e.modelValue!==l.oldValue&&(l.oldValue=e.modelValue),await se(),l.dragging&&x(),P.value.updatePopper()};return re(()=>l.dragging,o=>{M(o)}),{disabled:a,button:C,tooltip:P,tooltipVisible:B,showTooltip:y,wrapperStyle:g,formatValue:z,handleMouseEnter:b,handleMouseLeave:O,onButtonDown:_,onKeyDown:J,tooltipTheme:V,setPosition:N}},rl=(e,l,u,a)=>({stops:v(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=(e.max-e.min)/e.step,y=100*e.step/(e.max-e.min),V=Array.from({length:i-1}).map((d,f)=>(f+1)*y);return e.range?V.filter(d=>d<100*(u.value-e.min)/(e.max-e.min)||d>100*(a.value-e.min)/(e.max-e.min)):V.filter(d=>d>100*(l.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),sl=(e,l,u,a,s,c)=>{const i=d=>{s(te,d),s(ge,d)},y=()=>e.range?![u.value,a.value].every((d,f)=>d===l.oldValue[f]):e.modelValue!==l.oldValue,V=()=>{var d,f;if(e.min>e.max){Me("Slider","min should not be greater than max.");return}const r=e.modelValue;e.range&&Array.isArray(r)?r[1]<e.min?i([e.min,e.min]):r[0]>e.max?i([e.max,e.max]):r[0]<e.min?i([e.min,r[1]]):r[1]>e.max?i([r[0],e.max]):(l.firstValue=r[0],l.secondValue=r[1],y()&&(e.validateEvent&&((d=c==null?void 0:c.validate)==null||d.call(c,"change").catch(S=>ye())),l.oldValue=r.slice())):!e.range&&typeof r=="number"&&!Number.isNaN(r)&&(r<e.min?i(e.min):r>e.max?i(e.max):(l.firstValue=r,y()&&(e.validateEvent&&((f=c==null?void 0:c.validate)==null||f.call(c,"change").catch(S=>ye())),l.oldValue=r)))};V(),re(()=>l.dragging,d=>{d||V()}),re(()=>e.modelValue,(d,f)=>{l.dragging||Array.isArray(d)&&Array.isArray(f)&&d.every((r,S)=>r===f[S])&&l.firstValue===d[0]&&l.secondValue===d[1]||V()},{deep:!0}),re(()=>[e.min,e.max],()=>{V()})},il=fe({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ee,default:"top"}}),ul={[te]:e=>me(e)},dl=["tabindex"],ml=ae({name:"ElSliderButton"}),ke=ae({...ml,props:il,emits:ul,setup(e,{expose:l,emit:u}){const a=e,s=ve("slider"),c=xe({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),{disabled:i,button:y,tooltip:V,showTooltip:d,tooltipTheme:f,tooltipVisible:r,wrapperStyle:S,formatValue:K,handleMouseEnter:M,handleMouseLeave:P,onButtonDown:B,onKeyDown:z,setPosition:x}=ol(a,c,u),{hovering:I,dragging:C}=ce(c);return l({onButtonDown:B,onKeyDown:z,setPosition:x,hovering:I,dragging:C}),(L,g)=>(T(),p("div",{ref_key:"button",ref:y,class:W([t(s).e("button-wrapper"),{hover:t(I),dragging:t(C)}]),style:Q(t(S)),tabindex:t(i)?-1:0,onMouseenter:g[0]||(g[0]=(...b)=>t(M)&&t(M)(...b)),onMouseleave:g[1]||(g[1]=(...b)=>t(P)&&t(P)(...b)),onMousedown:g[2]||(g[2]=(...b)=>t(B)&&t(B)(...b)),onTouchstart:g[3]||(g[3]=(...b)=>t(B)&&t(B)(...b)),onFocus:g[4]||(g[4]=(...b)=>t(M)&&t(M)(...b)),onBlur:g[5]||(g[5]=(...b)=>t(P)&&t(P)(...b)),onKeydown:g[6]||(g[6]=(...b)=>t(z)&&t(z)(...b))},[Ce(t(Te),{ref_key:"tooltip",ref:V,visible:t(r),placement:L.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":L.tooltipClass,effect:t(f),disabled:!t(d),persistent:""},{content:we(()=>[Z("span",null,We(t(K)),1)]),default:we(()=>[Z("div",{class:W([t(s).e("button"),{hover:t(I),dragging:t(C)}])},null,2)]),_:1},8,["visible","placement","popper-class","effect","disabled"])],46,dl))}}),cl=fe({mark:{type:le([String,Object]),default:void 0}});var fl=ae({name:"ElSliderMarker",props:cl,setup(e){const l=ve("slider"),u=v(()=>he(e.mark)?e.mark:e.mark.label),a=v(()=>he(e.mark)?void 0:e.mark.style);return()=>Ue("div",{class:l.e("marks-text"),style:a.value},u.value)}});const vl=["id","role","aria-label","aria-labelledby"],gl={key:1},bl=ae({name:"ElSlider"}),yl=ae({...bl,props:He,emits:je,setup(e,{expose:l,emit:u}){const a=e,s=ve("slider"),{t:c}=Re(),i=xe({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:y,slider:V,firstButton:d,secondButton:f,sliderDisabled:r,minValue:S,maxValue:K,runwayStyle:M,barStyle:P,resetSize:B,emitChange:z,onSliderWrapperPrevent:x,onSliderClick:I,onSliderDown:C,setFirstValue:L,setSecondValue:g}=Qe(a,i,u),{stops:b,getStopStyle:O}=rl(a,i,S,K),{inputId:_,isLabeledByFormItem:Y}=Xe(a,{formItemContext:y}),m=Fe(),w=v(()=>a.inputSize||m.value),k=v(()=>a.label||c("el.slider.defaultLabel",{min:a.min,max:a.max})),H=v(()=>a.range?a.rangeStartLabel||c("el.slider.defaultRangeStartLabel"):k.value),j=v(()=>a.formatValueText?a.formatValueText(N.value):`${N.value}`),G=v(()=>a.rangeEndLabel||c("el.slider.defaultRangeEndLabel")),J=v(()=>a.formatValueText?a.formatValueText(o.value):`${o.value}`),R=v(()=>[s.b(),s.m(m.value),s.is("vertical",a.vertical),{[s.m("with-input")]:a.showInput}]),A=Je(a);sl(a,i,S,K,u,y);const $=v(()=>{const n=[a.min,a.max,a.step].map(F=>{const D=`${F}`.split(".")[1];return D?D.length:0});return Math.max.apply(null,n)}),{sliderWrapper:U}=Ge(a,i,B),{firstValue:N,secondValue:o,sliderSize:h}=ce(i),X=n=>{i.dragging=n};return Oe(Le,{...ce(a),sliderSize:h,disabled:r,precision:$,emitChange:z,resetSize:B,updateDragging:X}),l({onSliderClick:I}),(n,F)=>{var D,be;return T(),p("div",{id:n.range?t(_):void 0,ref_key:"sliderWrapper",ref:U,class:W(t(R)),role:n.range?"group":void 0,"aria-label":n.range&&!t(Y)?t(k):void 0,"aria-labelledby":n.range&&t(Y)?(D=t(y))==null?void 0:D.labelId:void 0,onTouchstart:F[2]||(F[2]=(...E)=>t(x)&&t(x)(...E)),onTouchmove:F[3]||(F[3]=(...E)=>t(x)&&t(x)(...E))},[Z("div",{ref_key:"slider",ref:V,class:W([t(s).e("runway"),{"show-input":n.showInput&&!n.range},t(s).is("disabled",t(r))]),style:Q(t(M)),onMousedown:F[0]||(F[0]=(...E)=>t(C)&&t(C)(...E)),onTouchstart:F[1]||(F[1]=(...E)=>t(C)&&t(C)(...E))},[Z("div",{class:W(t(s).e("bar")),style:Q(t(P))},null,6),Ce(ke,{id:n.range?void 0:t(_),ref_key:"firstButton",ref:d,"model-value":t(N),vertical:n.vertical,"tooltip-class":n.tooltipClass,placement:n.placement,role:"slider","aria-label":n.range||!t(Y)?t(H):void 0,"aria-labelledby":!n.range&&t(Y)?(be=t(y))==null?void 0:be.labelId:void 0,"aria-valuemin":n.min,"aria-valuemax":n.range?t(o):n.max,"aria-valuenow":t(N),"aria-valuetext":t(j),"aria-orientation":n.vertical?"vertical":"horizontal","aria-disabled":t(r),"onUpdate:modelValue":t(L)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),n.range?(T(),ie(ke,{key:0,ref_key:"secondButton",ref:f,"model-value":t(o),vertical:n.vertical,"tooltip-class":n.tooltipClass,placement:n.placement,role:"slider","aria-label":t(G),"aria-valuemin":t(N),"aria-valuemax":n.max,"aria-valuenow":t(o),"aria-valuetext":t(J),"aria-orientation":n.vertical?"vertical":"horizontal","aria-disabled":t(r),"onUpdate:modelValue":t(g)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):ne("v-if",!0),n.showStops?(T(),p("div",gl,[(T(!0),p(oe,null,ue(t(b),(E,ee)=>(T(),p("div",{key:ee,class:W(t(s).e("stop")),style:Q(t(O)(E))},null,6))),128))])):ne("v-if",!0),t(A).length>0?(T(),p(oe,{key:2},[Z("div",null,[(T(!0),p(oe,null,ue(t(A),(E,ee)=>(T(),p("div",{key:ee,style:Q(t(O)(E.position)),class:W([t(s).e("stop"),t(s).e("marks-stop")])},null,6))),128))]),Z("div",{class:W(t(s).e("marks"))},[(T(!0),p(oe,null,ue(t(A),(E,ee)=>(T(),ie(t(fl),{key:ee,mark:E.mark,style:Q(t(O)(E.position))},null,8,["mark","style"]))),128))],2)],64)):ne("v-if",!0)],38),n.showInput&&!n.range?(T(),ie(t(Ne),{key:0,ref:"input","model-value":t(N),class:W(t(s).e("input")),step:n.step,disabled:t(r),controls:n.showInputControls,min:n.min,max:n.max,debounce:n.debounce,size:t(w),"onUpdate:modelValue":t(L),onChange:t(z)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):ne("v-if",!0)],42,vl)}}}),Bl=ze(yl);export{Bl as E};

import{i as F}from"./interactive-0.0.0-dataease.js";import{j as N,n as W}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{s as g}from"./ShortcutOption-0.0.0-dataease.js";import{b as q}from"./vue-router-0.0.0-dataease.js";import{a as E}from"./index-0.0.0-dataease.js";import M from"./Workbranch-0.0.0-dataease.js";import{n as P}from"./none-0.0.0-dataease.js";import{d as V,f as z,g as A,e as O}from"./vant-0.0.0-dataease.js";import{d as j,r as d,l as H,k as R,b as U,o,c as l,a0 as u,_ as y,u as r,a as f,M as k,ab as L,a2 as Y,Y as Z,Z as D}from"./@vue-0.0.0-dataease.js";import{_ as G}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./datasource-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./element-plus-secondary-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./escape-html-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./icon_dashboard-0.0.0-dataease.js";import"./@vant-0.0.0-dataease.js";const J={class:"mobile-panel-list"},K={class:"workbranch-cell-group"},Q={key:0,class:"empty-img-mobile"},X=["src"],tt={class:"empty-tips"},et=j({__name:"index",emits:["setLoading"],setup(at,{emit:T}){const C=q(),{t:_}=N(),{wsCache:m}=E("sessionStorage"),i=d("recent"),p=d(""),n=H({tableData:[],curTypeList:[]}),x=F(),s=T,w=()=>{s("setLoading",!0),g.loadData({type:"panel",keyword:"",asc:!1}).then(a=>{n.tableData=(a.data||[]).filter(t=>t.extFlag===1)}).finally(()=>{s("setLoading",!1),b()})},b=()=>{p.value=n.tableData.length?"":`暂无${{recent:"数据",store:"收藏",share:"分享"}[i.value]}`},B=()=>{s("setLoading",!0),W.post({url:"/share/query",data:{type:"panel",keyword:"",asc:!1}}).then(a=>{n.tableData=(a.data||[]).filter(t=>t.extFlag===1)}).finally(()=>{s("setLoading",!1),b()})},c=d([{title:_("work_branch.recent"),name:"recent",disabled:!1},{title:"我的收藏",name:"store",disabled:!1},{title:_("visualization.share_out"),name:"share",disabled:!1}]),h=R(()=>x.getData),S=(()=>{const a=["panel","screen","dataset","datasource"],t=[];for(const e in h.value)h.value[e].menuAuth&&t.push(a[parseInt(e)]);return c.value[0].disabled=!(t!=null&&t.length),c.value[1].disabled=!t.includes("panel")&&!t.includes("screen"),t})(),v=({name:a,disabled:t})=>{t||(a==="recent"||a==="store"?(s("setLoading",!0),g.setBusiFlag(a),w()):B())};U(()=>{i.value=m.get("activeTab")||"recent",m.set("activeTab",""),S.length&&v({name:i.value,disabled:!1})});const I=a=>{m.set("activeTab",i.value),C.push({path:"/panel/mobile",query:{dvId:a.resourceId}})},$=a=>new Date(a).toLocaleString();return(a,t)=>(o(),l("div",J,[u(r(O),null,{default:y(()=>[u(r(V),{"safe-area-inset-top":"",title:"工作台"}),u(r(z),{onClickTab:v,active:i.value,"onUpdate:active":t[0]||(t[0]=e=>i.value=e)},{default:y(()=>[(o(!0),l(k,null,L(c.value,e=>(o(),D(r(A),{key:e.name,disabled:e.disabled,name:e.name,title:e.title},null,8,["disabled","name","title"]))),128))]),_:1},8,["active"])]),_:1}),f("div",K,[(o(!0),l(k,null,L(n.tableData,e=>(o(),D(M,{onClick:ot=>I(e),key:e.id,size:"large",label:e.name,time:$(e.lastEditTime||e.time)},null,8,["onClick","label","time"]))),128))]),p.value?(o(),l("div",Q,[f("img",{width:"125",height:"125",src:r(P),alt:""},null,8,X),f("div",tt,Y(p.value),1)])):Z("",!0)]))}});const be=G(et,[["__scopeId","data-v-74610164"]]);export{be as default};

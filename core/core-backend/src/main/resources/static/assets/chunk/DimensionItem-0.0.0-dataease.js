import{o as oe,n as Q,j as ce}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import{a as de,b as le,E as ie}from"./el-dropdown-menu-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-dropdown-item-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import{d as me,r as R,t as ue,G as H,w as re,o as _e,f as c,L as q,k as n,i as t,U as f,g as i,M as s,a5 as v,a6 as m,j as e,a0 as r,ab as N,V as pe,m as W}from"./vue-0.0.0-dataease.js";import{i as O,a as fe,b as ye}from"./icon_sort_outlined-0.0.0-dataease.js";import{i as Z}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as he}from"./icon_down_outlined-1-0.0.0-dataease.js";import{i as P}from"./icon_right_outlined-0.0.0-dataease.js";import{i as g}from"./icon_done_outlined-0.0.0-dataease.js";import{i as ve}from"./icon_edit_outlined-0.0.0-dataease.js";import{i as ge}from"./icon_visible_outlined-0.0.0-dataease.js";import{i as G}from"./icon_invisible_outlined-0.0.0-dataease.js";import{g as be}from"./utils-0.0.0-dataease.js";import{f as x}from"./attr-0.0.0-dataease20.js";import{i as L}from"./field-list-0.0.0-dataease.js";import{E as ke}from"./index-0.0.0-dataease3.js";import{E as xe}from"./index-0.0.0-dataease16.js";import{_ as Se}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./dropdown-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";const we={class:"item-style"},Te={key:0,style:{display:"flex",color:"#646a73"}},Ce={key:1,style:{display:"flex",color:"#646a73"}},De={class:"item-name"},Ie={class:"inner-dropdown-menu menu-item-padding"},Me={class:"menu-item-content"},Ee={class:"summary-span-item"},He={class:"inner-dropdown-menu menu-item-padding"},qe={class:"menu-item-content"},Ne={class:"summary-span-item"},Pe={class:"inner-dropdown-menu menu-item-padding"},$e={class:"menu-item-content"},Ve={class:"summary-span-item"},je=me({__name:"DimensionItem",props:{param:{type:Object,required:!1},item:{type:Object,required:!0},index:{type:Number,required:!0},chart:{type:Object,required:!0},dimensionData:{type:Array,required:!0},quotaData:{type:Array,required:!0},themes:{type:String,default:"dark"},type:{type:String,required:!0}},emits:["onDimensionItemRemove","onCustomSort","onDimensionItemChange","onNameEdit","valueFormatter","onToggleHide","editSortPriority"],setup(d,{emit:U}){const{t:u}=oe(),M=R("success"),$=R(!1),l=d,b=U,{item:a}=ue(l),V=H(()=>l.themes==="dark"?"ndark":"dark"),j=H(()=>(l.chart.type==="table-normal"||l.chart.type==="table-info")&&(l.item.deType===2||l.item.deType===3));re([()=>l.dimensionData,()=>l.item,()=>l.chart.type],()=>{A()},{deep:!0});const J=p=>{if(p)switch(p.type){case"rename":ee();break;case"remove":z();break;case"filter":break;case"formatter":te();break;case"toggleHide":ae();break;case"sortPriority":b("editSortPriority");break}},w=p=>({type:p}),K=p=>{if(p.type==="custom_sort"){const h={index:l.index,sort:p.type};b("onCustomSort",h)}else a.value.index=l.index,a.value.sort=p.type,a.value.customSort=[],delete a.value.axisType,b("onDimensionItemChange",a.value)},T=p=>({type:p}),X=p=>{a.value.dateStyle=p.type,a.value.axisType=l.type,b("onDimensionItemChange",a.value)},k=p=>({type:p}),Y=p=>{a.value.datePattern=p.type,a.value.axisType=l.type,b("onDimensionItemChange",a.value)},F=p=>({type:p}),ee=()=>{a.value.index=l.index,a.value.renameType=l.type,b("onNameEdit",a.value)},z=()=>{a.value.index=l.index,a.value.removeType=l.type,b("onDimensionItemRemove",a.value)},A=()=>{M.value=be(l.dimensionData,l.quotaData,l.item)},te=()=>{a.value.index=l.index,a.value.formatterType=l.type,b("valueFormatter",a.value)},ne=p=>l.chart.type==="symbolic-map"||l.chart.type==="flow-map"?!1:!p.chartId&&(p.deType===0||p.deType===5),S=()=>{const{type:p}=l.chart,{type:h}=l;if(["word-cloud","stock-line"].includes(p)||h==="extColor")return!1;const o=p.includes("chart-mix"),C=["dimension","dimensionStack","dimensionExt"].includes(h);return!o||C},ae=()=>{a.value.index=l.index,a.value.hide=!a.value.hide,a.value.axisType=l.type,b("onToggleHide",a.value)},B=H(()=>["table-info","table-normal"].includes(l.chart.type)&&a.value.hide);return _e(()=>{A()}),(p,h)=>{const _=Q,o=ce,C=ke,se=xe,y=de,D=le,I=ie,E=Q;return c(),q("span",we,[n(I,{effect:d.themes,trigger:"click",onCommand:J},{dropdown:t(()=>[n(D,{effect:d.themes,class:f(["drop-style",d.themes==="dark"?"dark-dimension-quota":""])},{default:t(()=>[S()?(c(),i(y,{key:0,onClick:h[0]||(h[0]=N(()=>{},["prevent"]))},{default:t(()=>[n(I,{effect:d.themes,"popper-class":"data-dropdown_popper_mr9",placement:"right-start",style:{width:"100%",height:"100%"},onCommand:K},{dropdown:t(()=>[n(D,{effect:d.themes,class:f(["drop-style sub",d.themes==="dark"?"dark-dimension-quota":""])},{default:t(()=>[n(y,{class:"menu-item-padding",command:T("none")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).sort==="none"?"content-active":""])},[v(m(e(u)("chart.none"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).sort==="none"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),n(y,{class:"menu-item-padding",command:T("asc")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).sort==="asc"?"content-active":""])},[v(m(e(u)("chart.asc"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).sort==="asc"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),n(y,{class:"menu-item-padding",command:T("desc")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).sort==="desc"?"content-active":""])},[v(m(e(u)("chart.desc"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).sort==="desc"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),ne(e(a))?(c(),i(y,{key:0,class:"menu-item-padding",command:T("custom_sort")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).sort==="custom_sort"?"content-active":""])},[v(m(e(u)("chart.custom_sort"))+m(e(u)("chart.sort"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).sort==="custom_sort"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])):r("",!0)]),_:1},8,["effect","class"])]),default:t(()=>[s("span",Ie,[s("span",Me,[n(o,null,{default:t(()=>[n(_,{name:"icon_sort_outlined"},{default:t(()=>[n(e(O),{class:"svg-icon"})]),_:1})]),_:1}),s("span",null,m(e(u)("chart.sort")),1),s("span",Ee,"("+m(e(u)("chart."+l.item.sort))+")",1)]),n(o,null,{default:t(()=>[n(_,{name:"icon_right_outlined"},{default:t(()=>[n(e(P),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["effect"])]),_:1})):r("",!0),e(a).deType===1?(c(),i(y,{key:1,onClick:h[1]||(h[1]=N(()=>{},["prevent"])),divided:!d.chart.type.includes("chart-mix")||d.chart.type.includes("chart-mix")&&(d.type==="dimension"||d.type==="dimensionStack"||d.type==="dimensionExt")},{default:t(()=>[n(I,{effect:d.themes,placement:"right-start","popper-class":"data-dropdown_popper_mr9",style:{width:"100%",height:"100%"},onCommand:X},{dropdown:t(()=>[n(D,{effect:d.themes,class:f(["drop-style sub",d.themes==="dark"?"dark-dimension-quota":""])},{default:t(()=>[n(y,{class:"menu-item-padding",command:k("y")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y"?"content-active":""])},[v(m(e(u)("chart.y"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),$.value?(c(),i(y,{key:0,class:"menu-item-padding",command:k("y_Q")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_Q"?"content-active":""])},[v(m(e(u)("chart.y_Q"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_Q"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])):r("",!0),n(y,{class:"menu-item-padding",command:k("y_M")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_M"?"content-active":""])},[v(m(e(u)("chart.y_M"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_M"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),$.value?(c(),i(y,{key:1,class:"menu-item-padding",command:k("y_W")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_W"?"content-active":""])},[v(m(e(u)("chart.y_W"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_W"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])):r("",!0),n(y,{class:"menu-item-padding",command:k("y_M_d")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_M_d"?"content-active":""])},[v(m(e(u)("chart.y_M_d"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_M_d"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),d.chart.type.includes("bar-range")&&["quota","quotaExt"].includes(d.type)?r("",!0):(c(),i(y,{key:2,class:"menu-item-padding",command:k("H_m_s"),divided:""},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="H_m_s"?"content-active":""])},[v(m(e(u)("chart.H_m_s"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="H_m_s"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])),n(y,{class:"menu-item-padding",command:k("y_M_d_H_m"),divided:d.chart.type.includes("bar-range")&&["quota","quotaExt"].includes(d.type)},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_M_d_H_m"?"content-active":""])},[v(m(e(u)("chart.y_M_d_H_m"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_M_d_H_m"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command","divided"]),n(y,{class:"menu-item-padding",command:k("y_M_d_H_m_s")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).dateStyle==="y_M_d_H_m_s"?"content-active":""])},[v(m(e(u)("chart.y_M_d_H_m_s"))+" ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).dateStyle==="y_M_d_H_m_s"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])]),_:1},8,["effect","class"])]),default:t(()=>[s("span",He,[s("span",qe,[n(o),s("span",null,m(e(u)("chart.dateStyle")),1),s("span",Ne,"("+m(e(u)("chart."+e(a).dateStyle))+")",1)]),n(o,null,{default:t(()=>[n(_,{name:"icon_right_outlined"},{default:t(()=>[n(e(P),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["effect"])]),_:1},8,["divided"])):r("",!0),e(a).deType===1?(c(),i(y,{key:2,onClick:h[2]||(h[2]=N(()=>{},["prevent"]))},{default:t(()=>[n(I,{effect:d.themes,placement:"right-start","popper-class":"data-dropdown_popper_mr9",style:{width:"100%",height:"100%"},onCommand:Y},{dropdown:t(()=>[n(D,{effect:d.themes,class:f(["drop-style sub",d.themes==="dark"?"dark-dimension-quota":""])},{default:t(()=>[n(y,{class:"menu-item-padding",command:F("date_sub")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).datePattern==="date_sub"?"content-active":""])},[v(m(e(u)("chart.date_sub"))+"(1990-01-01) ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).datePattern==="date_sub"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"]),n(y,{class:"menu-item-padding",command:F("date_split")},{default:t(()=>[s("span",{class:f(["sub-menu-content",e(a).datePattern==="date_split"?"content-active":""])},[v(m(e(u)("chart.date_split"))+"(1990/01/01) ",1),n(o,{class:"sub-menu-content--icon"},{default:t(()=>[e(a).datePattern==="date_split"?(c(),i(_,{key:0,name:"icon_done_outlined"},{default:t(()=>[n(e(g),{class:"svg-icon"})]),_:1})):r("",!0)]),_:1})],2)]),_:1},8,["command"])]),_:1},8,["effect","class"])]),default:t(()=>[s("span",Pe,[s("span",$e,[n(o),s("span",null,m(e(u)("chart.datePattern")),1),s("span",Ve,"("+m(e(u)("chart."+e(a).datePattern))+")",1)]),n(o,null,{default:t(()=>[n(_,{name:"icon_right_outlined"},{default:t(()=>[n(e(P),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["effect"])]),_:1})):r("",!0),n(y,{class:"menu-item-padding",divided:!d.chart.type.includes("chart-mix")||d.chart.type.includes("chart-mix")&&(d.type==="dimension"||d.type==="dimensionStack"||d.type==="dimensionExt"),command:w("rename")},{default:t(()=>[n(o,null,{default:t(()=>[n(E,{name:"icon_edit_outlined"},{default:t(()=>[n(e(ve),{class:"svg-icon"})]),_:1})]),_:1}),s("span",null,m(e(u)("chart.show_name_set")),1)]),_:1},8,["divided","command"]),["table-normal","table-info"].includes(d.chart.type)?(c(),i(y,{key:3,class:"menu-item-padding",command:w("toggleHide")},{default:t(()=>[n(o,null,{default:t(()=>[n(E,null,{default:t(()=>[e(a).hide===!0?(c(),i(e(ge),{key:0,class:"svg-icon"})):(c(),i(e(G),{key:1,class:"svg-icon"}))]),_:1})]),_:1}),s("span",null,m(e(a).hide===!0?e(u)("chart.show"):e(u)("chart.hide")),1)]),_:1},8,["command"])):r("",!0),j.value?(c(),i(y,{key:4,class:"menu-item-padding",divided:!j.value,command:w("formatter")},{default:t(()=>[n(o),s("span",null,m(e(u)("chart.value_formatter"))+"...",1)]),_:1},8,["divided","command"])):r("",!0),n(y,{class:"menu-item-padding",divided:"",command:w("remove")},{default:t(()=>[n(o,null,{default:t(()=>[n(E,{name:"icon_delete-trash_outlined"},{default:t(()=>[n(e(Z),{class:"svg-icon"})]),_:1})]),_:1}),s("span",null,m(e(u)("chart.delete")),1)]),_:1},8,["command"])]),_:1},8,["effect","class"])]),default:t(()=>[n(se,{class:f(["item-axis father",["editor-"+l.themes,`${d.themes}_icon-right`]]),style:pe({backgroundColor:M.value+"0a",border:"1px solid "+M.value})},{default:t(()=>[d.type!=="extColor"?(c(),q("span",Te,[e(a).sort==="asc"&&S()?(c(),i(o,{key:0},{default:t(()=>[n(_,{name:"icon_sort-a-to-z_outlined"},{default:t(()=>[n(e(fe),{class:"svg-icon"})]),_:1})]),_:1})):r("",!0),e(a).sort==="desc"&&S()?(c(),i(o,{key:1},{default:t(()=>[n(_,{name:"icon_sort-z-to-a_outlined"},{default:t(()=>[n(e(ye),{class:"svg-icon"})]),_:1})]),_:1})):r("",!0),e(a).sort==="custom_sort"&&S()?(c(),i(o,{key:2},{default:t(()=>[n(_,{name:"icon_sort_outlined"},{default:t(()=>[n(e(O),{class:"svg-icon"})]),_:1})]),_:1})):r("",!0),n(o,null,{default:t(()=>[n(_,{className:`field-icon-${e(x)[[2,3].includes(e(a).deType)?2:0]}`},{default:t(()=>[(c(),i(W(e(L)[e(x)[e(a).deType]]),{class:f(["svg-icon",`field-icon-${e(x)[[2,3].includes(e(a).deType)?2:0]}`])},null,8,["class"]))]),_:1},8,["className"])]),_:1})])):r("",!0),d.type==="extColor"?(c(),q("span",Ce,[n(o,null,{default:t(()=>[n(_,{className:`field-icon-${e(x)[[2,3].includes(e(a).deType)?2:0]}`,name:`field_${e(x)[e(a).deType]}`},{default:t(()=>[(c(),i(W(e(L)[e(x)[e(a).deType]]),{class:f(["svg-icon",`field-icon-${e(x)[[2,3].includes(e(a).deType)?2:0]}`])},null,8,["class"]))]),_:1},8,["className","name"])]),_:1})])):r("",!0),n(C,{effect:V.value,placement:"top"},{content:t(()=>[s("table",null,[s("tbody",null,[s("tr",null,[s("td",null,m(e(u)("dataset.field_origin_name")),1),h[3]||(h[3]=s("td",null,":",-1)),s("td",null,m(e(a).name),1)]),s("tr",null,[s("td",null,m(e(u)("chart.show_name")),1),h[4]||(h[4]=s("td",null,":",-1)),s("td",null,m(e(a).chartShowName?e(a).chartShowName:e(a).name),1)])])])]),default:t(()=>[s("span",{class:f(["item-span-style",{"hidden-status":B.value,"sort-status":S()&&e(a).sort!=="none"}])},[s("span",De,m(e(a).chartShowName?e(a).chartShowName:e(a).name),1)],2)]),_:1},8,["effect"]),B.value?(c(),i(o,{key:2,style:{"margin-left":"4px"}},{default:t(()=>[n(_,null,{default:t(()=>[n(e(G),{class:"svg-icon inner-class"})]),_:1})]),_:1})):r("",!0),n(C,{effect:V.value,placement:"top"},{content:t(()=>[s("span",null,m(e(u)("chart.delete")),1)]),default:t(()=>[n(o,{class:"child remove-icon"},{default:t(()=>[n(_,null,{default:t(()=>[n(e(Z),{onClick:z,class:"svg-icon inner-class"})]),_:1})]),_:1})]),_:1},8,["effect"]),n(o,{class:"child",style:{position:"absolute",top:"7px",right:"10px",cursor:"pointer"}},{default:t(()=>[n(_,{name:"icon_down_outlined-1"},{default:t(()=>[n(e(he),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["class","style"])]),_:1},8,["effect"])])}}});const _t=Se(je,[["__scopeId","data-v-444ee0b4"]]);export{_t as default};

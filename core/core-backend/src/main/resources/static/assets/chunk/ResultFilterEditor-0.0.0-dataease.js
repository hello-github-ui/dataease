import{O as W,P as X,x as Y,y as Z,a5 as A,r as H,d as Q,h as ee,B as le}from"./element-plus-secondary-0.0.0-dataease.js";import{j as te,h as oe}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as ae,t as ie,r as ne,l as re,w as se,o as p,c as d,a0 as a,_ as r,u as t,a as u,a2 as m,a4 as b,Y as g,W as x,X as T,M as f,ab as h,Z as k,a3 as pe,a1 as S}from"./@vue-0.0.0-dataease.js";import{i as ue}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as de}from"./icon_add_outlined-0.0.0-dataease.js";import{G as me}from"./dataset-0.0.0-dataease.js";import{_ as ce}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./escape-html-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./vue-router-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";const _e={key:0},fe={key:1},he={style:{display:"flex",padding:"10px 0","align-items":"center"}},ve={style:{"max-height":"50vh","overflow-y":"auto"},class:"addition-style"},ye={class:"name-title"},be={style:{width:"164px","margin-right":"8px"}},ge={style:{flex:"1"}},xe={key:2},Te={style:{"margin-right":"10px"}},ke=ae({__name:"ResultFilterEditor",props:{chart:{type:Object,required:!0},item:{type:Object,required:!0}},setup(I){const{t:l}=te(),O=I,{item:e}=ie(O),V=ne(!0),o=re({textOptions:[{label:"",options:[{value:"eq",label:l("chart.filter_eq")},{value:"not_eq",label:l("chart.filter_not_eq")}]},{label:"",options:[{value:"like",label:l("chart.filter_like")},{value:"not like",label:l("chart.filter_not_like")}]},{label:"",options:[{value:"null",label:l("chart.filter_null")},{value:"not_null",label:l("chart.filter_not_null")}]},{label:"",options:[{value:"empty",label:l("chart.filter_empty")},{value:"not_empty",label:l("chart.filter_not_empty")}]}],dateOptions:[{label:"",options:[{value:"eq",label:l("chart.filter_eq")},{value:"not_eq",label:l("chart.filter_not_eq")}]},{label:"",options:[{value:"lt",label:l("chart.filter_lt")},{value:"gt",label:l("chart.filter_gt")}]},{label:"",options:[{value:"le",label:l("chart.filter_le")},{value:"ge",label:l("chart.filter_ge")}]},{label:"",options:[{value:"not_null",label:l("chart.filter_not_null")}]}],valueOptions:[{label:"",options:[{value:"eq",label:l("chart.filter_eq")},{value:"not_eq",label:l("chart.filter_not_eq")}]},{label:"",options:[{value:"lt",label:l("chart.filter_lt")},{value:"gt",label:l("chart.filter_gt")}]},{label:"",options:[{value:"le",label:l("chart.filter_le")},{value:"ge",label:l("chart.filter_ge")}]},{label:"",options:[{value:"not_null",label:l("chart.filter_not_null")}]}],options:[],logic:"",filterType:"",enumCheckField:[],fieldOptions:[]});se([O.item],()=>{C()},{deep:!0});const C=()=>{e!=null&&e.value&&(e.value.deType===0||e.value.deType===5?o.options=JSON.parse(JSON.stringify(o.textOptions)):e.value.deType===1?o.options=JSON.parse(JSON.stringify(o.dateOptions)):o.options=JSON.parse(JSON.stringify(o.valueOptions)))},R=()=>{o.logic=e.value.logic,o.filterType=e.value.filterType,o.enumCheckField=e.value.enumCheckField,e.value.filterType==="enum"&&q()},q=()=>{(e.value.deType===0||e.value.deType===5)&&me({fieldIds:[e.value.id]}).then(s=>{o.fieldOptions=U(s.data),V.value=!1})},U=s=>s?s.filter(n=>!!n).map(n=>({id:n,text:n})):null,B=()=>{e.value.filter.push({fieldId:e.value.id,term:"eq",value:""})},J=s=>{e.value.filter.splice(s,1)},z=s=>{e.value.logic=s},j=s=>{e.value.filterType=s,s==="enum"&&V.value&&q()},D=()=>{e.value.enumCheckField=o.enumCheckField};return C(),R(),(s,n)=>{const w=W,G=X,_=Y,v=Z,K=A,M=H,E=oe,P=Q,F=ee,$=le;return p(),d("div",{onKeydown:n[3]||(n[3]=S(()=>{},["stop"])),onKeyup:n[4]||(n[4]=S(()=>{},["stop"]))},[a($,null,{default:r(()=>[t(e).deType===0||t(e).deType===5?(p(),d("div",_e,[u("div",null,m(t(l)("chart.slc_logic"))+":",1),a(G,{modelValue:o.filterType,"onUpdate:modelValue":n[0]||(n[0]=i=>o.filterType=i),size:"small",style:{margin:"6px 0 10px 0"},onChange:j},{default:r(()=>[a(w,{style:{"min-width":"80px"},label:"logic"},{default:r(()=>[b(m(t(l)("chart.logic_exp")),1)]),_:1}),a(w,{style:{"min-width":"80px"},label:"enum"},{default:r(()=>[b(m(t(l)("chart.enum_exp")),1)]),_:1})]),_:1},8,["modelValue"])])):g("",!0),(t(e).deType===0||t(e).deType===5)&&o.filterType==="logic"||t(e).deType===1||t(e).deType===2||t(e).deType===3?(p(),d("div",fe,[x(u("div",he,[u("span",null,m(t(l)("chart.conform_below")),1),a(v,{modelValue:o.logic,"onUpdate:modelValue":n[1]||(n[1]=i=>o.logic=i),onChange:z,size:"small",style:{width:"60px",margin:"0 6px"}},{default:r(()=>[a(_,{style:{"min-width":"80px"},label:t(l)("chart.logic_and"),value:"and"},null,8,["label"]),a(_,{style:{"min-width":"80px"},label:t(l)("chart.logic_or"),value:"or"},null,8,["label"])]),_:1},8,["modelValue"]),u("span",null,m(t(l)("chart.addition")),1)],512),[[T,t(e).filter&&t(e).filter.length>0]]),x(u("div",ve,[u("div",ye,[u("span",null,m(t(e).name),1)]),(p(!0),d(f,null,h(t(e).filter,(i,N)=>(p(),d("div",{key:N,class:"filter-item"},[u("div",be,[a(v,{modelValue:i.term,"onUpdate:modelValue":c=>i.term=c},{default:r(()=>[(p(!0),d(f,null,h(o.options,(c,L)=>(p(),k(K,{key:L,label:c.label},{default:r(()=>[(p(!0),d(f,null,h(c.options,y=>(p(),k(_,{key:y.value,label:y.label,value:y.value},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),u("div",ge,[x(a(M,{modelValue:i.value,"onUpdate:modelValue":c=>i.value=c,class:"value-item",placeholder:t(l)("chart.condition"),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"]),[[T,!i.term.includes("null")&&!i.term.includes("empty")]])]),a(F,{class:"m-del-icon-btn",text:"",onClick:c=>J(N)},{default:r(()=>[a(P,{size:"20px"},{default:r(()=>[a(E,{name:"icon_delete-trash_outlined"},{default:r(()=>[a(t(ue),{class:"svg-icon"})]),_:1})]),_:1})]),_:2},1032,["onClick"])]))),128))],512),[[T,t(e).filter&&t(e).filter.length>0]]),a(F,{text:"",class:"circle-button",onClick:B,style:pe({marginTop:t(e).filter&&t(e).filter.length>0?"10px":0})},{default:r(()=>[a(E,{name:"icon_add_outlined"},{default:r(()=>[a(t(de),{style:{width:"14px"},class:"svg-icon"})]),_:1}),b(" "+m(t(l)("chart.add_addition")),1)]),_:1},8,["style"])])):g("",!0),(t(e).deType===0||t(e).deType===5)&&o.filterType==="enum"?(p(),d("div",xe,[u("span",Te,m(t(l)("chart.filter_exp")),1),a(v,{modelValue:o.enumCheckField,"onUpdate:modelValue":n[2]||(n[2]=i=>o.enumCheckField=i),filterable:"","collapse-tags":"",multiple:"",placeholder:t(l)("chart.pls_slc"),onChange:D,clearable:!0},{default:r(()=>[(p(!0),d(f,null,h(o.fieldOptions,i=>(p(),k(_,{key:i.id,label:i.text,value:i.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])):g("",!0)]),_:1})],32)}}});const ql=ce(ke,[["__scopeId","data-v-8ab39714"]]);export{ql as default};

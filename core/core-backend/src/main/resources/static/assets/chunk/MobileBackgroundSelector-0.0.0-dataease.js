import{u as F}from"./index-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{E as $}from"./el-row-0.0.0-dataease.js";import{E as T}from"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import{o as J,D as W,y as q,j as A}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as Z}from"./el-radio-button-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import{E as G,a as H}from"./el-form-item-0.0.0-dataease.js";import{E as K}from"./el-checkbox-0.0.0-dataease.js";import{a as Q}from"./chart-0.0.0-dataease.js";import{u as k,i as h,b as X}from"./imgUtils-0.0.0-dataease.js";import{s as Y}from"./snapshot-0.0.0-dataease.js";import ee from"./ImgViewDialog-0.0.0-dataease.js";import{d as te}from"./dvMain-0.0.0-dataease.js";import{d as oe,r as ie,ah as le,Z as ae,o as se,w as ne,e as re,f as b,L as C,M as m,k as l,i as n,j as t,a5 as g,a6 as c,U as d,a0 as y,g as me}from"./vue-0.0.0-dataease.js";import{d as de}from"./lodash-0.0.0-dataease.js";import{_ as pe}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./index-0.0.0-dataease3.js";import"./position-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease17.js";import"./formatter-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./index-0.0.0-dataease19.js";import"./util-0.0.0-dataease2.js";import"./chart-0.0.0-dataease2.js";import"./app-0.0.0-dataease.js";import"./antv-0.0.0-dataease.js";import"./index-0.0.0-dataease20.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./eventBus-0.0.0-dataease.js";import"./el-dialog-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";const ce={class:"mobile-background-selector"},ue={class:"indented-container"},ge={class:"indented-item"},fe={class:"indented-container"},be=15e6,_e=oe({__name:"MobileBackgroundSelector",props:{themes:{default:"light"}},emits:["styleChange"],setup(Se,{emit:V}){const E=Y(),{t:u}=J(),_=ie(null),S=te(),{canvasStyleData:e}=le(S),z=V,a=ae({fileList:[],dialogImageUrl:"",dialogVisible:!1,uploadDisabled:!1}),I=()=>{_.value.click()},U=()=>{W.success(u("visualization.pic_size_error"))},M=o=>{const i=o.target.files[0];if(i.size>be){U();return}k(i,p=>{e.value.mobileSetting.background=p,a.fileList=[{url:h(e.value.mobileSetting.background)}],r()})},v=()=>{e.value.mobileSetting.background?a.fileList.push({url:h(e.value.mobileSetting.background)}):a.fileList=[]},w=()=>{a.uploadDisabled=!1,e.value.mobileSetting.background=null,a.fileList=[],r()},B=o=>{a.dialogImageUrl=o.url,a.dialogVisible=!0},L=o=>{k(o.file,i=>{e.value.mobileSetting.background=i,r()})},r=()=>{D()},D=()=>{z("styleChange");const o=de(e.value);S.setCanvasStyle(o),F().emitter.emit("onMobileStatusChange",{type:"setCanvasStyle",value:JSON.parse(JSON.stringify(t(o)))}),E.recordSnapshotCache("commitStyle")};return se(()=>{v()}),ne(()=>e.value.mobileSetting.background,()=>{v()}),(o,i)=>{const p=K,f=H,N=Z,j=re("Plus"),O=A,P=T,R=$,x=G;return b(),C("div",ce,[m("input",{id:"input",ref_key:"files",ref:_,type:"file",accept:".jpeg,.jpg,.png,.gif,.svg",hidden:"",onClick:i[0]||(i[0]=s=>{s.target.value=""}),onChange:M},null,544),l(p,{size:"small",effect:o.themes,modelValue:t(e).mobileSetting.customSetting,"onUpdate:modelValue":i[1]||(i[1]=s=>t(e).mobileSetting.customSetting=s),onChange:r},{default:n(()=>[g(c(o.$t("visualization.mobile_style_setting_tips")),1)]),_:1},8,["effect","modelValue"]),l(x,{"label-position":"top",style:{width:"100%","padding-left":"22px","margin-bottom":"16px"}},{default:n(()=>[l(f,{class:d(["form-item no-margin-bottom","form-item-"+o.themes])},{default:n(()=>[l(p,{size:"small",effect:o.themes,disabled:!t(e).mobileSetting.customSetting,modelValue:t(e).mobileSetting.backgroundColorSelect,"onUpdate:modelValue":i[2]||(i[2]=s=>t(e).mobileSetting.backgroundColorSelect=s),onChange:r},{default:n(()=>[g(c(o.$t("chart.color")),1)]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"]),m("div",ue,[m("div",ge,[l(f,{class:d(["form-item","form-item-"+o.themes])},{default:n(()=>[l(N,{modelValue:t(e).mobileSetting.color,"onUpdate:modelValue":i[3]||(i[3]=s=>t(e).mobileSetting.color=s),effect:o.themes,disabled:!t(e).mobileSetting.backgroundColorSelect,"trigger-width":108,"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:t(Q),onChange:r},null,8,["modelValue","effect","disabled","predefine"])]),_:1},8,["class"])])]),l(f,{class:d(["form-item no-margin-bottom","form-item-"+o.themes])},{default:n(()=>[l(p,{size:"small",effect:o.themes,disabled:!t(e).mobileSetting.customSetting,modelValue:t(e).mobileSetting.backgroundImageEnable,"onUpdate:modelValue":i[4]||(i[4]=s=>t(e).mobileSetting.backgroundImageEnable=s),onChange:r},{default:n(()=>[g(c(t(u)("visualization.background")),1)]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"]),m("div",fe,[m("div",{class:d(["indented-item",{disabled:!t(e).mobileSetting.backgroundImageEnable}])},[m("div",{class:d(["avatar-uploader-container",`img-area_${o.themes}`])},[l(P,{action:"",effect:o.themes,accept:".jpeg,.jpg,.png,.gif,.svg",class:"avatar-uploader","list-type":"picture-card","on-preview":B,"on-remove":w,"before-upload":t(X),"http-request":L,"file-list":a.fileList,disabled:!t(e).mobileSetting.backgroundImageEnable},{default:n(()=>[l(O,null,{default:n(()=>[l(j)]),_:1})]),_:1},8,["effect","before-upload","file-list","disabled"]),l(R,null,{default:n(()=>[t(e).mobileSetting.background?y("",!0):(b(),C("span",{key:0,style:{"margin-top":"2px"},class:d(["image-hint",`image-hint_${o.themes}`])},c(t(u)("visualization.pic_import_tips",["1M"])),3)),t(e).mobileSetting.background?(b(),me(t(q),{key:1,size:"small",style:{margin:"8px 0 0 -4px"},text:"",onClick:I,disabled:!t(e).mobileSetting.backgroundImageEnable},{default:n(()=>[g(c(t(u)("visualization.re_upload")),1)]),_:1},8,["disabled"])):y("",!0)]),_:1})],2),l(ee,{modelValue:a.dialogVisible,"onUpdate:modelValue":i[5]||(i[5]=s=>a.dialogVisible=s),"image-url":a.dialogImageUrl},null,8,["modelValue","image-url"])],2)])]),_:1})])}}});const bt=pe(_e,[["__scopeId","data-v-855a325d"]]);export{bt as default};

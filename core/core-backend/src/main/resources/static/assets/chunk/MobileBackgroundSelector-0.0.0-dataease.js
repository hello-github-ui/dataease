import{z as F,v as $,p as T,h as J,w as W,M as q,d as A,K,o as Y}from"./element-plus-secondary-0.0.0-dataease.js";import{a as Z}from"./chart-0.0.0-dataease.js";import{u as h,i as k,b as G}from"./imgUtils-0.0.0-dataease.js";import{s as H}from"./snapshot-0.0.0-dataease.js";import{j as Q}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import X from"./ImgViewDialog-0.0.0-dataease.js";import{u as ee}from"./index-0.0.0-dataease.js";import{d as te}from"./dvMain-0.0.0-dataease.js";import{s as oe}from"./pinia-0.0.0-dataease.js";import{e as ie}from"./lodash-es-0.0.0-dataease.js";import{d as le,r as re,l as ae,b as me,w as se,ah as ne,o as b,c as C,a as n,a0 as l,_ as m,u as t,a4 as g,a2 as c,z as p,Y as y,Z as pe}from"./@vue-0.0.0-dataease.js";import{_ as de}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./escape-html-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./formatter-0.0.0-dataease.js";import"./html2canvas-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./file-saver-0.0.0-dataease.js";import"./html-to-image-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./eventBus-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./vue-router-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./util-0.0.0-dataease2.js";import"./chart-0.0.0-dataease2.js";import"./app-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./@antv-0.0.0-dataease.js";import"./eventemitter3-0.0.0-dataease.js";import"./@mapbox-0.0.0-dataease.js";import"./pbf-0.0.0-dataease.js";import"./ieee754-0.0.0-dataease.js";import"./supercluster-0.0.0-dataease.js";import"./gl-matrix-0.0.0-dataease.js";import"./tslib-0.0.0-dataease.js";import"./topojson-client-0.0.0-dataease.js";import"./viewport-mercator-project-0.0.0-dataease.js";import"./@turf-0.0.0-dataease.js";import"./polygon-clipping-0.0.0-dataease.js";import"./splaytree-0.0.0-dataease.js";import"./robust-predicates-0.0.0-dataease.js";import"./d3-scale-0.0.0-dataease.js";import"./d3-collection-0.0.0-dataease.js";import"./d3-format-0.0.0-dataease.js";import"./d3-time-format-0.0.0-dataease.js";import"./d3-time-0.0.0-dataease.js";import"./d3-color-0.0.0-dataease.js";import"./d3-array-0.0.0-dataease.js";import"./earcut-0.0.0-dataease.js";import"./regl-0.0.0-dataease.js";import"./mapbox-gl-0.0.0-dataease.js";import"./d3-dsv-0.0.0-dataease.js";import"./geojson-vt-0.0.0-dataease.js";import"./hammerjs-0.0.0-dataease.js";import"./element-resize-detector-0.0.0-dataease.js";import"./batch-processor-0.0.0-dataease.js";import"./d3-hexbin-0.0.0-dataease.js";import"./detect-browser-0.0.0-dataease.js";import"./d3-ease-0.0.0-dataease.js";import"./d3-interpolate-0.0.0-dataease.js";import"./d3-timer-0.0.0-dataease.js";import"./fecha-0.0.0-dataease.js";import"./size-sensor-0.0.0-dataease.js";import"./d3-regression-0.0.0-dataease.js";import"./d3-hierarchy-0.0.0-dataease.js";import"./fmin-0.0.0-dataease.js";import"./pdfast-0.0.0-dataease.js";import"./mathjs-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./exceljs-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./less-0.0.0-dataease.js";import"./copy-anything-0.0.0-dataease.js";import"./is-what-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";const ce={class:"mobile-background-selector"},ue={class:"indented-container"},ge={class:"indented-item"},fe={class:"indented-container"},be=15e6,_e=le({__name:"MobileBackgroundSelector",props:{themes:{default:"light"}},emits:["styleChange"],setup(Se,{emit:V}){const E=H(),{t:u}=Q(),_=re(null),S=te(),{canvasStyleData:e}=oe(S),z=V,r=ae({fileList:[],dialogImageUrl:"",dialogVisible:!1,uploadDisabled:!1}),I=()=>{_.value.click()},w=()=>{T.success(u("visualization.pic_size_error"))},M=o=>{const i=o.target.files[0];if(i.size>be){w();return}h(i,d=>{e.value.mobileSetting.background=d,r.fileList=[{url:k(e.value.mobileSetting.background)}],s()})},v=()=>{e.value.mobileSetting.background?r.fileList.push({url:k(e.value.mobileSetting.background)}):r.fileList=[]},U=()=>{r.uploadDisabled=!1,e.value.mobileSetting.background=null,r.fileList=[],s()},B=o=>{r.dialogImageUrl=o.url,r.dialogVisible=!0},L=o=>{h(o.file,i=>{e.value.mobileSetting.background=i,s()})},s=()=>{D()},D=()=>{z("styleChange");const o=ie(e.value);S.setCanvasStyle(o),ee().emitter.emit("onMobileStatusChange",{type:"setCanvasStyle",value:JSON.parse(JSON.stringify(t(o)))}),E.recordSnapshotCache("commitStyle")};return me(()=>{v()}),se(()=>e.value.mobileSetting.background,()=>{v()}),(o,i)=>{const d=F,f=W,N=q,O=ne("Plus"),P=A,j=K,R=Y,x=$;return b(),C("div",ce,[n("input",{id:"input",ref_key:"files",ref:_,type:"file",accept:".jpeg,.jpg,.png,.gif,.svg",hidden:"",onClick:i[0]||(i[0]=a=>{a.target.value=""}),onChange:M},null,544),l(d,{size:"small",effect:o.themes,modelValue:t(e).mobileSetting.customSetting,"onUpdate:modelValue":i[1]||(i[1]=a=>t(e).mobileSetting.customSetting=a),onChange:s},{default:m(()=>[g(c(o.$t("visualization.mobile_style_setting_tips")),1)]),_:1},8,["effect","modelValue"]),l(x,{"label-position":"top",style:{width:"100%","padding-left":"22px","margin-bottom":"16px"}},{default:m(()=>[l(f,{class:p(["form-item no-margin-bottom","form-item-"+o.themes])},{default:m(()=>[l(d,{size:"small",effect:o.themes,disabled:!t(e).mobileSetting.customSetting,modelValue:t(e).mobileSetting.backgroundColorSelect,"onUpdate:modelValue":i[2]||(i[2]=a=>t(e).mobileSetting.backgroundColorSelect=a),onChange:s},{default:m(()=>[g(c(o.$t("chart.color")),1)]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"]),n("div",ue,[n("div",ge,[l(f,{class:p(["form-item","form-item-"+o.themes])},{default:m(()=>[l(N,{modelValue:t(e).mobileSetting.color,"onUpdate:modelValue":i[3]||(i[3]=a=>t(e).mobileSetting.color=a),effect:o.themes,disabled:!t(e).mobileSetting.backgroundColorSelect,"trigger-width":108,"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:t(Z),onChange:s},null,8,["modelValue","effect","disabled","predefine"])]),_:1},8,["class"])])]),l(f,{class:p(["form-item no-margin-bottom","form-item-"+o.themes])},{default:m(()=>[l(d,{size:"small",effect:o.themes,disabled:!t(e).mobileSetting.customSetting,modelValue:t(e).mobileSetting.backgroundImageEnable,"onUpdate:modelValue":i[4]||(i[4]=a=>t(e).mobileSetting.backgroundImageEnable=a),onChange:s},{default:m(()=>[g(c(t(u)("visualization.background")),1)]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"]),n("div",fe,[n("div",{class:p(["indented-item",{disabled:!t(e).mobileSetting.backgroundImageEnable}])},[n("div",{class:p(["avatar-uploader-container",`img-area_${o.themes}`])},[l(j,{action:"",effect:o.themes,accept:".jpeg,.jpg,.png,.gif,.svg",class:"avatar-uploader","list-type":"picture-card","on-preview":B,"on-remove":U,"before-upload":t(G),"http-request":L,"file-list":r.fileList,disabled:!t(e).mobileSetting.backgroundImageEnable},{default:m(()=>[l(P,null,{default:m(()=>[l(O)]),_:1})]),_:1},8,["effect","before-upload","file-list","disabled"]),l(R,null,{default:m(()=>[t(e).mobileSetting.background?y("",!0):(b(),C("span",{key:0,style:{"margin-top":"2px"},class:p(["image-hint",`image-hint_${o.themes}`])},c(t(u)("visualization.pic_import_tips",["1M"])),3)),t(e).mobileSetting.background?(b(),pe(t(J),{key:1,size:"small",style:{margin:"8px 0 0 -4px"},text:"",onClick:I,disabled:!t(e).mobileSetting.backgroundImageEnable},{default:m(()=>[g(c(t(u)("visualization.re_upload")),1)]),_:1},8,["disabled"])):y("",!0)]),_:1})],2),l(X,{modelValue:r.dialogVisible,"onUpdate:modelValue":i[5]||(i[5]=a=>r.dialogVisible=a),"image-url":r.dialogImageUrl},null,8,["modelValue","image-url"])],2)])]),_:1})])}}});const Po=de(_e,[["__scopeId","data-v-855a325d"]]);export{Po as default};

import{i as F}from"./interactive-0.0.0-dataease.js";import{o as N,x as W}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{s as g}from"./ShortcutOption-0.0.0-dataease.js";import{d as q,r as m,Z as E,G as M,o as P,f as i,L as l,k as p,i as y,j as n,M as f,Y as k,a9 as L,a6 as V,a0 as z,a7 as A,g as D}from"./vue-0.0.0-dataease.js";import{a as O}from"./index-0.0.0-dataease.js";import j from"./Workbranch-0.0.0-dataease.js";import{n as G}from"./none-0.0.0-dataease.js";import{s as H,b as R}from"./index-0.0.0-dataease29.js";import{s as U}from"./index-0.0.0-dataease56.js";import{s as Y}from"./index-0.0.0-dataease30.js";import"./index-0.0.0-dataease27.js";import"./index-0.0.0-dataease57.js";import{_ as Z}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./datasource-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./icon_dashboard-0.0.0-dataease.js";import"./index-0.0.0-dataease26.js";import"./use-route-0.0.0-dataease.js";const J={class:"mobile-panel-list"},K={class:"workbranch-cell-group"},Q={key:0,class:"empty-img-mobile"},X=["src"],ee={class:"empty-tips"},te=q({__name:"index",emits:["setLoading"],setup(ae,{emit:T}){const C=A(),{t:_}=N(),{wsCache:c}=O("sessionStorage"),s=m("recent"),d=m(""),r=E({tableData:[],curTypeList:[]}),x=F(),o=T,w=()=>{o("setLoading",!0),g.loadData({type:"panel",keyword:"",asc:!1}).then(a=>{r.tableData=(a.data||[]).filter(e=>e.extFlag===1)}).finally(()=>{o("setLoading",!1),h()})},h=()=>{d.value=r.tableData.length?"":`暂无${{recent:"数据",store:"收藏",share:"分享"}[s.value]}`},B=()=>{o("setLoading",!0),W.post({url:"/share/query",data:{type:"panel",keyword:"",asc:!1}}).then(a=>{r.tableData=(a.data||[]).filter(e=>e.extFlag===1)}).finally(()=>{o("setLoading",!1),h()})},u=m([{title:_("work_branch.recent"),name:"recent",disabled:!1},{title:"我的收藏",name:"store",disabled:!1},{title:_("visualization.share_out"),name:"share",disabled:!1}]),v=M(()=>x.getData),S=(()=>{const a=["panel","screen","dataset","datasource"],e=[];for(const t in v.value)v.value[t].menuAuth&&e.push(a[parseInt(t)]);return u.value[0].disabled=!(e!=null&&e.length),u.value[1].disabled=!e.includes("panel")&&!e.includes("screen"),e})(),b=({name:a,disabled:e})=>{e||(a==="recent"||a==="store"?(o("setLoading",!0),g.setBusiFlag(a),w()):B())};P(()=>{s.value=c.get("activeTab")||"recent",c.set("activeTab",""),S.length&&b({name:s.value,disabled:!1})});const I=a=>{c.set("activeTab",s.value),C.push({path:"/panel/mobile",query:{dvId:a.resourceId}})},$=a=>new Date(a).toLocaleString();return(a,e)=>(i(),l("div",J,[p(n(Y),null,{default:y(()=>[p(n(U),{"safe-area-inset-top":"",title:"工作台"}),p(n(H),{onClickTab:b,active:s.value,"onUpdate:active":e[0]||(e[0]=t=>s.value=t)},{default:y(()=>[(i(!0),l(k,null,L(u.value,t=>(i(),D(n(R),{key:t.name,disabled:t.disabled,name:t.name,title:t.title},null,8,["disabled","name","title"]))),128))]),_:1},8,["active"])]),_:1}),f("div",K,[(i(!0),l(k,null,L(r.tableData,t=>(i(),D(j,{onClick:ie=>I(t),key:t.id,size:"large",label:t.name,time:$(t.lastEditTime||t.time)},null,8,["onClick","label","time"]))),128))]),d.value?(i(),l("div",Q,[f("img",{width:"125",height:"125",src:n(G),alt:""},null,8,X),f("div",ee,V(d.value),1)])):z("",!0)]))}});const Ie=Z(te,[["__scopeId","data-v-74610164"]]);export{Ie as default};

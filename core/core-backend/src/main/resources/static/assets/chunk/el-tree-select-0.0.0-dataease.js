import{a as O,E as A}from"./el-select-0.0.0-dataease.js";import{_ as S}from"./el-tree-0.0.0-dataease.js";import{f as T,a2 as F}from"./index-0.0.0-dataease.js";import{p as E,k as H}from"./lodash-0.0.0-dataease.js";import{t as L,G as b,n as w,d as P,B as I,w as U,as as $,Q as q,r as B,Z as N,o as D,h as m}from"./vue-0.0.0-dataease.js";import{ap as _,a8 as V,H as G}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";const Q=(e,{attrs:s},{tree:a,key:d})=>{const h=T("tree-select"),r={...E(L(e),Object.keys(O.props)),...s,valueKey:d,popperClass:b(()=>{const c=[h.e("popper")];return e.popperClass&&c.push(e.popperClass),c.join(" ")}),filterMethod:(c="")=>{e.filterMethod&&e.filterMethod(c),w(()=>{var f;(f=a.value)==null||f.filter(c)})},onVisibleChange:c=>{var f;(f=s.onVisibleChange)==null||f.call(s,c),e.filterable&&c&&r.filterMethod()}};return r},R=P({extends:A,setup(e,s){const a=A.setup(e,s);delete a.selectOptionClick;const d=I().proxy;return w(()=>{a.select.cachedOptions.get(d.value)||a.select.onOptionCreate(d)}),a},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function M(e){return e||e===0}function j(e){return Array.isArray(e)&&e.length}function x(e){return Array.isArray(e)?e:M(e)?[e]:[]}function g(e,s,a,d,h){for(let r=0;r<e.length;r++){const c=e[r];if(s(c,r,e,h))return d?d(c,r,e,h):c;{const f=a(c);if(j(f)){const l=g(f,s,a,d,c);if(l)return l}}}}const Z=(e,{attrs:s,slots:a,emit:d},{select:h,tree:r,key:c})=>{U(()=>e.modelValue,()=>{e.showCheckbox&&w(()=>{const t=r.value;t&&!H(t.getCheckedKeys(),x(e.modelValue))&&t.setCheckedKeys(x(e.modelValue))})},{immediate:!0,deep:!0});const f=b(()=>({value:c.value,...e.props})),l=(t,n)=>{var o;const i=f.value[t];return $(i)?i(n,(o=r.value)==null?void 0:o.getNode(l("value",n))):n[i]},C=x(e.modelValue).map(t=>g(e.data||[],n=>l("value",n)===t,n=>l("children",n),(n,o,i,v)=>v&&l("value",v))).filter(t=>M(t));return{...E(L(e),Object.keys(S.props)),...s,nodeKey:c,expandOnClickNode:b(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:b(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(C):C),renderContent:(t,{node:n,data:o,store:i})=>t(R,{value:l("value",o),label:l("label",o),disabled:l("disabled",o)},e.renderContent?()=>e.renderContent(t,{node:n,data:o,store:i}):a.default?()=>a.default({node:n,data:o,store:i}):void 0),filterNodeMethod:(t,n,o)=>{var i;return e.filterNodeMethod?e.filterNodeMethod(t,n,o):t?(i=l("label",n))==null?void 0:i.includes(t):!0},onNodeClick:(t,n,o)=>{var i,v,y;if((i=s.onNodeClick)==null||i.call(s,t,n,o),!(e.showCheckbox&&e.checkOnClickNode))if(!e.showCheckbox&&(e.checkStrictly||n.isLeaf)){if(!l("disabled",t)){const u=(v=h.value)==null?void 0:v.options.get(l("value",t));(y=h.value)==null||y.handleOptionSelect(u,!0)}}else e.expandOnClickNode&&o.proxy.handleExpandIconClick()},onCheck:(t,n)=>{var o;(o=s.onCheck)==null||o.call(s,t,n);const i=l("value",t);if(e.checkStrictly)d(e.showBtn?_:V,e.multiple?n.checkedKeys:n.checkedKeys.includes(i)?i:void 0);else if(e.multiple)d(e.showBtn?_:V,r.value.getCheckedKeys(!0));else{const v=g([t],k=>!j(l("children",k))&&!l("disabled",k),k=>l("children",k)),y=v?l("value",v):void 0,u=M(e.modelValue)&&!!g([t],k=>l("value",k)===e.modelValue,k=>l("children",k));d(e.showBtn?_:V,y===e.modelValue||u?void 0:y)}}}},K=P({name:"ElTreeSelect",inheritAttrs:!1,props:{...O.props,...S.props,showBtn:{type:Boolean,default:!1}},setup(e,s){const{slots:a,expose:d,emit:h}=s,r=T("select-tree"),{t:c}=G(),f=q("$custom-style-filter",{}),l=B(),C=B(),t=b(()=>e.nodeKey||e.valueKey||"value"),n=Q(e,s,{select:l,tree:C,key:t}),o=Z(e,s,{select:l,tree:C,key:t}),i=()=>{var u;h("treeSelectClear",(u=C.value)==null?void 0:u.setCheckedKeys([]))},v=()=>{var u;h("treeSelectConfirm",(u=C.value)==null?void 0:u.getCheckedKeys()),l.value.hideMenu()},y=N({});return d(y),D(()=>{Object.assign(y,{...E(C.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...E(l.value,["focus","blur"])})}),()=>m(O,N({...n,ref:u=>l.value=u}),{...a,default:()=>[m(S,N({...o,showBtn:e.showBtn,ref:u=>C.value=u})),e.showBtn?m("div",{class:r.b("btn-group"),style:F(f,["border"])},[m("div",{onClick:i,class:r.b("btn"),style:{color:"#000000",background:"#ffffff"}},c("el.datepicker.clear")),m("div",{onClick:v,class:r.b("btn"),style:{color:"#ffffff",background:"#3370FF"}},c("el.datepicker.confirm"))]):null]})}});K.install=e=>{e.component(K.name,K)};const p=K,te=p;export{te as E};

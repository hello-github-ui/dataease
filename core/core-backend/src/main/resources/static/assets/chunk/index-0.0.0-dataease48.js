import"./index-0.0.0-dataease.js";import{E as re}from"./el-dialog-0.0.0-dataease.js";import{o as ne,F as I,D as v,n as me,j as pe,G as de,y as ce}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{a as ue,E as ge}from"./el-form-item-0.0.0-dataease.js";import{E as he}from"./el-row-0.0.0-dataease.js";import{f as u,L as x,M as r,a8 as fe,d as _e,r as Z,Z as ye,G as F,o as Te,n as S,a6 as m,j as s,k as o,i,a5 as c,T as f,W as _,a0 as C,g as w,Y as z,a9 as ve}from"./vue-0.0.0-dataease.js";import{d as W}from"./dv-empty-0.0.0-dataease.js";import{e as Ce,g as we,h as xe,t as be,c as Fe,i as De}from"./template-0.0.0-dataease.js";import{e as Ee}from"./antv-0.0.0-dataease.js";import Le from"./DeTemplateList-0.0.0-dataease.js";import ke from"./DeTemplateImport-0.0.0-dataease.js";import{_ as Ie}from"./DeTemplateItem.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import Se from"./DeCategoryChange-0.0.0-dataease.js";import{_ as Ve}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./el-dropdown-menu-0.0.0-dataease.js";import"./index-0.0.0-dataease3.js";import"./dropdown-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-dropdown-item-0.0.0-dataease.js";import"./el-empty-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-select-0.0.0-dataease.js";import"./index-0.0.0-dataease16.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./imgUtils-0.0.0-dataease.js";import"./dvMain-0.0.0-dataease.js";import"./chart-0.0.0-dataease.js";import"./formatter-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./index-0.0.0-dataease19.js";import"./util-0.0.0-dataease2.js";import"./chart-0.0.0-dataease2.js";import"./app-0.0.0-dataease.js";import"./index-0.0.0-dataease20.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-checkbox-0.0.0-dataease.js";const Me={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Be(V,l){return u(),x("svg",Me,l[0]||(l[0]=[r("path",{d:"M10.9823 11.9244C9.89439 12.8051 8.50885 13.3327 7.00008 13.3327C3.50228 13.3327 0.666748 10.4972 0.666748 6.99935C0.666748 3.50155 3.50228 0.666016 7.00008 0.666016C10.4979 0.666016 13.3334 3.50155 13.3334 6.99935C13.3334 8.50811 12.8058 9.89365 11.9251 10.9816L14.6737 13.7301C14.8039 13.8603 14.8039 14.0714 14.6737 14.2015L14.2023 14.673C14.0721 14.8031 13.8611 14.8031 13.7309 14.673L10.9823 11.9244ZM12.0001 6.99935C12.0001 4.23793 9.7615 1.99935 7.00008 1.99935C4.23866 1.99935 2.00008 4.23793 2.00008 6.99935C2.00008 9.76077 4.23866 11.9993 7.00008 11.9993C9.7615 11.9993 12.0001 9.76077 12.0001 6.99935Z",fill:"#646A73"},null,-1)]))}const Ne={render:Be},$e={width:"126",height:"125",viewBox:"0 0 126 125",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Re(V,l){return u(),x("svg",$e,l[0]||(l[0]=[fe('<path fill-rule="evenodd" clip-rule="evenodd" d="M30.2978 13.9995H102.702C105.904 13.9995 108.5 16.5805 108.5 19.7642V83.9427L83.775 109.467H30.2978C27.0957 109.467 24.5 106.886 24.5 103.702V19.7642C24.5 16.5805 27.0957 13.9995 30.2978 13.9995Z" fill="#D6DAE1"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M83.7749 109.426V85.8234C83.7749 84.7622 84.6401 83.9019 85.7075 83.9019H108.5L83.7749 109.426Z" fill="#B5BEC8"></path><rect x="76.1875" y="21.999" width="25" height="32" rx="2" fill="#F4F5F9"></rect><rect x="32.1001" y="22.0542" width="32.25" height="5" rx="1" fill="#F4F5F9"></rect><rect x="32.1001" y="31.6406" width="32.25" height="5" rx="1" fill="#F4F5F9"></rect><rect x="32.1001" y="41.6406" width="16.125" height="5" rx="1" fill="#F4F5F9"></rect><rect x="32.1001" y="68.9229" width="68.8" height="5" rx="1" fill="#F4F5F9"></rect><rect x="32.1001" y="76.3799" width="68.8" height="5" rx="1" fill="#F4F5F9"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M50.2158 54.1396C38.7749 54.1396 29.5002 63.4602 29.5002 74.9577C29.5002 86.4552 38.7749 95.7758 50.2158 95.7758C53.0012 95.7758 55.6583 95.2233 58.0843 94.2214L68.8536 110.371L74.4055 106.63L63.7784 90.6942C68.16 86.877 70.9313 81.2426 70.9313 74.9577C70.9313 63.4602 61.6567 54.1396 50.2158 54.1396ZM50.2158 60.8555C57.9661 60.8555 64.2489 67.1694 64.2489 74.9581C64.2489 82.7467 57.9661 89.0606 50.2158 89.0606C42.4655 89.0606 36.1827 82.7467 36.1827 74.9581C36.1827 67.1694 42.4655 60.8555 50.2158 60.8555Z" fill="white"></path><path d="M25.1083 59.9895L24.6889 60.9687L15.4748 57.0168L15.8942 56.0377L25.1083 59.9895Z" fill="#1F2329"></path><path d="M30.1257 56.5756L29.3071 57.2573L21.3806 47.733L22.1992 47.0513L30.1257 56.5756Z" fill="#1F2329"></path><path d="M25.2771 65.653L25.3153 66.719L12.6962 67.1485L12.658 66.0825L25.2771 65.653Z" fill="#1F2329"></path>',12)]))}const Oe={render:Re},Ze={class:"template-head"},ze={class:"router-title"},We={style:{display:"flex"}},Ue={class:"sys-setting-p"},Pe={class:"container-sys-param"},je={style:{width:"100%",height:"100%"}},qe={class:"de-template"},He={class:"tabs-container flex-tabs"},Ae={class:"de-tabs-left"},Ge={class:"de-tabs-right"},Je={key:0,class:"active-template"},Ye={style:{color:"#3370ff"}},Ke={style:{"margin-top":"8px","font-size":"14px"}},Qe={style:{"margin-top":"8px","font-size":"14px"}},Xe={id:"template-box",class:"template-box"},et={class:"batch-opt-area"},tt={class:"delete-tips"},at={class:"container-sys-param"},lt={style:{"margin-top":"8px","font-size":"14px"}},ot={class:"dialog-footer"},it=_e({__name:"index",setup(V){const{t:l}=ne(),M=Z(null),D=Z(null),e=ye({batchOptDialogShow:!1,batchOptList:[],templateFilterText:"",showShare:!1,currentTemplateShowList:[],noneImg:"@/assets/None.png",currentPid:"",currentTemplateType:"self",templateEditFormRules:{name:[{required:!0,trigger:"blur",validator:(t,a,p)=>{if(H(a)){const{nodeType:h}=e.templateEditForm||{};p(new Error(l(`system_parameter_setting.${h==="folder"?"name_already_exists_type":"the_same_category"}`)))}else p()}},{required:!0,message:l("commons.input_content"),trigger:"blur"},{max:50,message:l("commons.char_can_not_more_50"),trigger:"change"}]},templateEditForm:{},editTemplate:!1,dialogTitle:"",dialogTitleLabel:"",currentTemplateLabel:"",currentTemplateId:"",templateCategories:[],templateMiniWidth:256,templateCurWidth:256,formType:"",originName:"",templateDialog:{title:l("visualization.import_template"),visible:!1,templateId:null,optType:"insert",pid:"",categories:[]}}),U=()=>{e.batchOptDialogShow=!0},P=()=>{I.confirm(l("template_manage.delete_batch_hint",[b.value]),{confirmButtonType:"danger",type:"warning",autofocus:!1,showClose:!1}).then(()=>{const t={templateIds:B.value,categories:[e.currentTemplateId]};Ce(t).then(()=>{v({message:l("commons.delete_success"),type:"success",showClose:!0}),y(e.currentTemplateId,e.currentTemplateLabel)})})},j=()=>{g.value.forEach(t=>{t.checked=!0})},q=()=>{g.value.forEach(t=>{t.checked=!1})},b=F(()=>g.value.filter(t=>t.checked).length),B=F(()=>g.value.filter(t=>t.checked).map(t=>t.id)),g=F(()=>e.templateFilterText?e.currentTemplateShowList.filter(t=>{var a;return(a=t.name)==null?void 0:a.includes(e.templateFilterText)}):[...e.currentTemplateShowList]),N=F(()=>{const{nodeType:t}=e.templateEditForm||{};return t==="template"?e.currentTemplateShowList.map(a=>a.label):t==="folder"?e.templateCategories.map(a=>a.label):[]}),H=t=>!N.value||e.formType==="edit"&&e.originName===t?!1:N.value.some(a=>a===t),A=(t,a)=>{switch(t){case"templateEdit":X(a);break;case"delete":G(a);break}},G=t=>{K(t.id)},J=t=>{t.optType==="refresh"?D.value.nodeClick({id:t.refreshPid,name:t.refreshPName}):T("new",null)},y=(t,a)=>{e.currentTemplateId=t,e.currentTemplateLabel=a,e.currentTemplateId&&we({categoryId:e.currentTemplateId}).then(p=>{e.currentTemplateShowList=p.data})},Y=t=>{t&&xe(t).then(a=>{a.data==="success"?(v({message:l("commons.delete_success"),type:"success",showClose:!0}),E()):I.confirm(l("template_manage.delete_failed_hint"),{tip:l("template_manage.delete_failed_tip"),confirmButtonText:l("template_manage.delete_failed_confirm"),confirmButtonType:"default",showCancelButton:!1,type:"warning",autofocus:!1,showClose:!1})})},K=t=>{t&&I.confirm(l("template_manage.delete_hint"),{tip:"",confirmButtonType:"danger",type:"warning",confirmButtonText:l("common.delete"),autofocus:!1,showClose:!1}).then(()=>{be(t,e.currentTemplateId).then(()=>{v({message:l("commons.delete_success"),type:"success",showClose:!0}),y(e.currentTemplateId,e.currentTemplateLabel)})})},T=(t,a)=>{e.templateEditForm=null,e.formType=t,t==="edit"?(e.templateEditForm=JSON.parse(JSON.stringify(a)),e.dialogTitle=e.templateEditForm.nodeType==="folder"?l("template_manage.rename"):l("template_manage.edit_template"),e.originName=e.templateEditForm.label):(e.dialogTitle=l("visualization.add_category"),e.templateEditForm={name:"",nodeType:"folder",templateType:e.currentTemplateType,level:0}),e.dialogTitleLabel=e.templateEditForm.nodeType==="folder"?l("template_manage.catalog_name"):l("template_manage.template_name"),e.editTemplate=!0},Q=t=>{T("edit",t)},X=t=>{e.templateDialog.visible=!0,e.templateDialog.title=l("template_manage.edit_template"),e.templateDialog.optType="update",e.templateDialog.templateId=t.id},ee=t=>{if(t.name===l("work_branch.recently_used")){v({message:l("template_manage.illegal_name_hint"),type:"error",showClose:!0});return}M.value.validate(a=>{if(a)Fe({...t}).then(()=>{v({message:l("template_manage.add_success"),type:"success",showClose:!0}),e.currentTemplateId=null,E(),$()});else return!1})},$=()=>{e.editTemplate=!1},E=()=>{S(()=>{const t={templateType:e.currentTemplateType,level:"0"};De(t).then(a=>{e.templateCategories=a.data,te()})})},te=()=>{if(e.templateCategories&&e.templateCategories.length>0){let t=!0;e.templateCategories.forEach(a=>{a.id===e.currentTemplateId&&(t=!1)}),t?S().then(()=>{const[a={}]=e.templateCategories;D.value.nodeClick(a)}):y(e.currentTemplateId,e.currentTemplateLabel)}else e.currentTemplateShowList=[]},ae=()=>{e.batchOptDialogShow=!1},le=()=>{e.templateDialog.visible=!1},R=t=>{e.templateDialog.visible=!0,e.templateDialog.title=l("template_manage.import_template"),e.templateDialog.templateId=null,e.templateDialog.optType="insert",e.templateDialog.pid=t};return Te(()=>{E();const t=Ee(),a=document.getElementById("template-box");t.listenTo(a,()=>{S(()=>{const p=a.offsetWidth-24,h=Math.trunc(p/e.templateMiniWidth);e.templateCurWidth=Math.trunc(p/h)-24-h})})}),(t,a)=>{const p=me,h=pe,O=de,d=ce,L=he,oe=ue,ie=ge,k=re;return u(),x(z,null,[r("div",Ze,[r("p",ze,m(s(l)("template_manage.name")),1),r("div",We,[o(O,{modelValue:e.templateFilterText,"onUpdate:modelValue":a[0]||(a[0]=n=>e.templateFilterText=n),placeholder:s(l)("template_manage.keywords"),class:"template-search-class",clearable:""},{prefix:i(()=>[o(h,null,{default:i(()=>[o(p,{name:"de-search"},{default:i(()=>[o(s(Ne),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["modelValue","placeholder"]),o(d,{style:{float:"right","margin-left":"12px"},onClick:a[1]||(a[1]=n=>T("new",null))},{default:i(()=>[c(m(s(l)("template_manage.add_catalog")),1)]),_:1}),o(d,{style:{float:"right"},type:"primary",onClick:a[2]||(a[2]=n=>R(e.currentTemplateId))},{default:i(()=>[c(m(s(l)("visualization.import")),1)]),_:1})])]),r("div",Ue,[f(r("div",Pe,[r("div",je,[r("div",qe,[r("div",He,[r("div",Ae,[o(Le,{ref_key:"templateListRef",ref:D,"template-type":e.currentTemplateType,"template-list":e.templateCategories,onCategoryDelete:Y,onCategoryEdit:Q,onShowCurrentTemplate:y,onShowTemplateEditDialog:T},null,8,["template-type","template-list"])]),r("div",Ge,[e.currentTemplateLabel?(u(),x("div",Je,[f(r("span",null,m(e.currentTemplateLabel)+"  ("+m(e.currentTemplateShowList.length)+")",513),[[_,!e.templateFilterText]]),f(r("span",null,[r("span",Ye,m(e.templateFilterText)+"  ",1),r("span",null,m(s(l)("template_manage.search_result"))+" "+m(g.value.length)+" "+m(s(l)("template_manage.search_result_unit")),1)],512),[[_,e.templateFilterText]])])):C("",!0),!e.currentTemplateShowList.length&&!e.templateFilterText?(u(),w(L,{key:1,style:{height:"100%"},class:"custom-position"},{default:i(()=>[o(p,{name:"dv-empty"},{default:i(()=>[o(s(W),{style:{width:"125px",height:"125px"},class:"svg-icon"})]),_:1}),r("span",Ke,m(s(l)("template_manage.no_template")),1)]),_:1})):C("",!0),!g.value.length&&e.templateFilterText?(u(),w(L,{key:2,style:{height:"100%"},class:"custom-position"},{default:i(()=>[o(p,{name:"dv-nothing"},{default:i(()=>[o(s(Oe),{style:{width:"125px",height:"125px"},class:"svg-icon"})]),_:1}),r("span",Qe,m(s(l)("template_manage.not_found")),1)]),_:1})):C("",!0),f(r("div",Xe,[(u(!0),x(z,null,ve(g.value,n=>(u(),w(Ie,{key:n.id,width:e.templateCurWidth,"batch-state":b.value>0,model:n,onCommand:se=>A(se,n)},null,8,["width","batch-state","model","onCommand"]))),128))],512),[[_,e.currentTemplateId!==""]]),f(r("div",et,[o(d,{onClick:U,plain:"",style:{"margin-left":"24px"}},{default:i(()=>[c(m(s(l)("template_manage.edit_catalog")),1)]),_:1}),o(d,{onClick:P,type:"danger",plain:"",class:"template-custom-danger"},{default:i(()=>[c(m(s(l)("user.batch_del")),1)]),_:1}),r("span",tt,m(s(l)("template_manage.selected_count",[b.value])),1),o(d,{onClick:j,style:{"margin-left":"16px"},text:""},{default:i(()=>[c(m(s(l)("template_manage.select_all_count",[g.value.length])),1)]),_:1}),o(d,{onClick:q,text:""},{default:i(()=>[c(m(s(l)("commons.clear")),1)]),_:1})],512),[[_,b.value]])])])])])],512),[[_,e.templateCategories.length]]),f(r("div",at,[o(L,{style:{height:"100%"},class:"custom-position"},{default:i(()=>[o(p,{name:"dv-empty"},{default:i(()=>[o(s(W),{style:{width:"125px",height:"125px"},class:"svg-icon"})]),_:1}),r("span",lt,[o(d,{style:{float:"right"},type:"primary",onClick:a[3]||(a[3]=n=>R(e.currentTemplateId))},{default:i(()=>[c(m(s(l)("visualization.import")),1)]),_:1}),o(d,{style:{float:"right","margin-right":"12px"},onClick:a[4]||(a[4]=n=>T("new",null))},{default:i(()=>[c(m(s(l)("template_manage.add_catalog")),1)]),_:1})])]),_:1})],512),[[_,!e.templateCategories.length]]),o(k,{title:e.dialogTitle,modelValue:e.editTemplate,"onUpdate:modelValue":a[8]||(a[8]=n=>e.editTemplate=n),"append-to-body":"",class:"de-dialog-form create-dialog",width:"420px"},{footer:i(()=>[r("div",ot,[o(d,{secondary:"",onClick:a[6]||(a[6]=n=>$())},{default:i(()=>[c(m(s(l)("commons.cancel")),1)]),_:1}),o(d,{type:"primary",onClick:a[7]||(a[7]=n=>ee(e.templateEditForm))},{default:i(()=>[c(m(s(l)("commons.confirm")),1)]),_:1})])]),default:i(()=>[o(ie,{ref_key:"templateEditFormRef",ref:M,"label-position":"top",class:"de-form-item",model:e.templateEditForm,rules:e.templateEditFormRules},{default:i(()=>[o(oe,{label:e.dialogTitleLabel,prop:"name"},{default:i(()=>[o(O,{placeholder:s(l)("template_manage.catalog_name"),modelValue:e.templateEditForm.name,"onUpdate:modelValue":a[5]||(a[5]=n=>e.templateEditForm.name=n)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),o(k,{title:e.templateDialog.title,modelValue:e.templateDialog.visible,"onUpdate:modelValue":a[9]||(a[9]=n=>e.templateDialog.visible=n),"show-close":!0,"destroy-on-close":!0,class:"de-dialog-form create-dialog",width:"600px"},{default:i(()=>[e.templateDialog.visible?(u(),w(ke,{key:0,pid:e.templateDialog.pid,"template-id":e.templateDialog.templateId,"opt-type":e.templateDialog.optType,"template-categories":e.templateCategories,onRefresh:J,onCloseEditTemplateDialog:le},null,8,["pid","template-id","opt-type","template-categories"])):C("",!0)]),_:1},8,["title","modelValue"]),o(k,{title:s(l)("template_manage.edit_catalog"),modelValue:e.batchOptDialogShow,"onUpdate:modelValue":a[11]||(a[11]=n=>e.batchOptDialogShow=n),"show-close":!0,"destroy-on-close":!0,class:"de-dialog-form",width:"600px"},{default:i(()=>[e.batchOptDialogShow?(u(),w(Se,{key:0,"template-ids":B.value,"template-categories":e.templateCategories,onRefresh:a[10]||(a[10]=n=>y(e.currentTemplateId,e.currentTemplateLabel)),onCloseBatchEditTemplateDialog:ae},null,8,["template-ids","template-categories"])):C("",!0)]),_:1},8,["title","modelValue"])])],64)}}});const ma=Ve(it,[["__scopeId","data-v-20633d03"]]);export{ma as default};

import{o as Y,n as M,j as H,G as J,y as W}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{p as g}from"./index-0.0.0-dataease.js";import{E as X}from"./el-row-0.0.0-dataease.js";import{E as Z}from"./el-col-0.0.0-dataease.js";import{K as N,E as ee}from"./ApiTestModel-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as ae,a as le}from"./el-select-0.0.0-dataease.js";import{i as te}from"./icon_drag_outlined-0.0.0-dataease.js";import{i as oe}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as ne}from"./icon_add_outlined-0.0.0-dataease.js";import{g as $}from"./util-0.0.0-dataease.js";import{d as de}from"./vuedraggable-es-0.0.0-dataease.js";import{d as ue,G as O,t as se,ak as re,Q as ie,f as n,L as m,a6 as R,a0 as i,k as l,i as o,j as d,g as r,Y as V,a9 as k,a5 as pe}from"./vue-0.0.0-dataease.js";import{_ as ce}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./index-0.0.0-dataease3.js";import"./index-0.0.0-dataease16.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";const me={class:"api-variable"},ye={key:0,class:"kv-description"},ve=ue({__name:"ApiVariable",props:{keyPlaceholder:g.string.def(""),valuePlaceholder:g.string.def(""),description:g.string.def(""),type:g.string.def(""),isReadOnly:g.bool.def(!1),parameters:{type:Array,default:()=>[]},valueList:{type:Array,default:()=>[]},suggestions:{type:Array,default:()=>[]}},setup(s){const T=s,{t:u}=Y(),U=O(()=>T.keyPlaceholder||u("datasource.key")),P=O(()=>T.valuePlaceholder||u("datasource.value")),{parameters:p,suggestions:x}=se(T);re(()=>{(p.value.length===0||p.value[p.value.length-1].name)&&p.value.push(new N({type:"text",nameType:"fixed",enable:!0,required:!0,uuid:$(),contentType:"text/plain"}))});const A=t=>{t.type==="file"?t.contentType="application/octet-stream":t.type==="text"?t.contentType="text/plain":t.contentType="application/json"},L=t=>{w()||p.value.splice(t,1)},F=()=>{p.value.push(new N({type:"text",enable:!0,nameType:"fixed",uuid:$(),contentType:"text/plain"}))},w=()=>p.value.length===1,j=(t,y)=>{const b=t?x.value.filter(B(t)):x.value;y(b)},B=t=>y=>y.value.toLowerCase().indexOf(t.toLowerCase())===0,I=t=>{t.value=""},c=ie("api-active-name"),D=[{label:u("data_source.parameter"),value:"params"},{label:u("data_source.page_parameter"),value:"pageParams"},{label:u("data_source.fixed_value"),value:"fixed"},{label:u("data_source.time_function"),value:"timeFun"},{label:u("data_source.customize"),value:"custom"}],S=[{label:"${pageNumber}",value:"${pageNumber}"},{label:"${pageSize}",value:"${pageSize}"},{label:"${pageToken}",value:"${pageToken}"}],z=[{label:u("data_source.that_day")+"（yyyy-MM-dd）",value:"currentDay yyyy-MM-dd"},{label:u("data_source.that_day")+"（yyyy/MM/dd）",value:"currentDay yyyy/MM/dd"}];return(t,y)=>{const b=M,G=H,v=ae,_=le,h=J,K=ee,f=Z,C=W,q=X,Q=M;return n(),m("div",me,[s.description?(n(),m("span",ye,R(s.description),1)):i("",!0),l(d(de),{class:"draggable-content_api",tag:"div",list:d(p),handle:".handle"},{item:o(({element:a,index:E})=>[(n(),m("div",{key:E,style:{"margin-bottom":"16px"}},[l(q,{gutter:8},{default:o(()=>[l(G,{class:"drag handle"},{default:o(()=>[l(b,{name:"icon_drag_outlined"},{default:o(()=>[l(d(te),{class:"svg-icon"})]),_:1})]),_:1}),l(f,{span:6},{default:o(()=>[d(x)?(n(),r(K,{key:1,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:s.isReadOnly,"fetch-suggestions":j,placeholder:U.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):(n(),r(h,{key:0,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:s.isReadOnly,maxlength:"200",placeholder:U.value,"show-word-limit":""},{prepend:o(()=>[s.type==="body"?(n(),r(_,{key:0,modelValue:a.type,"onUpdate:modelValue":e=>a.type=e,disabled:s.isReadOnly,class:"kv-type",onChange:y[0]||(y[0]=e=>A(t.item))},{default:o(()=>[l(v,{value:"text"}),l(v,{value:"json"})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])):i("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","placeholder"]))]),_:2},1024),d(c)==="table"?(n(),r(f,{key:0,span:3},{default:o(()=>[l(_,{modelValue:a.nameType,"onUpdate:modelValue":e=>a.nameType=e,onChange:e=>I(a)},{default:o(()=>[(n(),m(V,null,k(D,e=>l(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)):i("",!0),a.type!=="file"?(n(),r(f,{key:1,span:6},{default:o(()=>[d(c)==="params"?(n(),r(h,{key:0,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,disabled:s.isReadOnly,class:"input-with-autocomplete",placeholder:P.value,"value-key":"name","highlight-first-item":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):i("",!0),!t.needMock&&d(c)==="table"&&a.nameType==="params"?(n(),r(_,{key:1,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:o(()=>[(n(!0),m(V,null,k(s.valueList,e=>(n(),r(v,{key:e.originName,label:e.name,value:e.originName},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):i("",!0),!t.needMock&&d(c)==="table"&&a.nameType==="timeFun"?(n(),r(_,{key:2,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:o(()=>[(n(),m(V,null,k(z,e=>l(v,{key:e.originName,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])):i("",!0),!t.needMock&&d(c)==="table"&&a.nameType==="pageParams"?(n(),r(_,{key:3,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:o(()=>[(n(),m(V,null,k(S,e=>l(v,{key:e.originName,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])):i("",!0),d(c)==="table"&&a.nameType!=="params"&&a.nameType!=="timeFun"&&a.nameType!=="pageParams"?(n(),r(h,{key:4,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,disabled:s.isReadOnly,class:"input-with-autocomplete",placeholder:a.nameType==="fixed"?d(u)("data_source.value"):d(u)("data_source.name_use_parameters"),"value-key":"name","highlight-first-item":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):i("",!0)]),_:2},1024)):i("",!0),l(f,{span:d(c)==="params"?10:7},{default:o(()=>[l(h,{modelValue:a.description,"onUpdate:modelValue":e=>a.description=e,maxlength:"200",placeholder:t.$t("common.description"),"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["span"]),l(f,{span:1},{default:o(()=>[l(C,{class:"api-variable_del",text:"",disabled:w()||s.isReadOnly,onClick:e=>L(E)},{icon:o(()=>[l(b,null,{default:o(()=>[l(d(oe),{class:"svg-icon"})]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]))]),_:1},8,["list"]),l(C,{style:{"margin-top":"14px"},onClick:F,text:""},{icon:o(()=>[l(Q,{name:"icon_add_outlined"},{default:o(()=>[l(d(ne),{class:"svg-icon"})]),_:1})]),default:o(()=>[pe(" "+R(d(u)("data_source.add_parameters")),1)]),_:1})])}}});const De=ce(ve,[["__scopeId","data-v-bcf4a980"]]);export{De as default};

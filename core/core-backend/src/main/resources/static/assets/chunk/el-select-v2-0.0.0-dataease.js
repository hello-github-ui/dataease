import{d as be,f as y,L as w,a6 as F,U as g,V as H,M as $,$ as ve,ab as K,Q as ze,e as me,k,i as L,r as O,G as I,w as te,j as Oe,a4 as We,al as Bt,n as q,I as he,H as Te,as as Ge,Z as rt,o as Nt,ai as Lt,R as Xe,t as Kt,aa as xe,T as Ee,a0 as x,g as P,Y as Pe,a9 as _e,ac as Q,m as je,W as Ht,aI as At,aJ as Rt}from"./vue-0.0.0-dataease.js";import{b as Dt,c as Ft,E as Ut}from"./index-0.0.0-dataease3.js";import{E as Wt}from"./index-0.0.0-dataease16.js";import{h as $e,al as Pt,H as ut,E as jt,aj as Gt,aa as Qt,aM as qt,a6 as Yt,a8 as dt,ak as ct,j as Zt}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as pt}from"./el-checkbox-0.0.0-dataease.js";import{f as ne,R as Jt,o as Xt,_ as xt,a2 as ft,a7 as _t,a1 as el,m as tl}from"./index-0.0.0-dataease.js";import{c as ll,F as nl}from"./fixed-size-list-0.0.0-dataease.js";import{A as et,C as tt,E as al,h as ol,D as sl,m as lt,j as il}from"./el-virtual-list-0.0.0-dataease.js";import{a as A,h as nt,e as rl,k as at}from"./lodash-0.0.0-dataease.js";import{e as ul}from"./strings-0.0.0-dataease.js";import{C as dl}from"./index-0.0.0-dataease4.js";const le=(e,t,a)=>{const{itemSize:s}=e,{items:u,lastVisitedIndex:f}=a;if(t>f){let d=0;if(f>=0){const n=u[f];d=n.offset+n.size}for(let n=f+1;n<=t;n++){const S=s(n);u[n]={offset:d,size:S},d+=S}a.lastVisitedIndex=t}return u[t]},cl=(e,t,a)=>{const{items:s,lastVisitedIndex:u}=t;return(u>0?s[u].offset:0)>=a?mt(e,t,0,u,a):pl(e,t,Math.max(0,u),a)},mt=(e,t,a,s,u)=>{for(;a<=s;){const f=a+Math.floor((s-a)/2),d=le(e,f,t).offset;if(d===u)return f;d<u?a=f+1:d>u&&(s=f-1)}return Math.max(0,a-1)},pl=(e,t,a,s)=>{const{total:u}=e;let f=1;for(;a<u&&le(e,a,t).offset<s;)a+=f,f*=2;return mt(e,t,Math.floor(a/2),Math.min(a,u-1),s)},ot=({total:e},{items:t,estimatedItemSize:a,lastVisitedIndex:s})=>{let u=0;if(s>=e&&(s=e-1),s>=0){const n=t[s];u=n.offset+n.size}const d=(e-s-1)*a;return u+d},fl=ll({name:"ElDynamicSizeList",getItemOffset:(e,t,a)=>le(e,t,a).offset,getItemSize:(e,t,{items:a})=>a[t].size,getEstimatedTotalSize:ot,getOffset:(e,t,a,s,u)=>{const{height:f,layout:d,width:n}=e,S=lt(d)?n:f,E=le(e,t,u),b=ot(e,u),v=Math.max(0,Math.min(b-S,E.offset)),m=Math.max(0,E.offset-S+E.size);switch(a===il&&(s>=m-S&&s<=v+S?a=et:a=tt),a){case ol:return v;case al:return m;case tt:return Math.round(m+(v-m)/2);case et:default:return s>=m&&s<=v?s:s<m?m:v}},getStartIndexForOffset:(e,t,a)=>cl(e,a,t),getStopIndexForStartIndex:(e,t,a,s)=>{const{height:u,total:f,layout:d,width:n}=e,S=lt(d)?n:u,E=le(e,t,s),b=a+S;let v=E.offset+E.size,m=t;for(;m<f-1&&v<b;)m++,v+=le(e,m,s).size;return m},initCache({estimatedItemSize:e=sl},t){const a={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return a.clearCacheAfterIndex=(s,u=!0)=>{var f,d;a.lastVisitedIndex=Math.min(a.lastVisitedIndex,s-1),(f=t.exposed)==null||f.getItemStyleCache(-1),u&&((d=t.proxy)==null||d.$forceUpdate())},a},clearCache:!1,validateProps:({itemSize:e})=>{}}),ml=be({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:ne("select")}}});function vl(e,t,a,s,u,f){return e.item.isTitle?(y(),w("div",{key:0,class:g(e.ns.be("group","title")),style:H([e.style,{lineHeight:`${e.height}px`}])},F(e.item.label),7)):(y(),w("div",{key:1,class:g(e.ns.be("group","split")),style:H(e.style)},[$("span",{class:g(e.ns.be("group","split-dash")),style:H({top:`${e.height/2}px`})},null,6)],6))}var hl=$e(ml,[["render",vl]]);function vt(e,{emit:t}){return{hoverItem:()=>{e.disabled||t("hover",e.index)},selectOptionClick:()=>{e.disabled||t("select",e.item,e.index)}}}const bl={allowCreate:Boolean,autocomplete:{type:String,default:"none"},showChecked:Boolean,radio:Boolean,automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:Jt},effect:{type:String,default:"light"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},teleported:Dt.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:Pt},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},placement:{type:Xt(String),values:Ft,default:"bottom-start"}},ht={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,radio:Boolean,created:Boolean},gl=be({props:ht,emits:["select","hover"],setup(e,{emit:t}){const a=ne("select"),{hoverItem:s,selectOptionClick:u}=vt(e,{emit:t});return{ns:a,hoverItem:s,selectOptionClick:u}}}),yl=["aria-selected"];function Sl(e,t,a,s,u,f){return y(),w("li",{"aria-selected":e.selected,style:H(e.style),class:g([e.ns.be("dropdown","option-item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.radio&&"radio",{hover:e.hovering}]),onMouseenter:t[0]||(t[0]=(...d)=>e.hoverItem&&e.hoverItem(...d)),onClick:t[1]||(t[1]=K((...d)=>e.selectOptionClick&&e.selectOptionClick(...d),["stop"]))},[ve(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[$("span",null,F(e.item.label),1)])],46,yl)}var Vl=$e(gl,[["render",Sl]]);const Il=be({props:ht,components:{ElCheckbox:pt},emits:["select","hover"],setup(e,{emit:t}){const a=ze("displayInputValue"),s=ne("select"),u=S=>{t("select",S)},f=S=>S.replace(a.displayInputValue,`<span style="color: #3370FF;">${a.displayInputValue}</span>`),{hoverItem:d,selectOptionClick:n}=vt(e,{emit:t});return{ns:s,hoverItem:d,replaceFun:f,onSelectCheckbox:u,selectOptionClick:n}}}),Cl=["aria-selected"],kl=["innerHTML"];function wl(e,t,a,s,u,f){const d=me("el-checkbox");return y(),w("li",{"aria-selected":e.selected,style:H(e.style),class:g([e.ns.be("dropdown","option-item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),{hover:e.hovering}]),onMouseenter:t[3]||(t[3]=(...n)=>e.hoverItem&&e.hoverItem(...n)),onClick:t[4]||(t[4]=K(()=>{e.item.checked=!e.item.checked,e.onSelectCheckbox(e.index)},["stop"]))},[ve(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[k(d,{title:e.item.label,onClick:t[0]||(t[0]=K(()=>{},["stop"])),onChange:t[1]||(t[1]=n=>e.onSelectCheckbox(e.index)),modelValue:e.item.checked,"onUpdate:modelValue":t[2]||(t[2]=n=>e.item.checked=n)},{default:L(()=>[$("span",{innerHTML:e.replaceFun(e.item.label)},null,8,kl)]),_:1},8,["title","modelValue"])])],46,Cl)}var Ol=$e(Il,[["render",wl]]);const bt="ElSelectV2Injection";function El(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Bt(e)}var Tl=be({name:"ElSelectDropdown",props:{data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(e,{slots:t,expose:a}){const s=ze(bt),u=ne("select"),f=ze("$custom-style-filter",{}),{t:d}=ut(),n=O([]),S=O(),{props:{modelValue:E,showChecked:b,valueKey:v}}=s,m=O(!1),i=O(!1),D=r=>{m.value=r,e.data.forEach(p=>{p.checked=r}),i.value=!1,Y(0)},T=I(()=>e.data.length);if(te(()=>T.value,()=>{var r,p;b&&C(),(p=(r=s.popper.value).updatePopper)==null||p.call(r)}),te(()=>s.props.modelValue,r=>{var p,V;if(b){e.data.forEach(N=>{N.checked=r.includes(A(N,v))});const M=r.length;m.value=M===T.value,i.value=M>0&&M<T.value}(V=(p=s.popper.value)==null?void 0:p.updatePopper)==null||V.call(p)},{deep:!0}),b){e.data.forEach(p=>{p.checked=E.includes(A(p,v))});const r=E.length;m.value=r===T.value,i.value=r>0&&r<T.value}const Y=r=>{s.onHover(r-1),q(()=>{s.onHover(r),C()})},C=()=>{const r=e.data.filter(p=>p.checked).length;m.value=r===T.value,i.value=r>0&&r<T.value},_=()=>{s.onSelectMultiple((s.props.options||[]).filter(r=>r.checked)),s.handleClickOutside()},Be=()=>{D(!1)},Z=I(()=>xt(s.props.estimatedOptionHeight)),ge=I(()=>Z.value?{itemSize:s.props.itemHeight}:{estimatedSize:s.props.estimatedOptionHeight,itemSize:r=>n.value[r]}),ye=(r=[],p)=>{const{props:{valueKey:V}}=s;return he(p)?r&&r.some(M=>A(M,V)===A(p,V)):r.includes(p)},Ne=(r,p)=>{if(he(p)){const{valueKey:V}=s.props;return A(r,V)===A(p,V)}else return r===p},ae=(r,p)=>{const{valueKey:V}=s.props;return s.props.multiple?ye(r,A(p,V)):Ne(r,A(p,V))},Se=(r,p)=>{const{disabled:V,multiple:M,multipleLimit:N}=s.props;return V||!p&&(M?N>0&&r.length>=N:!1)},oe=r=>e.hoveringIndex===r;a({listRef:S,isSized:Z,isItemDisabled:Se,isItemHovering:oe,isItemSelected:ae,scrollToItem:r=>{const p=S.value;p&&p.scrollToItem(r)},resetScrollTop:()=>{const r=S.value;r&&r.resetScrollTop()}});const Le=r=>{const{index:p,data:V,style:M}=r,N=Oe(Z),{itemSize:j,estimatedSize:J}=Oe(ge),{modelValue:G,showChecked:ie,radio:re}=s.props,{onSelect:Re,onHover:ue}=s,z=V[p];if(z.type==="Group")return k(hl,{item:z,style:M,height:N?j:J},null);const de=ae(G,z),ce=Se(G,de),pe=oe(p);return ie?k(Ol,We(r,{disabled:z.disabled||ce,created:!!z.created,hovering:pe,item:z,onSelect:Y,onHover:ue}),{default:fe=>{var R;return((R=t.default)==null?void 0:R.call(t,fe))||k("span",null,[z.label])}}):k(Vl,We(r,{radio:re,selected:de,disabled:z.disabled||ce,created:!!z.created,hovering:pe,item:z,onSelect:Re,onHover:ue}),{default:fe=>{var R;return((R=t.default)==null?void 0:R.call(t,fe))||k("span",null,[z.label])}})},{onKeyboardNavigate:se,onKeyboardSelect:Ie}=s,Ke=()=>{se("forward")},Ce=()=>{se("backward")},He=()=>{s.expanded=!1},Ae=r=>{const{code:p}=r,{tab:V,esc:M,down:N,up:j,enter:J}=jt;switch(p!==V&&(r.preventDefault(),r.stopPropagation()),p){case V:case M:{He();break}case N:{Ke();break}case j:{Ce();break}case J:{Ie();break}}};return()=>{var r;let p;const{data:V,width:M}=e,{height:N,multiple:j,scrollbarAlwaysOn:J,showChecked:G}=s.props;if(V.length===0)return k("div",{class:u.b("dropdown"),style:{width:`${M}px`}},[(r=t.empty)==null?void 0:r.call(t)]);const ie=Oe(Z)?nl:fl;return k("div",{class:[u.b("dropdown"),u.is("multiple",j)]},[G?k("div",{class:u.b("dropdown__option-item")},[k(pt,{modelValue:m.value,indeterminate:i.value,onChange:D},El(p=d("el.colorpicker.selectAll"))?p:{default:()=>[p]})]):null,k(ie,We({ref:S},Oe(ge),{className:u.be("dropdown","list"),scrollbarAlwaysOn:J,data:V,height:N,width:M,total:V.length,onKeydown:Ae}),{default:re=>k(Le,re,null)}),G?k("div",{class:[u.b("btn-group")],style:ft(f,["border"])},[k("div",{onClick:Be,class:[u.b("btn")],style:{color:"#000000",background:"#ffffff"}},[d("el.datepicker.clear")]),k("div",{onClick:_,class:[u.b("btn")],style:{color:"#ffffff",background:"#3370FF"}},[d("el.datepicker.confirm")])]):null])}}});function Ml(e,t){const a=O(0),s=O(null),u=I(()=>e.allowCreate&&e.filterable);function f(b){const v=m=>m.value===b;return e.options&&e.options.some(v)||t.createdOptions.some(v)}function d(b){u.value&&(e.multiple&&b.created?a.value++:s.value=b)}function n(b){if(u.value)if(b&&b.length>0&&!f(b)){const v={value:b,label:b,created:!0,disabled:!1};t.createdOptions.length>=a.value?t.createdOptions[a.value]=v:t.createdOptions.push(v)}else if(e.multiple)t.createdOptions.length=a.value;else{const v=s.value;t.createdOptions.length=0,v&&v.created&&t.createdOptions.push(v)}}function S(b){if(!u.value||!b||!b.created||b.created&&e.reserveKeyword&&t.inputValue===b.label)return;const v=t.createdOptions.findIndex(m=>m.value===b.value);~v&&(t.createdOptions.splice(v,1),a.value--)}function E(){u.value&&(t.createdOptions.length=0,a.value=0)}return{createNewOption:n,removeNewOption:S,selectNewOption:d,clearAllNewOption:E}}const zl=e=>{const t=[];return e.forEach(a=>{Te(a.options)?(t.push({label:a.label,isTitle:!0,type:"Group"}),a.options.forEach(s=>{t.push(s)}),t.push({type:"Group"})):t.push(a)}),t};function $l(e){const t=O(!1);return{handleCompositionStart:()=>{t.value=!0},handleCompositionUpdate:f=>{const d=f.target.value,n=d[d.length-1]||"";t.value=!Gt(n)},handleCompositionEnd:f=>{t.value&&(t.value=!1,Ge(e)&&e(f))}}}const st="",it=11,Bl={larget:51,default:42,small:33},Nl=(e,t)=>{const{t:a}=ut(),s=ne("select-v2"),u=ne("input"),{form:f,formItem:d}=Qt(),n=rt({inputValue:st,displayInputValue:st,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:void 0,query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),S=O(-1),E=O(-1),b=O(null),v=O(null),m=O(null),i=O(null),D=O(null),T=O(null),Y=O(null),C=O(!1),_=I(()=>e.disabled||(f==null?void 0:f.disabled)),Be=I(()=>{const l=B.value.length*34;return l>e.height?e.height:l}),Z=I(()=>!nt(e.modelValue)),ge=I(()=>{const l=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:Z.value;return e.clearable&&!_.value&&n.comboBoxHovering&&l}),ye=I(()=>e.remote&&e.filterable?"":_t),Ne=I(()=>ye.value&&s.is("reverse",C.value)),ae=I(()=>(d==null?void 0:d.validateState)||""),Se=I(()=>qt[ae.value]),oe=I(()=>e.remote?300:0),Ve=I(()=>{const l=B.value;return e.loading?e.loadingText||a("el.select.loading"):e.remote&&n.inputValue===""&&l.length===0?!1:e.filterable&&n.inputValue&&l.length>0?e.noMatchText||a("el.select.noMatch"):l.length===0?e.noDataText||a("el.select.noData"):null}),B=I(()=>{const l=o=>{const c=n.inputValue,h=new RegExp(ul(c),"i");return c?h.test(o.label||""):!0};return e.loading?[]:zl(e.options.concat(n.createdOptions).map(o=>{if(Te(o.options)){const c=o.options.filter(l);if(c.length>0)return{...o,options:c}}else if(e.remote||l(o))return o;return null}).filter(o=>o!==null))}),Le=I(()=>B.value.every(l=>l.disabled)),se=Yt(),Ie=I(()=>se.value==="small"?"small":"default"),Ke=I(()=>{const l=T.value,o=Ie.value||"default",c=l?Number.parseInt(getComputedStyle(l).paddingLeft):0,h=l?Number.parseInt(getComputedStyle(l).paddingRight):0;return n.selectWidth-h-c-Bl[o]}),Ce=()=>{var l;E.value=((l=D.value)==null?void 0:l.offsetWidth)||200},He=I(()=>({width:`${n.calculatedWidth===0?it:Math.ceil(n.calculatedWidth)+it}px`})),Ae=I(()=>Te(e.modelValue)?e.modelValue.length===0&&!n.displayInputValue:e.filterable?n.displayInputValue.length===0:!0),r=I(()=>{const l=e.placeholder||a("el.select.placeholder");return e.multiple||nt(e.modelValue)?l:n.selectedLabel}),p=I(()=>{var l,o;return(o=(l=i.value)==null?void 0:l.popperRef)==null?void 0:o.contentRef}),V=I(()=>{if(e.multiple){const l=e.modelValue.length;if(e.modelValue.length>0)return B.value.findIndex(o=>o.value===e.modelValue[l-1])}else if(e.modelValue)return B.value.findIndex(l=>l.value===e.modelValue);return-1}),M=I({get(){return C.value&&Ve.value!==!1},set(l){C.value=l}}),{createNewOption:N,removeNewOption:j,selectNewOption:J,clearAllNewOption:G}=Ml(e,n),{handleCompositionStart:ie,handleCompositionUpdate:re,handleCompositionEnd:Re}=$l(l=>Je(l)),ue=()=>{var l,o,c;(o=(l=v.value).focus)==null||o.call(l),(c=i.value)==null||c.updatePopper()},z=()=>{if(!e.automaticDropdown&&!_.value)return n.isComposing&&(n.softFocus=!0),q(()=>{var l,o;C.value=!C.value,(o=(l=v.value)==null?void 0:l.focus)==null||o.call(l)})},de=()=>(e.filterable&&n.inputValue!==n.selectedLabel&&(n.query=n.selectedLabel),pe(n.inputValue),q(()=>{N(n.inputValue)})),ce=rl(de,oe.value),pe=l=>{n.previousQuery!==l&&(n.previousQuery=l,e.filterable&&Ge(e.filterMethod)?e.filterMethod(l):e.filterable&&e.remote&&Ge(e.remoteMethod)&&e.remoteMethod(l))},fe=l=>{at(e.modelValue,l)||t(ct,l)},R=l=>{t(dt,l),fe(l),n.previousValue=l==null?void 0:l.toString()},gt=(l=[],o)=>{if(!he(o))return l.indexOf(o);const c=e.valueKey;let h=-1;return l.some((U,W)=>A(U,c)===A(o,c)?(h=W,!0):!1),h},ee=l=>he(l)?A(l,e.valueKey):l,yt=l=>he(l)?l.label:l,De=()=>{if(!(e.collapseTags&&!e.filterable))return q(()=>{var l,o;if(!v.value)return;const c=T.value;D.value.height=c.offsetHeight,C.value&&Ve.value!==!1&&((o=(l=i.value)==null?void 0:l.updatePopper)==null||o.call(l))})},Qe=()=>{var l,o;if(St(),Ce(),(o=(l=i.value)==null?void 0:l.updatePopper)==null||o.call(l),e.multiple)return De()},St=()=>{const l=T.value;l&&(n.selectWidth=l.getBoundingClientRect().width)},qe=(l,o,c=!0)=>{var h,U;if(e.multiple){let W=e.modelValue.slice();const we=gt(W,ee(l));we>-1?(W=[...W.slice(0,we),...W.slice(we+1)],n.cachedOptions.splice(we,1),j(l)):(e.multipleLimit<=0||W.length<e.multipleLimit)&&(W=[...W,ee(l)],n.cachedOptions.push(l),J(l),X(o)),R(W),l.created&&(n.query="",pe(""),n.inputLength=20),e.filterable&&!e.reserveKeyword&&((U=(h=v.value).focus)==null||U.call(h),ke("")),e.filterable&&(n.calculatedWidth=Y.value.getBoundingClientRect().width),De(),Mt()}else S.value=o,n.selectedLabel=l.label,R(ee(l)),C.value=!1,n.isComposing=!1,n.isSilentBlur=c,J(l),l.created||G(),X(o)},Vt=l=>{const{valueKey:o}=e;let c=[...l.map(h=>A(h,o))];n.cachedOptions=[...l],X(0),R(c)},It=(l,o)=>{const{valueKey:c}=e,h=e.modelValue.indexOf(A(o,c));if(h>-1&&!_.value){const U=[...e.modelValue.slice(0,h),...e.modelValue.slice(h+1)];return n.cachedOptions.splice(h,1),R(U),t("remove-tag",A(o,c)),n.softFocus=!0,j(o),q(ue)}l.stopPropagation()},Ct=l=>{const o=n.isComposing;n.isComposing=!0,n.softFocus?n.softFocus=!1:o||t("focus",l)},Ye=l=>(n.softFocus=!1,q(()=>{var o,c;(c=(o=v.value)==null?void 0:o.blur)==null||c.call(o),Y.value&&(n.calculatedWidth=Y.value.getBoundingClientRect().width),n.isSilentBlur?n.isSilentBlur=!1:n.isComposing&&t("blur",l),n.isComposing=!1})),kt=()=>{n.displayInputValue.length>0?ke(""):C.value=!1},wt=l=>{if(!e.showChecked&&n.displayInputValue.length===0){l.preventDefault();const o=e.modelValue.slice();o.pop(),j(n.cachedOptions.pop()),R(o)}},Ot=()=>{let l;return Te(e.modelValue)?l=[]:l=void 0,n.softFocus=!0,e.multiple?n.cachedOptions=[]:n.selectedLabel="",C.value=!1,R(l),t("clear"),G(),q(ue)},ke=l=>{n.displayInputValue=l,n.inputValue=l},Ze=(l,o=void 0)=>{const c=B.value;if(!["forward","backward"].includes(l)||_.value||c.length<=0||Le.value)return;if(!C.value)return z();o===void 0&&(o=n.hoveringIndex);let h=-1;l==="forward"?(h=o+1,h>=c.length&&(h=0)):l==="backward"&&(h=o-1,(h<0||h>=c.length)&&(h=c.length-1));const U=c[h];if(U.disabled||U.type==="Group")return Ze(l,h);X(h),Fe(h)},Et=()=>{const{showChecked:l}=e;if(!l)if(C.value)~n.hoveringIndex&&B.value[n.hoveringIndex]&&qe(B.value[n.hoveringIndex],n.hoveringIndex,!1);else return z()},X=l=>{n.hoveringIndex=l},Tt=()=>{n.hoveringIndex=-1},Mt=()=>{var l;const o=v.value;o&&((l=o.focus)==null||l.call(o))},Je=l=>{const o=l.target.value;if(ke(o),n.displayInputValue.length>0&&!C.value&&(C.value=!0),n.calculatedWidth=Y.value.getBoundingClientRect().width,e.multiple&&De(),e.remote)ce();else return de()},zt=()=>(C.value=!1,Ye()),$t=()=>(n.inputValue=n.displayInputValue,q(()=>{~V.value&&(X(V.value),Fe(n.hoveringIndex))})),Fe=l=>{m.value.scrollToItem(l)},Ue=()=>{if(Tt(),e.multiple)if(e.modelValue.length>0){let l=!1;n.cachedOptions.length=0,n.previousValue=e.modelValue.toString(),e.modelValue.forEach(o=>{const c=B.value.findIndex(h=>ee(h)===o);~c&&(n.cachedOptions.push(B.value[c]),l||X(c),l=!0)})}else n.cachedOptions=[],n.previousValue=void 0;else if(Z.value){n.previousValue=e.modelValue;const l=B.value,o=l.findIndex(c=>ee(c)===ee(e.modelValue));~o?(n.selectedLabel=l[o].label,X(o)):n.selectedLabel=`${e.modelValue}`}else n.selectedLabel="",n.previousValue=void 0;G(),Ce()};return te(C,l=>{var o,c;t("visible-change",l),l?(c=(o=i.value).update)==null||c.call(o):(n.displayInputValue="",n.previousQuery=null,N(""))}),te(()=>e.modelValue,(l,o)=>{var c;(!l||l.toString()!==n.previousValue)&&Ue(),!at(l,o)&&e.validateEvent&&((c=d==null?void 0:d.validate)==null||c.call(d,"change").catch(h=>el()))},{deep:!0}),te(()=>e.options,()=>{const l=v.value;(!l||l&&document.activeElement!==l)&&Ue()},{deep:!0}),te(B,()=>q(m.value.resetScrollTop)),Nt(()=>{Ue()}),tl(D,Qe),{collapseTagSize:Ie,currentPlaceholder:r,expanded:C,emptyText:Ve,popupHeight:Be,debounce:oe,filteredOptions:B,iconComponent:ye,iconReverse:Ne,inputWrapperStyle:He,popperSize:E,dropdownMenuVisible:M,hasModelValue:Z,shouldShowPlaceholder:Ae,selectDisabled:_,selectSize:se,showClearBtn:ge,states:n,tagMaxWidth:Ke,nsSelectV2:s,nsInput:u,calculatorRef:Y,controlRef:b,inputRef:v,menuRef:m,popper:i,selectRef:D,selectionRef:T,popperRef:p,validateState:ae,validateIcon:Se,debouncedOnInputChange:ce,deleteTag:It,getLabel:yt,getValueKey:ee,handleBlur:Ye,handleClear:Ot,handleClickOutside:zt,handleDel:wt,handleEsc:kt,handleFocus:Ct,handleMenuEnter:$t,handleResize:Qe,toggleMenu:z,scrollTo:Fe,onInput:Je,onKeyboardNavigate:Ze,onKeyboardSelect:Et,onSelect:qe,onSelectMultiple:Vt,onHover:X,onUpdateInputValue:ke,handleCompositionStart:ie,handleCompositionEnd:Re,handleCompositionUpdate:re}},Ll=be({name:"ElSelectV2",components:{ElSelectMenu:Tl,ElTag:Wt,ElTooltip:Ut,ElIcon:Zt},directives:{ClickOutside:dl,ModelText:Lt},props:bl,emits:[dt,ct,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const a=Nl(e,t);Xe(bt,{props:rt({...Kt(e),height:a.popupHeight}),displayInputValue:a.states,popper:a.popper,onSelect:a.onSelect,onSelectMultiple:a.onSelectMultiple,onHover:a.onHover,handleClickOutside:a.handleClickOutside,onKeyboardNavigate:a.onKeyboardNavigate,onKeyboardSelect:a.onKeyboardSelect}),Xe("displayInputValue",a.states);const s=ze("$custom-style-filter",{});return{...a,customStyle:s,formatterStyle:ft}}}),Kl={key:0},Hl=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],Al=["textContent"],Rl=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],Dl=["textContent"];function Fl(e,t,a,s,u,f){const d=me("el-tag"),n=me("el-tooltip"),S=me("el-icon"),E=me("el-select-menu"),b=xe("model-text"),v=xe("click-outside");return Ee((y(),w("div",{ref:"selectRef",class:g([e.nsSelectV2.b(),e.nsSelectV2.m(e.selectSize)]),onClick:t[25]||(t[25]=K((...m)=>e.toggleMenu&&e.toggleMenu(...m),["stop"])),onMouseenter:t[26]||(t[26]=m=>e.states.comboBoxHovering=!0),onMouseleave:t[27]||(t[27]=m=>e.states.comboBoxHovering=!1)},[k(n,{ref:"popper",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelectV2.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,placement:e.placement,"show-arrow":!1,pure:"",transition:`${e.nsSelectV2.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,onBeforeShow:e.handleMenuEnter,onHide:t[24]||(t[24]=m=>e.states.inputValue=e.states.displayInputValue)},{default:L(()=>{var m;return[$("div",{ref:"selectionRef",class:g([e.nsSelectV2.e("wrapper"),e.nsSelectV2.is("focused",e.states.isComposing||e.expanded),e.nsSelectV2.is("hovering",e.states.comboBoxHovering),e.nsSelectV2.is("filterable",e.filterable),e.nsSelectV2.is("disabled",e.selectDisabled)]),style:H(e.formatterStyle(e.customStyle,["background","border"]))},[e.$slots.prefix?(y(),w("div",Kl,[ve(e.$slots,"prefix")])):x("v-if",!0),e.multiple?(y(),w("div",{key:1,class:g(e.nsSelectV2.e("selection"))},[e.collapseTags&&e.modelValue.length>0?(y(),w("div",{key:0,class:g(e.nsSelectV2.e("selected-item"))},[k(d,{closable:!e.selectDisabled&&!((m=e.states.cachedOptions[0])!=null&&m.disable)&&!e.showChecked,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:t[0]||(t[0]=i=>e.deleteTag(i,e.states.cachedOptions[0]))},{default:L(()=>{var i;return[$("span",{class:g(e.nsSelectV2.e("tags-text")),style:H({maxWidth:`${e.tagMaxWidth}px`})},F((i=e.states.cachedOptions[0])==null?void 0:i.label),7)]}),_:1},8,["closable","size"]),e.modelValue.length>1?(y(),P(d,{key:0,closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""},{default:L(()=>[e.collapseTagsTooltip?(y(),P(n,{key:0,disabled:e.dropdownMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,"show-arrow":!1,placement:"bottom",teleported:!1},{default:L(()=>[$("span",{class:g(e.nsSelectV2.e("tags-text")),style:H({maxWidth:`${e.tagMaxWidth}px`})},"+ "+F(e.modelValue.length-1),7)]),content:L(()=>[$("div",{class:g(e.nsSelectV2.e("selection"))},[(y(!0),w(Pe,null,_e(e.states.cachedOptions.slice(1),(i,D)=>(y(),w("div",{key:D,class:g(e.nsSelectV2.e("selected-item"))},[(y(),P(d,{key:e.getValueKey(i),closable:!e.selectDisabled&&!i.disabled&&!e.showChecked,size:e.collapseTagSize,class:"in-tooltip",type:"info","disable-transitions":"",onClose:T=>e.deleteTag(T,i)},{default:L(()=>[$("span",{class:g(e.nsSelectV2.e("tags-text")),style:H({maxWidth:`${e.tagMaxWidth}px`})},F(e.getLabel(i)),7)]),_:2},1032,["closable","size","onClose"]))],2))),128))],2)]),_:1},8,["disabled","effect"])):(y(),w("span",{key:1,class:g(e.nsSelectV2.e("tags-text")),style:H({maxWidth:`${e.tagMaxWidth}px`})},"+ "+F(e.modelValue.length-1),7))]),_:1},8,["size"])):x("v-if",!0)],2)):(y(!0),w(Pe,{key:1},_e(e.states.cachedOptions,(i,D)=>(y(),w("div",{key:D,class:g(e.nsSelectV2.e("selected-item"))},[(y(),P(d,{key:e.getValueKey(i),closable:!e.selectDisabled&&!i.disabled&&!e.showChecked,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:T=>e.deleteTag(T,i)},{default:L(()=>[$("span",{class:g(e.nsSelectV2.e("tags-text")),style:H({maxWidth:`${e.tagMaxWidth}px`})},F(e.getLabel(i)),7)]),_:2},1032,["closable","size","onClose"]))],2))),128)),$("div",{class:g([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")]),style:H(e.inputWrapperStyle)},[Ee($("input",{id:e.id,ref:"inputRef",autocomplete:e.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-labelledby":e.label,class:g([e.nsSelectV2.is(e.selectSize),e.nsSelectV2.e("combobox-input")]),disabled:e.disabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,unselectable:e.expanded?"on":void 0,"onUpdate:modelValue":t[1]||(t[1]=(...i)=>e.onUpdateInputValue&&e.onUpdateInputValue(...i)),onFocus:t[2]||(t[2]=(...i)=>e.handleFocus&&e.handleFocus(...i)),onBlur:t[3]||(t[3]=(...i)=>e.handleBlur&&e.handleBlur(...i)),onInput:t[4]||(t[4]=(...i)=>e.onInput&&e.onInput(...i)),onCompositionstart:t[5]||(t[5]=(...i)=>e.handleCompositionStart&&e.handleCompositionStart(...i)),onCompositionupdate:t[6]||(t[6]=(...i)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...i)),onCompositionend:t[7]||(t[7]=(...i)=>e.handleCompositionEnd&&e.handleCompositionEnd(...i)),onKeydown:[t[8]||(t[8]=Q(K(i=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),t[9]||(t[9]=Q(K(i=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),t[10]||(t[10]=Q(K((...i)=>e.onKeyboardSelect&&e.onKeyboardSelect(...i),["stop","prevent"]),["enter"])),t[11]||(t[11]=Q(K((...i)=>e.handleEsc&&e.handleEsc(...i),["stop","prevent"]),["esc"])),t[12]||(t[12]=Q(K((...i)=>e.handleDel&&e.handleDel(...i),["stop"]),["delete"]))]},null,42,Hl),[[b,e.states.displayInputValue]]),e.filterable?(y(),w("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:g(e.nsSelectV2.e("input-calculator")),textContent:F(e.states.displayInputValue)},null,10,Al)):x("v-if",!0)],6)],2)):(y(),w(Pe,{key:2},[$("div",{class:g([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")])},[Ee($("input",{id:e.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":e.label,"aria-expanded":e.expanded,autocapitalize:"off",autocomplete:e.autocomplete,class:g(e.nsSelectV2.e("combobox-input")),disabled:e.disabled,name:e.name,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",style:H(e.formatterStyle(e.customStyle,["text"])),unselectable:e.expanded?"on":void 0,onCompositionstart:t[13]||(t[13]=(...i)=>e.handleCompositionStart&&e.handleCompositionStart(...i)),onCompositionupdate:t[14]||(t[14]=(...i)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...i)),onCompositionend:t[15]||(t[15]=(...i)=>e.handleCompositionEnd&&e.handleCompositionEnd(...i)),onFocus:t[16]||(t[16]=(...i)=>e.handleFocus&&e.handleFocus(...i)),onBlur:t[17]||(t[17]=(...i)=>e.handleBlur&&e.handleBlur(...i)),onInput:t[18]||(t[18]=(...i)=>e.onInput&&e.onInput(...i)),onKeydown:[t[19]||(t[19]=Q(K(i=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),t[20]||(t[20]=Q(K(i=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),t[21]||(t[21]=Q(K((...i)=>e.onKeyboardSelect&&e.onKeyboardSelect(...i),["stop","prevent"]),["enter"])),t[22]||(t[22]=Q(K((...i)=>e.handleEsc&&e.handleEsc(...i),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":t[23]||(t[23]=(...i)=>e.onUpdateInputValue&&e.onUpdateInputValue(...i))},null,46,Rl),[[b,e.states.displayInputValue]])],2),e.filterable?(y(),w("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:g([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-calculator")]),textContent:F(e.states.displayInputValue)},null,10,Dl)):x("v-if",!0)],64)),e.shouldShowPlaceholder?(y(),w("span",{key:3,class:g([e.nsSelectV2.e("placeholder"),e.nsSelectV2.is("transparent",e.multiple?e.modelValue.length===0:!e.hasModelValue)]),style:H(e.formatterStyle(e.customStyle,["text"]))},F(e.currentPlaceholder),7)):x("v-if",!0),$("span",{class:g(e.nsSelectV2.e("suffix"))},[e.iconComponent?Ee((y(),P(S,{key:0,class:g([e.nsSelectV2.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:L(()=>[(y(),P(je(e.iconComponent)))]),_:1},8,["class"])),[[Ht,!e.showClearBtn]]):x("v-if",!0),e.showClearBtn&&e.clearIcon?(y(),P(S,{key:1,class:g([e.nsSelectV2.e("caret"),e.nsInput.e("icon")]),onClick:K(e.handleClear,["prevent","stop"])},{default:L(()=>[(y(),P(je(e.clearIcon)))]),_:1},8,["class","onClick"])):x("v-if",!0),e.validateState&&e.validateIcon?(y(),P(S,{key:2,class:g([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:L(()=>[(y(),P(je(e.validateIcon)))]),_:1},8,["class"])):x("v-if",!0)],2)],6)]}),content:L(()=>[k(E,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},{default:L(m=>[ve(e.$slots,"default",At(Rt(m)))]),empty:L(()=>[ve(e.$slots,"empty",{},()=>[$("p",{class:g(e.nsSelectV2.e("empty"))},F(e.emptyText?e.emptyText:""),3)])]),_:3},8,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","effect","placement","transition","persistent","onBeforeShow"])],34)),[[v,e.handleClickOutside,e.popperRef]])}var Me=$e(Ll,[["render",Fl]]);Me.install=e=>{e.component(Me.name,Me)};const Ul=Me,_l=Ul;export{_l as E};

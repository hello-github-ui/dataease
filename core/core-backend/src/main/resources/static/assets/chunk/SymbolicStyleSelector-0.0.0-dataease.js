import"./index-0.0.0-dataease.js";import{o as Y,D as V,n as q,j as Z,G as H}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as K}from"./el-slider-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as Q}from"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import{E as X}from"./el-row-0.0.0-dataease.js";import{E as ee}from"./el-col-0.0.0-dataease.js";import{a as te}from"./el-form-item-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as ae,a as le}from"./el-select-0.0.0-dataease.js";import{b as x}from"./chart-0.0.0-dataease.js";import{x as z}from"./util-0.0.0-dataease2.js";import{e as oe,d as U,z as se}from"./lodash-0.0.0-dataease.js";import{E as me}from"./index-0.0.0-dataease3.js";import{d as ie,Z as ne,r as re,G as ce,w as pe,o as de,e as L,f as g,L as v,k as l,i as o,U as r,M as c,a6 as b,j as S,aw as ue,Y as fe,a9 as ye,g as be,a0 as F}from"./vue-0.0.0-dataease.js";import{_ as Se}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./index-0.0.0-dataease17.js";import"./row-0.0.0-dataease.js";import"./index-0.0.0-dataease16.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./formatter-0.0.0-dataease.js";import"./chart-0.0.0-dataease2.js";import"./app-0.0.0-dataease.js";const _e={style:{width:"100%"}},he={key:0,class:"map-flow-style"},ge={class:"data-area-label"},ve={style:{"margin-right":"4px"}},Fe={class:"alpha-setting"},Ie={class:"alpha-setting"},ke={key:1,class:"alpha-setting"},Ve={key:2,class:"alpha-setting"},ze=ie({__name:"SymbolicStyleSelector",props:{chart:{},themes:{default:"dark"},propertyInner:{}},emits:["onBasicStyleChange","onMiscChange"],setup(B,{emit:O}){const d=B,{t:m}=Y(),W=t=>{var e;return(e=d.propertyInner)==null?void 0:e.includes(t)},$=O,a=ne({basicStyleForm:JSON.parse(JSON.stringify(x)),customColor:null,colorIndex:0,fieldColumnWidth:{fieldId:"",width:0},fileList:[]}),u=(t,e=!1)=>{$("onBasicStyleChange",{data:a.basicStyleForm,requestData:e},t)},C=re(),A=["image/svg+xml","image/jpeg","image/png"],N=[{name:m("chart.line_symbol_circle"),value:"circle"},{name:m("chart.line_symbol_rect"),value:"square"},{name:m("chart.line_symbol_triangle"),value:"triangle"},{name:m("chart.map_symbol_pentagon"),value:"pentagon"},{name:m("chart.map_symbol_hexagon"),value:"hexagon"},{name:m("chart.map_symbol_octagon"),value:"octogon"},{name:m("chart.line_symbol_diamond"),value:"rhombus"},{name:m("commons.custom"),value:"custom"}],D=async t=>{var f;const e=t.raw;let i=!0;if(A.includes(e.type)||(V.error(m("chart.symbolic_error_icon")),i=!1),e.size/1024/1024>1&&(V.error(m("chart.symbolic_error_size")),i=!1),i)if(e.type==="image/svg+xml")a.basicStyleForm.customIcon=await e.text(),u("customIcon");else{const n=new FileReader;n.onloadend=()=>{a.basicStyleForm.customIcon=n.result,u("customIcon")},n.readAsDataURL(e)}else{(f=C.value)==null||f.clearFiles(),a.fileList.splice(0);const n=a.basicStyleForm.customIcon;if(n){let _="";n.startsWith("data")?_=n:_=z(n),_&&(a.fileList[0]={url:_})}}},R=()=>{const{mapSymbol:t,customIcon:e}=a.basicStyleForm;if(t==="custom"&&e){let i;e.startsWith("data")?i=e:i=z(a.basicStyleForm.customIcon),i&&(a.fileList[0]={url:i})}u("mapSymbol")},I=ce(()=>{let{extBubble:t}=JSON.parse(JSON.stringify(d.chart));return["symbolic-map"].includes(d.chart.type)&&(t==null?void 0:t.length)>0}),E=t=>{const{mapSymbolSizeMax:e="0",mapSymbolSizeMin:i="1"}=a.basicStyleForm;let f=parseInt(e),n=parseInt(i);if(a.basicStyleForm.mapSymbolSizeMin=Math.max(n,0),a.basicStyleForm.mapSymbolSizeMax=Math.max(f,1),f<n){V.warning(m("chart.symbolic_error_range"));return}u(t)},M=()=>{var e;const t=U(d.chart.customAttr.basicStyle);if(t.mapSymbol==="custom"&&a.basicStyleForm.customIcon!==t.customIcon){let i;(e=t.customIcon)!=null&&e.startsWith("data")?i=t.customIcon:i=z(t.customIcon),i&&(a.fileList[0]={url:i})}a.basicStyleForm=se(t,U(x)),a.customColor||(a.customColor=a.basicStyleForm.colors[0],a.colorIndex=0)},j=oe(M,500);return pe([()=>d.chart.customAttr.basicStyle,()=>d.chart.xAxis,()=>d.chart.yAxis],j,{deep:!0}),de(()=>{M()}),(t,e)=>{const i=L("icon_info_outlined"),f=q,n=Z,_=me,T=ae,J=le,y=te,p=ee,h=X,P=L("Plus"),G=Q,k=K,w=H;return g(),v("div",_e,[W("symbolicMapStyle")?(g(),v("div",he,[l(h,{style:{flex:"1"}},{default:o(()=>[l(p,null,{default:o(()=>[l(y,{class:r(["form-item","form-item-"+t.themes])},{label:o(()=>[c("span",ge,[c("span",ve,b(S(m)("chart.symbolic_shape")),1),l(_,{class:"item",effect:"dark",placement:"bottom"},ue({default:o(()=>[l(n,{class:r(["hint-icon",{"hint-icon--dark":t.themes==="dark"}])},{default:o(()=>[l(f,{name:"icon_info_outlined"},{default:o(()=>[l(i,{class:"svg-icon"})]),_:1})]),_:1},8,["class"])]),_:2},[a.basicStyleForm.mapSymbol==="custom"?{name:"content",fn:o(()=>[c("div",null,b(S(m)("chart.symbolic_upload_hint")),1)]),key:"0"}:void 0]),1024)])]),default:o(()=>[l(J,{effect:t.themes,modelValue:a.basicStyleForm.mapSymbol,"onUpdate:modelValue":e[0]||(e[0]=s=>a.basicStyleForm.mapSymbol=s),onChange:e[1]||(e[1]=s=>R())},{default:o(()=>[(g(),v(fe,null,ye(N,s=>l(T,{key:s.name,label:s.name,value:s.value},null,8,["label","value"])),64))]),_:1},8,["effect","modelValue"])]),_:1},8,["class"])]),_:1})]),_:1}),a.basicStyleForm.mapSymbol==="custom"?(g(),be(h,{key:0,style:{flex:"1"}},{default:o(()=>[l(p,null,{default:o(()=>[l(y,{class:r(["form-item uploader","form-item-"+t.themes])},{default:o(()=>[c("div",{class:r(["avatar-uploader-container",`img-area_${t.themes}`])},[l(G,{action:"#",accept:".svg,.png,.jpeg,.jpg",class:"avatar-uploader","list-type":"picture-card",ref_key:"iconUpload",ref:C,effect:t.themes,"auto-upload":!1,"file-list":a.fileList,"on-change":D,limit:1},{default:o(()=>[l(n,null,{default:o(()=>[l(P)]),_:1})]),_:1},8,["effect","file-list"])],2)]),_:1},8,["class"])]),_:1})]),_:1})):F("",!0),c("div",Fe,[c("label",{class:r(["alpha-label",{dark:t.themes==="dark"}])},b(S(m)("chart.size")),3),l(h,{style:{flex:"1"}},{default:o(()=>[l(p,null,{default:o(()=>[l(y,{class:r(["form-item alpha-slider","form-item-"+t.themes])},{default:o(()=>[l(k,{effect:t.themes,min:1,max:40,modelValue:a.basicStyleForm.mapSymbolSize,"onUpdate:modelValue":e[2]||(e[2]=s=>a.basicStyleForm.mapSymbolSize=s),onChange:e[3]||(e[3]=s=>u("mapSymbolSize")),disabled:I.value},null,8,["effect","modelValue","disabled"])]),_:1},8,["class"])]),_:1})]),_:1})]),c("div",Ie,[c("label",{class:r(["alpha-label",{dark:t.themes==="dark"}])},b(S(m)("chart.size"))+b(S(m)("chart.symbolic_range")),3),l(h,{style:{flex:"1"}},{default:o(()=>[l(p,{span:11},{default:o(()=>[l(y,{class:r(["form-item alpha-slider","form-item-"+t.themes])},{default:o(()=>[l(w,{type:"number",effect:t.themes,modelValue:a.basicStyleForm.mapSymbolSizeMin,"onUpdate:modelValue":e[4]||(e[4]=s=>a.basicStyleForm.mapSymbolSizeMin=s),class:"basic-input-number",controls:!1,onBlur:e[5]||(e[5]=s=>E("mapSymbolSizeMin")),disabled:!I.value},null,8,["effect","modelValue","disabled"])]),_:1},8,["class"])]),_:1}),l(p,{span:1.2},{default:o(()=>e[12]||(e[12]=[c("span",null,"-",-1)])),_:1}),l(p,{span:11},{default:o(()=>[l(y,{class:r(["form-item alpha-slider","form-item-"+t.themes])},{default:o(()=>[l(w,{type:"number",effect:t.themes,modelValue:a.basicStyleForm.mapSymbolSizeMax,"onUpdate:modelValue":e[6]||(e[6]=s=>a.basicStyleForm.mapSymbolSizeMax=s),class:"basic-input-number",controls:!1,onBlur:e[7]||(e[7]=s=>E("mapSymbolSizeMax")),disabled:!I.value},null,8,["effect","modelValue","disabled"])]),_:1},8,["class"])]),_:1})]),_:1})]),a.basicStyleForm.mapSymbol!=="custom"?(g(),v("div",ke,[c("label",{class:r(["alpha-label",{dark:t.themes==="dark"}])},b(S(m)("chart.not_alpha")),3),l(h,{style:{flex:"1"}},{default:o(()=>[l(p,null,{default:o(()=>[l(y,{class:r(["form-item alpha-slider","form-item-"+t.themes])},{default:o(()=>[l(k,{effect:t.themes,min:1,max:10,modelValue:a.basicStyleForm.mapSymbolOpacity,"onUpdate:modelValue":e[8]||(e[8]=s=>a.basicStyleForm.mapSymbolOpacity=s),onChange:e[9]||(e[9]=s=>u("mapSymbolOpacity"))},null,8,["effect","modelValue"])]),_:1},8,["class"])]),_:1})]),_:1})])):F("",!0),a.basicStyleForm.mapSymbol!=="custom"?(g(),v("div",Ve,[c("label",{class:r(["alpha-label",{dark:t.themes==="dark"}])},b(S(m)("visualization.borderWidth")),3),l(h,{style:{flex:"1"}},{default:o(()=>[l(p,null,{default:o(()=>[l(y,{class:r(["form-item alpha-slider","form-item-"+t.themes])},{default:o(()=>[l(k,{effect:t.themes,min:1,max:5,modelValue:a.basicStyleForm.mapSymbolStrokeWidth,"onUpdate:modelValue":e[10]||(e[10]=s=>a.basicStyleForm.mapSymbolStrokeWidth=s),onChange:e[11]||(e[11]=s=>u("mapSymbolStrokeWidth"))},null,8,["effect","modelValue"])]),_:1},8,["class"])]),_:1})]),_:1})])):F("",!0)])):F("",!0)])}}});const ot=Se(ze,[["__scopeId","data-v-adfb7ad2"]]);export{ot as default};

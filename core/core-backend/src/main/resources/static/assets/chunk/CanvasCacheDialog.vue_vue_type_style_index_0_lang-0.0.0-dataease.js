import{z as Fe,w as J,F as ut,B as ve,r as He,o as ge,g as Xe,M as Be,C as ct,v as Ue,N as mt,d as ne,x as et,y as tt,O as pt,P as ft,e as lt,A as _t,h as Oe,K as ht,p as Ie,f as at,a as ot,L as nt,t as vt,Q as gt,R as Ct}from"./element-plus-secondary-0.0.0-dataease.js";import{d as be}from"./dvMain-0.0.0-dataease.js";import{b as yt,a as Re,C as bt,c as wt,d as Vt,F as kt,e as xt,S as St,f as It,g as Et,h as zt,i as Lt,j as $t,k as Tt}from"./chart-0.0.0-dataease.js";import{j as me,h as te,A as Z,l as Nt}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{e as Ce}from"./eventBus-0.0.0-dataease.js";import{s as Le}from"./pinia-0.0.0-dataease.js";import Mt from"./CustomColorStyleSelect-0.0.0-dataease.js";import{e as At}from"./element-resize-detector-0.0.0-dataease.js";import{s as we}from"./snapshot-0.0.0-dataease.js";import{d as Y,r as oe,t as ie,k as se,l as $e,b as Ge,n as Ee,o as d,c as y,a0 as t,_ as l,a as s,u as e,Z as z,z as w,Y as q,a4 as H,a2 as v,a1 as De,S as We,ab as fe,M as ce,W as Q,X as ee,w as Ht,ah as ze,$ as ye,ak as Dt,a3 as je,al as Ft,aa as Ut}from"./@vue-0.0.0-dataease.js";import{_ as le}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import{i as Ae}from"./icon_info_outlined-0.0.0-dataease.js";import{a as Pt,L as Bt,D as Ot,c as Rt}from"./canvasStyle-0.0.0-dataease.js";import{C as Gt,a as Wt}from"./dataVisualization-0.0.0-dataease2.js";import{useAppearanceStoreWithOut as qt}from"./appearance-0.0.0-dataease.js";import{i as Zt}from"./ModelUtil-0.0.0-dataease.js";import{b as jt,u as Ke,i as Qe}from"./imgUtils-0.0.0-dataease.js";import Kt from"./ImgViewDialog-0.0.0-dataease.js";import{e as Qt}from"./lodash-es-0.0.0-dataease.js";import{p as ae,a as Yt}from"./index-0.0.0-dataease.js";import{a as st}from"./chart-list-0.0.0-dataease.js";import{c as Te,a as Ne}from"./canvasUtils-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import{i as Jt}from"./chart-dark-list-0.0.0-dataease.js";import{e as Xt,i as el}from"./MultiplexPreviewShow-0.0.0-dataease.js";import{i as tl}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as ll}from"./icon_rename_outlined-0.0.0-dataease.js";import{i as al}from"./icon_more-vertical_outlined-0.0.0-dataease.js";import{i as ol}from"./icon_dataset-0.0.0-dataease.js";import{g as nl}from"./DeShortcutKey-0.0.0-dataease.js";import{q as sl,u as il}from"./outerParams-0.0.0-dataease.js";import{b as rl,v as dl}from"./dataVisualization-0.0.0-dataease.js";import{_ as ul}from"./HandleMore.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import{f as Ye}from"./attr-0.0.0-dataease20.js";import{E as cl}from"./EmptyBackground-0.0.0-dataease.js";import{i as ml}from"./field-list-0.0.0-dataease.js";import{d as pl}from"./dv-info-0.0.0-dataease.js";const fl={style:{width:"100%",padding:"16px 8px 0"}},_l={class:"alpha-setting"},hl={style:{padding:"0 8px 8px"}},vl=Y({__name:"ComponentColorSelector",props:{themes:{type:String,default:"light"}},emits:["onColorChange"],setup(i,{emit:n}){const{t:g}=me(),o=we(),c=i;let C=oe(!1);const{themes:r}=ie(c),h=n,V=oe(null),a=se(()=>U.value.component.chartColor),L=se(()=>U.value.component.seniorStyleSetting),$=Re,k=$e({basicStyleForm:JSON.parse(JSON.stringify(yt)),customColor:null,colorIndex:0}),D=be(),{canvasStyleData:U}=Le(D),I=()=>{k.customColor=a.value.basicStyle.colors[0],setTimeout(()=>{k.basicStyleForm=U.value.component.chartColor.basicStyle,C.value=!0},1e3);const A=a.value.tableHeader,_=a.value.tableCell;A.tableHeaderFontColor=A.tableHeaderFontColor??_.tableFontColor},M=(A="value")=>{a.value.basicStyle=k.basicStyleForm,f(A)},E=()=>{o.recordSnapshotCache("changePagerColorChange")},f=A=>{a.value.modifyName=A,h("onColorChange",a.value)},S=oe(),R=oe(),T=se(()=>R.value<=240?108:197);return Ge(()=>{var _;I(),Ce.on("onThemeColorChange",I);const A=At();R.value=(_=S.value)==null?void 0:_.offsetWidth,A.listenTo(S.value,()=>{Ee(()=>{var P;R.value=(P=S.value)==null?void 0:P.offsetWidth})})}),(A,_)=>{const P=Fe,W=J,re=ut,j=ve,b=He,_e=ge,Ve=Xe,m=Be,p=ct,x=Ue;return d(),y("div",{style:{width:"100%"},ref_key:"containerRef",ref:S},[t(x,{ref_key:"colorFormRef",ref:V,model:a.value,size:"small",style:{width:"100%","padding-bottom":"8px"}},{default:l(()=>[s("div",fl,[e(C)?(d(),z(Mt,{key:0,class:w(["custom-color-pick",{"custom-dark":e(r)==="dark"}]),modelValue:k,"onUpdate:modelValue":_[0]||(_[0]=u=>k=u),themes:e(r),onChangeBasicStyle:_[1]||(_[1]=u=>M("value"))},null,8,["class","modelValue","themes"])):q("",!0),t(W,{class:w(["form-item","form-item-"+e(r)])},{default:l(()=>[t(P,{size:"small",effect:e(r),modelValue:a.value.basicStyle.gradient,"onUpdate:modelValue":_[2]||(_[2]=u=>a.value.basicStyle.gradient=u),onChange:_[3]||(_[3]=u=>f("gradient"))},{default:l(()=>[H(v(A.$t("chart.gradient"))+v(A.$t("chart.color")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),s("div",_l,[s("label",{class:w(["alpha-label",{dark:e(r)==="dark"}])},v(e(g)("chart.not_alpha")),3),t(_e,{style:{flex:"1"},gutter:8},{default:l(()=>[t(j,{span:13},{default:l(()=>[t(W,{class:w(["form-item alpha-slider","form-item-"+e(r)])},{default:l(()=>[t(re,{effect:e(r),modelValue:a.value.basicStyle.alpha,"onUpdate:modelValue":_[4]||(_[4]=u=>a.value.basicStyle.alpha=u),onChange:_[5]||(_[5]=u=>f("alpha"))},null,8,["effect","modelValue"])]),_:1},8,["class"])]),_:1}),t(j,{span:11},{default:l(()=>[t(W,{style:{"padding-top":"4px"},class:w(["form-item","form-item-"+e(r)])},{default:l(()=>[t(b,{type:"number",effect:e(r),modelValue:a.value.basicStyle.alpha,"onUpdate:modelValue":_[6]||(_[6]=u=>a.value.basicStyle.alpha=u),min:0,max:100,class:"alpha-input-number",controls:!1,onChange:_[7]||(_[7]=u=>f("alpha"))},{suffix:l(()=>_[21]||(_[21]=[H(" % ")])),_:1},8,["effect","modelValue"])]),_:1},8,["class"])]),_:1})]),_:1})]),t(Ve,{class:w(["m-divider","m-divider-"+e(r)])},null,8,["class"])]),t(p,{title:e(g)("visualization.table_color_matching"),name:"table_color_matching",class:w(["inner-collapse",`inner-collapse_${e(r)}`])},{default:l(()=>[s("div",hl,[t(_e,{gutter:8},{default:l(()=>[t(j,{span:12},{default:l(()=>[t(W,{label:e(g)("chart.table_header_bg"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":T.value,modelValue:a.value.tableHeader.tableHeaderBgColor,"onUpdate:modelValue":_[8]||(_[8]=u=>a.value.tableHeader.tableHeaderBgColor=u),size:"small",predefine:e($),"is-custom":"",effect:e(r),onChange:_[9]||(_[9]=u=>f("tableHeaderBgColor"))},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1}),t(j,{span:12},{default:l(()=>[t(W,{label:e(g)("chart.table_item_bg"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":T.value,modelValue:a.value.tableCell.tableItemBgColor,"onUpdate:modelValue":_[10]||(_[10]=u=>a.value.tableCell.tableItemBgColor=u),size:"small",predefine:e($),effect:e(r),"is-custom":"",onChange:_[11]||(_[11]=u=>f("tableItemBgColor"))},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1})]),_:1}),t(_e,{gutter:8},{default:l(()=>[t(j,{span:12},{default:l(()=>[t(W,{label:e(g)("chart.table_header_font_color"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":T.value,modelValue:a.value.tableHeader.tableHeaderFontColor,"onUpdate:modelValue":_[12]||(_[12]=u=>a.value.tableHeader.tableHeaderFontColor=u),effect:e(r),size:"small",predefine:e($),"is-custom":"",onChange:_[13]||(_[13]=u=>f("tableHeaderFontColor"))},null,8,["trigger-width","modelValue","effect","predefine"])]),_:1},8,["label"])]),_:1}),t(j,{span:12},{default:l(()=>[t(W,{label:e(g)("chart.table_item_font_color"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":T.value,modelValue:a.value.tableCell.tableFontColor,"onUpdate:modelValue":_[14]||(_[14]=u=>a.value.tableCell.tableFontColor=u),size:"small",predefine:e($),effect:e(r),"is-custom":"",onChange:_[15]||(_[15]=u=>f("tableFontColor"))},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1})]),_:1}),t(_e,{gutter:8},{default:l(()=>[t(j,{span:12},{default:l(()=>[t(W,{label:e(g)("chart.table_border_color"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":T.value,modelValue:a.value.basicStyle.tableBorderColor,"onUpdate:modelValue":_[16]||(_[16]=u=>a.value.basicStyle.tableBorderColor=u),size:"small",predefine:e($),effect:e(r),"is-custom":"",onChange:_[17]||(_[17]=u=>f("tableBorderColor"))},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1}),t(j,{span:12},{default:l(()=>[t(W,{label:e(g)("chart.table_scroll_bar_color"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":T.value,modelValue:a.value.basicStyle.tableScrollBarColor,"onUpdate:modelValue":_[18]||(_[18]=u=>a.value.basicStyle.tableScrollBarColor=u),size:"small",predefine:e($),"color-format":"rgb",effect:e(r),"show-alpha":"","is-custom":"",onChange:_[19]||(_[19]=u=>f("tableScrollBarColor"))},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1}),t(j,{span:12},{default:l(()=>[t(W,{label:e(g)("components.pager_color"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":T.value,modelValue:L.value.pagerColor,"onUpdate:modelValue":_[20]||(_[20]=u=>L.value.pagerColor=u),size:"small",predefine:e($),"color-format":"rgb",effect:e(r),"show-alpha":"","is-custom":"",onChange:E},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1},8,["title","class"])]),_:1},8,["model"])],512)}}});const yn=le(vl,[["__scopeId","data-v-7d86e2ae"]]),gl={class:"color-button-main"},Cl={class:"text-area"},yl=Y({__name:"ColorButton",props:{colorType:{type:String,default:"light"},label:{type:String,default:null}},emits:["onClick"],setup(i,{emit:n}){const g=n,o=i,{colorType:c,label:C}=ie(o),r=se(()=>C.value===c.value),h=()=>{g("onClick",c.value)};return(V,a)=>(d(),y("div",gl,[s("div",{class:w(["color-button-outer",r.value?"color-button-active":""]),onClick:De(h,["stop"])},[s("div",{class:w(["color-button-inner","color-button-inner-"+e(c)])},null,2)],2),s("span",Cl,[We(V.$slots,"default",{},void 0,!0)])]))}});const Je=le(yl,[["__scopeId","data-v-236340e0"]]),bl={class:"color-btn-text"},wl={class:"color-btn-text"},Vl={class:"data-area-label"},kl={style:{"margin-right":"4px"}},xl={class:"data-area-label"},Sl={style:{"margin-right":"4px"}},Il=Y({__name:"OverallSetting",props:{themes:{type:String,default:"light"}},setup(i){const{t:n}=me(),g=be(),{canvasStyleData:o,dvInfo:c}=Le(g),C=qt(),r=Zt(),h=we(),V=i,a=bt.concat(C.fontList.map(E=>({name:E.name,value:E.name}))),L=se(()=>V.themes==="dark"?"ndark":"dark"),$=se(()=>c.value.type==="dashboard"?n("work_branch.dashboard"):n("work_branch.big_data_screen")),k=E=>{if(E===""||parseFloat(E).toString()==="NaN"||parseFloat(E)<1){o.value.refreshTime=1;return}else parseFloat(E)>3600&&(o.value.refreshTime=3600);I()},D=()=>{C.setCurrentFont(o.value.fontFamily),document.documentElement.style.setProperty("--de-canvas_custom_font",`${o.value.fontFamily}`),Pt(o.value.fontFamily),h.recordSnapshotCache("renderChart")},U=()=>{Ce.emit("event-canvas-size-init"),h.recordSnapshotCache("renderChart")},I=E=>{E==="themeColor"&&(o.value.component.chartCommonStyle.backgroundColorSelect=!0,o.value.backgroundColorSelect=!0,o.value.dashboard.themeColor==="light"?(o.value.backgroundColor=Bt,o.value.component.chartCommonStyle=Z(Gt),o.value.component.chartTitle=Z(wt),o.value.component.chartColor=Z(Vt),o.value.component.filterStyle=Z(kt),o.value.component.tabStyle=Z(xt),o.value.component.seniorStyleSetting=Z(St)):(o.value.backgroundColor=Ot,o.value.component.chartCommonStyle=Z(Wt),o.value.component.chartTitle=Z(It),o.value.component.chartColor=Z(Et),o.value.component.filterStyle=Z(zt),o.value.component.tabStyle=Z(Lt),o.value.component.seniorStyleSetting=Z($t)),Rt()),h.recordSnapshotCache("renderChart")},M=E=>{E!==o.value.dashboard.themeColor?(o.value.dashboard.themeColor=E,I("themeColor")):o.value.dashboard.themeColor=E};return(E,f)=>{const S=et,R=tt,T=pt,A=ft,_=Fe,P=He,W=lt,re=_t,j=Ue;return d(),z(j,{"label-position":"top"},{default:l(()=>[e(c).type==="dashboard"?(d(),z(e(J),{key:0,class:w(["form-item","form-item-"+i.themes]),label:e(n)("visualization.theme_color")},{default:l(()=>[t(e(mt),{size:24},{default:l(()=>[t(Je,{"color-type":"light",label:e(o).dashboard.themeColor,onOnClick:M},{default:l(()=>[s("div",bl,v(e(n)("visualization.theme_color_light")),1)]),_:1},8,["label"]),t(Je,{"color-type":"dark",label:e(o).dashboard.themeColor,onOnClick:M},{default:l(()=>[s("div",wl,v(e(n)("visualization.theme_color_dark")),1)]),_:1},8,["label"])]),_:1})]),_:1},8,["class","label"])):q("",!0),e(c).type==="dashboard"?(d(),z(e(J),{key:1,class:w(["form-item","form-item-"+i.themes]),label:e(n)("visualization.font_family_select")},{default:l(()=>[t(R,{effect:i.themes,modelValue:e(o).fontFamily,"onUpdate:modelValue":f[0]||(f[0]=b=>e(o).fontFamily=b),onChange:f[1]||(f[1]=b=>D())},{default:l(()=>[(d(!0),y(ce,null,fe(e(a),b=>(d(),z(S,{key:b.value,label:b.name,value:b.value},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue"])]),_:1},8,["class","label"])):q("",!0),e(c).type==="dashboard"?(d(),z(e(J),{key:2,class:w(["form-item","form-item-"+i.themes]),label:e(n)("visualization.component_gap")},{default:l(()=>[t(A,{modelValue:e(o).dashboard.gap,"onUpdate:modelValue":f[2]||(f[2]=b=>e(o).dashboard.gap=b),onChange:I},{default:l(()=>[t(T,{effect:i.themes,label:"yes"},{default:l(()=>[H(v(e(n)("visualization.gap")),1)]),_:1},8,["effect"]),t(T,{effect:i.themes,label:"no"},{default:l(()=>[H(v(e(n)("visualization.no_gap")),1)]),_:1},8,["effect"])]),_:1},8,["modelValue"])]),_:1},8,["class","label"])):q("",!0),e(c).type==="dashboard"?(d(),z(e(J),{key:3,class:w(["form-item","form-item-"+i.themes]),label:e(n)("visualization.dashboard_adaptor")},{default:l(()=>[t(A,{modelValue:e(o).dashboardAdaptor,"onUpdate:modelValue":f[3]||(f[3]=b=>e(o).dashboardAdaptor=b),onChange:U},{default:l(()=>[t(T,{effect:i.themes,label:"keepHeightAndWidth"},{default:l(()=>[H(v(e(n)("visualization.scale_keep_height_and_width")),1)]),_:1},8,["effect"]),t(T,{effect:i.themes,label:"withWidth"},{default:l(()=>[H(v(e(n)("visualization.scale_with_width")),1)]),_:1},8,["effect"])]),_:1},8,["modelValue"])]),_:1},8,["class","label"])):q("",!0),t(e(J),{class:w(["form-item","form-item-"+i.themes]),style:{"margin-bottom":"8px"}},{default:l(()=>[t(_,{effect:i.themes,size:"small",modelValue:e(o).refreshViewEnable,"onUpdate:modelValue":f[4]||(f[4]=b=>e(o).refreshViewEnable=b),onChange:I},{default:l(()=>[H(v(e(n)("visualization.refresh_frequency")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),t(e(J),{class:w(["form-item","form-item-"+i.themes]),style:{"padding-left":"20px"}},{default:l(()=>[t(P,{modelValue:e(o).refreshTime,"onUpdate:modelValue":f[6]||(f[6]=b=>e(o).refreshTime=b),effect:i.themes,class:w(["time-input-number",[e(c).type==="dashboard"&&"padding20",i.themes==="dark"&&"dv-dark"]]),type:"number",min:1,max:3600,size:"middle",disabled:!e(o).refreshViewEnable,onChange:k},{append:l(()=>[t(R,{modelValue:e(o).refreshUnit,"onUpdate:modelValue":f[5]||(f[5]=b=>e(o).refreshUnit=b),size:"middle",effect:i.themes,disabled:!e(o).refreshViewEnable,style:{width:"90px"},onChange:I},{default:l(()=>[t(S,{label:e(n)("visualization.minute"),value:"minute"},null,8,["label"]),t(S,{label:e(n)("visualization.second"),value:"second"},null,8,["label"])]),_:1},8,["modelValue","effect","disabled"])]),_:1},8,["modelValue","effect","class","disabled"])]),_:1},8,["class"]),t(e(J),{class:w(["form-item","form-item-"+i.themes]),style:{"margin-bottom":"8px"}},{default:l(()=>[t(_,{effect:i.themes,size:"small",modelValue:e(o).refreshBrowserEnable,"onUpdate:modelValue":f[7]||(f[7]=b=>e(o).refreshBrowserEnable=b),onChange:I},{default:l(()=>[H(v(e(n)("components.overall_refresh")),1)]),_:1},8,["effect","modelValue"]),t(W,{class:"item",effect:L.value,placement:"bottom"},{content:l(()=>[s("div",null,v(e(n)("components.previews_take_effect")),1)]),default:l(()=>[t(e(ne),{class:w(["hint-icon",{"hint-icon--dark":i.themes==="dark"}]),style:{"margin-left":"4px"}},{default:l(()=>[t(te,{name:"icon_info_outlined"},{default:l(()=>[t(e(Ae),{class:"svg-icon"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect"])]),_:1},8,["class"]),t(e(J),{class:w(["form-item","form-item-"+i.themes]),style:{"padding-left":"20px"}},{default:l(()=>[t(P,{modelValue:e(o).refreshBrowserTime,"onUpdate:modelValue":f[9]||(f[9]=b=>e(o).refreshBrowserTime=b),effect:i.themes,class:w(["time-input-number",[e(c).type==="dashboard"&&"padding20",i.themes==="dark"&&"dv-dark"]]),type:"number",min:1,max:3600,size:"middle",disabled:!e(o).refreshBrowserEnable,onChange:k},{append:l(()=>[t(R,{modelValue:e(o).refreshBrowserUnit,"onUpdate:modelValue":f[8]||(f[8]=b=>e(o).refreshBrowserUnit=b),size:"middle",effect:i.themes,disabled:!e(o).refreshBrowserEnable,style:{width:"90px"},onChange:I},{default:l(()=>[t(S,{label:e(n)("visualization.minute"),value:"minute"},null,8,["label"]),t(S,{label:e(n)("visualization.second"),value:"second"},null,8,["label"])]),_:1},8,["modelValue","effect","disabled"])]),_:1},8,["modelValue","effect","class","disabled"])]),_:1},8,["class"]),t(e(J),{class:w(["form-item","form-item-"+i.themes])},{default:l(()=>[t(_,{effect:i.themes,size:"small",modelValue:e(o).refreshViewLoading,"onUpdate:modelValue":f[10]||(f[10]=b=>e(o).refreshViewLoading=b),onChange:I},{default:l(()=>[H(v(e(n)("visualization.enable_view_loading")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),t(e(J),{class:w(["form-item","form-item-"+i.themes]),style:{"margin-bottom":"8px"}},{label:l(()=>[s("span",Vl,[s("span",kl,v(e(n)("visualization.panel_view_result_show")),1),t(W,{class:"item",effect:L.value,placement:"bottom"},{content:l(()=>[s("div",null,v(e(n)("visualization.panel_view_result_tips",[$.value])),1)]),default:l(()=>[t(e(ne),{class:w(["hint-icon",{"hint-icon--dark":i.themes==="dark"}])},{default:l(()=>[t(te,{name:"icon_info_outlined"},{default:l(()=>[t(e(Ae),{class:"svg-icon"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect"])])]),default:l(()=>[t(A,{effect:i.themes,modelValue:e(o).dashboard.resultMode,"onUpdate:modelValue":f[11]||(f[11]=b=>e(o).dashboard.resultMode=b),class:"radio-span",onChange:I},{default:l(()=>[t(T,{label:"all",effect:i.themes},{default:l(()=>[H(v(e(n)("visualization.view")),1)]),_:1},8,["effect"]),t(T,{label:"custom",effect:i.themes},{default:l(()=>[H(v($.value),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),Q(t(e(J),{class:w(["form-item","form-item-"+i.themes])},{default:l(()=>[t(re,{modelValue:e(o).dashboard.resultCount,"onUpdate:modelValue":f[12]||(f[12]=b=>e(o).dashboard.resultCount=b),effect:i.themes,"controls-position":"right",size:"middle",min:1,max:1e4,onChange:I,disabled:e(o).dashboard.resultMode==="all"},null,8,["modelValue","effect","disabled"])]),_:1},8,["class"]),[[ee,e(o).dashboard.resultMode==="custom"]]),Q(t(e(J),{style:{"margin-top":"16px","margin-bottom":"8px"},class:w("form-item-"+i.themes)},{default:l(()=>[t(_,{effect:i.themes,size:"small",modelValue:e(o).suspensionButtonAvailable,"onUpdate:modelValue":f[13]||(f[13]=b=>e(o).suspensionButtonAvailable=b),onChange:I},{default:l(()=>[s("span",xl,[s("span",Sl,v(e(n)("visualization.button_tips")),1),t(W,{class:"item",effect:L.value,placement:"bottom"},{content:l(()=>[s("div",null,v(e(n)("visualization.effective_during_link")),1)]),default:l(()=>[t(e(ne),{class:w(["hint-icon",{"hint-icon--dark":i.themes==="dark"}])},{default:l(()=>[t(te,{name:"icon_info_outlined"},{default:l(()=>[t(e(Ae),{class:"svg-icon"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect"])])]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),[[ee,e(c).type==="dashboard"&&!e(r)]]),Q(t(e(J),{class:w(["form-item","form-item-"+i.themes]),style:{"margin-bottom":"0"}},{default:l(()=>[t(_,{effect:i.themes,size:"small",modelValue:e(o).dashboard.showGrid,"onUpdate:modelValue":f[14]||(f[14]=b=>e(o).dashboard.showGrid=b),onChange:I},{default:l(()=>[H(v(e(n)("visualization.display_auxiliary_grid")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),[[ee,e(c).type==="dashboard"]])]),_:1})}}});const bn=le(Il,[["__scopeId","data-v-f3986465"]]),El={class:"indented-container"},zl={class:"indented-item"},Ll={class:"indented-container"},$l=15e6,Tl=50,Nl=Y({__name:"CanvasBackground",props:{themes:{default:"dark"}},setup(i){const n=we(),{t:g}=me(),o=oe(null),c=be(),{canvasStyleData:C,dvInfo:r}=Le(c),h=$e({BackgroundShowMap:{},checked:!1,backgroundOrigin:{},fileList:[],dialogImageUrl:"",dialogVisible:!1,uploadDisabled:!1,predefineColors:Re}),V=se(()=>{var f,S,R,T;return r.value.watermarkInfo&&((S=(f=r.value.watermarkInfo)==null?void 0:f.settingContent)==null?void 0:S.enable)&&((T=(R=r.value.watermarkInfo)==null?void 0:R.settingContent)==null?void 0:T.enablePanelCustom)}),a=()=>{o.value.click()},L=()=>{Ie.success(g("visualization.pic_size_error"))},$=f=>{const S=f.target.files[0];if(S.size>$l){L();return}Ke(S,R=>{C.value.background=R,h.fileList=[{url:Qe(C.value.background)}],M()})},k=()=>{C.value.background?h.fileList.push({url:Qe(C.value.background)}):h.fileList=[]},D=()=>{h.uploadDisabled=!1,C.value.background=null,h.fileList=[],M()},U=f=>{h.dialogImageUrl=f.url,h.dialogVisible=!0},I=f=>{Ke(f.file,S=>{C.value.background=S,M()})},M=()=>{n.recordSnapshotCache("onBackgroundChange")},E=oe();return Ge(()=>{k()}),Ht(()=>C.value.background,()=>{k()}),(f,S)=>{const R=Fe,T=J,A=Be,_=ze("Plus"),P=ne,W=ht,re=ge,j=Ue;return d(),y("div",{style:{width:"100%"},ref_key:"bgForm",ref:E},[s("input",{id:"input",ref_key:"files",ref:o,type:"file",accept:".jpeg,.jpg,.png,.gif,.svg",hidden:"",onClick:S[0]||(S[0]=b=>{b.target.value=""}),onChange:$},null,544),t(j,{"label-position":"top",style:{width:"100%","margin-bottom":"16px"}},{default:l(()=>[V.value?(d(),z(T,{key:0,class:w(["form-item","form-item-"+f.themes])},{default:l(()=>[t(R,{size:"small",effect:f.themes,modelValue:e(r).selfWatermarkStatus,"onUpdate:modelValue":S[1]||(S[1]=b=>e(r).selfWatermarkStatus=b),onChange:M},{default:l(()=>[H(v(e(g)("visualization.watermark")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"])):q("",!0),t(T,{class:w(["form-item no-margin-bottom","form-item-"+f.themes])},{default:l(()=>[t(R,{size:"small",effect:f.themes,modelValue:e(C).backgroundColorSelect,"onUpdate:modelValue":S[2]||(S[2]=b=>e(C).backgroundColorSelect=b),onChange:M},{default:l(()=>[H(v(e(g)("chart.color")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),s("div",El,[s("div",zl,[t(T,{class:w(["form-item","form-item-"+f.themes])},{default:l(()=>[t(A,{modelValue:e(C).backgroundColor,"onUpdate:modelValue":S[3]||(S[3]=b=>e(C).backgroundColor=b),effect:f.themes,disabled:!e(C).backgroundColorSelect,"trigger-width":Tl,"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:h.predefineColors,onChange:M},null,8,["modelValue","effect","disabled","predefine"])]),_:1},8,["class"])])]),t(T,{class:w(["form-item no-margin-bottom","form-item-"+f.themes])},{default:l(()=>[t(R,{size:"small",effect:f.themes,modelValue:e(C).backgroundImageEnable,"onUpdate:modelValue":S[4]||(S[4]=b=>e(C).backgroundImageEnable=b),onChange:M},{default:l(()=>[H(v(e(g)("visualization.background")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),s("div",Ll,[s("div",{class:w(["indented-item",{disabled:!e(C).backgroundImageEnable}])},[s("div",{class:w(["avatar-uploader-container",`img-area_${f.themes}`])},[t(W,{action:"",effect:f.themes,accept:".jpeg,.jpg,.png,.gif,.svg",class:"avatar-uploader","list-type":"picture-card","on-preview":U,"on-remove":D,"before-upload":e(jt),"http-request":I,"file-list":h.fileList,disabled:!e(C).backgroundImageEnable},{default:l(()=>[t(P,null,{default:l(()=>[t(_)]),_:1})]),_:1},8,["effect","before-upload","file-list","disabled"]),t(re,null,{default:l(()=>[e(C).background?q("",!0):(d(),y("span",{key:0,style:{"margin-top":"2px"},class:w(["image-hint",`image-hint_${f.themes}`])},v(e(g)("visualization.pic_upload_tips2")),3)),e(C).background?(d(),z(e(Oe),{key:1,size:"small",style:{margin:"8px 0 0 -4px"},text:"",onClick:a,disabled:!e(C).backgroundImageEnable},{default:l(()=>[H(v(e(g)("visualization.re_upload")),1)]),_:1},8,["disabled"])):q("",!0)]),_:1})],2),t(Kt,{modelValue:h.dialogVisible,"onUpdate:modelValue":S[5]||(S[5]=b=>h.dialogVisible=b),"image-url":h.dialogImageUrl},null,8,["modelValue","image-url"])],2)])]),_:1})],512)}}});const wn=le(Nl,[["__scopeId","data-v-28a9f4b1"]]),Ml={style:{width:"100%","padding-bottom":"8px"}},Al={style:{width:"100%",padding:"16px 8px 0"}},Hl=Y({__name:"SeniorStyleSetting",props:{themes:{type:String,default:"light"}},setup(i){const{t:n}=me(),g=be(),o=we(),c=se(()=>g.canvasStyleData.component.seniorStyleSetting),C=$e({fontSize:[],isSetting:!1,predefineColors:Re}),r=()=>{},h=()=>{g.canvasStyleData.component.seniorStyleSetting=Qt(c.value),o.recordSnapshotCache("seniorStyleSettingSimpleSelector-themeChange")};return Ge(()=>{Ce.on("onThemeColorChange",r)}),(V,a)=>{const L=Be,$=J,k=ve,D=ge,U=Ue;return d(),y("div",Ml,[t(U,{"label-position":"top",style:{width:"100%"}},{default:l(()=>[s("div",Al,[t(D,{gutter:8},{default:l(()=>[t(k,{span:12},{default:l(()=>[t($,{effect:i.themes,class:w(["form-item","form-item-"+i.themes]),label:e(n)("components.jump_icon_color")},{default:l(()=>[t(L,{effect:i.themes,modelValue:c.value.linkageIconColor,"onUpdate:modelValue":a[0]||(a[0]=I=>c.value.linkageIconColor=I),"trigger-width":100,"is-custom":"",predefine:C.predefineColors,onChange:h},null,8,["effect","modelValue","predefine"])]),_:1},8,["effect","class","label"])]),_:1}),t(k,{span:12},{default:l(()=>[t($,{effect:i.themes,class:w(["form-item","form-item-"+i.themes]),label:e(n)("components.level_display_color")},{default:l(()=>[t(L,{modelValue:c.value.drillLayerColor,"onUpdate:modelValue":a[1]||(a[1]=I=>c.value.drillLayerColor=I),effect:i.themes,"trigger-width":100,"is-custom":"",predefine:C.predefineColors,onChange:h},null,8,["modelValue","effect","predefine"])]),_:1},8,["effect","class","label"])]),_:1})]),_:1})])]),_:1})])}}});const Vn=le(Hl,[["__scopeId","data-v-0cbaedd9"]]),Dl={width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function Fl(i,n){return d(),y("svg",Dl,n[0]||(n[0]=[s("path",{d:"M13.3337 9.52522L17.9468 6.7715C18.0296 6.72207 18.1003 6.66005 18.1579 6.58933C18.2643 6.51383 18.3337 6.38969 18.3337 6.24935V6.16871C18.34 6.11084 18.3401 6.05212 18.3337 5.99359V2.49935C18.3337 2.26923 18.2404 2.0609 18.0896 1.91009C17.9388 1.75929 17.7304 1.66602 17.5003 1.66602H2.50033C2.04009 1.66602 1.66699 2.03911 1.66699 2.49935V6.24935C1.66699 6.37491 1.72254 6.48751 1.81039 6.5639C1.874 6.65742 1.95848 6.73887 2.06184 6.80066L6.66699 9.55366V15.5752C6.66699 15.733 6.75616 15.8773 6.89732 15.9478L12.7307 18.8645C13.0077 19.003 13.3337 18.8016 13.3337 18.4918V9.52522Z"},null,-1)]))}const kn={render:Fl},Ul={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"};function Pl(i,n){return d(),y("svg",Ul,n[0]||(n[0]=[s("path",{d:"M2.49935 2.5C2.03912 2.5 1.66602 2.8731 1.66602 3.33333V16.6667C1.66602 17.1269 2.03912 17.5 2.49935 17.5H17.4993C17.9596 17.5 18.3327 17.1269 18.3327 16.6667V3.33333C18.3327 2.8731 17.9596 2.5 17.4993 2.5H2.49935ZM16.666 4.1666V12.5001L14.8773 10.7113C14.7146 10.5487 14.4508 10.5487 14.288 10.7113L11.9607 13.0387C11.7979 13.2015 11.5341 13.2015 11.3713 13.0387L6.96064 8.628C6.79792 8.46533 6.53411 8.46533 6.37139 8.628L3.33268 11.6667V4.1666H16.666ZM13.3327 6.25C13.1026 6.25 12.916 6.43655 12.916 6.66667V7.91667C12.916 8.14678 13.1026 8.33333 13.3327 8.33333H14.5827C14.8128 8.33333 14.9993 8.14678 14.9993 7.91667V6.66667C14.9993 6.43655 14.8128 6.25 14.5827 6.25H13.3327Z"},null,-1)]))}const xn={render:Pl},Bl={width:"21",height:"20",viewBox:"0 0 21 20",xmlns:"http://www.w3.org/2000/svg"};function Ol(i,n){return d(),y("svg",Bl,n[0]||(n[0]=[s("path",{d:"M8.83342 1.66669H3.00008C2.53984 1.66669 2.16675 2.03978 2.16675 2.50002V8.33335C2.16675 8.79359 2.53984 9.16669 3.00008 9.16669H8.83342C9.29365 9.16669 9.66675 8.79359 9.66675 8.33335V2.50002C9.66675 2.03978 9.29365 1.66669 8.83342 1.66669Z"},null,-1),s("path",{d:"M8.83342 10.8334H3.00008C2.53984 10.8334 2.16675 11.2064 2.16675 11.6667V17.5C2.16675 17.9603 2.53984 18.3334 3.00008 18.3334H8.83342C9.29365 18.3334 9.66675 17.9603 9.66675 17.5V11.6667C9.66675 11.2064 9.29365 10.8334 8.83342 10.8334Z"},null,-1),s("path",{d:"M18.0001 1.66669H12.1667C11.7065 1.66669 11.3334 2.03978 11.3334 2.50002V8.33335C11.3334 8.79359 11.7065 9.16669 12.1667 9.16669H18.0001C18.4603 9.16669 18.8334 8.79359 18.8334 8.33335V2.50002C18.8334 2.03978 18.4603 1.66669 18.0001 1.66669Z"},null,-1),s("path",{d:"M17.9511 10.8334H12.2158C11.7285 10.8334 11.3334 11.2284 11.3334 11.7157V17.451C11.3334 17.9383 11.7285 18.3334 12.2158 18.3334H17.9511C18.4384 18.3334 18.8334 17.9383 18.8334 17.451V11.7157C18.8334 11.2284 18.4384 10.8334 17.9511 10.8334Z"},null,-1)]))}const Sn={render:Ol},Rl={width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function Gl(i,n){return d(),y("svg",Rl,n[0]||(n[0]=[s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.0893 1.91058C17.933 1.7543 17.721 1.6665 17.5 1.6665H2.50002C2.27901 1.6665 2.06705 1.7543 1.91076 1.91058C1.75448 2.06686 1.66669 2.27882 1.66669 2.49984V17.4998C1.66669 17.7209 1.75448 17.9328 1.91076 18.0891C2.06705 18.2454 2.27901 18.3332 2.50002 18.3332H17.5C17.721 18.3332 17.933 18.2454 18.0893 18.0891C18.2456 17.9328 18.3334 17.7209 18.3334 17.4998V2.49984C18.3334 2.27882 18.2456 2.06686 18.0893 1.91058ZM10.8334 5.83323H13.75C13.8605 5.83323 13.9665 5.87713 14.0446 5.95527C14.1228 6.03341 14.1667 6.13939 14.1667 6.2499V7.08323C14.1667 7.19374 14.1228 7.29972 14.0446 7.37786C13.9665 7.456 13.8605 7.4999 13.75 7.4999H10.8334V13.7499C10.8334 13.8046 10.8226 13.8588 10.8016 13.9094C10.7807 13.9599 10.75 14.0058 10.7113 14.0445C10.6726 14.0832 10.6267 14.1139 10.5761 14.1348C10.5256 14.1558 10.4714 14.1666 10.4167 14.1666H9.58335C9.52864 14.1666 9.47446 14.1558 9.4239 14.1348C9.37335 14.1139 9.32742 14.0832 9.28873 14.0445C9.25004 14.0058 9.21934 13.9599 9.1984 13.9094C9.17747 13.8588 9.16669 13.8046 9.16669 13.7499V7.4999H6.25002C6.13951 7.4999 6.03353 7.456 5.95539 7.37786C5.87725 7.29972 5.83335 7.19374 5.83335 7.08323V6.2499C5.83335 6.13939 5.87725 6.03341 5.95539 5.95527C6.03353 5.87713 6.13951 5.83323 6.25002 5.83323H9.16669C9.16669 5.83323 10.8334 5.85657 10.8334 5.83323Z"},null,-1)]))}const In={render:Gl},Wl={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ql(i,n){return d(),y("svg",Wl,n[0]||(n[0]=[s("path",{d:"M9.71952 18.0526C13.8471 18.0526 17.2237 14.8374 17.4815 10.7749C17.499 10.4994 17.2734 10.2748 16.9973 10.2748C14.5714 10.2748 12.1454 10.2748 9.71952 10.2748C9.71952 7.40872 9.71952 4.98267 9.71952 2.99669C9.71952 2.72055 9.49501 2.4954 9.21942 2.51289C5.15692 2.77069 1.94174 6.1473 1.94174 10.2748C1.94174 14.5704 5.42397 18.0526 9.71952 18.0526Z",fill:"#3370FF"},null,-1),s("path",{d:"M12.1306 8.60807C11.7192 8.60807 11.3857 8.2746 11.3857 7.86325V2.49351C11.3857 2.19784 11.6417 1.96535 11.9329 2.01629C15.011 2.55462 17.4392 4.9828 17.9775 8.0609C18.0285 8.35215 17.796 8.60807 17.5003 8.60807H12.1306Z",fill:"#00D6B9"},null,-1)]))}const En={render:ql},Zl={width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function jl(i,n){return d(),y("svg",Zl,n[0]||(n[0]=[s("path",{d:"M6.43791 2.26348L2.3524 6.34898C2.17884 6.52255 2.17884 6.80395 2.3524 6.97752L6.83075 11.4559C7.00431 11.6294 7.28572 11.6294 7.45929 11.4559L8.00926 10.9059C8.18283 10.7323 8.18283 10.4509 8.00926 10.2774L4.9589 7.22552L12.2222 7.22219V7.22698C14.5234 7.22698 16.3889 9.09246 16.3889 11.3937C16.3889 13.6948 14.5234 15.5603 12.2222 15.5603V15.5555L8.9696 15.5597C8.72436 15.5601 8.52573 15.759 8.52573 16.0042V16.782C8.52573 16.9967 8.67808 17.1759 8.8806 17.2174L8.97075 17.2264L12 17.2214L12.2222 17.227C15.4439 17.227 18.0556 14.6153 18.0556 11.3937C18.0556 8.17199 15.4439 5.56032 12.2222 5.56032V5.55552L5.4989 5.55886L7.61642 3.44199C7.78999 3.26842 7.78999 2.98701 7.61642 2.81345L7.06645 2.26348C6.89288 2.08991 6.61148 2.08991 6.43791 2.26348Z"},null,-1)]))}const zn={render:jl},Kl={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"};function Ql(i,n){return d(),y("svg",Kl,n[0]||(n[0]=[s("path",{d:"M11.0036 1.80702L14.272 5.07542C14.4108 5.21428 14.4108 5.4394 14.272 5.57826L10.6893 9.16093C10.5505 9.29978 10.3253 9.29978 10.1865 9.16093L9.7465 8.72095C9.60765 8.5821 9.60765 8.35698 9.7465 8.21812L12.1858 5.77755L6.44444 5.77783C4.60349 5.77783 3.1111 7.27021 3.1111 9.11116C3.1111 10.9521 4.60349 12.4445 6.44444 12.4445H8.97777C9.17414 12.4445 9.33333 12.6037 9.33333 12.8V13.4223C9.33333 13.6186 9.17414 13.7778 8.97777 13.7778H6.22222C3.74827 13.6568 1.77777 11.6141 1.77777 9.11116C1.77777 6.6082 3.74827 4.56548 6.22259 4.44967L6.22222 4.44449L11.7555 4.44421L10.0608 2.74983C9.92192 2.61098 9.92192 2.38585 10.0608 2.247L10.5008 1.80702C10.6396 1.66817 10.8647 1.66817 11.0036 1.80702Z"},null,-1)]))}const Ln={render:Ql},Yl=Y({__name:"ComponentButton",props:{title:ae.string,tips:ae.string,iconName:ae.string,showSplitLine:ae.bool,active:ae.bool},emits:["customClick"],setup(i,{emit:n}){const g=i,{title:o,tips:c,iconName:C,showSplitLine:r}=ie(g),h=n;return(V,a)=>{const L=ne,$=ge;return d(),z($,{class:w(["group_icon",{"group-right-border":e(r)}]),title:e(c),onClick:a[0]||(a[0]=k=>h("customClick"))},{default:l(()=>[t(e(ve),{span:24,class:w(["group_inner",{"inner-active":i.active}])},{default:l(()=>[t(L,{class:"toolbar-icon"},{default:l(()=>[t(te,null,{default:l(()=>[(d(),z(ye(e(C))))]),_:1})]),_:1}),s("span",null,v(e(o)),1)]),_:1},8,["class"])]),_:1},8,["title","class"])}}});const Jl=le(Yl,[["__scopeId","data-v-76dbcc8d"]]),Xl={class:"flex-align-center"},ea=Y({__name:"ComponentButtonLabel",props:{title:ae.string,tips:ae.string,iconName:ae.string,showSplitLine:ae.bool,active:ae.bool},emits:["customClick"],setup(i,{emit:n}){const g=i,{title:o,tips:c,iconName:C,showSplitLine:r}=ie(g),h=n;return(V,a)=>{const L=ge,$=Xe;return d(),y("div",Xl,[t(L,{class:"group_icon",title:e(c),onClick:a[0]||(a[0]=k=>h("customClick"))},{default:l(()=>[t(e(ve),{span:24,class:w(["group_inner",{"inner-active":i.active}])},{default:l(()=>[t(te,null,{default:l(()=>[(d(),z(ye(e(C)),{class:"svg-icon toolbar-icon"}))]),_:1}),s("span",null,v(e(o)),1)]),_:1},8,["class"])]),_:1},8,["title"]),e(r)?(d(),z($,{key:0,class:"group-right-border",direction:"vertical"})):q("",!0)])}}});const ta=le(ea,[["__scopeId","data-v-b11d2d41"]]),$n=Y({__name:"ComponentGroup",props:{title:ae.string,iconName:ae.string,showSplitLine:ae.bool,baseWidth:{required:!1,type:Number,default:200},isLabel:ae.bool.def(!1),themes:{type:String,default:"dark"},placement:{type:String,default:"bottom-start"}},setup(i){const n=i,{title:g,iconName:o,baseWidth:c,themes:C}=ie(n);return(r,h)=>{const V=at;return d(),z(V,{placement:i.placement,width:e(c),trigger:"click","show-arrow":!1,"popper-class":"custom-popover-"+e(C)},{reference:l(()=>[(d(),z(ye(i.isLabel?ta:Jl),{title:e(g),"icon-name":e(o),"show-split-line":i.showSplitLine},null,8,["title","icon-name","show-split-line"]))]),default:l(()=>[We(r.$slots,"default")]),_:3},8,["placement","width","popper-class"])}}}),la={class:"group-left"},aa={class:"ul-custom"},oa=["onClick"],na=["onClick","data-id","title"],sa=["title"],ia=Y({__name:"UserViewGroup",props:{propValue:{type:Array,default:()=>[]},dvModel:{type:String,default:"dv"},element:{type:Object,default(){return{propValue:null}}},themes:{type:String,default:"dark"}},setup(i){const n=i,{dvModel:g}=ie(n),o=oe(),c=$e({curCategory:"quota",chartGroupList:Tt}),C=k=>{o==null||o.value.setScrollTop(k)},r=k=>{const D=document.querySelector(k);C(D.offsetTop)},h=(k,D)=>{Ce.emit("handleNew",{componentName:"UserView",innerType:k,staticMap:D})},V=k=>{Te(k,g.value)},a=k=>{Ne(k,g.value)},L=k=>{c.curCategory=k,r("#"+k)},$=k=>{k.forEach(D=>{const{category:U,title:I,render:M,chartValue:E,chartTitle:f,icon:S,staticMap:R}=D,T={render:M,category:U,icon:S,value:E,title:f,isPlugin:!0,staticMap:R},A=[...c.chartGroupList];let _=!1;for(;A!=null&&A.length;){const P=A.pop();P.category===U&&(P.details.find(re=>re.value===T.value)||P.details.push(T),_=!0)}_||c.chartGroupList.push({category:U,title:I,display:"show",details:[T]})})};return(k,D)=>{const U=ge,I=ve;return d(),y(ce,null,[t(U,{class:w(["group",i.themes]),onDragstart:V,onDragend:a},{default:l(()=>[s("div",la,[s("ul",aa,[(d(!0),y(ce,null,fe(c.chartGroupList,M=>Q((d(),y("li",{class:w(["li-custom",{"li-custom-active":c.curCategory===M.category}]),key:M.category,onClick:E=>L(M.category)},v(M.title),11,oa)),[[ee,M.display!=="hidden"]])),128))])]),t(e(ot),{ref_key:"userViewGroup",ref:o,class:"group-right",height:"392px"},{default:l(()=>[(d(!0),y(ce,null,fe(c.chartGroupList,M=>Q((d(),z(U,{id:M.category,key:M.title},{default:l(()=>[t(U,{class:"group-title"},{default:l(()=>[H(v(M.title),1)]),_:2},1024),t(U,{style:{width:"100%"}},{default:l(()=>[(d(!0),y(ce,null,fe(M.details,E=>(d(),z(I,{class:"item",span:8,key:E.title},{default:l(()=>[s("div",{onClick:f=>h(E.value,E.staticMap),class:"item-top",draggable:"true","data-id":"UserView&"+E.value,title:E.title},[E.isPlugin?(d(),z(te,{key:0,"class-name":"item-top-icon","static-content":E.icon},null,8,["static-content"])):(d(),z(te,{key:1,"class-name":"item-top-icon"},{default:l(()=>[(d(),z(ye(n.themes==="dark"?e(Jt)[`${E.icon}-dark`]:e(st)[E.icon]),{class:"svg-icon item-top-icon"}))]),_:2},1024))],8,na),s("div",{title:E.title,class:"item-bottom"},[s("span",null,v(E.title),1)],8,sa)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["id"])),[[ee,M.display!=="hidden"]])),128))]),_:1},512)]),_:1},8,["class"]),t(e(Nt),{jsname:"L2NvbXBvbmVudC9wbHVnaW5zLWhhbmRsZXIvVmlld0NhdGVnb3J5SGFuZGxlcg==",onLoadPluginCategory:$})],64)}}});const Tn=le(ia,[["__scopeId","data-v-b51580fe"]]),ra={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function da(i,n){return d(),y("svg",ra,n[0]||(n[0]=[s("path",{d:"M4.99919 5C4.07872 5 3.33252 5.7462 3.33252 6.66667V33.3333C3.33252 34.2538 4.07872 35 4.99919 35H34.9992C35.9197 35 36.6659 34.2538 36.6659 33.3333V6.66667C36.6659 5.7462 35.9197 5 34.9992 5H4.99919ZM33.3325 8.3332V25.0002L29.7552 21.4227C29.4297 21.0973 28.902 21.0973 28.5765 21.4227L23.9219 26.0775C23.5964 26.403 23.0687 26.403 22.7432 26.0775L13.9218 17.256C13.5963 16.9307 13.0687 16.9307 12.7433 17.256L6.66585 23.3335V8.3332H33.3325ZM26.6659 12.5C26.2057 12.5 25.8325 12.8731 25.8325 13.3333V15.8333C25.8325 16.2936 26.2057 16.6667 26.6659 16.6667H29.1659C29.626 16.6667 29.9992 16.2936 29.9992 15.8333V13.3333C29.9992 12.8731 29.626 12.5 29.1659 12.5H26.6659Z",fill:"#3370FF"},null,-1)]))}const ua={render:da},ca={width:"40",height:"40",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg"};function ma(i,n){return d(),y("svg",ca,n[0]||(n[0]=[s("path",{d:"M3.33251 3.33334C2.41205 3.33334 1.66585 4.07954 1.66585 5.00001V28.3333C1.66585 29.2538 2.41205 30 3.33251 30H29.9992C30.9197 30 31.6658 29.2538 31.6658 28.3333V5.00001C31.6658 4.07954 30.9197 3.33334 29.9992 3.33334H3.33251ZM28.3325 6.66654V21.6668L24.7552 18.0893C24.4297 17.764 23.902 17.764 23.5765 18.0893L18.9218 22.7442C18.5963 23.0697 18.0687 23.0697 17.7432 22.7442L10.5884 15.5893C10.263 15.264 9.73536 15.264 9.40993 15.5893L4.99918 20.0002V6.66654H28.3325ZM21.6658 9.16668C21.2057 9.16668 20.8325 9.53978 20.8325 10V12.5C20.8325 12.9602 21.2057 13.3333 21.6658 13.3333H24.1658C24.626 13.3333 24.9992 12.9602 24.9992 12.5V10C24.9992 9.53978 24.626 9.16668 24.1658 9.16668H21.6658Z"},null,-1),s("path",{d:"M38.3333 35C38.3333 35.4603 38.1468 35.8769 37.8452 36.1785C37.5436 36.4801 37.1269 36.6667 36.6667 36.6667H19.1667C18.7064 36.6667 18.3333 36.2936 18.3333 35.8333V34.1667C18.3333 33.7064 18.7064 33.3333 19.1667 33.3333H35V14.1667C35 13.7064 35.3731 13.3333 35.8333 13.3333H37.5C37.9602 13.3333 38.3333 13.7064 38.3333 14.1667V35Z"},null,-1)]))}const pa={render:ma},fa=["data-id"],_a={key:0,class:"label-content"},ha={class:"label-content"},va=Y({__name:"DragComponent",props:{icon:{type:String,required:!1},name:{type:String,required:!1},label:{type:String,required:!0,default:""},dragInfo:{type:String,required:!0,default:""},themes:{type:String,default:"dark"}},setup(i){const n=i,{icon:g,name:o,label:c,dragInfo:C,themes:r}=ie(n);return(h,V)=>(d(),y("div",{class:w(["drag-component","drag-"+e(r)])},[s("div",{draggable:"true","data-id":e(C),class:"icon-content"},[e(o)?(d(),y("span",_a,v(e(o)),1)):q("",!0),e(g)?(d(),z(te,{key:1,class:"drag-icon"},{default:l(()=>[(d(),z(ye(e(g)),{class:"svg-icon drag-icon"}))]),_:1})):q("",!0)],8,fa),s("div",ha,[s("span",null,v(e(c)),1)])],2))}});const he=le(va,[["__scopeId","data-v-75e4bcc6"]]),ga=Y({__name:"MediaGroup",props:{propValue:{type:Array,default:()=>[]},dvModel:{type:String,default:"dv"},element:{type:Object,default(){return{propValue:null}}},themes:{type:String,default:"dark"}},setup(i){const{t:n}=me(),g=i,{dvModel:o}=ie(g),c=(h,V)=>{Ce.emit("handleNew",{componentName:h,innerType:V})},C=h=>{Te(h,o.value)},r=h=>{Ne(h,o.value)};return(h,V)=>(d(),y("div",{class:"group",onDragstart:C,onDragend:r},[t(he,{class:"media-component",themes:i.themes,icon:e(ua),label:e(n)("visualization.picture"),"drag-info":"Picture&Picture",onClick:V[0]||(V[0]=a=>c("Picture","Picture"))},null,8,["themes","icon","label"]),t(he,{class:"media-component",themes:i.themes,icon:e(Xt),label:e(n)("visualization.video"),"drag-info":"DeVideo&DeVideo",onClick:V[1]||(V[1]=a=>c("DeVideo","DeVideo"))},null,8,["themes","icon","label"]),t(he,{class:"media-component",themes:i.themes,icon:e(el),label:e(n)("visualization.stream_media"),"drag-info":"DeStreamMedia&DeStreamMedia",onClick:V[2]||(V[2]=a=>c("DeStreamMedia","DeStreamMedia"))},null,8,["themes","icon","label"]),t(he,{class:"media-component",themes:i.themes,icon:e(pa),label:e(n)("visualization.pic_group"),"drag-info":"UserView&picture-group",onClick:V[3]||(V[3]=a=>c("UserView","picture-group"))},null,8,["themes","icon","label"])],32))}});const Nn=le(ga,[["__scopeId","data-v-3d8a9660"]]),Ca={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ya(i,n){return d(),y("svg",Ca,n[0]||(n[0]=[s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M36.1782 3.82019C35.8656 3.50763 35.4417 3.33203 34.9997 3.33203H4.99967C4.55765 3.33203 4.13372 3.50763 3.82116 3.82019C3.5086 4.13275 3.33301 4.55667 3.33301 4.9987V34.9987C3.33301 35.4407 3.5086 35.8647 3.82116 36.1772C4.13372 36.4898 4.55765 36.6654 4.99967 36.6654H34.9997C35.4417 36.6654 35.8656 36.4898 36.1782 36.1772C36.4908 35.8647 36.6663 35.4407 36.6663 34.9987V4.9987C36.6663 4.55667 36.4908 4.13275 36.1782 3.82019ZM21.6663 11.6655H27.4997C27.7207 11.6655 27.9327 11.7533 28.0889 11.9096C28.2452 12.0659 28.333 12.2778 28.333 12.4988V14.1655C28.333 14.3865 28.2452 14.5985 28.0889 14.7547C27.9327 14.911 27.7207 14.9988 27.4997 14.9988H21.6663V27.4988C21.6663 27.6083 21.6448 27.7166 21.6029 27.8177C21.561 27.9188 21.4996 28.0107 21.4223 28.0881C21.3449 28.1655 21.253 28.2268 21.1519 28.2687C21.0508 28.3106 20.9424 28.3322 20.833 28.3322H19.1663C19.0569 28.3322 18.9485 28.3106 18.8474 28.2687C18.7463 28.2268 18.6545 28.1655 18.5771 28.0881C18.4997 28.0107 18.4383 27.9188 18.3964 27.8177C18.3546 27.7166 18.333 27.6083 18.333 27.4988V14.9988H12.4997C12.2787 14.9988 12.0667 14.911 11.9104 14.7547C11.7541 14.5985 11.6663 14.3865 11.6663 14.1655V12.4988C11.6663 12.2778 11.7541 12.0659 11.9104 11.9096C12.0667 11.7533 12.2787 11.6655 12.4997 11.6655H18.333C18.333 11.6655 21.6663 11.7122 21.6663 11.6655Z",fill:"#3370FF"},null,-1)]))}const ba={render:ya},wa={t:"1716529317390",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1706","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200",height:"200"};function Va(i,n){return d(),y("svg",wa,n[0]||(n[0]=[s("path",{d:"M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m0 640c0 23.466667-19.2 42.666667-42.666667 42.666667H256c-23.466667 0-42.666667-19.2-42.666667-42.666667V256c0-23.466667 19.2-42.666667 42.666667-42.666667h512c23.466667 0 42.666667 19.2 42.666667 42.666667v512z",fill:"#297AFF","p-id":"1707"},null,-1),s("path",{d:"M725.333333 317.866667c0-12.8-8.533333-21.333333-21.333333-21.333334H320c-12.8 0-21.333333 8.533333-21.333333 21.333334v42.666666c0 12.8 8.533333 21.333333 21.333333 21.333334h149.333333v234.666666c0 12.8 8.533333 21.333333 21.333334 21.333334h42.666666c12.8 0 21.333333-8.533333 21.333334-21.333334v-234.666666h149.333333c12.8 0 21.333333-8.533333 21.333333-21.333334v-42.666666zM714.666667 682.666667H358.4v-32c0-2.133333-4.266667-4.266667-6.4-2.133334l-40.533333 40.533334c-8.533333 8.533333-8.533333 21.333333 0 29.866666l40.533333 40.533334c2.133333 2.133333 6.4 0 6.4-2.133334V725.333333h356.266667c6.4 0 10.666667-4.266667 10.666666-10.666666v-21.333334c0-6.4-4.266667-10.666667-10.666666-10.666666z",fill:"#297AFF","p-id":"1708"},null,-1)]))}const ka={render:Va},xa=Y({__name:"TextGroup",props:{propValue:{type:Array,default:()=>[]},dvModel:{type:String,default:"dataV"},element:{type:Object,default(){return{propValue:null}}},themes:{type:String,default:"dark"}},setup(i){const{t:n}=me(),g=i,{dvModel:o,themes:c}=ie(g),C=V=>{Te(V,o.value)},r=V=>{Ne(V,o.value)},h=(V,a)=>{Ce.emit("handleNew",{componentName:V,innerType:a})};return(V,a)=>(d(),y("div",{class:"group",onDragstart:C,onDragend:r},[t(he,{themes:e(c),icon:e(ba),label:e(n)("visualization.rich_text"),"drag-info":"UserView&rich-text",onClick:a[0]||(a[0]=L=>h("UserView","rich-text"))},null,8,["themes","icon","label"]),e(o)==="dataV"?(d(),z(he,{key:0,themes:e(c),icon:e(ka),label:e(n)("visualization.scroll_text"),"drag-info":"ScrollText&ScrollText",onClick:a[1]||(a[1]=L=>h("ScrollText","ScrollText"))},null,8,["themes","icon","label"])):q("",!0)],32))}});const Mn=le(xa,[["__scopeId","data-v-e295d5d2"]]),Sa={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ia(i,n){return d(),y("svg",Sa,n[0]||(n[0]=[s("path",{d:"M26.6663 19.0504L35.8926 13.543C36.0582 13.4441 36.1997 13.3201 36.3149 13.1787C36.5276 13.0277 36.6663 12.7794 36.6663 12.4987V12.3374C36.679 12.2217 36.6792 12.1042 36.6663 11.9872V4.9987C36.6663 4.53846 36.4798 4.12179 36.1782 3.82019C35.8766 3.51858 35.4599 3.33203 34.9997 3.33203H4.99967C4.0792 3.33203 3.33301 4.07822 3.33301 4.9987V12.4987C3.33301 12.7498 3.44409 12.975 3.61981 13.1278C3.74703 13.3148 3.91598 13.4777 4.12271 13.6013L13.333 19.1073V31.1503C13.333 31.466 13.5113 31.7545 13.7937 31.8957L25.4603 37.729C26.0144 38.0061 26.6663 37.6032 26.6663 36.9837V19.0504Z",fill:"#3370FF"},null,-1)]))}const Ea={render:Ia},za=Y({__name:"QueryGroup",props:{propValue:{type:Array,default:()=>[]},dvModel:{type:String,default:"dv"},element:{type:Object,default(){return{propValue:null}}},themes:{type:String,default:"dark"}},setup(i){const{t:n}=me(),g=i,{dvModel:o}=ie(g),c=h=>{Te(h,o.value)},C=h=>{Ne(h,o.value)},r=h=>{Ce.emit("handleNew",{componentName:h,innerType:h})};return(h,V)=>(d(),y("div",{class:"group",onDragstart:c,onDragend:C,onClick:V[0]||(V[0]=a=>r("VQuery"))},[t(he,{themes:i.themes,icon:e(Ea),label:e(n)("visualization.query_component"),"drag-info":"VQuery&VQuery"},null,8,["themes","icon","label"])],32))}});const An=le(za,[["__scopeId","data-v-57ef250e"]]),La={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"};function $a(i,n){return d(),y("svg",La,n[0]||(n[0]=[s("path",{d:"M10.6666 7.62068L14.3571 5.4177C14.4233 5.37816 14.4799 5.32854 14.526 5.27196C14.6111 5.21156 14.6666 5.11225 14.6666 4.99998V4.93547C14.6717 4.88918 14.6717 4.84219 14.6666 4.79537V1.99998C14.6666 1.81588 14.592 1.64922 14.4713 1.52858C14.3507 1.40793 14.184 1.33331 13.9999 1.33331H1.99992C1.63173 1.33331 1.33325 1.63179 1.33325 1.99998V4.99998C1.33325 5.10043 1.37769 5.19051 1.44797 5.25162C1.49886 5.32643 1.56644 5.3916 1.64913 5.44103L5.33325 7.64343V12.4606C5.33325 12.5869 5.40459 12.7023 5.51751 12.7588L10.1842 15.0921C10.4058 15.2029 10.6666 15.0418 10.6666 14.794V7.62068Z"},null,-1)]))}const Ta={render:$a},Na={class:"head-text"},Ma={class:"head-filter"},Aa={class:"custom-tree-node",style:{display:"flex"}},Ha={key:0},Da={class:"auth-span"},Fa=["id"],Ua={key:0,style:{width:"100%",padding:"0 15px"}},Pa={key:1,class:"tree-select-field"},Ba={key:2,class:"tree-select-field"},Oa={key:1,class:"icon-more"},Ra={style:{display:"flex"},class:"inner-content"},Ga={style:{width:"16px","margin-top":"2px"},class:"expand-custom-outer"},Wa={class:"expand-custom"},qa={style:{flex:"1"}},Za={style:{flex:"1"}},ja={class:"outer-filter-content"},Ka={style:{flex:"1","line-height":"32px"}},Qa={style:{flex:"1"}},Ya={style:{"font-size":"12px"}},Ja={style:{display:"flex"},class:"inner-content"},Xa={style:{width:"16px","margin-top":"2px"},class:"expand-custom-outer"},eo={class:"expand-custom"},to={style:{flex:"1"}},lo={style:{flex:"1"}},ao={class:"outer-dataset-content"},oo={style:{display:"flex",width:"100%"}},no={style:{width:"16px","margin-top":"7px"},class:"expand-custom-outer"},so={class:"expand-custom"},io={style:{flex:"1",display:"flex","line-height":"32px"}},ro={style:{width:"16px","margin-top":"2px","margin-right":"4px"}},uo={style:{flex:"1","margin-left":"-16px"}},co={style:{"font-size":"12px"}},mo={class:"ds-view-content"},po={style:{display:"flex",width:"100%",height:"22px"}},fo={class:"ds-content-title"},_o={style:{display:"flex","flex-wrap":"wrap",width:"100%"}},ho={style:{"font-size":"12px"}},vo={key:1,class:"empty"},go=Y({__name:"OuterParamsSet",setup(i,{expose:n}){const g=be(),{dvInfo:o,componentData:c}=Le(g),C=oe(null),{t:r}=me(),h=oe(null),V=we(),a=$e({filterExpand:!0,datasetExpand:!0,loading:!1,outerParamsSetVisible:!1,optMenu:[{label:r("visualization.rename"),svgName:ll,command:"rename"},{label:r("visualization.delete"),svgName:tl,command:"delete"}],treeProp:{id:"paramsInfoId",label:"paramName",children:"children"},outerParams:{checked:!1,outerParamsInfoArray:[]},baseDatasetInfo:[],baseFilterInfo:[],outerParamsInfoArray:[],mapOuterParamsInfoArray:{},panelList:[],curNodeId:null,outerParamsInfo:{content:"",linkType:"",required:!1,enabledDefault:!1,defaultValue:null,targetViewInfoList:[],paramsInfoId:null},currentFiledTreeNode:null,defaultOuterParamsInfo:{paramName:"",checked:!0,required:!1,enabledDefault:!1,defaultValue:null,targetViewInfoList:[]},defaultTargetViewInfo:{targetViewId:null,targetFieldId:null},currentLinkPanelViewArray:[],viewIdFieldArrayMap:{},widgetSubjectsTrans:{timeYearWidget:r("visualization.time_year_widget"),timeMonthWidget:r("visualization.time_month_widget"),timeDateWidget:r("visualization.time_date_widget"),timeDateRangeWidget:r("visualization.time_date_range_widget"),textSelectWidget:r("visualization.text_select_widget"),textSelectGridWidget:r("visualization.time_year_widget"),textInputWidget:r("visualization.text_input_widget"),textSelectTreeWidget:r("visualization.text_select_tree_widget"),numberSelectWidget:r("visualization.number_select_widget"),numberSelectGridWidget:r("visualization.number_select_grid_widget"),numberRangeWidget:r("visualization.number_range_widget")}}),L=oe({}),$=(m,p)=>{m&&(L.value[p]=m)},k=(m,p)=>{const u=L.value[p].input;if(m===null||m===""||typeof m>"u"){u.style.color=null,u.parentNode.removeAttribute("style");const G=u.parentNode.querySelector(".error-msg");return G&&u.parentNode.removeChild(G),!0}try{JSON.parse(m),u.style.color=null,u.parentNode.removeAttribute("style");const G=u.parentNode.querySelector(".error-msg");return G&&u.parentNode.removeChild(G),!0}catch{if(u.style.color="red",u.parentNode.setAttribute("style","box-shadow: 0 0 0 1px red inset;"),!u.parentNode.querySelector(".error-msg")){const O=document.createElement("div");O.className="error-msg",O.innerText=r("visualization.format_error"),u.parentNode.appendChild(O)}return!1}};se(()=>{var m,p;return(p=(m=a.outerParamsInfo)==null?void 0:m.targetViewInfoList)==null?void 0:p.map(x=>x.targetViewId)});const D=()=>{h.value=null},U=(m,p,x)=>{m==="rename"?h.value=x.paramsInfoId:m==="delete"&&j(p,x)},I=async()=>{a.baseFilterInfo=[],a.baseDatasetInfo=[],c.value.forEach(m=>{m.component==="VQuery"?a.baseFilterInfo.push(m):m.component==="Group"?m.propValue.forEach(p=>{p.component==="VQuery"&&a.baseFilterInfo.push(p)}):m.component==="DeTabs"&&m.propValue.forEach(p=>{p.componentData.forEach(x=>{x.component==="VQuery"&&a.baseFilterInfo.push(x)})})}),await rl(o.value.id).then(m=>{a.baseDatasetInfo=m.data}),sl(o.value.id).then(m=>{var p;if(a.outerParams=m.data,a.outerParamsInfoArray=(p=a.outerParams)==null?void 0:p.outerParamsInfoArray,a.outerParamsInfoArray.length>=1){a.outerParamsInfoArray.forEach(u=>{const G=Z(a.baseFilterInfo),N=Z(a.baseDatasetInfo);f(u,G,N),a.mapOuterParamsInfoArray[u.paramsInfoId]=u}),a.curNodeId=null;const x=a.outerParamsInfoArray[0];Ee(()=>{C.value.setCurrentKey(x.paramsInfoId),A(x)})}}),_(o.value.id)},M=(m,p)=>m==="parameterList"?p.filter(x=>x.attachId.indexOf("DE")>-1):p.filter(x=>x.attachId.indexOf("DE")===-1),E=m=>{let p=0;m.datasetViews.forEach(x=>{x.checked&&p++}),m.checkAll=p===m.datasetViews.length,m.checkAllIsIndeterminate=p>0&&p<m.datasetViews.length},f=(m,p,x)=>{const u={},G=[];m.targetViewInfoList.forEach(N=>{G.push(N.targetViewId),u[N.targetDsId]=N.targetFieldId==="empty"?N.targetViewId:N.targetFieldId}),x&&x.forEach(N=>{N.fieldIdSelected=u[N.id],N.viewExpand=!0;let O=0;N.datasetViews.forEach(ue=>{G.includes(ue.chartId)?(ue.checked=!0,O++):ue.checked=!1}),N.checkAll=O===N.datasetViews.length,N.checkAllIsIndeterminate=O>0&&O<N.datasetViews.length,N.fieldIdSelected&&N.fieldIdSelected.indexOf("DE")>-1?N.activelist="parameterList":N.activelist="dimensionList"}),p&&p.forEach(N=>{N.filterSelected=u[N.id]}),m.filterInfo=p,m.datasetInfo=x},S=()=>{a.outerParamsSetVisible=!1},R=m=>{try{return JSON.parse(m)instanceof Array}catch{return!1}},T=()=>{var N;const m=Z(a.outerParams);let p=0,x=0,u="";const G=[];if((N=m.outerParamsInfoArray)==null||N.forEach(O=>{var ue,ke;(!O.paramName||G.includes(O.paramName))&&x++,G.push(O.paramName),O.defaultValue&&!R(O.defaultValue)&&(p++,u=u+`${O.paramName}`),O.targetViewInfoList=[],(ue=O.filterInfo)==null||ue.forEach(de=>{de.filterSelected&&O.targetViewInfoList.push({targetViewId:de.filterSelected,targetDsId:de.id,targetFieldId:"empty"})}),(ke=O.datasetInfo)==null||ke.forEach(de=>{var xe;de.fieldIdSelected&&((xe=de.datasetViews)==null||xe.forEach(Me=>{Me.checked&&O.targetViewInfoList.push({targetViewId:Me.chartId,targetDsId:de.id,targetFieldId:de.fieldIdSelected})}))})}),p>0){Ie({message:r("visualization.params_setting_check_message"),type:"warning",showClose:!0});return}if(x>0){Ie({message:r("visualization.params_setting_check_message_tips"),type:"warning",showClose:!0});return}il(m).then(()=>{Ie({message:r("commons.save_success"),type:"success",showClose:!0}),V.recordSnapshotCache("renderChart"),S()})},A=m=>{a.outerParamsInfo=a.mapOuterParamsInfoArray[m.paramsInfoId],a.curNodeId=m.paramsInfoId},_=m=>{dl(m).then(p=>{a.viewIdFieldArrayMap={},a.currentLinkPanelViewArray=p.data,a.currentLinkPanelViewArray&&a.currentLinkPanelViewArray.forEach(x=>{a.viewIdFieldArrayMap[x.id]=x.tableFields}),c.value.forEach(x=>{x.component==="VQuery"&&x.propValue.forEach(u=>{a.currentLinkPanelViewArray.push({id:u.id,type:"filter",name:u.name,title:u.name}),a.viewIdFieldArrayMap[u.id]=[{id:"empty",name:r("visualization.filter_no_select")}]})})})},P=m=>{Ee(()=>{C.value.setCurrentKey(m.paramsInfoId),A(m)})},W=m=>{m.checked&&(a.outerParams.checked=!0),Ee(()=>{C.value.setCurrentKey(m.paramsInfoId),A(m)})},re=()=>{a.outerParams.checked=!0;const m=Z(a.defaultOuterParamsInfo);m.paramsInfoId=nl();const p=Z(a.baseFilterInfo),x=Z(a.baseDatasetInfo);f(m,p,x),a.outerParamsInfoArray.push(m),a.mapOuterParamsInfoArray[m.paramsInfoId]=m,h.value=m.paramsInfoId,P(m)},j=(m,p)=>{const x=m.parent,u=x.data.children||x.data,G=u.findIndex(N=>N.paramsInfoId===p.paramsInfoId);u.splice(G,1),p.paramsInfoId===a.outerParamsInfo.paramsInfoId&&(delete a.mapOuterParamsInfoArray[p.paramsInfoId],a.curNodeId=null)},b=(m,p)=>{p.datasetViews.forEach(x=>{x.checked=m}),p.checkAll=m,p.checkAllIsIndeterminate=!1},_e=()=>{I(),a.outerParamsSetVisible=!0},Ve=m=>{var p;return(p=g.canvasViewInfo[m])==null?void 0:p.title};return n({optInit:_e}),(m,p)=>{const x=Oe,u=ge,G=Fe,N=vt,O=ze("CaretBottom"),ue=ze("CaretRight"),ke=et,de=tt,xe=gt,Me=Ct,it=lt,rt=nt,dt=Dt("loading");return d(),z(rt,{class:"params-class","append-to-body":!0,title:e(r)("visualization.outer_param_set"),modelValue:a.outerParamsSetVisible,"onUpdate:modelValue":p[9]||(p[9]=K=>a.outerParamsSetVisible=K),width:"80vw",top:"10vh",trigger:"click"},{default:l(()=>[t(u,{style:{height:"550px"}},{default:l(()=>[Q((d(),z(u,null,{default:l(()=>[t(u,{class:"preview"},{default:l(()=>[t(e(ve),{span:6,class:"preview-left"},{default:l(()=>[t(u,{class:"tree-head"},{default:l(()=>[s("span",Na,v(e(r)("visualization.params_list")),1),s("span",Ma,[t(x,{type:"primary",icon:"Plus",text:"",onClick:re})])]),_:1}),t(u,{class:"tree-content"},{default:l(()=>[t(N,{class:"custom-tree",menu:"",ref_key:"outerParamsInfoTree",ref:C,data:a.outerParamsInfoArray,"node-key":"paramsInfoId","highlight-current":"",props:a.treeProp,onNodeClick:A},{default:l(({node:K,data:X})=>[s("span",Aa,[h.value!==X.paramsInfoId?(d(),y("span",Ha,[s("div",{onClick:p[0]||(p[0]=De(()=>{},["stop"]))},[s("span",Da,[t(G,{modelValue:X.checked,"onUpdate:modelValue":pe=>X.checked=pe,onChange:pe=>W(X)},null,8,["modelValue","onUpdate:modelValue","onChange"])])])])):q("",!0),s("span",{id:"paramName-"+X.paramsInfoId,style:{flex:"1"}},[h.value===X.paramsInfoId?(d(),y("div",Ua,[t(e(He),{style:{width:"100%"},modelValue:X.paramName,"onUpdate:modelValue":pe=>X.paramName=pe,placeholder:m.$t("visualization.input_param_name"),onBlur:D},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):X.paramName?(d(),y("span",Pa,v(X.paramName),1)):(d(),y("span",Ba,v(e(r)("visualization.no_setting_params_name_tip")),1))],8,Fa),h.value!==X.paramsInfoId?(d(),y("span",Oa,[t(ul,{style:{"margin-right":"15px"},onHandleCommand:pe=>U(pe,K,X),"menu-list":a.optMenu,"icon-name":e(al),placement:"bottom-start"},null,8,["onHandleCommand","menu-list","icon-name"])])):q("",!0)])]),_:1},8,["data","props"])]),_:1})]),_:1}),t(e(ve),{span:13,class:"preview-show"},{default:l(()=>[a.curNodeId?(d(),z(u,{key:0},{default:l(()=>{var K,X,pe,qe;return[t(u,{class:"new-params-title"},{default:l(()=>[H(v(e(r)("visualization.select_params_connect_component")),1)]),_:1}),(X=(K=a.outerParamsInfo)==null?void 0:K.filterInfo)!=null&&X.length?(d(),z(u,{key:0,class:"new-params-filter"},{default:l(()=>{var Se;return[s("div",Ra,[s("div",Ga,[s("div",Wa,[t(e(ne),{onClick:p[1]||(p[1]=()=>a.filterExpand=!a.filterExpand)},{default:l(()=>[Q(t(O,null,null,512),[[ee,a.filterExpand]]),Q(t(ue,null,null,512),[[ee,!a.filterExpand]])]),_:1})])]),s("div",qa,v(e(r)("visualization.filter_component")),1),s("div",Za,v(e(r)("visualization.connection_condition")),1)]),s("div",ja,[(d(!0),y(ce,null,fe((Se=a.outerParamsInfo)==null?void 0:Se.filterInfo,(B,Pe)=>Q((d(),y("div",{style:{display:"flex"},class:"inner-filter-content",key:Pe},[p[10]||(p[10]=s("div",{style:{width:"16px"}},null,-1)),s("div",Ka,[t(te,{name:"filter-params"},{default:l(()=>[t(e(Ta),{style:{"margin-top":"4px"},class:"svg-icon view-type-icon"})]),_:1}),s("span",null,v(Ve(B.id)),1)]),s("div",Qa,[t(de,{modelValue:B.filterSelected,"onUpdate:modelValue":F=>B.filterSelected=F,filterable:"",style:{width:"100%"},placeholder:e(r)("v_query.select_query_condition"),clearable:""},{default:l(()=>[(d(!0),y(ce,null,fe(B.propValue,F=>(d(),z(ke,{key:F.id,label:F.name,value:F.id},{default:l(()=>[s("span",Ya,v(F.name),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])])),[[ee,a.filterExpand]])),128))])]}),_:1})):q("",!0),(qe=(pe=a.outerParamsInfo)==null?void 0:pe.datasetInfo)!=null&&qe.length?(d(),z(u,{key:1,class:"new-params-ds"},{default:l(()=>{var Se;return[s("div",Ja,[s("div",Xa,[s("div",eo,[t(e(ne),{onClick:p[2]||(p[2]=()=>a.datasetExpand=!a.datasetExpand)},{default:l(()=>[Q(t(O,null,null,512),[[ee,a.datasetExpand]]),Q(t(ue,null,null,512),[[ee,!a.datasetExpand]])]),_:1})])]),s("div",to,v(e(r)("visualization.view")),1),s("div",lo,v(e(r)("visualization.connection_params_fields")),1)]),s("div",ao,[(d(!0),y(ce,null,fe((Se=a.outerParamsInfo)==null?void 0:Se.datasetInfo,(B,Pe)=>Q((d(),y("div",{class:"inner-dataset-content",key:Pe},[s("div",oo,[s("div",no,[s("div",so,[t(e(ne),{onClick:()=>B.viewExpand=!B.viewExpand},{default:l(()=>[Q(t(O,null,null,512),[[ee,B.viewExpand]]),Q(t(ue,null,null,512),[[ee,!B.viewExpand]])]),_:2},1032,["onClick"])])]),s("div",io,[s("div",ro,[t(e(ne),null,{default:l(()=>[t(te,{name:"icon_dataset"},{default:l(()=>[t(e(ol),{class:"svg-icon"})]),_:1})]),_:1})]),s("span",null,v(B.name),1)]),s("div",uo,[t(de,{modelValue:B.fieldIdSelected,"onUpdate:modelValue":F=>B.fieldIdSelected=F,filterable:"",clearable:"",style:{width:"100%"},placeholder:e(r)("common.selectText")},{header:l(()=>[t(Me,{class:"params-select--header",modelValue:B.activelist,"onUpdate:modelValue":F=>B.activelist=F},{default:l(()=>[t(xe,{label:e(r)("visualization.fields"),name:"dimensionList"},null,8,["label"]),t(xe,{label:e(r)("visualization.params"),name:"parameterList"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),default:l(()=>[(d(!0),y(ce,null,fe(M(B.activelist,B.datasetFields),F=>(d(),z(ke,{key:F.attachId,label:F.name,value:F.attachId},{default:l(()=>[t(te,null,{default:l(()=>[(d(),z(ye(e(ml)[e(Ye)[F.deType]]),{class:w(["svg-icon",`field-icon-${e(Ye)[F.deType]}`]),style:{width:"14px",height:"14px"}},null,8,["class"]))]),_:2},1024),s("span",co,v(F.name),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])]),Q(s("div",mo,[s("div",po,[s("div",fo,v(e(r)("visualization.select_params_connect_view")),1),p[11]||(p[11]=s("div",{class:"custom-view-diver"},null,-1)),s("div",null,[t(G,{style:{"margin-top":"-4px"},modelValue:B.checkAll,"onUpdate:modelValue":F=>B.checkAll=F,indeterminate:B.checkAllIsIndeterminate,disabled:!B.fieldIdSelected,onChange:F=>b(F,B)},{default:l(()=>[H(v(e(r)("visualization.select_all")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","disabled","onChange"])])]),s("div",_o,[(d(!0),y(ce,null,fe(B.datasetViews,F=>(d(),y("div",{class:"view-item",key:F},[s("div",null,[t(G,{modelValue:F.checked,"onUpdate:modelValue":Ze=>F.checked=Ze,disabled:!B.fieldIdSelected,onChange:Ze=>E(B)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),s("div",null,[t(te,null,{default:l(()=>[(d(),z(ye(e(st)[F.chartType]),{class:"svg-icon view-type-icon",style:{margin:"0 4px"}}))]),_:2},1024)]),s("span",ho,v(F.chartName),1)]))),128))])],512),[[ee,B.viewExpand]])])),[[ee,a.datasetExpand]])),128))])]}),_:1})):q("",!0)]}),_:1})):(d(),y("div",vo,[t(cl,{description:e(r)("visualization.setting_params_tips"),"img-type":"noneWhite"},null,8,["description"])]))]),_:1}),t(e(ve),{span:5,class:"params-attach-setting"},{default:l(()=>[a.curNodeId?(d(),z(u,{key:0},{default:l(()=>[t(u,{class:"new-params-title"},{default:l(()=>[H(v(e(r)("visualization.setting_params")),1)]),_:1}),t(u,{class:"params-attach-content"},{default:l(()=>[t(u,null,{default:l(()=>[t(G,{modelValue:a.outerParamsInfo.required,"onUpdate:modelValue":p[3]||(p[3]=K=>a.outerParamsInfo.required=K)},{default:l(()=>[H(v(e(r)("visualization.required")),1)]),_:1},8,["modelValue"])]),_:1}),t(u,null,{default:l(()=>[t(G,{modelValue:a.outerParamsInfo.enabledDefault,"onUpdate:modelValue":p[4]||(p[4]=K=>a.outerParamsInfo.enabledDefault=K)},{default:l(()=>[H(v(e(r)("visualization.default_value")),1)]),_:1},8,["modelValue"]),t(it,{class:"item",placement:"bottom"},{content:l(()=>[s("div",null,[H(v(e(r)("visualization.default_value_tips1"))+" ",1),p[12]||(p[12]=s("br",null,null,-1)),H(" "+v(e(r)("visualization.default_value_tips2")),1)])]),default:l(()=>[t(e(ne),{class:"hint-icon"},{default:l(()=>[t(te,{name:"icon_info_outlined"},{default:l(()=>[t(e(Ae),{class:"svg-icon"})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(He),{ref:K=>$(K,a.outerParamsInfo.paramsInfoId),placeholder:e(r)("visualization.default_value_tips3"),modelValue:a.outerParamsInfo.defaultValue,"onUpdate:modelValue":p[5]||(p[5]=K=>a.outerParamsInfo.defaultValue=K),type:"textarea",autosize:{minRows:4,maxRows:8},onChange:p[6]||(p[6]=K=>k(a.outerParamsInfo.defaultValue,a.outerParamsInfo.paramsInfoId))},null,8,["placeholder","modelValue"])]),_:1})]),_:1})):q("",!0)]),_:1})]),_:1})]),_:1})),[[dt,a.loading]]),t(u,{class:"root-class"},{default:l(()=>[t(x,{onClick:p[7]||(p[7]=K=>S())},{default:l(()=>[H(v(e(r)("commons.cancel")),1)]),_:1}),t(x,{type:"primary",onClick:p[8]||(p[8]=K=>T())},{default:l(()=>[H(v(e(r)("commons.confirm")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title","modelValue"])}}});const Hn=le(go,[["__scopeId","data-v-94d60905"]]),Co={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function yo(i,n){return d(),y("svg",Co,n[0]||(n[0]=[s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.66699 4.9987C1.66699 4.07822 2.41318 3.33203 3.33366 3.33203H8.33366V13.332H38.3337L38.3337 34.9987C38.3337 35.9192 37.5875 36.6654 36.667 36.6654H3.33366C2.41318 36.6654 1.66699 35.9192 1.66699 34.9987V4.9987ZM38.3337 9.9987L38.3337 4.9987C38.3337 4.07822 37.5875 3.33203 36.667 3.33203H26.667V9.9987H38.3337ZM23.3337 3.33203H11.667V9.9987H23.3337V3.33203Z",fill:"#3370FF"},null,-1)]))}const bo={render:yo},wo=Y({__name:"TabsGroup",props:{propValue:{type:Array,default:()=>[]},dvModel:{type:String,default:"dv"},element:{type:Object,default(){return{propValue:null}}},themes:{type:String,default:"dark"}},setup(i){const n=i,{dvModel:g}=ie(n),o=()=>{Ce.emit("handleNew",{componentName:"DeTabs",innerType:"DeTabs"})},c=r=>{Te(r,g.value)},C=r=>{Ne(r,g.value)};return(r,h)=>(d(),y("div",{class:"group",onDragstart:c,onDragend:C,onClick:o},[t(he,{themes:i.themes,icon:e(bo),label:"Tab","drag-info":"DeTabs&DeTabs"},null,8,["themes","icon"])],32))}});const Dn=le(wo,[["__scopeId","data-v-f72ec301"]]),Vo=["id"],ko={style:{"margin-bottom":"4px","font-size":"14px"}},xo={style:{"font-size":"14px"}},So={key:0,class:"main-content"},Io={key:1,class:"collapse-title"},Eo=["effect"],zo=Y({__name:"DvSidebar",props:{element:{required:!1,default:{}},scrollWidth:{required:!1,type:Number,default:6},width:{required:!1,type:Number,default:200},themeInfo:{required:!1,type:String,default:"dark"},asidePosition:{required:!1,type:String,default:"left"},sideName:{required:!1,type:String,default:"defaultSide"},view:{type:Object,required:!1},slideIndex:{type:Number,required:!1,default:0},themes:{type:String,default:"light"},title:String},setup(i){const n=be(),{canvasCollapse:g}=Le(n);let o=oe(!1),c=oe({id:null,name:null}),C=oe(null);const r=we(),{t:h}=me(),V=i,{width:a,asidePosition:L,sideName:$,themeInfo:k,view:D,themes:U,element:I}=ie(V),M=()=>{g.value[$.value]=!g.value[$.value]},E=se(()=>`${g.value[$.value]?36:a.value}px`),f=se(()=>D.value&&["picture-group"].includes(D.value.type)),S=se(()=>({"--de-scroll-width":V.scrollWidth+"px",width:E.value})),R=()=>{var _;if(o.value=!1,V.element.id===c.value.id&&!(!c.value.name||!c.value.name.trim())&&!(c.value.name.trim()===((_=D.value)==null?void 0:_.title)||c.value.name.trim()===I.value.name)){if(c.value.name.trim().length>64||c.value.name.trim().length<2){Ie.warning("2-64"),T();return}I.value.label=c.value.name,I.value.name=c.value.name,f.value&&(D.value.title=c.value.name),c.value.name=""}},T=()=>{var _,P;((_=I.value)!=null&&_.id||(P=D.value)!=null&&P.id)&&(o.value=!0,f.value?(c.value.name=D.value.title,c.value.id=D.value.id):(c.value.name=I.value.name,c.value.id=I.value.id),Ee(()=>{C.value.focus()}))},A=()=>{r.recordSnapshotCache("onComponentNameChange")};return(_,P)=>{const W=at,re=ze("Expand"),j=ze("Fold"),b=ge,_e=ot;return d(),y("div",{onKeyup:P[1]||(P[1]=De(()=>{},["stop"])),onKeydown:P[2]||(P[2]=De(()=>{},["stop"])),class:w(["dv-aside",["aside-"+e(L)+"-"+e(k),"aside-area-"+e(k)]]),style:je(S.value)},[t(b,{align:"middle",class:w("title-"+e(k)),justify:"space-between"},{default:l(()=>[e(g)[e($)]?q("",!0):(d(),y("div",{key:0,id:"attr-slide-component-name"+i.slideIndex,class:w(["name-area-attr",{"component-name-dark":e(k)==="dark"}]),style:je([{"max-width":"180px","text-overflow":"ellipsis","white-space":"nowrap"},{width:e(o)?"300px":"auto"}]),onDblclick:T},[H(v(f.value?e(D).title:i.title)+" ",1),t(W,{"show-arrow":"",offset:8,effect:e(U),placement:"bottom",width:"200",trigger:"click"},{reference:l(()=>[s("span",null,[Q(t(e(ne),{style:{margin:"2px 0 0 4px",cursor:"pointer"}},{default:l(()=>[t(te,null,{default:l(()=>[t(e(pl),{class:"svg-icon"})]),_:1})]),_:1},512),[[ee,e(I)&&e(I).id]])])]),default:l(()=>[s("div",ko,v(e(h)("visualization.component_id")),1),s("div",xo,v(e(I).id),1)]),_:1},8,["effect"])],46,Vo)),t(e(ne),{title:i.title,class:w(["custom-icon-"+e(k),"collapse-icon-"+e(k)]),size:"20px",onClick:M},{default:l(()=>[e(g)[e($)]&&e(L)==="left"||!e(g)[e($)]&&e(L)==="right"?(d(),z(re,{key:0})):(d(),z(j,{key:1}))]),_:1},8,["title","class"])]),_:1},8,["class"]),e(g)[e($)]?q("",!0):(d(),y("div",So,[t(_e,null,{default:l(()=>[We(_.$slots,"default",{},void 0,!0)]),_:3})])),e(g)[e($)]?(d(),y("div",Io,[s("span",null,v(i.title),1)])):q("",!0),e(o)?(d(),z(Ut,{key:2,to:"#attr-slide-component-name"+i.slideIndex},[Q(s("input",{ref_key:"componentNameInputAttr",ref:C,"onUpdate:modelValue":P[0]||(P[0]=Ve=>e(c).name=Ve),width:"100%",effect:e(k),onChange:A,onBlur:R},null,40,Eo),[[Ft,e(c).name]])],8,["to"])):q("",!0)],38)}}});const Fn=le(zo,[["__scopeId","data-v-1112a971"]]),Lo={t:"1715734866524",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4224","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200",height:"200"};function $o(i,n){return d(),y("svg",Lo,n[0]||(n[0]=[s("path",{d:"M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64z m64 608H448v128h128V672z m32-448H416l64 400h64l64-400z",fill:"#E6960C","p-id":"4225"},null,-1)]))}const To={render:$o},No={style:{display:"flex","flex-direction":"row","align-items":"flex-start"}},Mo={class:"tips"},Ao={class:"dialog-footer"},Un=Y({__name:"CanvasCacheDialog",emits:["doUseCache"],setup(i,{expose:n,emit:g}){be();const o=oe(!1),{t:c}=me();Yt();const C=g,r={resourceId:null,title:"",tips:""},h=a=>{const L=a.canvasType==="dataV"?c("work_branch.big_data_screen"):c("work_branch.dashboard");r.resourceId=a.resourceId,r.title=c("visualization.no_save_tips",[L]),r.tips=c("visualization.no_save_tips2"),o.value=!0},V=a=>{C("doUseCache",a),o.value=!1};return n({dialogInit:h}),(a,L)=>{const $=te,k=Oe,D=nt;return d(),z(D,{ref:"canvasCacheDialogRef","append-to-body":!0,modelValue:o.value,"onUpdate:modelValue":L[2]||(L[2]=U=>o.value=U),width:"420px","show-close":!1,trigger:"click","modal-class":"canvasCacheDialog-modal",class:"canvasCacheDialog"},{footer:l(()=>[s("div",Ao,[t(k,{size:"mini",onClick:L[0]||(L[0]=U=>V(!1))},{default:l(()=>[H(v(e(c)("visualization.no")),1)]),_:1}),t(k,{type:"primary",size:"mini",onClick:L[1]||(L[1]=U=>V(!0))},{default:l(()=>[H(v(e(c)("visualization.yes")),1)]),_:1})])]),default:l(()=>[s("div",No,[t($,{name:"warn-tree"},{default:l(()=>[t(e(To),{class:"svg-icon warn-tree"})]),_:1}),s("span",Mo,v(r.tips),1)])]),_:1},8,["modelValue"])}}});export{wn as C,he as D,Nn as M,bn as O,An as Q,Vn as S,Mn as T,Tn as U,$n as _,yn as a,ta as b,Hn as c,Ln as d,En as e,kn as f,In as g,xn as h,zn as i,Dn as j,Sn as k,Jl as l,Un as m,Fn as n,pa as p};

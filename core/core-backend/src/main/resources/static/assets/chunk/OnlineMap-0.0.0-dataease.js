import{p as A,r as N,B as T,o as D,h as K,l as L,m as O,n as S}from"./element-plus-secondary-0.0.0-dataease.js";import{d as q,l as R,r as _,b as U,o as E,Z as C,_ as m,a0 as i,a as t,a2 as w,u as v,a4 as W,W as j,c as z,X as H,Y as g,n as P}from"./@vue-0.0.0-dataease.js";import{j as X}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{s as Y,q as Z}from"./sysParameter-0.0.0-dataease.js";import{E as $}from"./EmptyBackground-0.0.0-dataease.js";import{_ as F}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./escape-html-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./vue-router-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";const G={class:"geo-title"},J={class:"online-form-item"},Q={class:"map-item"},ee={class:"map-item"},te={class:"map-item-label"},oe={class:"form-label"},ae={class:"map-item"},ne=["id"],ie=q({__name:"OnlineMap",setup(se){const{t:p}=X(),o=R({key:"",securityCode:""}),s=_(null),y=_(!1),c=_("de-map-container"),f=_(!1),V=()=>{if(!o.key)return;const a=`https://webapi.amap.com/maps?v=2.0&key=${o.key}`;x(a).then(()=>{var n;if(s.value){(n=s.value)==null||n.destroy(),s.value=null,y.value=!0,setTimeout(()=>{c.value=c.value+"-de-",y.value=!1,P(()=>{b()})},1500);return}b()}).catch(n=>{s.value&&(s.value.destroy(),s.value=null),console.error(n)})},b=()=>{s.value=new window.AMap.Map(c.value,{viewMode:"2D",zoom:11,center:[116.397428,39.90923]}),f.value=!0},B=()=>{Y(o).then(()=>{A.success(p("commons.save_success")),M()}).catch(e=>{console.error(e)})},M=()=>{Z().then(e=>{o.key=e.data.key,o.securityCode=e.data.securityCode,V()}).catch(e=>{console.error(e)})},x=e=>new Promise(function(a,n){var u;const d="de-gaode-script-id";let r=document.getElementById(d);r&&((u=r.parentElement)==null||u.removeChild(r),r=null,window.AMap=null);var l=document.createElement("script");l.id=d,l.onload=function(){return a(null)},l.onerror=function(){return n(new Error("Load script from ".concat(e," failed")))},l.src=e;var h=document.head||document.getElementsByTagName("head")[0];(document.body||h).appendChild(l)});return U(()=>{M()}),(e,a)=>{const n=N,d=T,r=D,l=K,h=L,u=O,I=S;return E(),C(I,{class:"online-map-container"},{default:m(()=>[i(h,{width:"200px",class:"online-map-aside"},{default:m(()=>[t("div",G,[t("span",null,w(v(p)("online_map.onlinemap")),1)]),i(r,null,{default:m(()=>[i(d,null,{default:m(()=>[t("div",J,[a[2]||(a[2]=t("div",{class:"map-item"},[t("div",{class:"map-item-label"},[t("span",{class:"form-label"},"Key")])],-1)),t("div",Q,[i(n,{modelValue:o.key,"onUpdate:modelValue":a[0]||(a[0]=k=>o.key=k)},null,8,["modelValue"])]),t("div",ee,[t("div",te,[t("span",oe,w(v(p)("chart.security_code")),1)])]),t("div",ae,[i(n,{modelValue:o.securityCode,"onUpdate:modelValue":a[1]||(a[1]=k=>o.securityCode=k)},null,8,["modelValue"])])])]),_:1})]),_:1}),i(r,null,{default:m(()=>[i(l,{type:"primary",disabled:!o.key,onClick:B},{default:m(()=>[W(w(v(p)("commons.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),i(u,null,{default:m(()=>[y.value?g("",!0):j((E(),z("div",{key:0,class:"de-map-container",id:c.value},null,8,ne)),[[H,f.value]]),f.value?g("",!0):(E(),C($,{key:1,"img-type":"noneWhite",description:v(p)("online_map.empty_desc")},null,8,["description"]))]),_:1})]),_:1})}}});const ct=F(ie,[["__scopeId","data-v-bfa0b21a"]]);export{ct as default};

var A=Object.defineProperty;var I=(r,i,n)=>i in r?A(r,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[i]=n;var p=(r,i,n)=>(I(r,typeof i!="symbol"?i+"":i,n),n);import{M as S,D as _,V as B,z as d,W as k,A as E,o as y,B as x}from"./@codemirror-0.0.0-dataease.js";import{b as C}from"./codemirror-0.0.0-dataease.js";import{p as l}from"./index-0.0.0-dataease.js";import{d as W,o as q,c as O,a3 as T}from"./@vue-0.0.0-dataease.js";import{_ as V}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@lezer-0.0.0-dataease.js";import"./style-mod-0.0.0-dataease.js";import"./crelt-0.0.0-dataease.js";import"./@marijn-0.0.0-dataease.js";import"./w3c-keyname-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./element-plus-secondary-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./escape-html-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";const z=["id"],L=W({__name:"CodeMirror",props:{domId:l.string.def("editor"),height:l.string.def("250px"),quotaMap:l.arrayOf(String).def(()=>[]),dimensionMap:l.arrayOf(String).def(()=>[])},emits:["change"],setup(r,{expose:i,emit:n}){const m=r,v=n;return i({codeComInit:(h,u)=>{function M(t){let a,e=t[0],s=1;for(;s<t.length;){const o=t[s],c=t[s+1];if(s+=2,(o==="optionalAccess"||o==="optionalCall")&&e==null)return;o==="access"||o==="optionalAccess"?(a=e,e=c(e)):(o==="call"||o==="optionalCall")&&(e=c((...D)=>e.call(a,...D)),a=void 0)}return e}//!placeholderMatcher
const g=new S({regexp:/\[(.*?)\]/g,decoration:t=>_.replace({widget:new b(t[1])})});//!placeholderPlugin
const f=B.fromClass(class{constructor(t){p(this,"placeholders");this.placeholders=g.createDeco(t)}update(t){this.placeholders=g.updateDeco(t,this.placeholders)}},{decorations:t=>t.placeholders,provide:t=>d.atomicRanges.of(a=>M([a,"access",e=>e.plugin,"call",e=>e(t),"optionalAccess",e=>e.placeholders])||_.none)});//!placeholderWidget
class b extends k{constructor(e){super();p(this,"name");this.name=e}eq(e){return this.name==e.name}toDOM(){let e=document.createElement("span");e.textContent=`[${this.name}]`;const{dimensionMap:s,quotaMap:o}=m;if(!(s!=null&&s.length)&&!(o!=null&&o.length))return e;const c=o.includes(this.name);return e.style.borderRadius="2px",e.style.margin="0 4px",e.style.padding="0 6px",e.style.background=c?"rgba(0, 214, 185, 0.20)":"rgba(51, 112, 255, 0.20)",e.style.color=c?"#04B49C":"#2B5FD9",e}ignoreEvent(){return!1}}const w=u?[C,E(),f,y.of([x]),d.updateListener.of(t=>{t.docChanged&&v("change")})]:[C,f,y.of([x])];return new d({doc:h,extensions:w,parent:document.querySelector(`#${m.domId}`)})}}),(h,u)=>(q(),O("div",{style:T({height:r.height}),class:"editor-placeholder",id:r.domId},null,12,z))}});const ge=V(L,[["__scopeId","data-v-ca5de500"]]);export{ge as default};

import{d as q,r as ue,Z as ie,G as h,w as oe,o as ce,_ as de,f,L as g,T as $,j as n,U as M,ac as _,k as T,i as j,g as H,a0 as R,ab as D,J as me,M as Q}from"./vue-0.0.0-dataease.js";import{a7 as pe,ak as X,an as C,a8 as S,H as fe,aa as be,a6 as ve,a9 as Ne,j as Y,G as he}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{i as ge,x as m,f as Ve,_ as E,aw as we,ad as ye,a1 as J,w as Ie}from"./index-0.0.0-dataease.js";import{h as V}from"./lodash-0.0.0-dataease.js";import{v as W}from"./index-0.0.0-dataease17.js";const _e=ge({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},effect:{type:String,values:["dark","light","plain"],default:"light"},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:pe,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:l=>l===null||m(l)||["min","max"].includes(l),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:l=>l>=0&&l===Number.parseInt(`${l}`,10)},validateEvent:{type:Boolean,default:!0}}),Ee={[X]:(l,L)=>l!==L,blur:l=>l instanceof FocusEvent,focus:l=>l instanceof FocusEvent,[C]:l=>m(l)||V(l),[S]:l=>m(l)||V(l)},Ce=["aria-label","onKeydown"],Se={key:0,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12"},Le=Q("path",{d:"M5.99952 7.93206L10.0654 3.86619C10.163 3.76856 10.3213 3.76856 10.4189 3.86619L10.7725 4.21975C10.8701 4.31738 10.8701 4.47567 10.7725 4.5733L6.35307 8.99272C6.15781 9.18798 5.84122 9.18798 5.64596 8.99272L1.22654 4.5733C1.12891 4.47567 1.12891 4.31738 1.22654 4.21975L1.5801 3.86619C1.67773 3.76856 1.83602 3.76856 1.93365 3.86619L5.99952 7.93206Z"},null,-1),Pe=[Le],ke=["aria-label","onKeydown"],Ae={key:0,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12"},Be=Q("path",{d:"M6.00048 4.06794L1.93462 8.13381C1.83699 8.23144 1.6787 8.23144 1.58107 8.13381L1.22751 7.78025C1.12988 7.68262 1.12988 7.52433 1.22751 7.4267L5.64693 3.00728C5.84219 2.81202 6.15878 2.81202 6.35404 3.00728L10.7735 7.4267C10.8711 7.52433 10.8711 7.68262 10.7735 7.78025L10.4199 8.13381C10.3223 8.23144 10.164 8.23144 10.0663 8.13381L6.00048 4.06794Z"},null,-1),xe=[Be],Fe=q({name:"ElInputNumber"}),Me=q({...Fe,props:_e,emits:Ee,setup(l,{expose:L,emit:d}){const a=l,{t:z}=fe(),c=Ve("input-number"),v=ue(),u=ie({currentValue:a.modelValue,userInput:null}),{formItem:b}=be(),K=h(()=>m(a.modelValue)&&w(a.modelValue,-1)<a.min),O=h(()=>m(a.modelValue)&&w(a.modelValue)>a.max),ee=h(()=>{const e=G(a.step);return E(a.precision)?Math.max(G(a.modelValue),e):(e>a.precision,a.precision)}),P=h(()=>a.controls&&a.controlsPosition==="right"),U=ve(),N=Ne(),k=h(()=>{if(u.userInput!==null)return u.userInput;let e=u.currentValue;if(V(e))return"";if(m(e)){if(Number.isNaN(e))return"";E(a.precision)||(e=e.toFixed(a.precision))}return e}),A=(e,t)=>{if(E(t)&&(t=ee.value),t===0)return Math.round(e);let r=String(e);const s=r.indexOf(".");if(s===-1||!r.replace(".","").split("")[s+t])return e;const y=r.length;return r.charAt(y-1)==="5"&&(r=`${r.slice(0,Math.max(0,y-1))}6`),Number.parseFloat(Number(r).toFixed(t))},G=e=>{if(V(e))return 0;const t=e.toString(),r=t.indexOf(".");let s=0;return r!==-1&&(s=t.length-r-1),s},w=(e,t=1)=>m(e)?A(e+a.step*t):u.currentValue,B=()=>{if(a.readonly||N.value||O.value)return;const e=Number(k.value)||0,t=w(e);F(t),d(C,u.currentValue)},x=()=>{if(a.readonly||N.value||K.value)return;const e=Number(k.value)||0,t=w(e,-1);F(t),d(C,u.currentValue)},Z=(e,t)=>{const{max:r,min:s,step:i,precision:p,stepStrictly:y,valueOnClear:I}=a;let o=Number(e);if(V(e)||Number.isNaN(o))return null;if(e===""){if(I===null)return null;o=me(I)?{min:s,max:r}[I]:I}return y&&(o=A(Math.round(o/i)*i,p)),E(p)||(o=A(o,p)),(o>r||o<s)&&(o=o>r?r:s,t&&d(S,o)),o},F=e=>{var t;const r=u.currentValue,s=Z(e);r!==s&&(u.userInput=null,d(S,s),d(X,s,r),a.validateEvent&&((t=b==null?void 0:b.validate)==null||t.call(b,"change").catch(i=>J())),u.currentValue=s)},te=e=>{u.userInput=e,d(C,e===""?null:Number(e))},ne=e=>{const t=e!==""?Number(e):"";(m(t)&&!Number.isNaN(t)||e==="")&&F(t),u.userInput=null},ae=()=>{var e,t;(t=(e=v.value)==null?void 0:e.focus)==null||t.call(e)},re=()=>{var e,t;(t=(e=v.value)==null?void 0:e.blur)==null||t.call(e)},le=e=>{d("focus",e)},se=e=>{var t;d("blur",e),a.validateEvent&&((t=b==null?void 0:b.validate)==null||t.call(b,"blur").catch(r=>J()))};return oe(()=>a.modelValue,e=>{u.currentValue=Z(e,!0),u.userInput=null},{immediate:!0}),ce(()=>{var e;const{min:t,max:r,modelValue:s}=a,i=(e=v.value)==null?void 0:e.input;if(i.setAttribute("role","spinbutton"),Number.isFinite(r)?i.setAttribute("aria-valuemax",String(r)):i.removeAttribute("aria-valuemax"),Number.isFinite(t)?i.setAttribute("aria-valuemin",String(t)):i.removeAttribute("aria-valuemin"),i.setAttribute("aria-valuenow",String(u.currentValue)),i.setAttribute("aria-disabled",String(N.value)),!m(s)&&s!=null){let p=Number(s);Number.isNaN(p)&&(p=null),d(S,p)}}),de(()=>{var e;const t=(e=v.value)==null?void 0:e.input;t==null||t.setAttribute("aria-valuenow",`${u.currentValue}`)}),L({focus:ae,blur:re}),(e,t)=>(f(),g("div",{class:M([n(c).b(),n(c).m(n(U)),n(c).m(e.effect),n(c).is("disabled",n(N)),n(c).is("without-controls",!e.controls),n(c).is("controls-right",n(P))]),onDragstart:t[0]||(t[0]=D(()=>{},["prevent"]))},[e.controls?$((f(),g("span",{key:0,role:"button","aria-label":n(z)("el.inputNumber.decrease"),class:M([n(c).e("decrease"),n(c).is("disabled",n(K))]),onKeydown:_(x,["enter"])},[T(n(Y),null,{default:j(()=>[n(P)?(f(),g("svg",Se,Pe)):(f(),H(n(we),{key:1}))]),_:1})],42,Ce)),[[n(W),x]]):R("v-if",!0),e.controls?$((f(),g("span",{key:1,role:"button","aria-label":n(z)("el.inputNumber.increase"),class:M([n(c).e("increase"),n(c).is("disabled",n(O))]),onKeydown:_(B,["enter"])},[T(n(Y),null,{default:j(()=>[n(P)?(f(),g("svg",Ae,xe)):(f(),H(n(ye),{key:1}))]),_:1})],42,ke)),[[n(W),B]]):R("v-if",!0),T(n(he),{id:e.id,ref_key:"input",ref:v,type:"number",step:e.step,"model-value":n(k),placeholder:e.placeholder,readonly:e.readonly,disabled:n(N),size:n(U),max:e.max,effect:e.effect,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[_(D(B,["prevent"]),["up"]),_(D(x,["prevent"]),["down"])],onBlur:se,onFocus:le,onInput:te,onChange:ne},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","effect","min","name","label","onKeydown"])],34))}}),Ue=Ie(Me);export{Ue as E};

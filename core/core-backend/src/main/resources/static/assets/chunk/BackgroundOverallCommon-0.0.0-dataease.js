import{A as ie,w as ce,B as ue,o as ge,z as fe,M as pe,O as ke,P as _e,x as be,y as he,d as Be,K as ve,h as Ce,v as Ie,p as ye}from"./element-plus-secondary-0.0.0-dataease.js";import{n as Ve,h as G,j as Ee,A as we}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{a as ze}from"./chart-0.0.0-dataease.js";import{b as Pe,u as T,i as D}from"./imgUtils-0.0.0-dataease.js";import{s as Se}from"./snapshot-0.0.0-dataease.js";import{e as Ue}from"./element-resize-detector-0.0.0-dataease.js";import{j as q}from"./board-list-0.0.0-dataease.js";import{d as S,t as x,o as m,c as f,a as u,a0 as n,_ as l,Z as y,a3 as U,u as s,$ as A,z as r,a2 as B,r as P,l as Fe,k as N,b as Oe,n as Me,w as Re,ah as We,M as j,a4 as b,Y as h,ad as $e,ab as Le}from"./@vue-0.0.0-dataease.js";import{_ as F}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import Te from"./ImgViewDialog-0.0.0-dataease.js";const De=()=>Ve.get({url:"/visualizationBackground/findAll"}),Ne={class:"icon-option"},je=S({__name:"BoardItem",props:{item:{},active:{type:Boolean},themes:{default:"dark"},innerImageColor:{}},setup(v){const C=v,{item:k,innerImageColor:i,active:p,themes:I}=x(C),_=e=>e.url.replace("board/","").replace(".svg","");return(e,O)=>{const w=G;return m(),f("div",Ne,[u("div",{class:r(["icon-area",{"selected-active":s(p),"icon-area-dark":s(I)==="dark"}])},[n(w,null,{default:l(()=>[(m(),y(A(s(q)[_(s(k))]),{style:U({color:s(i)}),class:"svg-icon svg-background"},null,8,["style"]))]),_:1})],2),u("span",null,B(s(k).name),1)])}}});const Ge=F(je,[["__scopeId","data-v-f1ffe2d3"]]),qe={class:"img-option-prefix"},xe=S({__name:"BorderOptionPrefix",props:{url:{},innerImageColor:{}},setup(v){const C=v,{innerImageColor:k}=x(C),i=p=>p.replace("board/","").replace(".svg","");return(p,I)=>(m(),f("div",qe,[n(s(G),null,{default:l(()=>[(m(),y(A(s(q)[i(p.url)]),{style:U({color:s(k),width:"20px",height:"20px"}),class:"svg-icon svg-background"},null,8,["style"]))]),_:1})]))}});const Ae=F(xe,[["__scopeId","data-v-7c8b219d"]]),Je={class:"indented-container"},Ke={class:"indented-item"},Ye={class:"indented-container"},Ze={class:"indented-item"},He={class:"indented-container"},Qe={class:"indented-item"},Xe={key:0,class:"indented-item"},eo=15e6,oo=S({__name:"BackgroundOverallCommon",props:{componentPosition:{default:"dashboard"},editPosition:{default:"canvas"},themes:{default:"dark"},commonBackgroundPop:{},backgroundColorPickerWidth:{default:50},backgroundBorderSelectWidth:{default:108}},emits:["onBackgroundChange"],setup(v,{emit:C}){const k=Se(),{t:i}=Ee(),p=C,I=P(null),_=v,e=Fe({commonBackground:{},BackgroundShowMap:{},checked:!1,backgroundOrigin:{},fileList:[],dialogImageUrl:"",dialogVisible:!1,uploadDisabled:!1,panel:null,predefineColors:ze}),O=()=>{I.value.click()},w=()=>{ye.success("图片大小不能超过15M")},J=o=>{const a=o.target.files[0];if(a.size>eo){w();return}T(a,g=>{e.commonBackground.outerImage=g,e.fileList=[{url:D(e.commonBackground.outerImage)}],d()})},K=()=>{De().then(o=>{e.BackgroundShowMap=o.data})},M=()=>{e.commonBackground=we(_.commonBackgroundPop),e.commonBackground.outerImage?e.fileList=[{url:D(e.commonBackground.outerImage)}]:e.fileList=[]};K();const Y=()=>{k.recordSnapshotCacheToMobile("commonBackground")},Z=()=>{e.uploadDisabled=!1,e.commonBackground.outerImage=null,e.fileList=[],d(),Y()},H=o=>{e.dialogImageUrl=o.url,e.dialogVisible=!0},Q=o=>{T(o.file,a=>{e.commonBackground.outerImage=a,d()})},d=()=>{p("onBackgroundChange",e.commonBackground)},V=P(),E=P(),X=N(()=>E.value<=240?50:_.backgroundColorPickerWidth),ee=N(()=>E.value<=240?108:_.backgroundBorderSelectWidth);return Oe(()=>{var a;M();const o=Ue();E.value=(a=V.value)==null?void 0:a.offsetWidth,o.listenTo(V.value,()=>{Me(()=>{var g;E.value=(g=V.value)==null?void 0:g.offsetWidth})})}),Re(()=>_.commonBackgroundPop,()=>{M()}),(o,a)=>{const g=ie,c=ce,R=ue,W=ge,z=fe,$=pe,L=ke,oe=_e,ae=be,ne=he,le=We("Plus"),te=Be,se=ve,re=Ce,de=Ie;return m(),f("div",{style:{width:"100%"},ref_key:"bgForm",ref:V},[u("input",{id:"input",ref_key:"files",ref:I,type:"file",accept:".jpeg,.jpg,.png,.gif,.svg",hidden:"",onClick:a[0]||(a[0]=t=>{t.target.value=""}),onChange:J},null,544),n(de,{"label-position":"top",style:{width:"100%"}},{default:l(()=>[n(W,{gutter:8},{default:l(()=>[n(R,{span:12},{default:l(()=>[n(c,{label:s(i)("visualization.inner_padding"),class:r(["form-item w100","form-item-"+o.themes])},{default:l(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",size:"middle",min:0,max:100,modelValue:e.commonBackground.innerPadding,"onUpdate:modelValue":a[1]||(a[1]=t=>e.commonBackground.innerPadding=t),onChange:d},null,8,["effect","modelValue"])]),_:1},8,["label","class"])]),_:1}),n(R,{span:12},{default:l(()=>[n(c,{label:s(i)("visualization.board_radio"),class:r(["form-item w100","form-item-"+o.themes])},{default:l(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",size:"middle",min:0,max:100,modelValue:e.commonBackground.borderRadius,"onUpdate:modelValue":a[2]||(a[2]=t=>e.commonBackground.borderRadius=t),onChange:d},null,8,["effect","modelValue"])]),_:1},8,["label","class"])]),_:1})]),_:1}),o.editPosition==="canvas"?(m(),f(j,{key:0},[n(c,{class:r(["form-item no-margin-bottom","form-item-"+o.themes])},{default:l(()=>[n(z,{size:"small",effect:o.themes,modelValue:e.commonBackground.backdropFilterEnable,"onUpdate:modelValue":a[3]||(a[3]=t=>e.commonBackground.backdropFilterEnable=t),onChange:d},{default:l(()=>[b(B(o.$t("chart.backdrop_blur")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",Je,[u("div",Ke,[n(c,{class:r(["form-item","form-item-"+o.themes])},{default:l(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",size:"middle",min:0,max:30,disabled:!e.commonBackground.backdropFilterEnable,modelValue:e.commonBackground.backdropFilter,"onUpdate:modelValue":a[4]||(a[4]=t=>e.commonBackground.backdropFilter=t),onChange:d},null,8,["effect","disabled","modelValue"])]),_:1},8,["class"])])])],64)):h("",!0),n(c,{class:r(["form-item no-margin-bottom","form-item-"+o.themes])},{default:l(()=>[n(z,{size:"small",effect:o.themes,modelValue:e.commonBackground.backgroundColorSelect,"onUpdate:modelValue":a[5]||(a[5]=t=>e.commonBackground.backgroundColorSelect=t),onChange:d},{default:l(()=>[b(B(o.$t("chart.color")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",Ye,[u("div",Ze,[n(c,{class:r(["form-item","form-item-"+o.themes])},{default:l(()=>[e.commonBackground.backgroundColor?(m(),y($,{key:0,modelValue:e.commonBackground.backgroundColor,"onUpdate:modelValue":a[6]||(a[6]=t=>e.commonBackground.backgroundColor=t),effect:o.themes,disabled:!e.commonBackground.backgroundColorSelect,"trigger-width":X.value,"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:e.predefineColors,onChange:d},null,8,["modelValue","effect","disabled","trigger-width","predefine"])):h("",!0)]),_:1},8,["class"])])]),n(c,{class:r(["form-item no-margin-bottom","form-item-"+o.themes])},{default:l(()=>[n(z,{size:"small",effect:o.themes,modelValue:e.commonBackground.backgroundImageEnable,"onUpdate:modelValue":a[7]||(a[7]=t=>e.commonBackground.backgroundImageEnable=t),onChange:d},{default:l(()=>[b(B(s(i)("visualization.background")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",He,[u("div",Qe,[n(c,{class:r(["form-item margin-bottom-8","form-item-"+o.themes])},{default:l(()=>[n(oe,{effect:o.themes,disabled:!e.commonBackground.backgroundImageEnable,modelValue:e.commonBackground.backgroundType,"onUpdate:modelValue":a[8]||(a[8]=t=>e.commonBackground.backgroundType=t),onChange:d},{default:l(()=>[n(L,{effect:o.themes,label:"outerImage"},{default:l(()=>[b(B(s(i)("visualization.photo")),1)]),_:1},8,["effect"]),n(L,{effect:o.themes,label:"innerImage"},{default:l(()=>[b(B(s(i)("visualization.board")),1)]),_:1},8,["effect"])]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"])]),e.commonBackground.backgroundType==="innerImage"?(m(),f("div",Xe,[n(c,{class:r(["form-item","form-item-"+o.themes])},{default:l(()=>[n($,{modelValue:e.commonBackground.innerImageColor,"onUpdate:modelValue":a[9]||(a[9]=t=>e.commonBackground.innerImageColor=t),disabled:!e.commonBackground.backgroundImageEnable,effect:o.themes,title:s(i)("visualization.border_color_setting"),style:{position:"absolute",top:"-3px",left:"60px"},"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:e.predefineColors,onChange:d},null,8,["modelValue","disabled","effect","title","predefine"])]),_:1},8,["class"]),n(c,{class:r(["form-item fill","form-item-"+o.themes]),style:{"padding-left":"8px"}},{default:l(()=>[n(ne,{style:U({width:ee.value+"px"}),modelValue:e.commonBackground.innerImage,"onUpdate:modelValue":a[10]||(a[10]=t=>e.commonBackground.innerImage=t),size:"middle","popper-class":"board-select",effect:o.themes,disabled:!e.commonBackground.backgroundImageEnable,placeholder:"选择边框...",onChange:d},$e({default:l(()=>[(m(!0),f(j,null,Le(e.BackgroundShowMap.default,(t,me)=>(m(),y(ae,{key:me,label:t.name,value:t.url},{default:l(()=>[n(Ge,{themes:o.themes,active:t.url===e.commonBackground.innerImage,"inner-image-color":e.commonBackground.innerImageColor,item:t},null,8,["themes","active","inner-image-color","item"])]),_:2},1032,["label","value"]))),128))]),_:2},[e.commonBackground.innerImage?{name:"prefix",fn:l(()=>[n(Ae,{"inner-image-color":"state.commonBackground.innerImageColor",url:e.commonBackground.innerImage},null,8,["url"])]),key:"0"}:void 0]),1032,["style","modelValue","effect","disabled"])]),_:1},8,["class"])])):h("",!0),e.commonBackground.backgroundType==="outerImage"?(m(),f("div",{key:1,class:r(["indented-item",{disabled:!e.commonBackground.backgroundImageEnable||e.uploadDisabled}])},[u("div",{class:r(["avatar-uploader-container",`img-area_${o.themes}`])},[n(se,{action:"",effect:o.themes,accept:".jpeg,.jpg,.png,.gif,.svg",class:"avatar-uploader","list-type":"picture-card","on-preview":H,"on-remove":Z,"before-upload":s(Pe),"http-request":Q,"file-list":e.fileList,disabled:!e.commonBackground.backgroundImageEnable},{default:l(()=>[n(te,null,{default:l(()=>[n(le)]),_:1})]),_:1},8,["effect","before-upload","file-list","disabled"]),n(W,null,{default:l(()=>[e.commonBackground.outerImage?h("",!0):(m(),f("span",{key:0,style:{"margin-top":"2px"},class:r(["image-hint",`image-hint_${o.themes}`])}," 支持JPG、PNG、GIF、SVG ",2)),e.commonBackground.outerImage?(m(),y(re,{key:1,size:"small",style:{margin:"8px 0 0 -4px"},text:"",onClick:O,disabled:!e.commonBackground.backgroundImageEnable},{default:l(()=>a[12]||(a[12]=[b(" 重新上传 ")])),_:1},8,["disabled"])):h("",!0)]),_:1})],2),n(Te,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[11]||(a[11]=t=>e.dialogVisible=t),"image-url":e.dialogImageUrl},null,8,["modelValue","image-url"])],2)):h("",!0)])]),_:1})],512)}}});const go=F(oo,[["__scopeId","data-v-1929a05c"]]);export{go as B};

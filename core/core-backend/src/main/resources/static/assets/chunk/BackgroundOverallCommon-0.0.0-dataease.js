import"./index-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{x as ie,n as G,o as ce,P as ue,j as ge,y as pe,D as fe}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as ke}from"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as _e,a as be}from"./el-select-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import{E as he,a as Be}from"./el-radio-0.0.0-dataease.js";import{E as ve}from"./el-radio-button-0.0.0-dataease.js";import{E as Ce}from"./el-input-number-0.0.0-dataease.js";import{E as Ie}from"./el-checkbox-0.0.0-dataease.js";import{E as ye}from"./el-row-0.0.0-dataease.js";import{E as Ve}from"./el-col-0.0.0-dataease.js";import{a as Ee,E as we}from"./el-form-item-0.0.0-dataease.js";import{a as Pe}from"./chart-0.0.0-dataease.js";import{b as ze,u as $,i as D}from"./imgUtils-0.0.0-dataease.js";import{s as Se}from"./snapshot-0.0.0-dataease.js";import{e as Ue}from"./antv-0.0.0-dataease.js";import{j as q}from"./board-list-0.0.0-dataease.js";import{d as S,t as x,f as d,L as p,M as u,k as n,i as t,g as y,V as U,j as r,m as A,U as s,a6 as B,r as z,Z as Fe,G as j,o as Oe,n as Me,w as Le,e as Re,Y as N,a5 as b,a0 as h,aw as We,a9 as Te}from"./vue-0.0.0-dataease.js";import{_ as F}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import $e from"./ImgViewDialog-0.0.0-dataease.js";const De=()=>ie.get({url:"/visualizationBackground/findAll"}),je={class:"icon-option"},Ne=S({__name:"BoardItem",props:{item:{},active:{type:Boolean},themes:{default:"dark"},innerImageColor:{}},setup(v){const C=v,{item:k,innerImageColor:i,active:f,themes:I}=x(C),_=e=>e.url.replace("board/","").replace(".svg","");return(e,O)=>{const w=G;return d(),p("div",je,[u("div",{class:s(["icon-area",{"selected-active":r(f),"icon-area-dark":r(I)==="dark"}])},[n(w,null,{default:t(()=>[(d(),y(A(r(q)[_(r(k))]),{style:U({color:r(i)}),class:"svg-icon svg-background"},null,8,["style"]))]),_:1})],2),u("span",null,B(r(k).name),1)])}}});const Ge=F(Ne,[["__scopeId","data-v-f1ffe2d3"]]),qe={class:"img-option-prefix"},xe=S({__name:"BorderOptionPrefix",props:{url:{},innerImageColor:{}},setup(v){const C=v,{innerImageColor:k}=x(C),i=f=>f.replace("board/","").replace(".svg","");return(f,I)=>(d(),p("div",qe,[n(r(G),null,{default:t(()=>[(d(),y(A(r(q)[i(f.url)]),{style:U({color:r(k),width:"20px",height:"20px"}),class:"svg-icon svg-background"},null,8,["style"]))]),_:1})]))}});const Ae=F(xe,[["__scopeId","data-v-7c8b219d"]]),Je={class:"indented-container"},Ye={class:"indented-item"},Ze={class:"indented-container"},He={class:"indented-item"},Ke={class:"indented-container"},Qe={class:"indented-item"},Xe={key:0,class:"indented-item"},eo=15e6,oo=S({__name:"BackgroundOverallCommon",props:{componentPosition:{default:"dashboard"},editPosition:{default:"canvas"},themes:{default:"dark"},commonBackgroundPop:{},backgroundColorPickerWidth:{default:50},backgroundBorderSelectWidth:{default:108}},emits:["onBackgroundChange"],setup(v,{emit:C}){const k=Se(),{t:i}=ce(),f=C,I=z(null),_=v,e=Fe({commonBackground:{},BackgroundShowMap:{},checked:!1,backgroundOrigin:{},fileList:[],dialogImageUrl:"",dialogVisible:!1,uploadDisabled:!1,panel:null,predefineColors:Pe}),O=()=>{I.value.click()},w=()=>{fe.success("图片大小不能超过15M")},J=o=>{const a=o.target.files[0];if(a.size>eo){w();return}$(a,g=>{e.commonBackground.outerImage=g,e.fileList=[{url:D(e.commonBackground.outerImage)}],m()})},Y=()=>{De().then(o=>{e.BackgroundShowMap=o.data})},M=()=>{e.commonBackground=ue(_.commonBackgroundPop),e.commonBackground.outerImage?e.fileList=[{url:D(e.commonBackground.outerImage)}]:e.fileList=[]};Y();const Z=()=>{k.recordSnapshotCacheToMobile("commonBackground")},H=()=>{e.uploadDisabled=!1,e.commonBackground.outerImage=null,e.fileList=[],m(),Z()},K=o=>{e.dialogImageUrl=o.url,e.dialogVisible=!0},Q=o=>{$(o.file,a=>{e.commonBackground.outerImage=a,m()})},m=()=>{f("onBackgroundChange",e.commonBackground)},V=z(),E=z(),X=j(()=>E.value<=240?50:_.backgroundColorPickerWidth),ee=j(()=>E.value<=240?108:_.backgroundBorderSelectWidth);return Oe(()=>{var a;M();const o=Ue();E.value=(a=V.value)==null?void 0:a.offsetWidth,o.listenTo(V.value,()=>{Me(()=>{var g;E.value=(g=V.value)==null?void 0:g.offsetWidth})})}),Le(()=>_.commonBackgroundPop,()=>{M()}),(o,a)=>{const g=Ce,c=Ee,L=Ve,R=ye,P=Ie,W=ve,T=he,oe=Be,ae=_e,ne=be,te=Re("Plus"),le=ge,re=ke,se=pe,me=we;return d(),p("div",{style:{width:"100%"},ref_key:"bgForm",ref:V},[u("input",{id:"input",ref_key:"files",ref:I,type:"file",accept:".jpeg,.jpg,.png,.gif,.svg",hidden:"",onClick:a[0]||(a[0]=l=>{l.target.value=""}),onChange:J},null,544),n(me,{"label-position":"top",style:{width:"100%"}},{default:t(()=>[n(R,{gutter:8},{default:t(()=>[n(L,{span:12},{default:t(()=>[n(c,{label:r(i)("visualization.inner_padding"),class:s(["form-item w100","form-item-"+o.themes])},{default:t(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",size:"middle",min:0,max:100,modelValue:e.commonBackground.innerPadding,"onUpdate:modelValue":a[1]||(a[1]=l=>e.commonBackground.innerPadding=l),onChange:m},null,8,["effect","modelValue"])]),_:1},8,["label","class"])]),_:1}),n(L,{span:12},{default:t(()=>[n(c,{label:r(i)("visualization.board_radio"),class:s(["form-item w100","form-item-"+o.themes])},{default:t(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",size:"middle",min:0,max:100,modelValue:e.commonBackground.borderRadius,"onUpdate:modelValue":a[2]||(a[2]=l=>e.commonBackground.borderRadius=l),onChange:m},null,8,["effect","modelValue"])]),_:1},8,["label","class"])]),_:1})]),_:1}),o.editPosition==="canvas"?(d(),p(N,{key:0},[n(c,{class:s(["form-item no-margin-bottom","form-item-"+o.themes])},{default:t(()=>[n(P,{size:"small",effect:o.themes,modelValue:e.commonBackground.backdropFilterEnable,"onUpdate:modelValue":a[3]||(a[3]=l=>e.commonBackground.backdropFilterEnable=l),onChange:m},{default:t(()=>[b(B(o.$t("chart.backdrop_blur")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",Je,[u("div",Ye,[n(c,{class:s(["form-item","form-item-"+o.themes])},{default:t(()=>[n(g,{style:{width:"100%"},effect:o.themes,"controls-position":"right",size:"middle",min:0,max:30,disabled:!e.commonBackground.backdropFilterEnable,modelValue:e.commonBackground.backdropFilter,"onUpdate:modelValue":a[4]||(a[4]=l=>e.commonBackground.backdropFilter=l),onChange:m},null,8,["effect","disabled","modelValue"])]),_:1},8,["class"])])])],64)):h("",!0),n(c,{class:s(["form-item no-margin-bottom","form-item-"+o.themes])},{default:t(()=>[n(P,{size:"small",effect:o.themes,modelValue:e.commonBackground.backgroundColorSelect,"onUpdate:modelValue":a[5]||(a[5]=l=>e.commonBackground.backgroundColorSelect=l),onChange:m},{default:t(()=>[b(B(o.$t("chart.color")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",Ze,[u("div",He,[n(c,{class:s(["form-item","form-item-"+o.themes])},{default:t(()=>[e.commonBackground.backgroundColor?(d(),y(W,{key:0,modelValue:e.commonBackground.backgroundColor,"onUpdate:modelValue":a[6]||(a[6]=l=>e.commonBackground.backgroundColor=l),effect:o.themes,disabled:!e.commonBackground.backgroundColorSelect,"trigger-width":X.value,"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:e.predefineColors,onChange:m},null,8,["modelValue","effect","disabled","trigger-width","predefine"])):h("",!0)]),_:1},8,["class"])])]),n(c,{class:s(["form-item no-margin-bottom","form-item-"+o.themes])},{default:t(()=>[n(P,{size:"small",effect:o.themes,modelValue:e.commonBackground.backgroundImageEnable,"onUpdate:modelValue":a[7]||(a[7]=l=>e.commonBackground.backgroundImageEnable=l),onChange:m},{default:t(()=>[b(B(r(i)("visualization.background")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),u("div",Ke,[u("div",Qe,[n(c,{class:s(["form-item margin-bottom-8","form-item-"+o.themes])},{default:t(()=>[n(oe,{effect:o.themes,disabled:!e.commonBackground.backgroundImageEnable,modelValue:e.commonBackground.backgroundType,"onUpdate:modelValue":a[8]||(a[8]=l=>e.commonBackground.backgroundType=l),onChange:m},{default:t(()=>[n(T,{effect:o.themes,label:"outerImage"},{default:t(()=>[b(B(r(i)("visualization.photo")),1)]),_:1},8,["effect"]),n(T,{effect:o.themes,label:"innerImage"},{default:t(()=>[b(B(r(i)("visualization.board")),1)]),_:1},8,["effect"])]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"])]),e.commonBackground.backgroundType==="innerImage"?(d(),p("div",Xe,[n(c,{class:s(["form-item","form-item-"+o.themes])},{default:t(()=>[n(W,{modelValue:e.commonBackground.innerImageColor,"onUpdate:modelValue":a[9]||(a[9]=l=>e.commonBackground.innerImageColor=l),disabled:!e.commonBackground.backgroundImageEnable,effect:o.themes,title:r(i)("visualization.border_color_setting"),style:{position:"absolute",top:"-3px",left:"60px"},"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:e.predefineColors,onChange:m},null,8,["modelValue","disabled","effect","title","predefine"])]),_:1},8,["class"]),n(c,{class:s(["form-item fill","form-item-"+o.themes]),style:{"padding-left":"8px"}},{default:t(()=>[n(ne,{style:U({width:ee.value+"px"}),modelValue:e.commonBackground.innerImage,"onUpdate:modelValue":a[10]||(a[10]=l=>e.commonBackground.innerImage=l),size:"middle","popper-class":"board-select",effect:o.themes,disabled:!e.commonBackground.backgroundImageEnable,placeholder:"选择边框...",onChange:m},We({default:t(()=>[(d(!0),p(N,null,Te(e.BackgroundShowMap.default,(l,de)=>(d(),y(ae,{key:de,label:l.name,value:l.url},{default:t(()=>[n(Ge,{themes:o.themes,active:l.url===e.commonBackground.innerImage,"inner-image-color":e.commonBackground.innerImageColor,item:l},null,8,["themes","active","inner-image-color","item"])]),_:2},1032,["label","value"]))),128))]),_:2},[e.commonBackground.innerImage?{name:"prefix",fn:t(()=>[n(Ae,{"inner-image-color":"state.commonBackground.innerImageColor",url:e.commonBackground.innerImage},null,8,["url"])]),key:"0"}:void 0]),1032,["style","modelValue","effect","disabled"])]),_:1},8,["class"])])):h("",!0),e.commonBackground.backgroundType==="outerImage"?(d(),p("div",{key:1,class:s(["indented-item",{disabled:!e.commonBackground.backgroundImageEnable||e.uploadDisabled}])},[u("div",{class:s(["avatar-uploader-container",`img-area_${o.themes}`])},[n(re,{action:"",effect:o.themes,accept:".jpeg,.jpg,.png,.gif,.svg",class:"avatar-uploader","list-type":"picture-card","on-preview":K,"on-remove":H,"before-upload":r(ze),"http-request":Q,"file-list":e.fileList,disabled:!e.commonBackground.backgroundImageEnable},{default:t(()=>[n(le,null,{default:t(()=>[n(te)]),_:1})]),_:1},8,["effect","before-upload","file-list","disabled"]),n(R,null,{default:t(()=>[e.commonBackground.outerImage?h("",!0):(d(),p("span",{key:0,style:{"margin-top":"2px"},class:s(["image-hint",`image-hint_${o.themes}`])}," 支持JPG、PNG、GIF、SVG ",2)),e.commonBackground.outerImage?(d(),y(se,{key:1,size:"small",style:{margin:"8px 0 0 -4px"},text:"",onClick:O,disabled:!e.commonBackground.backgroundImageEnable},{default:t(()=>a[12]||(a[12]=[b(" 重新上传 ")])),_:1},8,["disabled"])):h("",!0)]),_:1})],2),n($e,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[11]||(a[11]=l=>e.dialogVisible=l),"image-url":e.dialogImageUrl},null,8,["modelValue","image-url"])],2)):h("",!0)])]),_:1})],512)}}});const wo=F(oo,[["__scopeId","data-v-1929a05c"]]);export{wo as B};

import{q as no,d as so,H as lo,e as co,h as uo,R as vo,p as fo,Q as Ao}from"./element-plus-secondary-0.0.0-dataease.js";import{A as W,j as bo,h as _o}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as go,r as g,k as G,b as yo,e as ho,ak as So,o as f,c as A,a as p,a0 as r,_ as l,a4 as I,a2 as k,u as e,a3 as wo,W as y,Y as J,M as Y,X as V,ab as Mo}from"./@vue-0.0.0-dataease.js";import{i as H}from"./icon_left_outlined-0.0.0-dataease.js";import{i as Co}from"./icon_pc_outlined-0.0.0-dataease.js";import ko from"./MobileBackgroundSelector-0.0.0-dataease.js";import{j as Vo}from"./DePreview-0.0.0-dataease.js";import{s as Eo}from"./snapshot-0.0.0-dataease.js";import{b as Oo,u as K}from"./index-0.0.0-dataease.js";import{S as Bo,d as Po,T as zo}from"./canvasUtils-0.0.0-dataease.js";import{d as xo}from"./dvMain-0.0.0-dataease.js";import{s as No}from"./pinia-0.0.0-dataease.js";import To from"./ComponentStyleEditor-0.0.0-dataease.js";import{d as Io}from"./lodash-es-0.0.0-dataease.js";import{_ as Jo}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./escape-html-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./vue-router-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./chart-0.0.0-dataease.js";import"./formatter-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./html2canvas-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./file-saver-0.0.0-dataease.js";import"./html-to-image-0.0.0-dataease.js";import"./ImgViewDialog-0.0.0-dataease.js";import"./style-0.0.0-dataease.js";import"./translate-0.0.0-dataease.js";import"./mathjs-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";import"./util-0.0.0-dataease2.js";import"./chart-0.0.0-dataease2.js";import"./app-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./eventBus-0.0.0-dataease.js";import"./Component-0.0.0-dataease16.js";import"./DeShortcutKey-0.0.0-dataease.js";import"./canvasStyle-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./dataVisualization-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./less-0.0.0-dataease.js";import"./tslib-0.0.0-dataease.js";import"./copy-anything-0.0.0-dataease.js";import"./is-what-0.0.0-dataease.js";import"./ModelUtil-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./@antv-0.0.0-dataease.js";import"./eventemitter3-0.0.0-dataease.js";import"./@mapbox-0.0.0-dataease.js";import"./pbf-0.0.0-dataease.js";import"./ieee754-0.0.0-dataease.js";import"./supercluster-0.0.0-dataease.js";import"./gl-matrix-0.0.0-dataease.js";import"./topojson-client-0.0.0-dataease.js";import"./viewport-mercator-project-0.0.0-dataease.js";import"./@turf-0.0.0-dataease.js";import"./polygon-clipping-0.0.0-dataease.js";import"./splaytree-0.0.0-dataease.js";import"./robust-predicates-0.0.0-dataease.js";import"./d3-scale-0.0.0-dataease.js";import"./d3-collection-0.0.0-dataease.js";import"./d3-format-0.0.0-dataease.js";import"./d3-time-format-0.0.0-dataease.js";import"./d3-time-0.0.0-dataease.js";import"./d3-color-0.0.0-dataease.js";import"./d3-array-0.0.0-dataease.js";import"./earcut-0.0.0-dataease.js";import"./regl-0.0.0-dataease.js";import"./mapbox-gl-0.0.0-dataease.js";import"./d3-dsv-0.0.0-dataease.js";import"./geojson-vt-0.0.0-dataease.js";import"./hammerjs-0.0.0-dataease.js";import"./element-resize-detector-0.0.0-dataease.js";import"./batch-processor-0.0.0-dataease.js";import"./d3-hexbin-0.0.0-dataease.js";import"./detect-browser-0.0.0-dataease.js";import"./d3-ease-0.0.0-dataease.js";import"./d3-interpolate-0.0.0-dataease.js";import"./d3-timer-0.0.0-dataease.js";import"./fecha-0.0.0-dataease.js";import"./size-sensor-0.0.0-dataease.js";import"./d3-regression-0.0.0-dataease.js";import"./d3-hierarchy-0.0.0-dataease.js";import"./fmin-0.0.0-dataease.js";import"./pdfast-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./exceljs-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./Component-0.0.0-dataease15.js";import"./icon_edit_outlined-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";import"./HandleMore.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./icon_more_outlined-0.0.0-dataease.js";import"./more_v-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./icon_drag_outlined-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./dv-folder-0.0.0-dataease.js";import"./icon_dataset-0.0.0-dataease.js";import"./icon_warning_filled-0.0.0-dataease.js";import"./icon_info_outlined-0.0.0-dataease.js";import"./vuedraggable-0.0.0-dataease.js";import"./time-format-0.0.0-dataease.js";import"./time-format-dayjs-0.0.0-dataease.js";import"./attr-0.0.0-dataease20.js";import"./EmptyBackground-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./icon_admin_outlined-0.0.0-dataease.js";import"./vant-0.0.0-dataease.js";import"./@vant-0.0.0-dataease.js";import"./chart-list-0.0.0-dataease.js";import"./field-list-0.0.0-dataease.js";import"./treeSortUtils-0.0.0-dataease.js";import"./Attr-0.0.0-dataease19.js";import"./CommonAttr-0.0.0-dataease.js";import"./CommonBorderSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./BackgroundOverallCommon-0.0.0-dataease.js";import"./board-list-0.0.0-dataease.js";import"./icon_italic_outlined-0.0.0-dataease.js";import"./icon_right-alignment_outlined-0.0.0-dataease.js";import"./CarouselSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./CollapseSwitchItem-0.0.0-dataease.js";import"./icon_replace_outlined-0.0.0-dataease.js";import"./icon_download_outlined-0.0.0-dataease.js";import"./Component.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./watermark-0.0.0-dataease2.js";import"./user-0.0.0-dataease.js";import"./jquery-0.0.0-dataease.js";import"./ChartComponentS2-0.0.0-dataease.js";import"./ViewTrackBar-0.0.0-dataease.js";import"./ChartError-0.0.0-dataease.js";import"./LinkageSet-0.0.0-dataease.js";import"./dv-link-target-0.0.0-dataease.js";import"./dv-dashboard-spine-0.0.0-dataease.js";import"./dv-screen-spine-0.0.0-dataease.js";import"./CodeMirror-0.0.0-dataease2.js";import"./@codemirror-0.0.0-dataease.js";import"./@lezer-0.0.0-dataease.js";import"./style-mod-0.0.0-dataease.js";import"./crelt-0.0.0-dataease.js";import"./@marijn-0.0.0-dataease.js";import"./w3c-keyname-0.0.0-dataease.js";import"./codemirror-0.0.0-dataease.js";import"./dv-empty-0.0.0-dataease.js";import"./Attr.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./Component-0.0.0-dataease14.js";import"./index-0.0.0-dataease17.js";import"./ChartComponentG2Plot-0.0.0-dataease.js";import"./PluginComponent.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./DrillPath-0.0.0-dataease.js";import"./js-base64-0.0.0-dataease.js";import"./DeRichTextView-0.0.0-dataease.js";import"./@tinymce-0.0.0-dataease.js";import"./@npkg-0.0.0-dataease.js";import"./Component-0.0.0-dataease10.js";import"./ChartEmptyInfo-0.0.0-dataease.js";import"./chart-dark-list-0.0.0-dataease.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./Component-0.0.0-dataease11.js";import"./Attr-0.0.0-dataease13.js";import"./Attr-0.0.0-dataease.js";import"./Component-0.0.0-dataease3.js";import"./Attr.vue_vue_type_style_index_0_lang-0.0.0-dataease2.js";import"./Attr-0.0.0-dataease7.js";import"./Component-0.0.0-dataease5.js";import"./Attr-0.0.0-dataease5.js";import"./Component-0.0.0-dataease4.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease2.js";import"./Component-0.0.0-dataease12.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease3.js";import"./Component.vue_vue_type_script_setup_true_lang-0.0.0-dataease2.js";import"./Attr-0.0.0-dataease8.js";import"./Component-0.0.0-dataease9.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease4.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease5.js";import"./Component-0.0.0-dataease8.js";import"./@videojs-player-0.0.0-dataease.js";import"./video.js-0.0.0-dataease.js";import"./global-0.0.0-dataease.js";import"./keycode-0.0.0-dataease.js";import"./safe-json-parse-0.0.0-dataease.js";import"./@videojs-0.0.0-dataease.js";import"./is-function-0.0.0-dataease.js";import"./url-toolkit-0.0.0-dataease.js";import"./videojs-vtt.js-0.0.0-dataease.js";import"./m3u8-parser-0.0.0-dataease.js";import"./mpd-parser-0.0.0-dataease.js";import"./@xmldom-0.0.0-dataease.js";import"./mux.js-0.0.0-dataease.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease6.js";import"./Component-0.0.0-dataease6.js";import"./flv.js-0.0.0-dataease.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease7.js";import"./Component-0.0.0-dataease13.js";import"./Attr-0.0.0-dataease16.js";import"./Attr.vue_vue_type_script_setup_true_lang-0.0.0-dataease8.js";import"./Attr-0.0.0-dataease12.js";import"./DatasetSelect-0.0.0-dataease.js";import"./icon_done_outlined-0.0.0-dataease.js";import"./Threshold-0.0.0-dataease.js";import"./TableThresholdEdit-0.0.0-dataease.js";import"./icon_info_filled-0.0.0-dataease.js";import"./TextLabelThresholdEdit-0.0.0-dataease.js";import"./TextThresholdEdit-0.0.0-dataease.js";import"./LineThresholdEdit-0.0.0-dataease.js";import"./PictureGroupThresholdEdit-0.0.0-dataease.js";import"./Component-0.0.0-dataease2.js";import"./index-0.0.0-dataease16.js";import"./dv-info-0.0.0-dataease.js";import"./icon_down_outlined-1-0.0.0-dataease.js";import"./icon-filter-0.0.0-dataease.js";import"./icon_refresh_outlined-0.0.0-dataease.js";import"./icon_search-outline_outlined-0.0.0-dataease.js";import"./icon_copy_outlined-0.0.0-dataease.js";import"./DimensionItem-0.0.0-dataease.js";import"./icon_sort_outlined-0.0.0-dataease.js";import"./icon_right_outlined-0.0.0-dataease.js";import"./icon_invisible_outlined-0.0.0-dataease.js";import"./utils-0.0.0-dataease.js";import"./QuotaItem-0.0.0-dataease.js";import"./DragPlaceholder-0.0.0-dataease.js";import"./FilterTree.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./RowAuth-0.0.0-dataease.js";import"./AuthTree-0.0.0-dataease.js";import"./FilterFiled-0.0.0-dataease.js";import"./icon_close_outlined-0.0.0-dataease.js";import"./TimeDialog-0.0.0-dataease.js";import"./options-0.0.0-dataease.js";import"./icon_down_outlined-0.0.0-dataease.js";import"./ChartStyle-0.0.0-dataease.js";import"./MiscSelector-0.0.0-dataease.js";import"./LabelSelector-0.0.0-dataease.js";import"./StringUtils-0.0.0-dataease.js";import"./TooltipSelector-0.0.0-dataease.js";import"./XAxisSelector-0.0.0-dataease.js";import"./YAxisSelector-0.0.0-dataease.js";import"./DualYAxisSelector-0.0.0-dataease.js";import"./DualYAxisSelectorInner-0.0.0-dataease.js";import"./TitleSelector-0.0.0-dataease.js";import"./icon_letter-spacing_outlined-0.0.0-dataease.js";import"./LegendSelector-0.0.0-dataease.js";import"./icon_bottom-align_outlined-0.0.0-dataease.js";import"./BasicStyleSelector-0.0.0-dataease.js";import"./CustomColorStyleSelect-0.0.0-dataease.js";import"./GradientColorSelector-0.0.0-dataease.js";import"./SymbolicStyleSelector-0.0.0-dataease.js";import"./DualBasicStyleSelector-0.0.0-dataease.js";import"./TableHeaderSelector-0.0.0-dataease.js";import"./TableHeaderGroupConfig-0.0.0-dataease.js";import"./vue-uuid-0.0.0-dataease.js";import"./uuid-0.0.0-dataease.js";import"./TableCellSelector-0.0.0-dataease.js";import"./TableTotalSelector-0.0.0-dataease.js";import"./CustomAggrEdit-0.0.0-dataease.js";import"./icon_adjustment_outlined-0.0.0-dataease.js";import"./MiscStyleSelector-0.0.0-dataease.js";import"./IndicatorValueSelector-0.0.0-dataease.js";import"./IndicatorNameSelector-0.0.0-dataease.js";import"./QuadrantSelector-0.0.0-dataease.js";import"./FlowMapLineSelector-0.0.0-dataease.js";import"./FlowMapPointSelector-0.0.0-dataease.js";import"./VQueryChartStyle-0.0.0-dataease.js";import"./Senior-0.0.0-dataease.js";import"./FunctionCfg-0.0.0-dataease.js";import"./ScrollCfg-0.0.0-dataease.js";import"./AssistLine-0.0.0-dataease.js";import"./AssistLineEdit-0.0.0-dataease.js";import"./MapMapping-0.0.0-dataease.js";import"./BubbleAnimateCfg-0.0.0-dataease.js";import"./QuotaFilterEditor-0.0.0-dataease.js";import"./ResultFilterEditor-0.0.0-dataease.js";import"./DrillItem-0.0.0-dataease.js";import"./ChartType-0.0.0-dataease.js";import"./CompareEdit-0.0.0-dataease.js";import"./ValueFormatterEdit-0.0.0-dataease.js";import"./CustomSortEdit-0.0.0-dataease.js";import"./SortPriorityEdit-0.0.0-dataease.js";import"./CalcFieldEdit-0.0.0-dataease.js";import"./ChartTemplateInfo-0.0.0-dataease.js";import"./field-calculated-list-0.0.0-dataease.js";const Uo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXcAAAAsCAYAAACe/vh+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPgSURBVHgB7dwxbtROFMfx3/8voAGJdBQgMdBQEkGDkBBGNFSQgh5zAsIJQsQBEk4QcwLgBFlOkEiIApoYiYaKREABFDCPmZEnG+9mk3XEYn0/0pOzY3tSJPP8/Ha9EgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACg7+Z8LPnYiLHmw+lginiexcKY/SsCgBn2n/rB+ViP200f2wqJuPZxK26Tubh/mI1vqLkgLPt4ku23hL4Yf659XBCAac3HGGj3Om1T+LipUHg5hTVrNmO88vFS+zvj46yPE5reDx/vfHwTjkTl45d2J+OFOLaeja3EsbJljqVsjuG5XsSx1bjdEoAu2FqyNfV5zDFOYR3/miBsvnLMXCd93PdxycfFDuKaj7uaQcfUD+fjdjUbsyt4rXC1T9X6qGrbKSTzZ2qvHnYU7gAGPh4JQFdc3M6N2P9AYV2n/baOnytU6nUct8rfKvoizmet08s+HrfMZ0n9jY/vCgXdND4o5I07Gt0RwJTSVX1+aDxVBUU2Nt9y/lYM+wOV2lu556jcgcOxtmZaP2kd5lV3my21V+QuzuGGxlIu+Kz299ys0raKu9JkdwL7xUI250z5X/3wOm7tip3+4Ctq/rguO3Zz6Nwy7rceO1de4OikhO7UXmS1sTvml9nWqu1UjG3ErSXytez4Ze19r+2o5HccV32cEjqX+uEpLImvaW/lnnMK/xxr2VgpKndgWk7NJ89SIq/UrM8yju1XuefzbWl8FW1J/sE+83RduZfZnIWP65oRfem5G7vlsyu7U7hiD9S8c54qcruFsp659eIs+ZfxeOvFpwTvsmNPq71vB2A8S+hl9vqhppPfVVcKffdaTc99SWHt7gh/9CW5lwpvqNgbolUccz7uKfwDbGbHFXG7mJ1/M0bO3pAhuQOTsaLJkqytNVuHc+qWJXdrtTiFws1+V6Gwvqs4lvb9LV98vBc6Vahpl1jSLtXcwpXZcU6h3eLGzFWKtgxwUMPtlTJ7ne6KKx2+LZNb1N6PP06q67ZM4eOGj3OaMX2p3AcKFbZVD+np0e04VmXH1RqdtAH8G6zdamvdxdfLBzjXHjo6ruZ5lmnYRyEHPm77+KkZ06ee+2qMQiGx1zrcp18q7b4gDOvLU71Al2ytWSumjq/rbN/OiOPbzpuEHWstmnWFxF5Nfqo+KlTab3081fSuKDwY9UkzhkQFoAtOobBKXwVg7EMJlrit0t5W8xFI+3kw5ryjZsnYHmbq4usHvip8/cDMVe4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKATvwGoIyg098JJfgAAAABJRU5ErkJggg==",Do={class:"mobile-config-panel"},Fo={class:"top-bar"},Lo={class:"mobile-to-pc"},Xo={class:"mobile-save"},jo={class:"open-mobile"},qo={class:"mobile-header"},Wo=["src"],Go={class:"config-panel-title"},Yo={class:"config-panel-content"},Ho=["src"],Ko={class:"mobile-com-list"},Qo={class:"config-mobile-sidebar"},Zo={class:"config-mobile-tab"},Ro={class:"config-mobile-tab-style"},$o={class:"config-mobile-tab"},ot={class:"component-outer"},tt=["onClick"],it=["onClick"],et=go({__name:"MobileConfigPanel",emits:["pcMode"],setup(rt,{emit:Q}){const{t:c}=bo(),h=xo(),{componentData:E,canvasStyleData:U,canvasViewInfo:O,dvInfo:d}=No(h),S=g(!0),B=g(null),D=Q,F=Eo(),s=g({}),w=(o,i)=>{o==="componentStyleChange"&&u.value++;const t=document.querySelector("iframe");t&&t.contentWindow.postMessage({type:o,value:i},"*")},b=Oo(),Z=G(()=>b.baseUrl?`${b.baseUrl}mobile.html#/panel`:"./mobile.html#/panel"),R=()=>{const o=JSON.parse(JSON.stringify(e(O)));o&&Object.keys(o).forEach(i=>{const{customAttrMobile:t,customStyleMobile:m,customAttr:n,customStyle:M}=o[i];o[i].customAttr=t||n,o[i].customStyle=m||M}),s.value=o,w("panelInit",JSON.parse(JSON.stringify({componentData:JSON.parse(JSON.stringify(e(E.value.filter(i=>!!i.inMobile)))),canvasStyleData:JSON.parse(JSON.stringify(e(U))),canvasViewInfo:W(o),dvInfo:JSON.parse(JSON.stringify(e(d))),isEmbedded:!!b.baseUrl})))},$=G(()=>E.value.filter(o=>!o.inMobile)),L=g(),X=o=>{var i;if(((i=o.data)==null?void 0:i.msgOrigin)==="de-fit2cloud"&&b.token&&b.baseUrl){const t={embeddedToken:b.token};t["de-embedded"]=!0,L.value.contentWindow.postMessage(t,"*");return}if(o.data.type==="panelInit"&&to(),o.data.type==="curComponentChange"&&(h.setCurComponentMobileConfig(o.data.value),o.data.value?v.value="componentStyle":v.value="com"),o.data.type==="delFromMobile"&&(u.value++,E.value.some(t=>t.id===o.data.value?(t.inMobile=!1,!0):!1)),o.data.type==="syncPcDesign"){const t=Bo(o.data.value);if(t){u.value++;let m;const n=O.value[t.id];n&&(m=W(n),m.customStyleMobile=null,m.customAttrMobile=null,s.value[t.id]=m),F.recordSnapshotCacheToMobile("syncPcDesign",t,m)}}["mobileSaveFromMobile","mobilePatchFromMobile"].includes(o.data.type)&&(E.value.forEach(t=>{const m=o.data.value[t.id];if(m){const{x:n,y:M,sizeX:z,sizeY:C,style:x,propValue:N,events:a,commonBackground:T}=m;t.mx=n,t.my=M,t.mSizeX=z,t.mSizeY=C,t.mStyle=x,t.mEvents=a,t.mCommonBackground=T,t.component==="VQuery"&&(t.mPropValue=N),t.component==="DeTabs"&&t.propValue.forEach(eo=>{eo.componentData.forEach(_=>{const{style:ro,propValue:mo,events:po,commonBackground:ao}=m.tab[_.id];_.mStyle=ro,_.mEvents=po,_.mCommonBackground=ao,_.component==="VQuery"&&(_.mPropValue=mo)})})}}),s.value&&Object.keys(s.value).forEach(t=>{const{customAttr:m,customStyle:n}=s.value[t];O.value[t].customAttrMobile=m,O.value[t].customStyleMobile=n})),o.data.type==="mobileSaveFromMobile"&&oo(),o.data.type==="mobilePatchFromMobile"&&D("pcMode")},oo=()=>{F.resetStyleChangeTimes(),Po(()=>{fo.success(c("visualization.save_success"))})},to=()=>{R(),S.value=!1},P=Io(()=>{const o=window.innerHeight;if(o>1032){B.value={transform:"translateY(-50%)"};return}const i=o/1032;B.value={transform:`scale(${i}) translateY(-50%)`,transformOrigin:"0 0"}},100);yo(()=>{window.addEventListener("message",X),window.addEventListener("resize",P),h.setMobileInPc(!0),K({name:"onMobileStatusChange",callback:({type:o,value:i})=>{w(o,i)}}),K({name:"curComponentChange",callback:o=>{}}),P()}),ho(()=>{h.setMobileInPc(!1),window.removeEventListener("message",X),window.removeEventListener("resize",P)});const j=o=>{S.value||(o.inMobile=!0,u.value++,w("addToMobile",JSON.parse(JSON.stringify(e(o)))))},u=g(0),v=g("com"),q=()=>{if(h.setCurComponent({component:null,index:null}),!u.value){w("mobilePatch",void 0);return}no.confirm(c("visualization.change_save_tips"),{confirmButtonType:"primary",type:"warning",autofocus:!1,showClose:!1}).then(()=>{setTimeout(()=>{zo(d.value.id,s.value,"dashboard",()=>{u.value=0,D("pcMode")})},100)})},io=()=>{u.value=0,w("mobileSave",void 0)};return(o,i)=>{const t=_o,m=so,n=lo,M=co,z=uo,C=Ao,x=vo,N=So("loading");return f(),A("div",Do,[p("div",Fo,[p("div",Lo,[r(m,{onClick:q},{default:l(()=>[r(t,{name:"icon_left_outlined"},{default:l(()=>[r(e(H),{class:"svg-icon"})]),_:1})]),_:1}),I(" "+k(e(d).name),1)]),p("div",Xo,[p("span",jo,k(e(c)("common.openMobileTerminal")),1),r(n,{size:"small",modelValue:e(d).mobileLayout,"onUpdate:modelValue":i[0]||(i[0]=a=>e(d).mobileLayout=a)},null,8,["modelValue"]),i[4]||(i[4]=p("span",{class:"open-mobile-line"},null,-1)),r(M,{offset:14,effect:"dark",content:"切换至PC端布局",placement:"bottom"},{default:l(()=>[r(m,{onClick:q,class:"switch-pc"},{default:l(()=>[r(t,{name:"icon_pc_outlined"},{default:l(()=>[r(e(Co),{class:"svg-icon"})]),_:1})]),_:1})]),_:1}),r(z,{type:"primary",onClick:io},{default:l(()=>i[3]||(i[3]=[I("保存")])),_:1})])]),B.value?(f(),A("div",{key:0,class:"mobile-canvas",style:wo(B.value)},[p("div",qo,[p("img",{src:e(Uo),alt:"",srcset:""},null,8,Wo)]),p("div",Go,[r(m,null,{default:l(()=>[r(t,{name:"icon_left_outlined"},{default:l(()=>[r(e(H),{class:"svg-icon"})]),_:1})]),_:1}),I(" "+k(e(d).name),1)]),y((f(),A("div",Yo,[p("iframe",{ref_key:"newWindow",ref:L,src:Z.value,frameborder:"0",width:"375"},null,8,Ho)])),[[N,S.value]]),i[5]||(i[5]=p("div",{class:"config-panel-foot"},null,-1))],4)):J("",!0),p("div",Ko,[p("div",Qo,k(e(c)("visualization.mobile_config")),1),r(x,{size:"small",modelValue:v.value,"onUpdate:modelValue":i[1]||(i[1]=a=>v.value=a)},{default:l(()=>[r(C,{label:e(c)("visualization.visualization_component"),name:"com"},null,8,["label"]),r(C,{label:e(c)("visualization.component_style"),name:"componentStyle"},null,8,["label"]),r(C,{label:e(c)("visualization.whole_style"),name:"style"},null,8,["label"])]),_:1},8,["modelValue"]),S.value?J("",!0):(f(),A(Y,{key:0},[y(p("div",Zo,[r(ko,{onStyleChange:i[2]||(i[2]=a=>u.value++)})],512),[[V,v.value==="style"]]),y(p("div",Ro,[r(To,{"canvas-view-info-mobile":s.value},null,8,["canvas-view-info-mobile"])],512),[[V,v.value==="componentStyle"]]),y(p("div",$o,[(f(!0),A(Y,null,Mo($.value,a=>(f(),A("div",{style:{height:"196px",width:"196px"},class:"mobile-wrapper-inner-adaptor",key:a.id},[p("div",ot,[y(r(Vo,{"canvas-id":"canvas-main","canvas-style-data":e(U),"dv-info":e(d),"canvas-view-info":s.value,"view-info":s.value[a.id],config:a,class:"wrapper-design","show-position":"preview","search-count":0,scale:65},null,8,["canvas-style-data","dv-info","canvas-view-info","view-info","config"]),[[V,a.isShow]])]),p("div",{class:"mobile-com-mask",onClick:T=>j(a)},[y(p("span",{style:{color:"#909399"}},k(e(c)("visualization.mobile_ios_tips")),513),[[V,a.component==="DeStreamMedia"]])],8,tt),S.value?J("",!0):(f(),A("div",{key:0,class:"pc-select-to-mobile",onClick:T=>j(a)},null,8,it))]))),128))],512),[[V,v.value==="com"]])],64))])])}}});const ca=Jo(et,[["__scopeId","data-v-2fcccaaf"]]);export{ca as default};

import{T as M,U as h,r as C,V as j,n as b,W as S,X as A,Y as F,f as B,Z as r,a0 as I}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{v as K}from"./vue-0.0.0-dataease.js";import{a as O,u as R}from"./index-0.0.0-dataease.js";import{a as T}from"./axios-0.0.0-dataease.js";import{P as E}from"./pinia-0.0.0-dataease.js";import{d as J,r as p,U,b as V,ak as W,W as Z,o as q,Z as H,T as X,u as x,$ as Y}from"./@vue-0.0.0-dataease.js";const oe=J({__name:"PluginComponent",emits:["loadFail"],setup(z,{expose:_,emit:k}){const{wsCache:s}=O(),i=p(),n=p(!1),l=U(),f=()=>{i.value=F,n.value=!1},y=t=>{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(var o=0;o<t;o++)e+=a.charAt(Math.floor(Math.random()*a.length));return e},w=t=>{B(Object.assign({}),`../../../../../../../extensions/${r(t[8])}/${r(t[9])}/${r(t[10])}/${r(t[11])}/${r(t[12])}.vue`).then(e=>{i.value=e.default}).catch(e=>{console.error(e),f()})},m=()=>window.atob(l.jsname.toString()).split("/")[0],P=()=>{const t=m();n.value=!0;const a=s.get(`de-plugin-proxy-${t}`);if(a){w(JSON.parse(a)),n.value=!1;return}const e=y(I()),o=window.btoa(t),u=`${e},${o}`;S(u).then(d=>{let N=d.data;const g=A(N,e);$(g),w(g)}).catch(()=>{v("loadFail"),f()}).finally(()=>{n.value=!1})},$=t=>{const a=[];t.forEach(o=>{a.push([...o])});const e=m();s.set(`de-plugin-proxy-${e}`,JSON.stringify(a))},c=p(null),D=t=>{var a,e;c.value.invokeMethod?c.value.invokeMethod(t):(e=(a=c.value)[t.methodName])==null||e.call(a,...t.args)};V(async()=>{const t="xpack-model-distributed";let a=!1;if(s.get(t)===null){const e=await M();s.set("xpack-model-distributed",h(e.data)?"null":e.data),a=e.data}else a=s.get(t);if(h(a)){setTimeout(()=>{v("loadFail"),n.value=!1},1e3);return}if(a){const e=m();if(window[e]){const o=await window[e].mapping[l.jsname];i.value=o.default}else{window.VueDe=K,window.AxiosDe=T,window.PiniaDe=E,window.vueRouterDe=C,window.MittAllDe=R().emitter.all,window.I18nDe=j;const o=`/xpackComponent/pluginStaticInfo/${e}`;b.get({url:o}).then(async u=>{new Function(u.data||u)();const d=await window[e].mapping[l.jsname];i.value=d.default})}}else P()});const v=k;return _({invokeMethod:D}),(t,a)=>{const e=W("loading");return Z((q(),H(Y(i.value),X({key:x(l).jsname,ref_key:"pluginProxy",ref:c},x(l)),null,16)),[[e,n.value]])}}});export{oe as _};

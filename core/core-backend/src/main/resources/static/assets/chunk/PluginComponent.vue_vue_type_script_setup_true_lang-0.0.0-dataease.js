import{aA as C,aB as h,r as M,aC as j,x as A,aD as S,aE as b,aF as F,f as B,aG as r,aH as E}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as I,r as p,ag as K,o as O,v as R,au as H,aa as J,T,f as q,g as G,a4 as V,j as x,m as z}from"./vue-0.0.0-dataease.js";import{a as L,u as Q}from"./index-0.0.0-dataease.js";import{a as U}from"./axios-0.0.0-dataease.js";const ae=I({__name:"PluginComponent",emits:["loadFail"],setup(W,{expose:_,emit:y}){const{wsCache:s}=L(),i=p(),n=p(!1),l=K(),f=()=>{i.value=F,n.value=!1},k=a=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(var o=0;o<a;o++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},w=a=>{B(Object.assign({}),`../../../../../../../extensions/${r(a[8])}/${r(a[9])}/${r(a[10])}/${r(a[11])}/${r(a[12])}.vue`).then(e=>{i.value=e.default}).catch(e=>{console.error(e),f()})},d=()=>window.atob(l.jsname.toString()).split("/")[0],D=()=>{const a=d();n.value=!0;const t=s.get(`de-plugin-proxy-${a}`);if(t){w(JSON.parse(t)),n.value=!1;return}const e=k(E()),o=window.btoa(a),u=`${e},${o}`;S(u).then(m=>{let $=m.data;const g=b($,e);P(g),w(g)}).catch(()=>{v("loadFail"),f()}).finally(()=>{n.value=!1})},P=a=>{const t=[];a.forEach(o=>{t.push([...o])});const e=d();s.set(`de-plugin-proxy-${e}`,JSON.stringify(t))},c=p(null),N=a=>{var t,e;c.value.invokeMethod?c.value.invokeMethod(a):(e=(t=c.value)[a.methodName])==null||e.call(t,...a.args)};O(async()=>{const a="xpack-model-distributed";let t=!1;if(s.get(a)===null){const e=await C();s.set("xpack-model-distributed",h(e.data)?"null":e.data),t=e.data}else t=s.get(a);if(h(t)){setTimeout(()=>{v("loadFail"),n.value=!1},1e3);return}if(t){const e=d();if(window[e]){const o=await window[e].mapping[l.jsname];i.value=o.default}else{window.VueDe=R,window.AxiosDe=U,window.PiniaDe=H,window.vueRouterDe=M,window.MittAllDe=Q().emitter.all,window.I18nDe=j;const o=`/xpackComponent/pluginStaticInfo/${e}`;A.get({url:o}).then(async u=>{new Function(u.data||u)();const m=await window[e].mapping[l.jsname];i.value=m.default})}}else D()});const v=y;return _({invokeMethod:N}),(a,t)=>{const e=J("loading");return T((q(),G(z(i.value),V({key:x(l).jsname,ref_key:"pluginProxy",ref:c},x(l)),null,16)),[[e,n.value]])}}});export{ae as _};

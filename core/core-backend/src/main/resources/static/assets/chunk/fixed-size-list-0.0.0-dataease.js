import{c as mt,r as St,H as ht,V as vt,k as gt,I as at,S as ct,u as Ot,m as st,R as tt,a as rt,b as Tt,d as it,e as wt,B as Et,F as Mt,g as et,A as lt,f as Rt,C as ft,E as yt,h as xt,j as It}from"./el-virtual-list-0.0.0-dataease.js";import{i as Lt}from"./browser-0.0.0-dataease.js";import{f as _t,x as U,J as bt}from"./index-0.0.0-dataease.js";import{d as At,r as k,G as w,j as o,o as Nt,_ as zt,m as ut,h as j,J as dt,B as Ct,n as J,N as Ft}from"./vue-0.0.0-dataease.js";const Dt={[ht]:"deltaX",[vt]:"deltaY"},kt=({atEndEdge:r,atStartEdge:d,layout:S},L)=>{let E,h=0;const v=c=>c<0&&d.value||c>0&&r.value;return{hasReachedEdge:v,onWheel:c=>{mt(E);const O=c[Dt[S.value]];v(h)&&v(h+O)||(h+=O,Lt()||c.preventDefault(),E=St(()=>{L(h),h=0}))}}},Wt=({name:r,getOffset:d,getItemSize:S,getItemOffset:L,getEstimatedTotalSize:E,getStartIndexForOffset:h,getStopIndexForStartIndex:v,initCache:g,clearCache:c,validateProps:O})=>At({name:r??"ElVirtualList",props:gt,emits:[at,ct],setup(e,{emit:m,expose:M}){O(e);const K=Ct(),C=_t("vl"),R=k(g(e,K)),F=Ot(),_=k(),W=k(),$=k(),a=k({isScrolling:!1,scrollDir:"forward",scrollOffset:U(e.initScrollOffset)?e.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:e.scrollbarAlwaysOn}),H=w(()=>{const{total:t,cache:s}=e,{isScrolling:l,scrollDir:u,scrollOffset:n}=o(a);if(t===0)return[0,0,0,0];const i=h(e,n,o(R)),f=v(e,i,n,o(R)),N=!l||u===Et?Math.max(1,s):1,z=!l||u===Mt?Math.max(1,s):1;return[Math.max(0,i-N),Math.max(0,Math.min(t-1,f+z)),i,f]}),T=w(()=>E(e,o(R))),y=w(()=>st(e.layout)),X=w(()=>[{position:"relative",[`overflow-${y.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:e.direction,height:U(e.height)?`${e.height}px`:e.height,width:U(e.width)?`${e.width}px`:e.width},e.style]),Y=w(()=>{const t=o(T),s=o(y);return{height:s?"100%":`${t}px`,pointerEvents:o(a).isScrolling?"none":void 0,width:s?`${t}px`:"100%"}}),x=w(()=>y.value?e.width:e.height),{onWheel:Z}=kt({atStartEdge:w(()=>a.value.scrollOffset<=0),atEndEdge:w(()=>a.value.scrollOffset>=T.value),layout:w(()=>e.layout)},t=>{var s,l;(l=(s=$.value).onMouseUp)==null||l.call(s),I(Math.min(a.value.scrollOffset+t,T.value-x.value))}),G=()=>{const{total:t}=e;if(t>0){const[n,i,f,N]=o(H);m(at,n,i,f,N)}const{scrollDir:s,scrollOffset:l,updateRequested:u}=o(a);m(ct,s,l,u)},V=t=>{const{clientHeight:s,scrollHeight:l,scrollTop:u}=t.currentTarget,n=o(a);if(n.scrollOffset===u)return;const i=Math.max(0,Math.min(u,l-s));a.value={...n,isScrolling:!0,scrollDir:et(n.scrollOffset,i),scrollOffset:i,updateRequested:!1},J(D)},Q=t=>{const{clientWidth:s,scrollLeft:l,scrollWidth:u}=t.currentTarget,n=o(a);if(n.scrollOffset===l)return;const{direction:i}=e;let f=l;if(i===tt)switch(rt()){case it:{f=-l;break}case Rt:{f=u-s-l;break}}f=Math.max(0,Math.min(f,u-s)),a.value={...n,isScrolling:!0,scrollDir:et(n.scrollOffset,f),scrollOffset:f,updateRequested:!1},J(D)},p=t=>{o(y)?Q(t):V(t),G()},q=(t,s)=>{const l=(T.value-x.value)/s*t;I(Math.min(T.value-x.value,l))},I=t=>{t=Math.max(t,0),t!==o(a).scrollOffset&&(a.value={...o(a),scrollOffset:t,scrollDir:et(o(a).scrollOffset,t),updateRequested:!0},J(D))},A=(t,s=lt)=>{const{scrollOffset:l}=o(a);t=Math.max(0,Math.min(t,e.total-1)),I(d(e,t,s,l,o(R)))},B=t=>{const{direction:s,itemSize:l,layout:u}=e,n=F.value(c&&l,c&&u,c&&s);let i;if(Ft(n,String(t)))i=n[t];else{const f=L(e,t,o(R)),N=S(e,t,o(R)),z=o(y),nt=s===tt,ot=z?f:0;n[t]=i={position:"absolute",left:nt?void 0:`${ot}px`,right:nt?`${ot}px`:void 0,top:z?0:`${f}px`,height:z?"100%":`${N}px`,width:z?`${N}px`:"100%"}}return i},D=()=>{a.value.isScrolling=!1,J(()=>{F.value(-1,null,null)})},P=()=>{const t=_.value;t&&(t.scrollTop=0)};Nt(()=>{if(!bt)return;const{initScrollOffset:t}=e,s=o(_);U(t)&&s&&(o(y)?s.scrollLeft=t:s.scrollTop=t),G()}),zt(()=>{const{direction:t,layout:s}=e,{scrollOffset:l,updateRequested:u}=o(a),n=o(_);if(u&&n)if(s===ht)if(t===tt)switch(rt()){case it:{n.scrollLeft=-l;break}case Tt:{n.scrollLeft=l;break}default:{const{clientWidth:i,scrollWidth:f}=n;n.scrollLeft=f-i-l;break}}else n.scrollLeft=l;else n.scrollTop=l});const b={ns:C,clientSize:x,estimatedTotalSize:T,windowStyle:X,windowRef:_,innerRef:W,innerStyle:Y,itemsToRender:H,scrollbarRef:$,states:a,getItemStyle:B,onScroll:p,onScrollbarScroll:q,onWheel:Z,scrollTo:I,scrollToItem:A,resetScrollTop:P};return M({windowRef:_,innerRef:W,getItemStyleCache:F,scrollTo:I,scrollToItem:A,resetScrollTop:P,states:a}),b},render(e){var m;const{$slots:M,className:K,clientSize:C,containerElement:R,data:F,getItemStyle:_,innerElement:W,itemsToRender:$,innerStyle:a,layout:H,total:T,onScroll:y,onScrollbarScroll:X,onWheel:Y,states:x,useIsScrolling:Z,windowStyle:G,ns:V}=e,[Q,p]=$,q=ut(R),I=ut(W),A=[];if(T>0)for(let b=Q;b<=p;b++)A.push((m=M.default)==null?void 0:m.call(M,{data:F,key:b,index:b,isScrolling:Z?x.isScrolling:void 0,style:_(b)}));const B=[j(I,{style:a,ref:"innerRef"},dt(I)?A:{default:()=>A})],D=j(wt,{ref:"scrollbarRef",clientSize:C,layout:H,onScroll:X,ratio:C*100/this.estimatedTotalSize,scrollFrom:x.scrollOffset/(this.estimatedTotalSize-C),total:T}),P=j(q,{class:[V.e("window"),K],style:G,onScroll:y,onWheel:Y,ref:"windowRef",key:0},dt(q)?[B]:{default:()=>[B]});return j("div",{key:0,class:[V.e("wrapper"),x.scrollbarAlwaysOn?"always-on":""]},[P,D])}}),qt=Wt({name:"ElFixedSizeList",getItemOffset:({itemSize:r},d)=>d*r,getItemSize:({itemSize:r})=>r,getEstimatedTotalSize:({total:r,itemSize:d})=>d*r,getOffset:({height:r,total:d,itemSize:S,layout:L,width:E},h,v,g)=>{const c=st(L)?E:r,O=Math.max(0,d*S-c),e=Math.min(O,h*S),m=Math.max(0,(h+1)*S-c);switch(v===It&&(g>=m-c&&g<=e+c?v=lt:v=ft),v){case xt:return e;case yt:return m;case ft:{const M=Math.round(m+(e-m)/2);return M<Math.ceil(c/2)?0:M>O+Math.floor(c/2)?O:M}case lt:default:return g>=m&&g<=e?g:g<m?m:e}},getStartIndexForOffset:({total:r,itemSize:d},S)=>Math.max(0,Math.min(r-1,Math.floor(S/d))),getStopIndexForStartIndex:({height:r,total:d,itemSize:S,layout:L,width:E},h,v)=>{const g=h*S,c=st(L)?E:r,O=Math.ceil((c+v-g)/S);return Math.max(0,Math.min(d-1,h+O-1))},initCache(){},clearCache:!0,validateProps(){}});export{qt as F,Wt as c};

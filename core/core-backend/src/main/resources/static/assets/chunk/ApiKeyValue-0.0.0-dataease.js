import{j as z,h as C}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as Y,r as Z,ae as q,B as G,x as H,y as J,h as Q,o as W}from"./element-plus-secondary-0.0.0-dataease.js";import{i as X}from"./icon_drag_outlined-0.0.0-dataease.js";import{i as ee}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as ae}from"./icon_add_outlined-0.0.0-dataease.js";import{p as y}from"./index-0.0.0-dataease.js";import{K as S}from"./ApiTestModel-0.0.0-dataease.js";import{d as le}from"./vuedraggable-0.0.0-dataease.js";import{d as oe,k as E,t as te,R as ne,i as de,o as n,c as V,a0 as t,_ as o,a as ue,u as l,Z as i,Y as m,M as x,ab as U,a4 as re,a2 as ie}from"./@vue-0.0.0-dataease.js";import{_ as se}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./vue-router-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./escape-html-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";const me={class:"api-key-value"},ce={style:{"margin-bottom":"16px"}},pe=oe({__name:"ApiKeyValue",props:{keyPlaceholder:y.string.def(""),valuePlaceholder:y.string.def(""),unShowSelect:y.bool.def(!1),isReadOnly:y.bool.def(!1),needMock:y.bool.def(!1),showDesc:y.bool.def(!1),items:{type:Array,default:()=>[]},valueList:{type:Array,default:()=>[]},suggestions:{type:Array,default:()=>[]}},setup(d){const b=d,{t:r}=z(),g=E(()=>b.keyPlaceholder||r("datasource.key")),N=E(()=>b.valuePlaceholder||r("datasource.value")),{suggestions:v,items:s}=te(b);ne(()=>{(!s.value.length||s.value[s.value.length-1].name)&&s.value.push(new S({enable:!0,name:"",value:""}));for(let u=0;u<s.value.length;u++)s.value[u].hasOwnProperty("nameType")||(s.value[u].nameType="fixed")});const c=de("api-active-name"),O=u=>{T()||s.value.splice(u,1)},R=()=>{s.value.push(new S({enable:!0,nameType:"fixed"}))},T=()=>s.value.length===1,A=(u,f)=>{const h=u?v.value.filter(D(u)):v.value;f(h)},B=u=>{u.value=""},D=u=>f=>f.value.toLowerCase().indexOf(u.toLowerCase())===0,F=[{label:r("data_source.parameter"),value:"params"},{label:r("data_source.fixed_value"),value:"fixed"},{label:r("data_source.time_function"),value:"timeFun"},{label:r("data_source.customize"),value:"custom"}],L=[{label:r("data_source.that_day")+"（yyyy-MM-dd）",value:"currentDay yyyy-MM-dd"},{label:r("data_source.that_day")+"（yyyy/MM/dd）",value:"currentDay yyyy/MM/dd"}];return(u,f)=>{const h=C,I=Y,_=Z,K=q,p=G,k=H,w=J,M=Q,P=W,$=C;return n(),V("div",me,[t(l(le),{tag:"div",list:l(s),handle:".handle",class:"draggable-content_api"},{item:o(({element:a,index:j})=>[ue("div",ce,[t(P,{gutter:8},{default:o(()=>[t(I,{class:"drag handle"},{default:o(()=>[t(h,{name:"icon_drag_outlined"},{default:o(()=>[t(l(X),{class:"svg-icon"})]),_:1})]),_:1}),d.unShowSelect?m("",!0):(n(),i(p,{key:0,span:l(c)==="params"?8:6},{default:o(()=>[l(v)?(n(),i(K,{key:1,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:d.isReadOnly,maxlength:400,"fetch-suggestions":A,placeholder:g.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):(n(),i(_,{key:0,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:d.isReadOnly,maxlength:"200",placeholder:g.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"]))]),_:2},1032,["span"])),l(c)==="table"?(n(),i(p,{key:1,span:3},{default:o(()=>[t(w,{modelValue:a.nameType,"onUpdate:modelValue":e=>a.nameType=e,onChange:e=>B(a)},{default:o(()=>[(n(),V(x,null,U(F,e=>t(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)):m("",!0),d.unShowSelect?(n(),i(p,{key:2,span:8},{default:o(()=>[l(v).length?(n(),i(_,{key:0,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:d.isReadOnly,maxlength:"200",placeholder:g.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):m("",!0)]),_:2},1024)):m("",!0),t(p,{span:l(c)==="params"?7:6},{default:o(()=>[!d.needMock&&l(c)==="params"?(n(),i(_,{key:0,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,disabled:d.isReadOnly,placeholder:d.unShowSelect?l(r)("common.description"):N.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):m("",!0),!d.needMock&&l(c)==="table"&&a.nameType==="params"?(n(),i(w,{key:1,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:o(()=>[(n(!0),V(x,null,U(d.valueList,e=>(n(),i(k,{key:e.originName,label:e.name,value:e.originName},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):m("",!0),!d.needMock&&l(c)==="table"&&a.nameType==="timeFun"?(n(),i(w,{key:2,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,style:{width:"100%"}},{default:o(()=>[(n(),V(x,null,U(L,e=>t(k,{key:e.originName,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])):m("",!0),!d.needMock&&l(c)==="table"&&a.nameType!=="params"&&a.nameType!=="timeFun"?(n(),i(_,{key:3,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,disabled:d.isReadOnly,placeholder:a.nameType==="fixed"?l(r)("data_source.value"):l(r)("data_source.name_use_parameters"),"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):m("",!0)]),_:2},1032,["span"]),d.showDesc?(n(),i(p,{key:3,span:7},{default:o(()=>[t(_,{modelValue:a.description,"onUpdate:modelValue":e=>a.description=e,maxlength:"200",placeholder:l(r)("common.description"),"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)):m("",!0),t(p,{span:1},{default:o(()=>[t(M,{class:"api-variable_del",text:"",disabled:T(),onClick:e=>O(j)},{icon:o(()=>[t(h,{name:"icon_delete-trash_outlined"},{default:o(()=>[t(l(ee),{class:"svg-icon"})]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])]),_:1},8,["list"]),t(M,{style:{"margin-top":"14px"},onClick:R,text:""},{icon:o(()=>[t($,{name:"icon_add_outlined"},{default:o(()=>[t(l(ae),{class:"svg-icon"})]),_:1})]),default:o(()=>[re(" "+ie(l(r)("data_source.add_parameters")),1)]),_:1})])}}});const Va=se(pe,[["__scopeId","data-v-e20f9190"]]);export{Va as default};

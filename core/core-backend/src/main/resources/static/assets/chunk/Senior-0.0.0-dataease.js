import{C as q,d as S,p as R,D as ce,o as de}from"./element-plus-secondary-0.0.0-dataease.js";import{d as fe,r as U,t as he,w as ge,k as M,o as m,Z as d,_ as l,c as w,a0 as a,u as e,Y as p,a as f,z as c,a2 as k,M as W,a1 as G}from"./@vue-0.0.0-dataease.js";import{i as Z}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as K}from"./icon_edit_outlined-0.0.0-dataease.js";import{j as ve,l as _e}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import Ce from"./FunctionCfg-0.0.0-dataease.js";import be from"./ScrollCfg-0.0.0-dataease.js";import ye from"./AssistLine-0.0.0-dataease.js";import ke from"./Threshold-0.0.0-dataease.js";import Ae from"./MapMapping-0.0.0-dataease.js";import{C as b}from"./CollapseSwitchItem-0.0.0-dataease.js";import{useAppStoreWithOut as Ie}from"./app-0.0.0-dataease.js";import{L as Ve,a as Se}from"./LinkageSet-0.0.0-dataease.js";import{d as Y,D as Me,E as we,F as xe,k as je,G as qe,q as Le}from"./canvasUtils-0.0.0-dataease.js";import{d as Oe}from"./dvMain-0.0.0-dataease.js";import{i as De}from"./StringUtils-0.0.0-dataease.js";import{s as Ee}from"./pinia-0.0.0-dataease.js";import{B as Be}from"./chart-0.0.0-dataease.js";import Je from"./BubbleAnimateCfg-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import{_ as Ne,C as ze}from"./CarouselSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{I as x}from"./vant-0.0.0-dataease.js";import{A as Te,e as Pe}from"./lodash-es-0.0.0-dataease.js";import{_ as Fe}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./escape-html-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./vue-router-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./util-0.0.0-dataease2.js";import"./chart-0.0.0-dataease2.js";import"./icon_info_outlined-0.0.0-dataease.js";import"./AssistLineEdit-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./attr-0.0.0-dataease20.js";import"./field-list-0.0.0-dataease.js";import"./TableThresholdEdit-0.0.0-dataease.js";import"./icon_info_filled-0.0.0-dataease.js";import"./TextLabelThresholdEdit-0.0.0-dataease.js";import"./TextThresholdEdit-0.0.0-dataease.js";import"./LineThresholdEdit-0.0.0-dataease.js";import"./PictureGroupThresholdEdit-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./html2canvas-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./file-saver-0.0.0-dataease.js";import"./html-to-image-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./chart-list-0.0.0-dataease.js";import"./dv-link-target-0.0.0-dataease.js";import"./dv-dashboard-spine-0.0.0-dataease.js";import"./dv-folder-0.0.0-dataease.js";import"./dv-screen-spine-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./CodeMirror-0.0.0-dataease2.js";import"./@codemirror-0.0.0-dataease.js";import"./@lezer-0.0.0-dataease.js";import"./style-mod-0.0.0-dataease.js";import"./crelt-0.0.0-dataease.js";import"./@marijn-0.0.0-dataease.js";import"./w3c-keyname-0.0.0-dataease.js";import"./codemirror-0.0.0-dataease.js";import"./snapshot-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./eventBus-0.0.0-dataease.js";import"./EmptyBackground-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./treeSortUtils-0.0.0-dataease.js";import"./dv-empty-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./less-0.0.0-dataease.js";import"./tslib-0.0.0-dataease.js";import"./copy-anything-0.0.0-dataease.js";import"./is-what-0.0.0-dataease.js";import"./ModelUtil-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./formatter-0.0.0-dataease.js";import"./@antv-0.0.0-dataease.js";import"./eventemitter3-0.0.0-dataease.js";import"./@mapbox-0.0.0-dataease.js";import"./pbf-0.0.0-dataease.js";import"./ieee754-0.0.0-dataease.js";import"./supercluster-0.0.0-dataease.js";import"./gl-matrix-0.0.0-dataease.js";import"./topojson-client-0.0.0-dataease.js";import"./viewport-mercator-project-0.0.0-dataease.js";import"./@turf-0.0.0-dataease.js";import"./polygon-clipping-0.0.0-dataease.js";import"./splaytree-0.0.0-dataease.js";import"./robust-predicates-0.0.0-dataease.js";import"./d3-scale-0.0.0-dataease.js";import"./d3-collection-0.0.0-dataease.js";import"./d3-format-0.0.0-dataease.js";import"./d3-time-format-0.0.0-dataease.js";import"./d3-time-0.0.0-dataease.js";import"./d3-color-0.0.0-dataease.js";import"./d3-array-0.0.0-dataease.js";import"./earcut-0.0.0-dataease.js";import"./regl-0.0.0-dataease.js";import"./mapbox-gl-0.0.0-dataease.js";import"./d3-dsv-0.0.0-dataease.js";import"./geojson-vt-0.0.0-dataease.js";import"./hammerjs-0.0.0-dataease.js";import"./element-resize-detector-0.0.0-dataease.js";import"./batch-processor-0.0.0-dataease.js";import"./d3-hexbin-0.0.0-dataease.js";import"./detect-browser-0.0.0-dataease.js";import"./d3-ease-0.0.0-dataease.js";import"./d3-interpolate-0.0.0-dataease.js";import"./d3-timer-0.0.0-dataease.js";import"./fecha-0.0.0-dataease.js";import"./size-sensor-0.0.0-dataease.js";import"./d3-regression-0.0.0-dataease.js";import"./d3-hierarchy-0.0.0-dataease.js";import"./fmin-0.0.0-dataease.js";import"./pdfast-0.0.0-dataease.js";import"./mathjs-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./exceljs-0.0.0-dataease.js";import"./@vant-0.0.0-dataease.js";const Re={class:"inner-container"},Ue={class:"right-btns"},We=["title"],Ge=["title","disabled"],Ze={class:"inner-container"},Ke={class:"right-btns"},Ye=["title"],$e=["title","disabled"],He={key:1,class:"no-senior"},Qe=fe({__name:"Senior",props:{chart:{type:Object,required:!0},quotaData:{type:Array,required:!0},quotaExtData:{type:Array,required:!0},fieldsData:{type:Array,required:!0},themes:{type:String,default:"dark"},properties:{type:Array,required:!1,default:()=>[]},propertyInnerAll:{type:Object,required:!1,default:()=>({})},eventInfo:{type:Object,required:!1}},emits:["onFunctionCfgChange","onAssistLineChange","onScrollCfgChange","onThresholdChange","onMapMappingChange","onBubbleAnimateChange"],setup(L,{emit:$}){const y=Oe(),{nowPanelTrackInfo:H,nowPanelJumpInfo:Q,dvInfo:h,componentData:Xe,curComponent:O,batchOptStatus:X}=Ee(y),{t:r}=ve(),D=U(null),E=U(null),B={attrActiveNames:[],styleActiveNames:[]},_=$,s=L,{chart:t,themes:n,properties:A,propertyInnerAll:C}=he(s);ge(()=>{var i;return(i=t.value)==null?void 0:i.senior},()=>{var i;t.value.senior=Te(((i=t.value)==null?void 0:i.senior)||{},Pe(Be.senior))});const J=M(()=>{var I;let i=0,o=0;return(I=s.fieldsData)==null||I.forEach(V=>{const v=s.chart.id+"#"+V.id;H.value[v]&&i++,Q.value[v]&&o++}),{linkageCount:i,jumpCount:o}}),ee=M(()=>!X.value&&["indicator","rich-text"].includes(t.value.type)&&s.eventInfo),j=i=>{_("onFunctionCfgChange",i)},N=i=>{_("onAssistLineChange",i)},z=i=>{_("onScrollCfgChange",i)},T=i=>{_("onThresholdChange",i)},te=i=>{_("onMapMappingChange",i)},P=i=>{_("onBubbleAnimateChange",i)},g=i=>{var o;return(o=A==null?void 0:A.value)==null?void 0:o.includes(i)},oe=()=>{if(!h.value.id){R.warning(r("visualization.save_page_tips"));return}Y(()=>{D.value.dialogInit({id:t.value.id})})},ie=()=>{if(!h.value.id){R.warning(r("visualization.save_page_tips"));return}Y(()=>{E.value.dialogInit({id:t.value.id})})},ae=["map-mapping","function-cfg","assist-line","scroll-cfg","threshold","jump-set","linkage","bubble-animate"],ne=["chart-mix","chart-mix-stack","chart-mix-group"],F=M(()=>!De(A.value,...ae)&&ne.includes(t.value.type)),re=()=>{const i={sourceDvId:h.value.id,sourceViewId:t.value.id,activeStatus:t.value.jumpActive};Me(i).then(o=>{y.setNowPanelJumpInfo(o.data)})},le=()=>{const i={dvId:h.value.id,sourceViewId:t.value.id,activeStatus:t.value.linkageActive};we(i).then(o=>{y.setNowPanelTrackInfo(o.data)})},se=Ie(),me=M(()=>se.getIsDataEaseBi),pe=()=>{xe({dvId:h.value.id,sourceViewId:t.value.id}).then(i=>{je(h.value.id).then(o=>{y.setNowPanelTrackInfo(o.data)})})},ue=()=>{qe({sourceDvId:h.value.id,sourceViewId:t.value.id}).then(i=>{Le(h.value.id).then(o=>{y.setNowPanelJumpInfo(o.data)})})};return(i,o)=>{const I=ce,V=de;return m(),d(V,{class:c(["view-panel","senior-"+e(n)])},{default:l(()=>[F.value?p("",!0):(m(),w("div",{key:0,onKeydown:o[8]||(o[8]=G(()=>{},["stop"])),onKeyup:o[9]||(o[9]=G(()=>{},["stop"])),class:"attr-style"},[a(V,{class:"de-collapse-style"},{default:l(()=>[a(I,{modelValue:B.attrActiveNames,"onUpdate:modelValue":o[7]||(o[7]=v=>B.attrActiveNames=v),class:"style-collapse"},{default:l(()=>{var v;return[g("function-cfg")?(m(),d(e(q),{key:0,effect:e(n),name:"function",title:e(r)("chart.function_cfg"),onModelChange:j},{default:l(()=>[a(Ce,{themes:e(n),chart:s.chart,"property-inner":e(C)["function-cfg"],onOnFunctionCfgChange:j},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title"])):p("",!0),g("map-mapping")?(m(),d(e(q),{key:1,effect:e(n),name:"mapMapping",title:e(r)("chart.place_name_mapping"),onModelChange:j},{default:l(()=>[a(Ae,{themes:e(n),chart:s.chart,"property-inner":e(C)["function-cfg"],onOnMapMappingChange:te},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title"])):p("",!0),g("assist-line")?(m(),d(b,{key:2,effect:e(n),title:e(r)("chart.assist_line"),"change-model":e(t).senior.assistLineCfg,modelValue:e(t).senior.assistLineCfg.enable,"onUpdate:modelValue":o[0]||(o[0]=u=>e(t).senior.assistLineCfg.enable=u),name:"analyse",onModelChange:o[1]||(o[1]=u=>N({data:u}))},{default:l(()=>[a(ye,{chart:s.chart,themes:e(n),"quota-data":s.quotaData,"quota-ext-data":s.quotaExtData,"property-inner":e(C)["assist-line"],onOnAssistLineChange:N},null,8,["chart","themes","quota-data","quota-ext-data","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),g("scroll-cfg")?(m(),d(b,{key:3,effect:e(n),title:e(r)("chart.scroll_cfg"),"change-model":e(t).senior.scrollCfg,modelValue:e(t).senior.scrollCfg.open,"onUpdate:modelValue":o[2]||(o[2]=u=>e(t).senior.scrollCfg.open=u),name:"scroll",onModelChange:z},{default:l(()=>[a(be,{themes:e(n),chart:s.chart,"property-inner":e(C)["scroll-cfg"],onOnScrollCfgChange:z},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),g("threshold")?(m(),d(b,{key:4,effect:e(n),title:e(r)("chart.threshold"),"change-model":e(t).senior.threshold,modelValue:e(t).senior.threshold.enable,"onUpdate:modelValue":o[3]||(o[3]=u=>e(t).senior.threshold.enable=u),name:"threshold",onModelChange:T},{default:l(()=>[a(ke,{themes:e(n),chart:s.chart,"property-inner":e(C).threshold,onOnThresholdChange:T},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),e(t).id?(m(),d(e(_e),{key:5,chart:e(t),themes:e(n),"is-screen":e(h).type==="dataV",jsname:"L2NvbXBvbmVudC90aHJlc2hvbGQtd2FybmluZy9TZW5pb3JIYW5kbGVy"},null,8,["chart","themes","is-screen"])):p("",!0),g("linkage")?(m(),d(b,{key:6,themes:e(n),name:"linkage",title:e(r)("visualization.linkage_setting"),modelValue:e(t).linkageActive,"onUpdate:modelValue":o[4]||(o[4]=u=>e(t).linkageActive=u),onModelChange:le},{default:l(()=>[f("div",Re,[f("span",{class:c(["label","label-"+s.themes])},k(e(r)("visualization.linkage_setting")),3),f("span",Ue,[J.value.linkageCount>0?(m(),w(W,{key:0},[f("span",{class:c(["set-text-info",{"set-text-info-dark":e(n)==="dark"}])},k(e(r)("visualization.already_setting")),3),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(r)("chart.delete"),style:{margin:"0 8px"},onClick:pe},[a(e(S),null,{default:l(()=>[a(e(x),null,{default:l(()=>[a(e(Z),{class:c([e(t).linkageActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,We)],64)):p("",!0),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(r)("chart.edit"),onClick:ie,disabled:!e(t).linkageActive},[a(e(S),null,{default:l(()=>[a(e(x),null,{default:l(()=>[a(e(K),{class:c([e(t).linkageActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,Ge)])])]),_:1},8,["themes","title","modelValue"])):p("",!0),g("jump-set")&&!me.value?(m(),d(b,{key:7,themes:e(n),name:"jumpSet",title:e(r)("visualization.jump_set"),modelValue:e(t).jumpActive,"onUpdate:modelValue":o[5]||(o[5]=u=>e(t).jumpActive=u),onModelChange:re},{default:l(()=>[f("div",Ze,[f("span",{class:c(["label","label-"+s.themes])},k(e(r)("visualization.jump_set")),3),f("span",Ke,[J.value.jumpCount?(m(),w(W,{key:0},[f("span",{class:c(["set-text-info",{"set-text-info-dark":e(n)==="dark"}])},k(e(r)("visualization.already_setting")),3),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(r)("chart.delete"),style:{margin:"0 8px"},onClick:ue},[a(e(S),null,{default:l(()=>[a(e(x),null,{default:l(()=>[a(e(Z),{class:c([e(t).jumpActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,Ye)],64)):p("",!0),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(r)("chart.edit"),onClick:oe,disabled:!e(t).jumpActive},[a(e(S),null,{default:l(()=>[a(e(x),null,{default:l(()=>[a(e(K),{class:c([e(t).jumpActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,$e)])])]),_:1},8,["themes","title","modelValue"])):p("",!0),g("bubble-animate")?(m(),d(b,{key:8,effect:e(n),title:e(r)("visualization.bubble_dynamic_effect"),"change-model":e(t).senior.bubbleCfg,modelValue:e(t).senior.bubbleCfg.enable,"onUpdate:modelValue":o[6]||(o[6]=u=>e(t).senior.bubbleCfg.enable=u),name:"bubbleAnimate",onModelChange:P},{default:l(()=>[a(Je,{themes:e(n),chart:s.chart,"property-inner":e(C)["bubble-animate"],onOnBubbleAnimateChange:P},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),((v=e(O))==null?void 0:v.innerType)==="picture-group"?(m(),d(Ne,{key:9,element:e(O),themes:e(n)},null,8,["element","themes"])):p("",!0),ee.value?(m(),d(e(q),{key:10,effect:e(n),name:"events",title:e(r)("visualization.event")},{default:l(()=>[a(ze,{themes:e(n),"events-info":L.eventInfo},null,8,["themes","events-info"])]),_:1},8,["effect","title"])):p("",!0)]}),_:1},8,["modelValue"])]),_:1})],32)),F.value?(m(),w("div",He,k(e(r)("chart.chart_no_senior")),1)):p("",!0),a(Ve,{ref_key:"linkJumpRef",ref:D},null,512),a(Se,{ref_key:"linkageRef",ref:E},null,512)]),_:1},8,["class"])}}});const sa=Fe(Qe,[["__scopeId","data-v-ebb02e2e"]]);export{sa as default};

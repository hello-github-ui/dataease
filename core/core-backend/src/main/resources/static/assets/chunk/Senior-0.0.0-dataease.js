import"./index-0.0.0-dataease.js";import{E as ce}from"./el-row-0.0.0-dataease.js";import{E,a as de}from"./el-collapse-item-0.0.0-dataease.js";import{d as fe,ah as he,r as R,t as ge,w as ve,G as S,f as m,g as d,i as r,L as M,k as n,j as e,a0 as p,M as f,U as c,a6 as k,Y as U,ab as G}from"./vue-0.0.0-dataease.js";import{i as W}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as K}from"./icon_edit_outlined-0.0.0-dataease.js";import{o as _e,v as be,j as w,D as Y}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import Ce from"./FunctionCfg-0.0.0-dataease.js";import ye from"./ScrollCfg-0.0.0-dataease.js";import ke from"./AssistLine-0.0.0-dataease.js";import Ae from"./Threshold-0.0.0-dataease.js";import Ie from"./MapMapping-0.0.0-dataease.js";import{C}from"./CollapseSwitchItem-0.0.0-dataease.js";import{useAppStoreWithOut as Ve}from"./app-0.0.0-dataease.js";import{L as Se,a as Me}from"./LinkageSet-0.0.0-dataease.js";import{d as Z,D as we,E as xe,F as je,k as Ee,G as Le,q as qe}from"./canvasUtils-0.0.0-dataease.js";import{d as Oe}from"./dvMain-0.0.0-dataease.js";import{i as De}from"./StringUtils-0.0.0-dataease.js";import{B as Be}from"./chart-0.0.0-dataease.js";import Je from"./BubbleAnimateCfg-0.0.0-dataease.js";import{_ as Ne,C as ze}from"./CarouselSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{I as x}from"./index-0.0.0-dataease26.js";import{z as Te,d as Pe}from"./lodash-0.0.0-dataease.js";import{_ as Fe}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./index-0.0.0-dataease13.js";import"./index-0.0.0-dataease3.js";import"./library-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-select-0.0.0-dataease.js";import"./index-0.0.0-dataease16.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./el-popper-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import"./el-radio-button-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import"./index-0.0.0-dataease17.js";import"./position-0.0.0-dataease.js";import"./el-slider-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-form-item-0.0.0-dataease.js";import"./el-checkbox-0.0.0-dataease.js";import"./util-0.0.0-dataease2.js";import"./chart-0.0.0-dataease2.js";import"./el-dialog-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./icon_info_outlined-0.0.0-dataease.js";import"./AssistLineEdit-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./attr-0.0.0-dataease20.js";import"./field-list-0.0.0-dataease.js";import"./TableThresholdEdit-0.0.0-dataease.js";import"./icon_info_filled-0.0.0-dataease.js";import"./TextLabelThresholdEdit-0.0.0-dataease.js";import"./TextThresholdEdit-0.0.0-dataease.js";import"./el-space-0.0.0-dataease.js";import"./LineThresholdEdit-0.0.0-dataease.js";import"./PictureGroupThresholdEdit-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./index-0.0.0-dataease19.js";import"./formatter-0.0.0-dataease.js";import"./antv-0.0.0-dataease.js";import"./index-0.0.0-dataease20.js";import"./pureFunctionsAny.generated-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./el-pagination-0.0.0-dataease.js";import"./el-table-column-0.0.0-dataease.js";import"./el-switch-0.0.0-dataease.js";import"./el-footer-0.0.0-dataease.js";import"./el-aside-0.0.0-dataease.js";import"./el-main-0.0.0-dataease.js";import"./el-tabs-0.0.0-dataease.js";import"./el-tree-0.0.0-dataease.js";import"./el-tree-select-0.0.0-dataease.js";import"./chart-list-0.0.0-dataease.js";import"./dv-link-target-0.0.0-dataease.js";import"./dv-dashboard-spine-0.0.0-dataease.js";import"./dv-folder-0.0.0-dataease.js";import"./dv-screen-spine-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./CodeMirror-0.0.0-dataease.js";import"./snapshot-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./eventBus-0.0.0-dataease.js";import"./EmptyBackground-0.0.0-dataease.js";import"./el-empty-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./treeSortUtils-0.0.0-dataease.js";import"./index-0.0.0-dataease14.js";import"./dv-empty-0.0.0-dataease.js";import"./el-popover-0.0.0-dataease.js";import"./dropdown-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./ModelUtil-0.0.0-dataease.js";const Re={class:"inner-container"},Ue={class:"right-btns"},Ge=["title"],We=["title","disabled"],Ke={class:"inner-container"},Ye={class:"right-btns"},Ze=["title"],$e=["title","disabled"],He={key:1,class:"no-senior"},Qe=fe({__name:"Senior",props:{chart:{type:Object,required:!0},quotaData:{type:Array,required:!0},quotaExtData:{type:Array,required:!0},fieldsData:{type:Array,required:!0},themes:{type:String,default:"dark"},properties:{type:Array,required:!1,default:()=>[]},propertyInnerAll:{type:Object,required:!1,default:()=>({})},eventInfo:{type:Object,required:!1}},emits:["onFunctionCfgChange","onAssistLineChange","onScrollCfgChange","onThresholdChange","onMapMappingChange","onBubbleAnimateChange"],setup(L,{emit:$}){const y=Oe(),{nowPanelTrackInfo:H,nowPanelJumpInfo:Q,dvInfo:h,componentData:Xe,curComponent:q,batchOptStatus:X}=he(y),{t:l}=_e(),O=R(null),D=R(null),B={attrActiveNames:[],styleActiveNames:[]},_=$,s=L,{chart:t,themes:i,properties:A,propertyInnerAll:b}=ge(s);ve(()=>{var a;return(a=t.value)==null?void 0:a.senior},()=>{var a;t.value.senior=Te(((a=t.value)==null?void 0:a.senior)||{},Pe(Be.senior))});const J=S(()=>{var I;let a=0,o=0;return(I=s.fieldsData)==null||I.forEach(V=>{const v=s.chart.id+"#"+V.id;H.value[v]&&a++,Q.value[v]&&o++}),{linkageCount:a,jumpCount:o}}),ee=S(()=>!X.value&&["indicator","rich-text"].includes(t.value.type)&&s.eventInfo),j=a=>{_("onFunctionCfgChange",a)},N=a=>{_("onAssistLineChange",a)},z=a=>{_("onScrollCfgChange",a)},T=a=>{_("onThresholdChange",a)},te=a=>{_("onMapMappingChange",a)},P=a=>{_("onBubbleAnimateChange",a)},g=a=>{var o;return(o=A==null?void 0:A.value)==null?void 0:o.includes(a)},oe=()=>{if(!h.value.id){Y.warning(l("visualization.save_page_tips"));return}Z(()=>{O.value.dialogInit({id:t.value.id})})},ae=()=>{if(!h.value.id){Y.warning(l("visualization.save_page_tips"));return}Z(()=>{D.value.dialogInit({id:t.value.id})})},ne=["map-mapping","function-cfg","assist-line","scroll-cfg","threshold","jump-set","linkage","bubble-animate"],ie=["chart-mix","chart-mix-stack","chart-mix-group"],F=S(()=>!De(A.value,...ne)&&ie.includes(t.value.type)),le=()=>{const a={sourceDvId:h.value.id,sourceViewId:t.value.id,activeStatus:t.value.jumpActive};we(a).then(o=>{y.setNowPanelJumpInfo(o.data)})},re=()=>{const a={dvId:h.value.id,sourceViewId:t.value.id,activeStatus:t.value.linkageActive};xe(a).then(o=>{y.setNowPanelTrackInfo(o.data)})},se=Ve(),me=S(()=>se.getIsDataEaseBi),pe=()=>{je({dvId:h.value.id,sourceViewId:t.value.id}).then(a=>{Ee(h.value.id).then(o=>{y.setNowPanelTrackInfo(o.data)})})},ue=()=>{Le({sourceDvId:h.value.id,sourceViewId:t.value.id}).then(a=>{qe(h.value.id).then(o=>{y.setNowPanelJumpInfo(o.data)})})};return(a,o)=>{const I=de,V=ce;return m(),d(V,{class:c(["view-panel","senior-"+e(i)])},{default:r(()=>[F.value?p("",!0):(m(),M("div",{key:0,onKeydown:o[8]||(o[8]=G(()=>{},["stop"])),onKeyup:o[9]||(o[9]=G(()=>{},["stop"])),class:"attr-style"},[n(V,{class:"de-collapse-style"},{default:r(()=>[n(I,{modelValue:B.attrActiveNames,"onUpdate:modelValue":o[7]||(o[7]=v=>B.attrActiveNames=v),class:"style-collapse"},{default:r(()=>{var v;return[g("function-cfg")?(m(),d(e(E),{key:0,effect:e(i),name:"function",title:e(l)("chart.function_cfg"),onModelChange:j},{default:r(()=>[n(Ce,{themes:e(i),chart:s.chart,"property-inner":e(b)["function-cfg"],onOnFunctionCfgChange:j},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title"])):p("",!0),g("map-mapping")?(m(),d(e(E),{key:1,effect:e(i),name:"mapMapping",title:e(l)("chart.place_name_mapping"),onModelChange:j},{default:r(()=>[n(Ie,{themes:e(i),chart:s.chart,"property-inner":e(b)["function-cfg"],onOnMapMappingChange:te},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title"])):p("",!0),g("assist-line")?(m(),d(C,{key:2,effect:e(i),title:e(l)("chart.assist_line"),"change-model":e(t).senior.assistLineCfg,modelValue:e(t).senior.assistLineCfg.enable,"onUpdate:modelValue":o[0]||(o[0]=u=>e(t).senior.assistLineCfg.enable=u),name:"analyse",onModelChange:o[1]||(o[1]=u=>N({data:u}))},{default:r(()=>[n(ke,{chart:s.chart,themes:e(i),"quota-data":s.quotaData,"quota-ext-data":s.quotaExtData,"property-inner":e(b)["assist-line"],onOnAssistLineChange:N},null,8,["chart","themes","quota-data","quota-ext-data","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),g("scroll-cfg")?(m(),d(C,{key:3,effect:e(i),title:e(l)("chart.scroll_cfg"),"change-model":e(t).senior.scrollCfg,modelValue:e(t).senior.scrollCfg.open,"onUpdate:modelValue":o[2]||(o[2]=u=>e(t).senior.scrollCfg.open=u),name:"scroll",onModelChange:z},{default:r(()=>[n(ye,{themes:e(i),chart:s.chart,"property-inner":e(b)["scroll-cfg"],onOnScrollCfgChange:z},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),g("threshold")?(m(),d(C,{key:4,effect:e(i),title:e(l)("chart.threshold"),"change-model":e(t).senior.threshold,modelValue:e(t).senior.threshold.enable,"onUpdate:modelValue":o[3]||(o[3]=u=>e(t).senior.threshold.enable=u),name:"threshold",onModelChange:T},{default:r(()=>[n(Ae,{themes:e(i),chart:s.chart,"property-inner":e(b).threshold,onOnThresholdChange:T},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),e(t).id?(m(),d(e(be),{key:5,chart:e(t),themes:e(i),"is-screen":e(h).type==="dataV",jsname:"L2NvbXBvbmVudC90aHJlc2hvbGQtd2FybmluZy9TZW5pb3JIYW5kbGVy"},null,8,["chart","themes","is-screen"])):p("",!0),g("linkage")?(m(),d(C,{key:6,themes:e(i),name:"linkage",title:e(l)("visualization.linkage_setting"),modelValue:e(t).linkageActive,"onUpdate:modelValue":o[4]||(o[4]=u=>e(t).linkageActive=u),onModelChange:re},{default:r(()=>[f("div",Re,[f("span",{class:c(["label","label-"+s.themes])},k(e(l)("visualization.linkage_setting")),3),f("span",Ue,[J.value.linkageCount>0?(m(),M(U,{key:0},[f("span",{class:c(["set-text-info",{"set-text-info-dark":e(i)==="dark"}])},k(e(l)("visualization.already_setting")),3),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(l)("chart.delete"),style:{margin:"0 8px"},onClick:pe},[n(e(w),null,{default:r(()=>[n(e(x),null,{default:r(()=>[n(e(W),{class:c([e(t).linkageActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,Ge)],64)):p("",!0),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(l)("chart.edit"),onClick:ae,disabled:!e(t).linkageActive},[n(e(w),null,{default:r(()=>[n(e(x),null,{default:r(()=>[n(e(K),{class:c([e(t).linkageActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,We)])])]),_:1},8,["themes","title","modelValue"])):p("",!0),g("jump-set")&&!me.value?(m(),d(C,{key:7,themes:e(i),name:"jumpSet",title:e(l)("visualization.jump_set"),modelValue:e(t).jumpActive,"onUpdate:modelValue":o[5]||(o[5]=u=>e(t).jumpActive=u),onModelChange:le},{default:r(()=>[f("div",Ke,[f("span",{class:c(["label","label-"+s.themes])},k(e(l)("visualization.jump_set")),3),f("span",Ye,[J.value.jumpCount?(m(),M(U,{key:0},[f("span",{class:c(["set-text-info",{"set-text-info-dark":e(i)==="dark"}])},k(e(l)("visualization.already_setting")),3),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(l)("chart.delete"),style:{margin:"0 8px"},onClick:ue},[n(e(w),null,{default:r(()=>[n(e(x),null,{default:r(()=>[n(e(W),{class:c([e(t).jumpActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,Ze)],64)):p("",!0),f("button",{class:c(["label-"+s.themes,"circle-button_icon"]),title:e(l)("chart.edit"),onClick:oe,disabled:!e(t).jumpActive},[n(e(w),null,{default:r(()=>[n(e(x),null,{default:r(()=>[n(e(K),{class:c([e(t).jumpActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,$e)])])]),_:1},8,["themes","title","modelValue"])):p("",!0),g("bubble-animate")?(m(),d(C,{key:8,effect:e(i),title:e(l)("visualization.bubble_dynamic_effect"),"change-model":e(t).senior.bubbleCfg,modelValue:e(t).senior.bubbleCfg.enable,"onUpdate:modelValue":o[6]||(o[6]=u=>e(t).senior.bubbleCfg.enable=u),name:"bubbleAnimate",onModelChange:P},{default:r(()=>[n(Je,{themes:e(i),chart:s.chart,"property-inner":e(b)["bubble-animate"],onOnBubbleAnimateChange:P},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):p("",!0),((v=e(q))==null?void 0:v.innerType)==="picture-group"?(m(),d(Ne,{key:9,element:e(q),themes:e(i)},null,8,["element","themes"])):p("",!0),ee.value?(m(),d(e(E),{key:10,effect:e(i),name:"events",title:e(l)("visualization.event")},{default:r(()=>[n(ze,{themes:e(i),"events-info":L.eventInfo},null,8,["themes","events-info"])]),_:1},8,["effect","title"])):p("",!0)]}),_:1},8,["modelValue"])]),_:1})],32)),F.value?(m(),M("div",He,k(e(l)("chart.chart_no_senior")),1)):p("",!0),n(Se,{ref_key:"linkJumpRef",ref:O},null,512),n(Me,{ref_key:"linkageRef",ref:D},null,512)]),_:1},8,["class"])}}});const oa=Fe(Qe,[["__scopeId","data-v-ebb02e2e"]]);export{oa as default};

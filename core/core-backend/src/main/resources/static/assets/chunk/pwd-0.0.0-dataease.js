import{a as $}from"./index-0.0.0-dataease.js";import{o as D,M as V,x as C,y as E}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{a as q,E as B}from"./el-form-item-0.0.0-dataease.js";import{d as F,u as M,r as n,Z as S,o as z,aa as I,T as N,f as T,L as A,M as e,a6 as v,j as l,k as p,i as f,ab as Z,a5 as j}from"./vue-0.0.0-dataease.js";import{useAppStoreWithOut as L}from"./app-0.0.0-dataease.js";import{r as O}from"./encryption-0.0.0-dataease.js";import{_ as P}from"./CustomPassword.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{_ as R}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./base64-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./icon_invisible_outlined-0.0.0-dataease.js";const U={class:"pwd-body"},W={class:"pwd-wrapper"},G={class:"pwd-content"},H={class:"span-header"},J={class:"bi-text"},K={style:{"text-align":"center"}},Q={class:"input-layout"},X={class:"input-main"},Y={class:"div-input"},ee={class:"abs-input"},te={class:"input-text"},se={class:"auth-root-class"},oe=F({__name:"pwd",setup(ae){const g=M(),{wsCache:d}=$(),w=L(),{t:s}=D(),h=n(""),c=n(!0),y=n(),r=n({password:""}),b=S({password:[{required:!0,message:s("pblink.key_pwd"),trigger:"blur"},{required:!0,pattern:/^[A-Za-z\d!@#$%^&*()_+]{4,10}$/,message:s("pblink.pwd_format_error"),trigger:"blur"}]}),k=async o=>{o&&await o.validate((t,_)=>{if(t){const i=g.params.uuid,u=r.value.password,m=`${i},${u}`,a=O(m);C.post({url:"/share/validate",data:{ciphertext:a}}).then(x=>{x.data?(d.set(`link-${i}`,a),window.location.reload()):h.value="密码错误"})}else console.error("error submit!",_)})};return z(()=>{d.get(w.getDekey)||V().then(o=>{d.set(w.getDekey,o.data)}).finally(()=>{c.value=!1}),c.value=!1}),(o,t)=>{const _=q,i=B,u=E,m=I("loading");return N((T(),A("div",U,[e("div",W,[e("div",G,[e("div",H,[e("div",J,[e("span",K,v(l(s)("pblink.key_pwd")),1)])]),e("div",Q,[e("div",X,[e("div",Y,[p(i,{ref_key:"pwdForm",ref:y,model:r.value,rules:b,size:"small",onSubmit:t[1]||(t[1]=Z(()=>{},["stop","prevent"]))},{default:f(()=>[p(_,{label:"",prop:"password"},{default:f(()=>[p(l(P),{modelValue:r.value.password,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value.password=a),maxlength:"10",minlength:"4","show-password":"",class:"real-input",placeholder:l(s)("pblink.input_placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model","rules"])])]),e("div",ee,[e("div",te,v(h.value),1)])]),e("div",se,[p(u,{size:"small",type:"primary",onClick:t[2]||(t[2]=a=>k(y.value))},{default:f(()=>[j(v(l(s)("pblink.sure_bt")),1)]),_:1})])])])])),[[m,c.value]])}}});const xe=R(oe,[["__scopeId","data-v-9a35ca00"]]);export{xe as default};

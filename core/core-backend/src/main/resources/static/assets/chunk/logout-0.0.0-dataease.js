import{u as n,a as u,r as i}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{i as h}from"./interactive-0.0.0-dataease.js";import{a as d}from"./index-0.0.0-dataease.js";const{wsCache:o}=d(),s=n(),l=u(),c=h(),g=r=>{l.clear(),l.$reset(),s.clear(),s.$reset(),c.clear(),c.$reset(),m();let t="/workbranch/index";i.currentRoute.value.fullPath&&(t=i.currentRoute.value.fullPath);let e=window.location.pathname;if(e){if(e.includes("oidcbi/")){e=e.replace("oidcbi/",""),e.includes("mobile.html")&&(e=e.replace("mobile.html","")),e=e.substring(0,e.length-1),window.location.href=e+"/oidcbi/oidc/logout";return}else if(e.includes("casbi/")){e=e.replace("casbi/",""),e.includes("mobile.html")&&(e=e.replace("mobile.html","")),e=e.substring(0,e.length-1);const a=window.location.href;window.location.href=e+"/casbi/cas/logout?service="+a;return}e=e.substring(0,e.length-1)}o.get("custom_auth_logout_url")&&(window.location.href=o.get("custom_auth_logout_url")),i.push(r?t:`/login?redirect=${t}`)},m=()=>{Object.keys(o.storage).forEach(t=>{(t.startsWith("de-plugin-")||t==="de-platform-client"||t==="pwd-validity-period"||t==="xpack-model-distributed")&&o.delete(t)})};export{g as l};

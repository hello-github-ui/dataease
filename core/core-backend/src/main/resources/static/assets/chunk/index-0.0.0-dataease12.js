var cl=Object.defineProperty;var ul=(m,u,t)=>u in m?cl(m,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):m[u]=t;var w=(m,u,t)=>(ul(m,typeof u!="symbol"?u+"":u,t),t);import{_ as Z}from"./jspdf-0.0.0-dataease.js";import{p as _,m as dl,h as $,a as $e,b as fl,g as ml,c as pl,d as hl,e as gl,s as yl,f as U,i as bo,j as Ko,k as ti,l as ei,n as oi,o as ne,u as xl,q as De,r as co,t as bl,v as Po,w as Sl,x as $o,y as be,z as Ro,A as _t,B as io,C as Al,D as Cl}from"./util-0.0.0-dataease2.js";import{p as ii,q as So,r as vl,s as Lt,t as Gt,b as ot,u as qt,v as Rt,w as wl,x as _l,y as K,z as Tt}from"./chart-0.0.0-dataease.js";import{v as D,f as je}from"./formatter-0.0.0-dataease.js";import{o as W,q as ce,e as G,v as Ll,w as Tl,x as bt,y as Ao,z as ye,A as Ft,B as Re,u as El,n as xt,g as st,C as Ge,D as Fl,E as zl,F as He,b as kl,G as Ol,H as Il,I as Nl}from"./lodash-es-0.0.0-dataease.js";import{_ as Yt}from"./lodash-0.0.0-dataease.js";import{s as Co,c as xe,C as li,L as si,I as ni,Z as Bl,a as Dl,P as Ml,G as Ut,b as ai,d as Pl,D as Ho,T as ri,S as vo,e as wo,f as $l,g as oe,H as Rl,h as Hl,F as ci,B as Wl,i as Vl,j as Yl,k as ui,l as ql,m as jl,n as di,u as de,o as _o,p as Gl,r as Ul,q as j,t as fi,M as mi,v as Xl,w as Jl,x as fe,y as We,z as pi,A as ge,E as lo,J as dt,K as Zl,N as Ql,Q as Kl,V as Wo}from"./@antv-0.0.0-dataease.js";import"./eventemitter3-0.0.0-dataease.js";import{e as Ve}from"./@turf-0.0.0-dataease.js";import{j as Y,i as ts,A as J}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{a as Ye}from"./mathjs-0.0.0-dataease.js";import{q as es}from"./sysParameter-0.0.0-dataease.js";import{a0 as os,ax as is}from"./@vue-0.0.0-dataease.js";import ls from"./TableTooltip-0.0.0-dataease.js";import{E as hi}from"./exceljs-0.0.0-dataease.js";import{a as gi}from"./file-saver-0.0.0-dataease.js";import{p as Lo}from"./element-plus-secondary-0.0.0-dataease.js";import{D as Ue}from"./decimal.js-0.0.0-dataease.js";const{t:ss}=Y();function nt(m){return m.drill?[0,10,22,10]:[0,10,10,10]}function ns(m){const u=[];let t,e,o,i,l,n,a,s,r;if(m.customAttr){if(r=_(m.customAttr),r.basicStyle){const c=JSON.parse(JSON.stringify(r.basicStyle));c.colors.forEach(p=>{u.push($(p,c.alpha))})}if(r.label){const c=JSON.parse(JSON.stringify(r.label));e=c.fontSize,o=c.color}if(r.tooltip){const c=JSON.parse(JSON.stringify(r.tooltip));i=c.color,l=c.fontSize,n=c.backgroundColor}}let d;if(m.customStyle&&(d=_(m.customStyle),d.background&&(t=$(d.background.color,d.background.alpha)),d.legend)){const c=d.legend;a=c.color,s=c.fontSize}const f={styleSheet:{brandColor:u[0],paletteQualitative10:u,paletteQualitative20:u,backgroundColor:t},labels:{offset:4,style:{fill:o,fontSize:e}},innerLabels:{offset:4,style:{fill:o,fontSize:e}},pieLabels:{offset:4,style:{fill:o,fontSize:e}},components:{tooltip:{domStyles:{"g2-tooltip":{color:i,fontSize:l+"px",background:n,boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.1)","z-index":2e3,position:"fixed"},"g2-tooltip-list-item":{display:"flex","align-items":"flex-start","line-height":l+"px"},"g2-tooltip-name":{display:"inline-block","line-height":l+"px",flex:1},"g2-tooltip-value":{display:"inline-block","line-height":l+"px"},"g2-tooltip-marker":{"margin-top":(l-8)/2+"px","min-width":"8px","min-height":"8px"}}},legend:{common:{itemName:{style:{fill:a,fontSize:s}}}}}};return m.fontFamily&&(f.styleSheet.fontFamily=m.fontFamily),f}function Se(m){let u,t;if(m.customAttr&&(t=_(m.customAttr),t.label)){const e=t.label;if(e.show){const o=[];e.fullDisplay||(m.type==="bar-stack"?o.push({type:"interval-hide-overlap"}):m.type.indexOf("-horizontal")>-1||["bidirectional-bar","progress-bar","pie-donut","radar","waterfall","t-heatmap","bar"].includes(m.type)?(o.push({type:"limit-in-canvas"}),o.push({type:"hide-overlap"})):m.type.includes("chart-mix")?(o.push({type:"limit-in-canvas"}),o.push({type:"limit-in-plot"}),o.push({type:"hide-overlap"})):(o.push({type:"limit-in-plot"}),o.push({type:"hide-overlap"}))),u={position:e.position,layout:o,style:{fill:e.color,fontSize:e.fontSize,fontFamily:m.fontFamily},formatter:function(i){return D(i.value,e.labelFormatter)}}}else u=!1}return u}function as(m){let u,t;if(m.customAttr&&(t=_(m.customAttr),t.tooltip)){const e=JSON.parse(JSON.stringify(t.tooltip));e.show?u={formatter:function(o){const i=D(o.value,e.tooltipFormatter);return{name:o.field,value:i}},container:at(`tooltip-${m.id}`),itemTpl:rt,enterable:!0}:u=!1}return u}function rs(m){var i;const t=_(m.customAttr).tooltip;if(!t.show)return!1;const e=(i=t.seriesTooltipFormatter)==null?void 0:i.filter(l=>l.show).reduce((l,n)=>(l[n.id]=n,l),{});return{showTitle:!0,customItems(l){var s,r;if(!((s=t.seriesTooltipFormatter)!=null&&s.length))return l;const n=l[0];if(!n.data.quotaList)return l;const a=[];return l.filter(d=>e[d.data.quotaList[0].id]).forEach(d=>{const f=e[d.data.quotaList[0].id],c=D(parseFloat(d.value),f.formatterCfg),p=W(f.chartShowName)?f.name:f.chartShowName,h=To(d);a.push({...d,name:p,value:c,...h?{color:h}:{}})}),(r=n.data.dynamicTooltipValue)==null||r.forEach(d=>{const f=e[d.fieldId];if(f){const c=D(parseFloat(d.value),f.formatterCfg),p=W(f.chartShowName)?f.name:f.chartShowName;a.push({color:"grey",name:p,value:c})}}),a},container:at(`tooltip-${m.id}`),itemTpl:rt,enterable:!0}}function cs(m){let u={},t;if(m.customStyle&&(t=_(m.customStyle),t.legend)){const e=ce(JSON.parse(JSON.stringify(t.legend)),Lt);if(e.show){let o,i,l;const n=e.orient,a=e.icon;e.hPosition==="center"?l=e.vPosition==="center"?"top":e.vPosition:e.vPosition==="center"?l=e.hPosition==="center"?"left":e.hPosition:n==="horizontal"?l=e.vPosition+"-"+e.hPosition:l=e.hPosition+"-"+e.vPosition,n==="horizontal"?(e.hPosition==="left"?o=16:e.hPosition==="right"?o=-16:o=0,e.vPosition==="top"?i=0:e.vPosition==="bottom"?m.drill&&(i=-12):i=0):(e.hPosition==="left"?o=10:e.hPosition==="right"?o=-10:o=0,e.vPosition==="top"?i=0:e.vPosition==="bottom"?m.drill?i=-18:i=-10:i=0),u={layout:n,position:l,offsetX:o,offsetY:i,marker:{symbol:a,style:{r:e.size}},itemName:{style:{fill:e.color,fontSize:e.fontSize}},itemHeight:(e.fontSize>e.size*2?e.fontSize:e.size*2)+4,radio:!1,pageNavigator:{marker:{style:{fill:"rgba(0,0,0,0.65)",stroke:"rgba(192,192,192,0.52)",size:e.size*2}},text:{style:{fill:e.color,fontSize:e.fontSize}}}}}else u=!1}return u}function yi(m){let u={},t;if(m.customStyle&&(t=_(m.customStyle),t.xAxis)){const e=JSON.parse(JSON.stringify(t.xAxis));if(e.show){const o=e.nameShow&&e.name&&e.name!==""?{text:e.name,style:{fill:e.color,fontSize:e.fontSize},spacing:8}:null,i=e.splitLine.show?{line:{style:{stroke:e.splitLine.lineStyle.color,lineWidth:e.splitLine.lineStyle.width,lineDash:Mt(e.splitLine.lineStyle.style)}}}:null,l=e.axisLine?e.axisLine:ii.axisLine,n=l.show?{style:{stroke:l.lineStyle.color,lineWidth:l.lineStyle.width,lineDash:Mt(l.lineStyle.style)}}:null,a=l.show?{style:{stroke:l.lineStyle.color,lineWidth:l.lineStyle.width}}:null;let s="center";const r=e.axisLabel.rotate;e.position==="top"&&(s=r>20?"end":r<-20?"start":"center"),e.position==="bottom"&&(s=r>20?"start":r<-20?"end":"center");const d=e.axisLabel.show?{rotate:r*Math.PI/180,style:{fill:e.axisLabel.color,fontSize:e.axisLabel.fontSize,textAlign:s},formatter:f=>m.type==="bidirectional-bar"&&f.length>e.axisLabel.lengthLimit?f.substring(0,e.axisLabel.lengthLimit)+"...":f}:null;u={position:e.position,title:o,grid:i,label:d,line:n,tickLine:a}}else u=!1}return u}function Xe(m){let u={};const t=_(m.customStyle).yAxis;if(!t.show)return!1;const e=t.nameShow&&t.name&&t.name!==""?{text:t.name,style:{fill:t.color,fontSize:t.fontSize},spacing:8}:null,o=t.splitLine.show?{line:{style:{stroke:t.splitLine.lineStyle.color,lineWidth:t.splitLine.lineStyle.width,lineDash:Mt(t.splitLine.lineStyle.style)}}}:null,i=t.axisLine?t.axisLine:So.axisLine,l=i.show?{style:{stroke:i.lineStyle.color,lineWidth:i.lineStyle.width,lineDash:Mt(i.lineStyle.style)}}:null,n=i.show?{style:{stroke:i.lineStyle.color,lineWidth:i.lineStyle.width}}:null,a=t.axisLabel.rotate;let s="end",r="middle";t.position==="right"&&(s="start",Math.abs(a)>75&&(s="center"),a>75&&(r="bottom"),a<-75&&(r="top")),t.position==="left"&&(Math.abs(a)>75&&(s="center"),a>75&&(r="top"),a<-75&&(r="bottom"));const d=t.axisLabel.show?{rotate:a*Math.PI/180,style:{fill:t.axisLabel.color,fontSize:t.axisLabel.fontSize,textBaseline:r,textAlign:s},formatter:f=>f.length>t.axisLabel.lengthLimit?f.substring(0,t.axisLabel.lengthLimit)+"...":f}:null;return u={position:t.position,title:e,grid:o,label:d,line:l,tickLine:n,nice:!0},u}function xi(m){let u={};const t=_(m.customStyle).yAxisExt;if(!t.show)return!1;const e=t.nameShow&&t.name&&t.name!==""?{text:t.name,style:{fill:t.color,fontSize:t.fontSize},spacing:8}:null,o=t.splitLine.show?{line:{style:{stroke:t.splitLine.lineStyle.color,lineWidth:t.splitLine.lineStyle.width,lineDash:Mt(t.splitLine.lineStyle.style)}}}:null,i=t.axisLine?t.axisLine:So.axisLine,l=i.show?{style:{stroke:i.lineStyle.color,lineWidth:i.lineStyle.width,lineDash:Mt(i.lineStyle.style)}}:null,n=i.show?{style:{stroke:i.lineStyle.color,lineWidth:i.lineStyle.width}}:null,a=t.axisLabel.rotate;let s="end",r="middle";t.position==="right"&&(s="start",Math.abs(a)>75&&(s="center"),a>75&&(r="bottom"),a<-75&&(r="top")),t.position==="left"&&(Math.abs(a)>75&&(s="center"),a>75&&(r="top"),a<-75&&(r="bottom"));const d=t.axisLabel.show?{rotate:a*Math.PI/180,style:{fill:t.axisLabel.color,fontSize:t.axisLabel.fontSize,textBaseline:r,textAlign:s}}:null;return u={position:t.position,title:e,grid:o,label:d,line:l,tickLine:n,nice:!0},u}function us(m){let u;const t=_(m.senior);return t.functionCfg&&t.functionCfg.sliderShow&&(u={start:t.functionCfg.sliderRange[0]/100,end:t.functionCfg.sliderRange[1]/100},t.functionCfg.sliderBg&&(u.backgroundStyle={fill:t.functionCfg.sliderBg,stroke:t.functionCfg.sliderBg,lineWidth:1,strokeOpacity:.5}),t.functionCfg.sliderFillBg&&(u.foregroundStyle={fill:t.functionCfg.sliderFillBg,fillOpacity:.5}),t.functionCfg.sliderTextColor&&(u.textStyle={fill:t.functionCfg.sliderTextColor,fontFamily:m.fontFamily},u.handlerStyle={fill:t.functionCfg.sliderTextColor,fillOpacity:.5,highLightFill:t.functionCfg.sliderTextColor})),u}function bi(m){var o,i;const u=[],t=_(m.senior);if(!((o=t.assistLineCfg)!=null&&o.enable))return u;const e=t.assistLineCfg.assistLine;if((e==null?void 0:e.length)>0){const l=_(m.customStyle);let n,a,s,r;if(l.yAxis){const y=JSON.parse(JSON.stringify(l.yAxis));n=y.position,a=y.axisLabelFormatter?y.axisLabelFormatter:So.axisLabelFormatter}if(l.yAxisExt){const y=JSON.parse(JSON.stringify(l.yAxisExt));s=y.position,r=y.axisLabelFormatter?y.axisLabelFormatter:vl.axisLabelFormatter}const d=e.filter(y=>y.field==="0"),f=e.filter(y=>y.field==="1").map(y=>y.fieldId),c=Yt.filter(m.yAxis,y=>y.summary!==""&&y.id!=="-1"),p=Yt.filter(m.yAxisExt,y=>y.summary!==""&&y.id!=="-1"),h=(i=m.data.dynamicAssistLines)==null?void 0:i.filter(y=>(f==null?void 0:f.includes(y.fieldId))&&(!!Yt.find(c,x=>x.id===y.fieldId)||!!Yt.find(p,x=>x.id===y.fieldId)&&m.type.includes("chart-mix")));d.concat(h||[]).forEach(y=>{const x=parseFloat(y.value),b=y.name+" : "+D(x,y.yAxisType==="left"?a:r);u.push({type:"line",yAxisType:y.yAxisType,start:["start",x],end:["end",x],style:{stroke:y.color,lineDash:Mt(y.lineType)}}),u.push({type:"text",yAxisType:y.yAxisType,position:[(y.yAxisType==="left"?n:s)==="left"?"start":"end",x],content:b,offsetY:-2,offsetX:(y.yAxisType==="left"?n:s)==="left"?2:-10*(b.length-2),style:{textBaseline:"bottom",fill:y.color,fontSize:y.fontSize?y.fontSize:10}})})}return u}function ds(m){var o,i;const u=[],t=_(m.senior);if(!((o=t.assistLineCfg)!=null&&o.enable))return u;const e=t.assistLineCfg.assistLine;if((e==null?void 0:e.length)>0){const l=_(m.customStyle);let n;if(l.xAxis){const c=JSON.parse(JSON.stringify(l.xAxis));fs(c.position),n=c.axisLabelFormatter?c.axisLabelFormatter:ii.axisLabelFormatter}const a=e.filter(c=>c.field==="0"),s=e.filter(c=>c.field==="1").map(c=>c.fieldId),r=Yt.filter(m.yAxis,c=>c.summary!==""&&c.id!=="-1"),d=(i=m.data.dynamicAssistLines)==null?void 0:i.filter(c=>(s==null?void 0:s.includes(c.fieldId))&&!!Yt.find(r,p=>p.id===c.fieldId));a.concat(d||[]).forEach(c=>{const p=parseFloat(c.value),h=c.name+" : "+D(p,n);u.push({type:"line",start:["start",p],end:["end",p],style:{stroke:c.color,lineDash:Mt(c.lineType)}}),u.push({type:"text",position:["start",p],content:h,offsetY:5,offsetX:2,rotate:Math.PI/2,style:{textBaseline:"bottom",fill:c.color,fontSize:c.fontSize?c.fontSize:10}})})}return u}function Mt(m){switch(m){case"solid":return[0,0];case"dashed":return[10,8];case"dotted":return[2,2];default:return[0,0]}}function tt(m,u=!1,t=0,e=0){const o=m.split(","),l=parseFloat(o[3].replace(")",""))*.3;o.splice(3,1,`${l})`);let n;return e==0?n=`l(${t}) 0:${o.join(",")} 1:${m}`:e>0?n=`l(${t}) 0:rgba(255,255,255,0) ${e}:${o.join(",")} 1:${m}`:n=`l(${t}) 0:rgba(255,255,255,0) 0.1:${o.join(",")} 1:${m}`,u?n:m}function fs(m){switch(m){case"top":return"left";case"bottom":return"right";case"left":return"bottom";case"right":return"top";default:return m}}function Si(m){const t=_(m.customAttr).label,e={fill:t.color,fontSize:t.fontSize,textAllowOverlap:!0,fontWeight:"bold"};return t.fullDisplay||(e.textAllowOverlap=!1,e.padding=[2,2]),m.fontFamily&&(e.fontFamily=m.fontFamily),{visible:t.show,style:e}}function ms(m){return{stroke:_(m.customAttr).basicStyle.areaBorderColor}}function Ai(m){var i;const t=_(m.customAttr).tooltip,e=(i=t.seriesTooltipFormatter)==null?void 0:i.filter(l=>l.show).reduce((l,n)=>(l[n.id]=n,l),{}),o=document.getElementById(m.container);return o&&o.addEventListener("mousemove",l=>{const n=o.getBoundingClientRect(),a=l.clientX-n.left,s=l.clientY-n.top,r=o.getElementsByClassName("l7plot-tooltip-container");for(let d=0;d<(r==null?void 0:r.length);d++){const f=r[d],c=o.clientWidth-a<=f.clientWidth,p=o.clientHeight-s<=f.clientHeight;let h="";c&&(h+="translateX(-120%) "),p&&(h+="translateY(-100%) "),h&&(f.style.transform=h.trim())}}),{customTitle(l){return l.name},customItems(l){var r,d,f;const n=[];if(W(e))return n;const a=l.properties,s=e[(d=(r=a.quotaList)==null?void 0:r[0])==null?void 0:d.id];if(!W(s)){const c=parseFloat(a.value),p=D(c,s.formatterCfg),h=W(s.chartShowName)?s.name:s.chartShowName;n.push({...a,name:h,value:`${p??""}`})}return(f=a.dynamicTooltipValue)==null||f.forEach(c=>{const p=e[c.fieldId];if(p){const h=D(parseFloat(c.value),p.formatterCfg),g=W(p.chartShowName)?p.name:p.chartShowName;n.push({color:"grey",name:g,value:`${h??""}`})}}),n},showComponent:t.show,domStyles:{"l7plot-tooltip":{"background-color":t.backgroundColor,"font-size":`${t.fontSize}px`,"line-height":1.6,"font-family":m.fontFamily?m.fontFamily:void 0},"l7plot-tooltip__name":{color:t.color},"l7plot-tooltip__value":{color:t.color},"l7plot-tooltip__title":{color:t.color}}}}function Ci(m,u){m.features.forEach(t=>{if(!t.properties.centroid)if(t.properties.center)t.properties.centroid=t.properties.center;else{const o=Ve(t.geometry);t.properties.centroid=o.geometry.coordinates}let e=t.properties.name;u!=null&&u[e]&&(e=u[e],t.properties.name=e)})}function Je(m){const u={};return m==null||m.forEach(t=>{var e;(e=t.dynamicTooltipValue)==null||e.forEach(o=>{u[o.fieldId]||(u[o.fieldId]=0),o.value&&(u[o.fieldId]=Ye(u[o.fieldId],o.value))})}),u}const ps={circle:{borderRadius:"50%"},square:{},triangle:{borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottom:"10px solid var(--bgColor)",background:"unset"},diamond:{transform:"rotate(45deg)"}};function hs(m){const{basicStyle:u}=_(m.customAttr);if(u.suspension===!1&&u.showZoom===void 0)return!1;const{legend:t}=_(m.customStyle);return t.show?{position:"bottomleft",customContent:(e,o)=>{const i=(o==null?void 0:o.length)>30?o.slice(0,30):o;if(i!=null&&i.length){const n=xe(li).getElementsByClassName(si)[0];return i.forEach(a=>{let s="-";if(a.value!=="")if(Array.isArray(a.value))a.value.forEach((c,p)=>{a.value[p]=Number.isNaN(c)||c==="NaN"?"NaN":parseFloat(c).toFixed(0)}),s=a.value.join("-");else{const c=a.value;s=Number.isNaN(c)||c==="NaN"?"NaN":parseFloat(c).toFixed(0)}const r={...a,value:s},d=Co(ni,r),f=xe(d);f.style.setProperty("--bgColor",a.color),n.appendChild(f)}),n}return""},domStyles:{"l7plot-legend__category-value":{fontSize:t.fontSize+"px",color:t.color},"l7plot-legend__category-marker":{...ps[t.icon]}}}:!1}const gs='<svg t="1717484429999" fill="${fill}" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9332" width="14px" height="14px"><path d="M47.653 439.326c-24.501 0-44.368 19.881-44.368 44.4v56.548c0 24.492 19.862 44.4 44.368 44.4h928.694c24.501 0 44.368-19.881 44.368-44.4v-56.548c0-24.497-19.862-44.4-44.368-44.4H47.653z" p-id="9333"></path><path d="M586.326 47.653c0-24.501-19.881-44.368-44.4-44.368h-56.548c-24.492 0-44.4 19.862-44.4 44.368v928.694c0 24.501 19.881 44.368 44.4 44.368h56.548c24.497 0 44.4-19.862 44.4-44.368V47.653z" p-id="9334"></path></svg>',ys='<svg t="1717487786436" fill="${fill}" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18361" width="14px" height="14px"><path d="M127.594667 503.274667a383.573333 383.573333 0 0 1 112.426666-263.04 380.864 380.864 0 0 1 122.24-82.474667 382.421333 382.421333 0 0 1 149.632-30.165333c51.946667 0 102.250667 10.176 149.504 30.165333a381.610667 381.610667 0 0 1 122.133334 82.474667 385.152 385.152 0 0 1 31.082666 35.093333l-67.285333 52.501333a8.96 8.96 0 0 0 3.349333 15.765334l196.352 48.042666a8.96 8.96 0 0 0 11.050667-8.597333l0.896-202.154667c0-7.466667-8.597333-11.733333-14.421333-7.04l-63.018667 49.28C795.605333 113.173333 661.973333 42.666667 511.786667 42.666667 255.786667 42.666667 47.488 247.829333 42.666667 502.826667a8.96 8.96 0 0 0 8.96 9.173333h67.029333c4.906667 0 8.832-3.925333 8.96-8.725333z m844.8 8.725333h-67.050667a8.917333 8.917333 0 0 0-8.96 8.704 381.76 381.76 0 0 1-30.037333 140.8 382.336 382.336 0 0 1-82.346667 122.24 382.656 382.656 0 0 1-271.893333 112.64 382.421333 382.421333 0 0 1-271.765334-112.64 385.152 385.152 0 0 1-31.061333-35.072l67.264-52.522667a8.96 8.96 0 0 0-3.349333-15.765333l-196.330667-48.042667a8.96 8.96 0 0 0-11.050667 8.597334l-0.789333 202.261333c0 7.488 8.597333 11.733333 14.421333 7.04l63.018667-49.28C228.394667 910.826667 362.026667 981.333333 512.213333 981.333333 768.341333 981.333333 976.512 776.042667 981.333333 521.173333a8.96 8.96 0 0 0-8.96-9.173333z" p-id="18362"></path></svg>',xs='<svg t="1717486240292" fill="${fill}" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13641" width="14px" height="14px"><path d="M935 423.3H89C40.2 423.3 0.3 463.2 0.3 512c0 48.8 39.9 88.7 88.7 88.7h846c48.8 0 88.7-39.9 88.7-88.7 0-48.8-39.9-88.7-88.7-88.7z" p-id="13642"></path></svg>';class uo extends Bl{resetButtonGroup(u){Dl(u),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",u,this.zoomIn),this.zoomResetButton=this.createButton(this.controlOption.resetText,"Reset","l7-button-control",u,()=>{this.controlOption.bounds?this.mapsService.fitBounds(this.controlOption.bounds,{animate:!0}):this.mapsService.setZoomAndCenter(this.controlOption.initZoom,this.controlOption.center)}),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",u)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",u,this.zoomOut);const{buttonBackground:t}=this.controlOption,e=[this.zoomResetButton,this.zoomInButton,this.zoomOutButton];t&&Vo(e,"background",t),Vo(e,"border-bottom","none"),this.updateDisabled()}getDefault(u){const{buttonColor:t}=u;let e=gs,o=xs,i=ys;return t&&(e=e.replace("${fill}",t),o=o.replace("${fill}",t),i=i.replace("${fill}",t)),{...u,position:Ml.BOTTOMRIGHT,name:"zoom",zoomInText:e,zoomInTitle:"Zoom in",zoomOutText:o,zoomOutTitle:"Zoom out",resetText:i,showZoom:!1}}}function bs(m,u){var o,i,l,n,a,s;const{basicStyle:t}=_(m.customAttr),e=u==null?void 0:u.getControlByName("zoom");if(e&&u.removeControl(e),!vi(t)&&!(u!=null&&u.getControlByName("zoom")))if(!u.map)u.once("loaded",()=>{u.map.on("complete",()=>{const r=t.autoFit===!1?t.zoomLevel:u.getZoom(),d=t.autoFit===!1?[t.mapCenter.longitude,t.mapCenter.latitude]:[u.map.getCenter().lng,u.map.getCenter().lat],f={initZoom:r,center:d,buttonColor:t.zoomButtonColor,buttonBackground:t.zoomBackground};u.addControl(new uo(f))})});else{const r={buttonColor:t.zoomButtonColor,buttonBackground:t.zoomBackground};if(t.autoFit===!1)r.initZoom=t.zoomLevel,r.center=[t.mapCenter.longitude,t.mapCenter.latitude];else{const d=[];if(m.type==="flow-map"){const f=m.xAxis,c=m.xAxisExt;(f==null?void 0:f.length)===2&&((i=(o=m.data)==null?void 0:o.tableRow)==null||i.forEach(p=>{d.push([p[f[0].dataeaseName],p[f[1].dataeaseName]])})),(c==null?void 0:c.length)===2&&((n=(l=m.data)==null?void 0:l.tableRow)==null||n.forEach(p=>{d.push([p[c[0].dataeaseName],p[c[1].dataeaseName]])}))}else{const f=m.xAxis;(f==null?void 0:f.length)===2&&((s=(a=m.data)==null?void 0:a.tableRow)==null||s.forEach(c=>{d.push([c[f[0].dataeaseName],c[f[1].dataeaseName]])}))}r.bounds=Ss(d)}u.addControl(new uo(r))}}function Ss(m){if(!m||m.length===0)return{northEast:[180,90],southWest:[-180,-90]};let u=-180,t=180,e=-90,o=90;return m.forEach(([i,l])=>{u=Math.max(u,i),t=Math.min(t,i),e=Math.max(e,l),o=Math.min(o,l)}),[[u,e],[t,o]]}function As(m,u){const{basicStyle:t}=_(m.customAttr);vi(t)||u.once("loaded",()=>{const e={initZoom:u.scene.getZoom(),center:u.scene.getCenter(),buttonColor:t.zoomButtonColor,buttonBackground:t.zoomBackground};u.scene.addControl(new uo(e))})}function Vo(m,u,t){m.forEach(e=>{e.style[u]=t})}function Ae(m){typeof m=="string"&&(m=document.getElementById(m)),m.classList.add("de-map-rendering")}function re(m){typeof m=="string"&&(m=document.getElementById(m)),m.classList.add("de-map-rendered")}function vi(m){return m.suspension===!1&&m.showZoom===void 0||m.showZoom===!1}const qe="g2-tooltip-wrapper";function at(m){let u=document.getElementById(qe);u||(u=document.createElement("div"),u.style.position="absolute",u.style.zIndex="9999",u.id=qe,document.body.appendChild(u));const t=document.getElementById(m);t&&t.remove();const e=document.createElement("div");e.setAttribute("id",m),e.classList.add("g2-tooltip"),e.style.maxHeight="50%",ts()?e.style.maxWidth="50%":e.style.maxWidth="25%",e.style.overflowY="auto",e.style.display="none",e.style.position="fixed",e.style.left="0px",e.style.top="0px";const o=document.createElement("div");o.classList.add("g2-tooltip-title"),e.appendChild(o);const i=document.createElement("ul");i.classList.add("g2-tooltip-list"),e.appendChild(i);const l=document.getElementsByClassName("fullscreen");return l.length?l.item(0).appendChild(e):u.appendChild(e),e}function ft(m,u){const{tooltip:t}=_(m.customAttr);t.show&&(u.options.tooltip.container.addEventListener("mouseenter",e=>{e.target.style.visibility="visible",e.target.style.display="block"}),u.options.tooltip.container.addEventListener("mouseleave",e=>{e.target.style.visibility="hidden",e.target.style.display="none"}),u.on("tooltip:show",()=>{var i,l;const e=u.chart.getController("tooltip");if(!e)return;const o=(l=(i=u.chart.interactions.tooltip)==null?void 0:i.context)==null?void 0:l.event;if(e.tooltip){const n=e.tooltip.cfg.container;if(n.style.display="block",!document.getElementById(n.id)){const s=document.getElementsByClassName("fullscreen");s.length?s.item(0).appendChild(n):document.getElementById(qe).appendChild(n)}}u.chart.getOptions().tooltip.follow=!1,e.title=Math.random().toString(),u.chart.getTheme().components.tooltip.x=o.clientX,u.chart.getTheme().components.tooltip.y=o.clientY}),u.on("plot:leave",()=>{var i,l;const e=u.chart.getController("tooltip");if(!e)return;u.chart.getOptions().tooltip.follow=!0;const o=(l=(i=e.tooltip)==null?void 0:i.cfg)==null?void 0:l.container;o&&(o.style.display="none"),e.hideTooltip()}),u.on("plot:touchstart",()=>{var o;const e=document.getElementById(qe);if(e){const i=u.chart.getController("tooltip");if(!i)return;const l=(o=i.tooltip)==null?void 0:o.cfg.container;for(const n of e.children)(!l||l.id!==n.id)&&(n.style.display="none")}}),u.on("tooltip:hidden",()=>{var i;const e=u.chart.getController("tooltip");if(!e)return;const o=(i=e.tooltip)==null?void 0:i.cfg.container;o&&(o.style.display="none")}))}const rt='<li class="g2-tooltip-list-item" data-index={index}><span class="g2-tooltip-marker" style="background:{color}"></span><span class="g2-tooltip-name">{name}</span>:<span class="g2-tooltip-value">{value}</span></li>';function Cs(m){const{threshold:u}=_(m.senior),t=[];if(!u.enable||m.type==="area-stack"||m.type==="symbolic-map")return t;const e=u.lineThreshold??[],o=m.yAxis.map(i=>i.id);for(const i of e)if(o.includes(i.fieldId))for(const l of i.conditions){const n={type:"regionFilter",start:["start","median"],end:["end","min"],color:l.color},a={type:"line",start:["start",l.value],end:["end",l.value],style:{stroke:l.color,lineDash:[2,2]}};l.term==="between"?(n.start=["start",parseFloat(l.min)],n.end=["end",parseFloat(l.max)],a.start=["start",parseFloat(l.min)],a.end=["end",parseFloat(l.min)],t.push(JSON.parse(JSON.stringify(a))),a.start=["start",parseFloat(l.max)],a.end=["end",parseFloat(l.max)],t.push(a)):["lt","le"].includes(l.term)?(n.start=["start",l.value],n.end=["end","min"],t.push(a)):["gt","ge"].includes(l.term)&&(n.start=["start",l.value],n.end=["end","max"],t.push(a)),t.push(n)}return t}const Le={transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:"rgb(255, 255, 255)",boxShadow:"rgb(174, 174, 174) 0px 0px 10px",borderRadius:"3px",padding:"8px 12px",opacity:"0.95",position:"absolute",visibility:"visible"},vs='<div class="g2-axis-label-tooltip"><div class="g2-tooltip-title">{title}</div></div>';function Xt(m,u,t){const e=t||"axis-label",o=e==="axis-title",{customStyle:i,customAttr:l}=_(m),{lengthLimit:n,fontSize:a,color:s,show:r}=i.yAxis.axisLabel,{tooltip:d}=l;!o&&(!n||!r||!i.yAxis.show||m.type==="bidirectional-bar")||(u.on(e+":mouseenter",f=>{var N;const c=f.target.cfg.delegateObject.component.cfg.field,p=f.target.cfg.delegateObject.component.cfg.position;if(c!=="field"&&c!=="title"&&!(p==="left"||p==="right"))return;const g=f.target.attrs.text;if(!o&&(g.length<n||g.slice(-3)!=="..."))return;const{x:y,y:x}=f,b=f.event.target.parentNode;let S=b.getElementsByClassName("g2-axis-label-tooltip")[0];const A=((N=f.target.cfg.delegateObject.item)==null?void 0:N.name)||f.target.cfg.delegateObject.axis.cfg.title.originalText;if(S)S.getElementsByClassName("g2-tooltip-title")[0].innerHTML=A,S.style.visibility="visible";else{const L=Co(vs,{title:A});S=xe(L),Le.backgroundColor=d.backgroundColor,Le.boxShadow=`${d.backgroundColor} 0px 0px 5px`,Le.maxWidth="200px",Yt.assign(S.style,Le),b.appendChild(S)}const{height:C,width:v}=b.getBoundingClientRect(),{offsetHeight:E,offsetWidth:z}=S;if(E>C||z>v){S.style.left=S.style.top="0px";return}const k={left:y+10,top:x+15};k.left+z>v&&(k.left=v-z-10),k.top+E>C&&(k.top-=E+15),S.style.left=`${k.left}px`,S.style.top=`${k.top}px`,S.style.color=s,S.style.fontSize=`${a}px`}),u.on(e+":mouseleave",f=>{const c=f.target.cfg.delegateObject.component.cfg.field,p=f.target.cfg.delegateObject.component.cfg.position;if(c!=="field"&&c!=="title"&&!(p==="left"||p==="right"))return;const g=f.target.attrs.text;if(!o&&(g.length<n||g.slice(-3)!=="..."))return;const x=f.event.target.parentNode.getElementsByClassName("g2-axis-label-tooltip")[0];x&&(x.style.visibility="hidden")}))}function ws(m,u){u.on("beforerender",t=>{const{yAxis:e}=_(m.customStyle),o=.8*(t.view.canvas.cfg.height-(t.view.canvas.cfg.height<120?60:30)),i=dl(m,e.name,{fontSize:e.fontSize,fontFamily:m.fontFamily},"height");let l="";for(let n=0;n<e.name.length&&(n+1)*i<=o;n++)l+=e.name[n];e.name.length>l.length&&(l=l.length>2?l.slice(0,l.length-2)+"...":l+"..."),t.view.options.axes.yAxisExt.title.originalText=e.name,t.view.options.axes.yAxisExt.title.text=l})}const _s=(m,u)=>{const{threshold:t}=_(m.senior);return t.enable&&u.data.forEach(e=>{var i;e.conditionColor=[];const o=m.type==="bar-horizontal"?u.xField:u.yField;m.type==="bidirectional-bar"?o.forEach(l=>{var s;const n=l==="value"?m.yAxis:m.yAxisExt,a=fo([(s=n[0])==null?void 0:s.id],e[l],m);a&&(e[e[u.xField]+"-"+l]=a)}):(i=e.quotaList)!=null&&i.length&&(e.quotaList.map(n=>n.id)??[]).forEach((n,a)=>{let s=e[o];m.type==="progress-bar"&&(s=e.originalValue);const r=fo([n],s,m);r?e.conditionColor.push(r):e.conditionColor=void 0})}),u},fo=(m,u,t)=>{var n,a;const{threshold:e}=_(t.senior),{basicStyle:o}=_(t.customAttr),i=Array.isArray(u)?u[1]-u[0]:u;if(!i)return;const l=new Map;for(const s of e.lineThreshold??[])l.set(s.fieldId,s);for(const s of l.values())if(!(t.type==="progress-bar"&&((a=(n=t.yAxisExt)==null?void 0:n[0])==null?void 0:a.id)!==m[0])&&!(!m.includes(s.fieldId)&&t.type!=="waterfall")){for(const r of s.conditions)if(r.term==="between"&&i>=r.min&&i<=r.max||r.term==="lt"&&i<r.value||r.term==="le"&&i<=r.value||r.term==="gt"&&i>r.value||r.term==="ge"&&i>=r.value){let d=$e(r.color,o.alpha);if(o.gradient){let f=["bar-horizontal","progress-bar"].includes(t.type)?0:270;if(t.type==="bidirectional-bar"){const c=t.yAxis.find(p=>p.id===s.fieldId);f=_i(o,c?0:1)}d=tt(d,!0,f)}return d}}};function Ls(m,u){const{threshold:t}=_(m.senior);if(!t.enable)return u;const{basicStyle:e}=_(m.customAttr),o="conditionColor",i=u.rawFields||[];i.push(o);const l=s=>{var r;return{...u.columnStyle,...u.barStyle,...(r=s[o])!=null&&r[0]?{fill:s[o][0]}:{}}};let n;return m.type==="bidirectional-bar"?(i.push(u.xField),n=Es(m,e,u)):m.type==="waterfall"&&(n=Ts(e,m)),{...u,rawFields:i,columnStyle:l,barStyle:l,tooltip:{...u.tooltip,...u.tooltip.customItems?{}:{customItems:s=>(s.forEach(r=>{var d;(d=r.data)!=null&&d[o]&&(r.color=r.data[o][0])}),s)}},...n?{color:n}:{}}}const Ts=(m,u)=>{const t=wi(u,m,270);return e=>{if(e.$$isTotal$$)return t[2];const o=e.$$yField$$;return fo([],o,u)??(o[1]>o[0]?t[0]:t[1])}},Es=(m,u,t)=>{const e=wi(m,u,270);return o=>{const i=t.data.find(l=>l[o[t.xField]+"-"+o["series-field-key"]]);return i?i[o[t.xField]+"-"+o["series-field-key"]]:o["series-field-key"]==="value"?e[0]:e[1]}},wi=(m,u,t)=>{var o;const e=[];return(o=u.colors)==null||o.forEach((i,l)=>{m.type==="bidirectional-bar"?e.push(tt($e(i,u.alpha),!0,_i(u,l))):e.push(tt($e(i,u.alpha),!0,t))}),u.gradient?e:u.colors},_i=(m,u)=>{let t=180-u*180;return m.layout==="vertical"&&(t=u===0?280:90),t},To=m=>{var t;let u=m.color;return(t=m.data)!=null&&t.conditionColor&&(u=m.data.conditionColor[0]),u},Fs=(m,u,t,e)=>{if((()=>{const i=document.getElementById(u+"_empty");i&&i.parentElement.removeChild(i)})(),!(m.length>0)&&!m.length){const i=document.createElement("div");i.id=u+"_empty",i.textContent=e||ss("data_set.no_data"),i.setAttribute("style",`position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        color: darkgray;
        textAlign: center;`);const l=document.getElementById(u);l.insertBefore(i,l.firstChild),t==null||t.destroy()}},pr=m=>{if(m<=0||m>99||!Number.isInteger(m))throw new Error("请输入1-99之间的整数");const u=["","一","二","三","四","五","六","七","八","九"];if(m<10)return u[m];const t=Math.floor(m/10),e=m%10;return e===0?t===1?"十":u[t]+"十":t===1?"十"+u[e]:u[t]+"十"+u[e]},{t:vt}=Y();var Ze=(m=>(m.ANT_V="antv",m.ECHARTS="echarts",m.CUSTOM="custom",m))(Ze||{}),$t=(m=>(m.G2_PLOT="g2plot",m.L7_PLOT="l7plot",m.L7="l7",m.ECHARTS="echarts",m.S2="s2",m.RICH_TEXT="rich-text",m.PICTURE_GROUP="picture-group",m.INDICATOR="indicator",m))($t||{});class zs{constructor(){w(this,"chartInstance")}}class Ce{constructor(u,t,e,o){w(this,"render");w(this,"library");w(this,"name");w(this,"title");w(this,"defaultData");this.render=u,this.library=t,this.name=e,this.defaultData=o}setupDefaultOptions(u){return u}}class Qe extends Ce{constructor(t,e,o){super("antv",t,e,o);w(this,"axisConfig",{xAxis:{name:`${vt("chart.drag_block_type_axis")} / ${vt("chart.dimension")}`,type:"d",allowEmpty:!0},xAxisExt:{name:`${vt("chart.chart_group")} / ${vt("chart.dimension")}`,type:"d",limit:1,allowEmpty:!0},extStack:{name:`${vt("chart.stack_item")} / ${vt("chart.dimension")}`,type:"d",limit:1,allowEmpty:!0},yAxis:{name:`${vt("chart.drag_block_value_axis")} / ${vt("chart.quota")}`,type:"q",limit:1,allowEmpty:!0}});w(this,"selectorSpec",{"misc-style-selector":{title:`${vt("chart.size")}`},"dual-y-axis-selector":{title:`${vt("chart.yAxis")}`},"x-axis-selector":{title:`${vt("chart.xAxis")}`}})}}class Q extends Qe{configTheme(u,t){const e=ns(u);return{...t,theme:e}}configLabel(u,t){const e=Se(u);return{...t,label:e}}configMultiSeriesTooltip(u,t){const e=rs(u);return{...t,tooltip:e}}configTooltip(u,t){const e=as(u);return{...t,tooltip:e}}configLegend(u,t){const e=cs(u);return{...t,legend:e}}configXAxis(u,t){const e=yi(u);return{...t,xAxis:e}}configYAxis(u,t){const e=Xe(u);return{...t,yAxis:e}}configSlider(u,t){const e=us(u);return{...t,slider:e}}configAnalyse(u,t){const e=bi(u);return{...t,annotations:[...e,...t.annotations||[]]}}configAnalyseHorizontal(u,t){const e=ds(u);return{...t,annotations:e}}configEmptyDataStrategy(u,t){return fl(u,t)}configColor(u,t){const e=ml(u);return{...t,color:e}}configGroupColor(u,t){const e=pl(u,t);return{...t,color:e}}configStackColor(u,t){const e=hl(u,t);return{...t,color:e}}configSingleDimensionColor(u,t){const e=gl(u,t);return{...t,color:e}}setupSeriesColor(u,t){return yl(u)}setupSubSeriesColor(u,t){}configConditions(u,t){const e=Cs(u);return{...t,annotations:[...e,...t.annotations||[]]}}configBarConditions(u,t){return Ls(u,t)}addConditionsStyleColorToData(u,t){return _s(u,t)}configEmptyDataStyle(u,t,e,o){Fs(u,t,e,o)}constructor(u,t){super($t.G2_PLOT,u,t)}}const ve=["background-overall-component","border-style","basic-style-selector","label-selector","tooltip-selector","x-axis-selector","y-axis-selector","title-selector","legend-selector","function-cfg","assist-line","jump-set","linkage","threshold"],ks=["background-overall-component","border-style","basic-style-selector","label-selector","tooltip-selector","x-axis-selector","y-axis-selector","title-selector","legend-selector","function-cfg","jump-set","linkage","threshold"],St={"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha","gradient","radiusColumnBar","columnWidthRatio"],"label-selector":["fontSize","color","labelFormatter"],"tooltip-selector":["fontSize","color","tooltipFormatter","show"],"x-axis-selector":["name","color","fontSize","axisLine","splitLine","axisForm","axisLabel","position"],"y-axis-selector":["name","color","fontSize","axisValue","axisLine","splitLine","axisForm","axisLabel","position"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"legend-selector":["icon","orient","fontSize","color","hPosition","vPosition"],"function-cfg":["slider","emptyDataStrategy"],threshold:["lineThreshold"]},ue=["xAxis","yAxis","filter","drill","extLabel","extTooltip"],we=m=>{var t;const u=document.getElementById(Et(m));u&&(u.remove(),(t=u.parentNode)==null||t.removeChild(u))},Os=(m,u=128)=>{const t=Li(m);return W(t)?!1:t.r*.299+t.g*.587+t.b*.114>=u},Li=m=>{const u=/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/g;let t,e=null;for(;(t=u.exec(m))!==null;){const o=parseInt(t[1]),i=parseInt(t[2]),l=parseInt(t[3]),n=parseFloat(t[4]);e={r:o,g:i,b:l,a:n}}return e};function Yo(m,u,t,e){var i;if(!u&&u!=0)return;const o=document.getElementById(Et(e));if(o){const l=document.getElementById(m);l&&(l.remove(),(i=l.parentNode)==null||i.removeChild(l));const n=document.createElement("div");n.id=m,n.className="child",n.setAttribute("style",`width: auto;
        height: auto;
        border-radius: 2px;
        position: relative;
        padding: 4px 5px 4px 5px;
        display:none;
        transform: translateX(-50%);
        opacity: 1;
        transition: opacity 0.2s ease-in-out;
        white-space:nowrap;
        overflow:auto;`),n.textContent=D(u,t);const a=document.createElement("span");a.setAttribute("style",`width: 0px;
        height: 0px;
        border: 4px solid transparent;
        border-top-color: red;
        position: absolute;
        left: calc(50% - 4px);
        margin-top:4px;`),n.appendChild(a),o.appendChild(n)}}const Ti=m=>["area","bar"].includes(m.type),Is=m=>["line","area","bar","bar-group"].includes(m.type),Me=m=>m.container+"_",Et=m=>m.container+"_point_"+m.id+"_";function Ns(m,u){const t=document.getElementById(m);if(!t){console.error("Parent div not found");return}const e=t.getElementsByTagName("div");for(let o=e.length-1;o>=0;o--){const i=e[o];i.id&&i.id.startsWith(u)&&i.parentNode.removeChild(i)}}const Eo=(m,u,t,e)=>{if(u.container=e,we(u),!Is(u))return;const{label:o}=_(u.customAttr),{yAxis:i}=_(u);m.once("beforerender",l=>{l.view.on("beforepaint",()=>{var n;(n=m.chart.geometries[0])==null||n.beforeMappingData.forEach(a=>{var f;a.forEach(c=>{delete c._origin.EXTREME});const{minItem:s,maxItem:r}=Bs(a.filter(c=>{var p,h;return((p=c==null?void 0:c._origin)==null?void 0:p.value)!==null&&((h=c==null?void 0:c._origin)==null?void 0:h.value)!==void 0}));if(!s||!r)return;let d=!1;if(Ti(u)||i.length>1){const c=o.seriesLabelFormatter.find(p=>(p.chartShowName?p.chartShowName:p.name===s._origin.category)||(p.chartShowName?p.chartShowName:p.name===r._origin.category));d=c==null?void 0:c.showExtremum}else["bar-group"].includes(u.type)?d=o.showExtremum:d=(f=o.seriesLabelFormatter[0])==null?void 0:f.showExtremum;d&&(s._origin.EXTREME=!0,r._origin.EXTREME=!0)})}),m.chart.geometries[0].on("afteranimate",()=>{Ds(u,l)})}),m.on("legend-item:click",l=>{const n=l.view.getController("legend").components[0].component.cfg.items.filter(a=>a.unchecked);n.length>0&&n.forEach(a=>{const s=Me(u)+Et(u)+a.id;Ns(Et(u),s)})})},Bs=m=>m.reduce(({minItem:u,maxItem:t},e)=>((u===void 0||e._origin.value<u._origin.value)&&(u=e),(t===void 0||e._origin.value>t._origin.value)&&(t=e),u==null||delete u._origin.EXTREME,t==null||delete t._origin.EXTREME,{minItem:u,maxItem:t}),{minItem:void 0,maxItem:void 0}),Ds=(m,u)=>{const{label:t,basicStyle:e}=_(m.customAttr),o=e.lineSymbolSize,{yAxis:i}=_(m);if(we(m),!document.getElementById(Et(m))){const r=document.createElement("div");r.id=Et(m),r.style.position="fixed",r.style.zIndex="1",r.style.opacity="0",r.style.transition="opacity 0.2s ease-in-out",r.style.overflow="visible";const d=document.getElementById(m.container);d.insertBefore(r,d.firstChild);let f=0;const c=()=>{if(f+=.19,f>=1){cancelAnimationFrame(p);return}r.style.opacity=f+"",p=requestAnimationFrame(c)};let p=requestAnimationFrame(c)}let n=[];const a=u.view.getGeometries().find(r=>r.type==="interval");a&&(n=a.dataArray);const s=u.view.getGeometries().find(r=>r.type==="point");s&&(n=s.dataArray),Ms(n,r=>{var d;if(r&&r.length>0){const f=r[0],[c,p]=r.filter(S=>S._origin.EXTREME);let h,g=!1;if(Ti(m)||i.length>1){const S=t.seriesLabelFormatter.find(A=>A.chartShowName?A.chartShowName===f._origin.category:A.name===f._origin.category);g=S==null?void 0:S.showExtremum,h=S}else["bar-group"].includes(m.type)?g=t.showExtremum:(g=(d=t.seriesLabelFormatter[0])==null?void 0:d.showExtremum,h=t.seriesLabelFormatter[0]);const y=h?h.fontSize:t.fontSize;if(!c)return;const x=Me(m)+Et(m)+f._origin.category+"_"+(p?p._origin.value:c._origin.value),b=Me(m)+Et(m)+f._origin.category+"_"+c._origin.value;g&&t.show?(p&&Yo(x,p._origin.value,h?h.formatterCfg:t.labelFormatter,m),Yo(b,c._origin.value,h?h.formatterCfg:t.labelFormatter,m),r.forEach(S=>{const A=document.getElementById(Me(m)+Et(m)+S._origin.category+"_"+S._origin.value);if(A&&S._origin.EXTREME){A.style.position="absolute";const C=(S.y[1]?S.y[1]:S.y)-(y+(o||0)+12);A.style.top=C+"px",A.style.left=S.x+"px",A.style.zIndex="10",A.style.fontSize=y+"px",A.style.lineHeight=y+"px";const v=S.color.startsWith("#")?$e(S.color,e.alpha/100):Li(S.color),{r:E,b:z,g:k,a:N}=v;A.style.backgroundColor="rgba("+E+","+k+","+z+","+N+")",A.style.color=Os(S.color)?"#000":"#fff",A.children[0].style.borderTopColor="rgba("+E+","+k+","+z+","+N+")",A.style.display="table";const L=A.childNodes[1],I=Math.ceil(S.y+Math.abs(Math.floor(C))+6);C<0&&Math.abs(C)/S.y*100>=50?(A.style.transform=`translateX(-50%) translateY(${I}px)`,L.style.marginTop="-12px",L.style.transform="rotate(180deg)"):L.style.display="block"}})):(qo(x),qo(b))}})};function qo(m){var t;const u=document.getElementById(m);u&&(u.remove(),(t=u.parentNode)==null||t.removeChild(u))}function Ms(m,u){if(typeof m=="number"&&(m={length:m}),m.length===0)return;let t=0;function e(){t>=m.length||requestIdleCallback(o=>{for(;o.timeRemaining()>0&&t<m.length;)u(m[t],t),t++;e()})}e()}const{t:ie}=Y(),Ps=[];class Ei extends Q{constructor(t="bar",e=Ps){super(t,e);w(this,"properties",ve);w(this,"propertyInner",{...St,"basic-style-selector":[...St["basic-style-selector"],"seriesColor"],"label-selector":["vPosition","seriesLabelFormatter","showExtremum"],"tooltip-selector":["fontSize","color","backgroundColor","seriesTooltipFormatter","show"],"y-axis-selector":[...St["y-axis-selector"],"axisLabelFormatter"]});w(this,"baseOptions",{xField:"field",yField:"value",seriesField:"category",isGroup:!0,data:[]});w(this,"axis",[...ue]);w(this,"axisConfig",{...this.axisConfig,xAxis:{name:`${ie("chart.drag_block_type_axis")} / ${ie("chart.dimension")}`,type:"d"},yAxis:{name:`${ie("chart.drag_block_value_axis")} / ${ie("chart.quota")}`,type:"q"}})}async drawChart(t){var d,f,c;const{chart:e,container:o,action:i}=t;if(!((f=(d=e==null?void 0:e.data)==null?void 0:d.data)!=null&&f.length)){e.container=o,we(e);return}const l=G((c=t.chart.data)==null?void 0:c.data),n={...this.baseOptions,appendPadding:nt(e),data:l},a=this.setupOptions(e,n);let s=null;const{Column:r}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(p=>p.$),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url);return s=new r(o,a),s.on("interval:click",i),Eo(s,e,a,o),ft(e,s),s}configLabel(t,e){var a;const o=super.configLabel(t,e);if(!o.label)return{...o,label:!1};const{label:i}=_(t.customAttr),l=(a=i.seriesLabelFormatter)==null?void 0:a.reduce((s,r)=>(s[r.id]=r,s),{});o.label.style.fill=Gt.color;const n={fields:[],...o.label,formatter:(s,r)=>{var p;if(s.EXTREME)return"";if(!((p=i.seriesLabelFormatter)!=null&&p.length))return s.value;const d=l==null?void 0:l[s.quotaList[0].id];if(!d)return s.value;if(!d.show)return;const f=D(s.value,d.formatterCfg),c=new Ut({});return c.addShape({type:"text",attrs:{x:0,y:0,text:f,textAlign:"start",textBaseline:"top",fontSize:d.fontSize,fontFamily:t.fontFamily,fill:d.color}}),c},position:s=>{var r,d,f;if(s.value<0){if(((r=o.label)==null?void 0:r.position)==="top")return"bottom";if(((d=o.label)==null?void 0:d.position)==="bottom")return"top"}return(f=o.label)==null?void 0:f.position}};return{...o,label:n}}configTooltip(t,e){return super.configMultiSeriesTooltip(t,e)}configBasicStyle(t,e){const o=_(t.customAttr).basicStyle;if(o.gradient){let n=o.colors;n=n.map(a=>{const s=$(a,o.alpha);return tt(s,!0,270)}),e={...e,color:n}}if(o.radiusColumnBar==="roundAngle"){const n={radius:[o.columnBarRightAngleRadius,o.columnBarRightAngleRadius,o.columnBarRightAngleRadius,o.columnBarRightAngleRadius]};e={...e,columnStyle:n}}let i;const l=o.columnWidthRatio??ot.columnWidthRatio;return l>=1&&l<=100?i=l/100:l<1?i=1/100:l>100&&(i=1),i&&(e.columnWidthRatio=i),e}configYAxis(t,e){const o=super.configYAxis(t,e);if(!o.yAxis)return o;const i=_(t.customStyle).yAxis,l=i.axisValue;if(o.yAxis.label&&(o.yAxis.label.formatter=n=>D(n,i.axisLabelFormatter)),!(l!=null&&l.auto)){const n={yAxis:{...o.yAxis,min:l.min,max:l.max,minLimit:l.min,maxLimit:l.max,tickCount:l.splitCount}},{data:a}=e,s=a.filter(r=>r.value>=l.min);return{...o,data:s,...n}}return o}setupOptions(t,e){return U(this.addConditionsStyleColorToData,this.configTheme,this.configEmptyDataStrategy,this.configColor,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configSlider,this.configAnalyse,this.configBarConditions)(t,e,{},this)}setupDefaultOptions(t){return t.senior.functionCfg.emptyDataStrategy="ignoreData",t}}class Fo extends Ei{constructor(t="bar-stack"){super(t);w(this,"properties",ve.filter(t=>t!=="threshold"));w(this,"propertyInner",{...this.propertyInner,"label-selector":[...St["label-selector"],"vPosition","showTotal","totalColor","totalFontSize","totalFormatter","showStackQuota"],"tooltip-selector":["fontSize","color","backgroundColor","tooltipFormatter","show"]});this.baseOptions={...this.baseOptions,isStack:!0,isGroup:!1,meta:{category:{type:"cat"}}},this.axis=[...this.axis,"extStack"]}configLabel(t,e){let o=Se(t);if(!o)return e;e={...e,label:o};const{label:i}=_(t.customAttr);if(i.showStackQuota||i.showStackQuota===void 0?(o.style.fill=i.color,o={...o,formatter:function(l){return D(l.value,i.labelFormatter)}}):o=!1,i.showTotal){const l=i.labelFormatter??je;Ll(Tl(e.data,"field"),(n,a)=>{const s=n.reduce((d,f)=>d+f.value,0),r=D(s,l);e.annotations||(e={...e,annotations:[]}),e.annotations.push({type:"text",position:[a,s],content:`${r}`,style:{textAlign:"center",fontSize:i.fontSize,fill:i.color},offsetY:-(parseInt(i.fontSize)/2)})})}return{...e,label:o}}configTooltip(t,e){const o=_(t.customAttr).tooltip;if(!o.show)return{...e,tooltip:!1};const i={formatter:l=>{const a={name:W(l.category)?l.field:l.category,value:l.value},s=D(l.value,o.tooltipFormatter);return a.value=s??"",a},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:i}}configColor(t,e){return this.configStackColor(t,e)}configData(t,e){const{xAxis:o,extStack:i,yAxis:l}=t,n=o.some(c=>c.sort!=="none"),a=i.some(c=>c.sort!=="none");if(n||a||!((l==null?void 0:l[0].sort)!=="none")||!i.length||!l.length)return e;const{data:r}=e,d=r.reduce((c,p)=>(c[p.field]=c[p.field]?c[p.field]+p.value:p.value||0,c),{}),f=l[0].sort;return r.sort((c,p)=>f==="asc"?d[c.field]-d[p.field]:d[p.field]-d[c.field]),e}setupSeriesColor(t,e){return bo(t,e)}setupOptions(t,e){return U(this.configTheme,this.configEmptyDataStrategy,this.configData,this.configColor,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configSlider,this.configAnalyse)(t,e,{},this)}}class $s extends Fo{constructor(t="bar-group"){super(t);w(this,"properties",ve);w(this,"propertyInner",{...this.propertyInner,"label-selector":[...St["label-selector"],"vPosition","showExtremum"]});w(this,"axisConfig",{...this.axisConfig,yAxis:{name:`${ie("chart.drag_block_value_axis")} / ${ie("chart.quota")}`,type:"q",limit:1}});this.baseOptions={...this.baseOptions,isGroup:!0,isStack:!1,meta:{category:{type:"cat"}}},this.axis=[...ue,"xAxisExt"]}configLabel(t,e){const o=Se(t);if(!o)return e;const i={...e,label:o},{label:l}=_(t.customAttr);i.label.style.fill=l.color;const n={...i.label,formatter:function(a,s){if(a.EXTREME)return"";const r=D(a.value,l.labelFormatter);return l.childrenShow?r:null}};return{...i,label:n}}configColor(t,e){return this.configGroupColor(t,e)}setupSeriesColor(t,e){return Ko(t,e)}setupOptions(t,e){return U(this.addConditionsStyleColorToData,this.configTheme,this.configEmptyDataStrategy,this.configColor,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configSlider,this.configAnalyse,this.configBarConditions)(t,e,{},this)}}class Fi extends Fo{constructor(t="bar-group-stack"){super(t);w(this,"propertyInner",{...this.propertyInner,"label-selector":[...St["label-selector"],"vPosition"]});this.baseOptions={...this.baseOptions,isGroup:!0,groupField:"group"},this.axis=[...this.axis,"xAxisExt","extStack"]}configTheme(t,e){const l={...super.configTheme(t,e).theme,innerLabels:{offset:0}};return{...e,theme:l}}configLabel(t,e){const o=Se(t);if(!o)return e;const i={...e,label:o},{label:l}=_(t.customAttr);i.label.style.fill=l.color;const n={...i.label,formatter:function(a){return D(a.value,l.labelFormatter)}};return{...i,label:n}}configTooltip(t,e){const o=_(t.customAttr).tooltip;if(!o.show)return{...e,tooltip:!1};const i={fields:[],formatter:l=>{const n={name:`${l.category} - ${l.group}`,value:l.value};return n.value=D(l.value,o.tooltipFormatter),n},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:i}}setupOptions(t,e){return U(this.configTheme,this.configEmptyDataStrategy,this.configColor,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configSlider,this.configAnalyse)(t,e,{},this)}}class Rs extends Fi{constructor(){super("percentage-bar-stack");w(this,"propertyInner",{...this.propertyInner,"label-selector":["color","fontSize","vPosition","reserveDecimalCount"],"tooltip-selector":["color","fontSize","backgroundColor","show"]});this.baseOptions={...this.baseOptions,isStack:!0,isPercent:!0,isGroup:!1,groupField:void 0,meta:{category:{type:"cat"}}},this.axis=[...ue,"extStack"]}configLabel(t,e){const o=super.configLabel(t,e);if(!o.label)return o;const{customAttr:i}=t,l=_(i).label,n={...o.label,formatter:function(a){return a.value?(Math.round(a.value*1e4)/100).toFixed(l.reserveDecimalCount)+"%":"0%"}};return{...o,label:n}}configTooltip(t,e){if(!_(t.customAttr).tooltip.show)return{...e,tooltip:{showContent:!1}};const{customAttr:i}=t,l=_(i).label,n={formatter:a=>{const s={name:a.category,value:a.value};return s.value=(Math.round(a.value*1e4)/100).toFixed(l.reserveDecimalCount)+"%",s},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:n}}setupOptions(t,e){return U(this.configTheme,this.configEmptyDataStrategy,this.configColor,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configSlider,this.configAnalyse)(t,e,{},this)}}const Hs=Object.freeze(Object.defineProperty({__proto__:null,Bar:Ei,GroupBar:$s,GroupStackBar:Fi,PercentageStackBar:Rs,StackBar:Fo},Symbol.toStringTag,{value:"Module"})),{t:Ot}=Y();class Ws extends Q{constructor(){super("bidirectional-bar",[]);w(this,"axisConfig",{...this.axisConfig,xAxis:{name:`${Ot("chart.drag_block_type_axis")} / ${Ot("chart.dimension")}`,type:"d",limit:1},yAxis:{name:`${Ot("chart.drag_block_value_axis")} / ${Ot("chart.quota")}`,type:"q",limit:1},yAxisExt:{name:`${Ot("chart.drag_block_value_axis_ext")} / ${Ot("chart.quota")}`,type:"q",limit:1}});w(this,"axis",["xAxis","yAxis","yAxisExt","filter","drill","extLabel","extTooltip"]);w(this,"properties",["background-overall-component","border-style","basic-style-selector","x-axis-selector","dual-y-axis-selector","title-selector","legend-selector","label-selector","tooltip-selector","function-cfg","jump-set","linkage","threshold"]);w(this,"propertyInner",{"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha","gradient","layout","radiusColumnBar"],"x-axis-selector":["position","axisLabel","axisLine","splitLine"],"dual-y-axis-selector":["name","position","color","fontSize","axisLabel","axisLine","splitLine","axisValue","axisLabelFormatter"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"legend-selector":["icon","orient","fontSize","color","hPosition","vPosition"],"function-cfg":["emptyDataStrategy"],"label-selector":["hPosition","vPosition","seriesLabelFormatter"],"tooltip-selector":["fontSize","color","backgroundColor","seriesTooltipFormatter","show"],threshold:["lineThreshold"]});w(this,"selectorSpec",{...this.selectorSpec,"dual-y-axis-selector":{title:`${Ot("chart.xAxis")}`},"x-axis-selector":{title:`${Ot("chart.yAxis")}`}})}async drawChart(t){var h,g,y,x;const{chart:e,container:o,action:i}=t;if(!((g=(h=e.data)==null?void 0:h.data)!=null&&g.length))return;const l=G(e.data.data),n=bt((y=l[0])==null?void 0:y.data,[]),a=Ao(bt((x=l[1])==null?void 0:x.data,[]),b=>{var S;return{...b,category:b.field,value:(S=n.find(A=>A.field===b.field))==null?void 0:S.value,valueExt:b.value}}),s={xField:"field",data:a,xAxis:{label:{style:{}},position:"bottom"},yField:["value","valueExt"],appendPadding:nt(e),meta:{field:{type:"cat"}}},d={...this.setupOptions(e,s)},f=e.xAxis;if((f==null?void 0:f.length)===1&&f[0].deType===1){const b=a.map(S=>S.field);d.meta={field:{type:"cat",values:b.reverse()}}}const{BidirectionalBar:c}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(b=>b.a6),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),p=new c(o,d);return p.on("interval:click",i),p.on("element:click",b=>{const S=p.options.data.filter(A=>A.field===b.data.data.field&&A[b.data.data["series-field-key"]]===b.data.data[b.data.data["series-field-key"]]);b.data.data={...b.data.data,...S[0]}}),ft(e,p),Xt(e,p),p}configBasicStyle(t,e){var i;const o=_(t.customAttr).basicStyle;if(o.gradient){const l=(i=o.colors)==null?void 0:i.map((n,a)=>{const s=$(n,o.alpha);let r=180-a*180;return o.layout==="vertical"&&(a===0&&(r=280),a===1&&(r=90)),tt(s,!0,r)});e={...e,color:l}}if(e={...e,layout:o.layout},o.radiusColumnBar==="roundAngle"){const l={radius:[o.columnBarRightAngleRadius,o.columnBarRightAngleRadius,o.columnBarRightAngleRadius,o.columnBarRightAngleRadius]};e={...e,barStyle:l}}return e}configXAxis(t,e){const o=super.configXAxis(t,e);return o.xAxis&&o.xAxis.label&&delete o.xAxis.label.style.textAlign,o}configTooltip(t,e){var f;const i=_(t.customAttr).tooltip;if(!i.show)return{...e,tooltip:!1};const l=G(t.yAxis),n=G(t.yAxisExt),a=(f=i.seriesTooltipFormatter)==null?void 0:f.filter(c=>c.show).reduce((c,p)=>(c[p.seriesId]=p,c),{}),s=G(e.data),r=c=>{const p=c.data;let h=l[0],g="yAxis";return p["series-field-key"]==="valueExt"&&(h=n[0],g="yAxisExt"),{id:h.id,name:h.name,axisType:g,value:p[p["series-field-key"]]}},d={shared:!0,showTitle:!0,customItems(c){var g,y;if(!((g=i.seriesTooltipFormatter)!=null&&g.length))return c;const p=[];c.filter(x=>{const b=r(x);return a[b.id+"-"+b.axisType]}).forEach(x=>{const b=r(x),S=a[b.id+"-"+b.axisType],A=D(parseFloat(x.value),S.formatterCfg),C=W(S.chartShowName)?S.name:S.chartShowName,v=To(x);p.push({...x,name:C,value:A,color:v})});const h=(y=s.find(x=>x.field===c[0].title))==null?void 0:y.dynamicTooltipValue;return h.length>0&&h.forEach(x=>{const b=i.seriesTooltipFormatter.filter(S=>S.id===x.fieldId);if(b&&b.length>0){const S=D(parseFloat(x.value),b[0].formatterCfg),A=W(b[0].chartShowName)?b[0].name:b[0].chartShowName;p.push({color:"grey",name:A,value:S})}}),p},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:d}}configLegend(t,e){const o=super.configLegend(t,e);return o.legend&&(o.legend.itemName.formatter=(i,l,n)=>{const a=t.yAxis[0],s=t.yAxisExt[0];return n===0?a.chartShowName?a.chartShowName:a.name:s.chartShowName?s.chartShowName:s.name}),o}configYAxis(t,e){const o=Xe(t);let i=xi(t);const l={...e};o?l.yAxis={value:void 0,valueExt:void 0}:(i=!1,l.yAxis={value:!1,valueExt:!1});const n=e.layout==="horizontal";o&&o.title&&n&&(o.title.autoRotate=!1);const a=_(t.customStyle).yAxis;o.label&&(o.label.formatter=f=>D(f,a.axisLabelFormatter));const s=a.axisValue;s!=null&&s.auto?l.yAxis.value=o:l.yAxis.value={...o,min:s.min,max:s.max,minLimit:s.min,maxLimit:s.max,tickCount:s.splitCount};const r=_(t.customStyle).yAxisExt;i.label&&(i.label.formatter=f=>D(f,r.axisLabelFormatter));const d=r.axisValue;return d!=null&&d.auto?l.yAxis.valueExt=i:l.yAxis.valueExt={...i,min:d.min,max:d.max,minLimit:d.min,maxLimit:d.max,tickCount:d.splitCount},l}setupDefaultOptions(t){return t.customStyle.yAxis={...t.customStyle.yAxis,position:"left"},t.customStyle.yAxisExt={...t.customStyle.yAxisExt,position:"left",splitLine:t.customStyle.yAxis.splitLine},t.customAttr.label={...t.customAttr.label,position:"right"},t.customAttr.basicStyle.layout="horizontal",t}configLabel(t,e){var d;let o;const i=t.yAxis,l=t.yAxisExt,n=_(t.customAttr).label,a=(d=n.seriesLabelFormatter)==null?void 0:d.reduce((f,c)=>(f[c.id]=c,f),{});let s;const r=e.layout==="horizontal";if(t.customAttr&&(s=_(t.customAttr),s.label)){const f=s.label;if(f.show){const c=[];if(!n.fullDisplay){const p=super.configLabel(t,e);c.push(...p.label.layout)}o={position:f.position,layout:c,style:{fill:f.color,fontSize:f.fontSize,fontFamily:t.fontFamily},formatter:p=>{let h=i[0],g=p.value;p["series-field-key"]==="valueExt"&&(h=l[0]);const y=p[p["series-field-key"]],x=a==null?void 0:a[h.id];if(h.formatterCfg&&(g=D(y,h.formatterCfg)),!x)return g;if(!x.show)return;x?g=D(y,x.formatterCfg):g=D(y,f.labelFormatter);const b=new Ut({}),S=p["series-field-key"]==="value",A=S&&r?"end":"start",C=o.position==="middle";return b.addShape({type:"text",attrs:{x:S&&r&&!C?-6:!S&&r&&!C?6:0,y:S&&!r&&!C?-8:!S&&!r&&!C?8:0,text:g,textAlign:o.position==="middle"?"start":A,textBaseline:"top",fontSize:x.fontSize,fontFamily:t.fontFamily,fill:x.color}}),b}}}else o=!1}return r||(o.position==="left"&&(o.position="bottom"),o.position==="right"&&(o.position="top")),{...e,label:o}}configEmptyDataStrategy(t,e){const{data:o}=e;if(!(o!=null&&o.length))return e;const i=_(t.senior).functionCfg.emptyDataStrategy;if(i==="ignoreData"){const n=o.filter(a=>a.value===null||a.valueExt===null).map(a=>a.field);return{...e,data:o.filter(a=>!n.includes(a.field))}}return(i==="breakLine"||i==="setZero")&&((n,a)=>{a.forEach(s=>{s.value===null&&(s.value=n==="breakLine"?null:0),s.valueExt===null&&(s.valueExt=n==="breakLine"?null:0)})})(i,o),e}setupOptions(t,e){return U(this.addConditionsStyleColorToData,this.configTheme,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configAnalyse,this.configSlider,this.configEmptyDataStrategy,this.configBarConditions)(t,e)}}const Vs=Object.freeze(Object.defineProperty({__proto__:null,BidirectionalHorizontalBar:Ws},Symbol.toStringTag,{value:"Module"})),{t:le}=Y(),Ys=[];class zi extends Q{constructor(t="bar-horizontal"){super(t,Ys);w(this,"axisConfig",{...this.axisConfig,xAxis:{name:`${le("chart.drag_block_type_axis")} / ${le("chart.dimension")}`,type:"d"},yAxis:{name:`${le("chart.drag_block_value_axis")} / ${le("chart.quota")}`,type:"q"}});w(this,"properties",ve);w(this,"propertyInner",{...St,"basic-style-selector":[...St["basic-style-selector"],"seriesColor"],"label-selector":["hPosition","seriesLabelFormatter"],"tooltip-selector":["fontSize","color","backgroundColor","seriesTooltipFormatter","show"],"x-axis-selector":[...St["x-axis-selector"],"axisLabelFormatter","axisValue"],"y-axis-selector":["name","color","fontSize","axisLine","splitLine","axisForm","axisLabel","position","showLengthLimit"]});w(this,"axis",[...ue]);w(this,"baseOptions",{data:[],xField:"value",yField:"field",seriesField:"category",isGroup:!0})}async drawChart(t){var d,f;const{chart:e,container:o,action:i}=t;if(!((f=(d=e.data)==null?void 0:d.data)!=null&&f.length))return;const l=G(e.data.data),n={...this.baseOptions,appendPadding:nt(e),data:l},a=this.setupOptions(e,n),{Bar:s}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(c=>c._),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),r=new s(o,a);return r.on("interval:click",i),ft(e,r),Xt(e,r),r}configXAxis(t,e){const o=super.configXAxis(t,e);if(!o.xAxis)return o;const i=_(t.customStyle).xAxis,l=i.axisValue;if(o.xAxis.label&&(o.xAxis.label.formatter=n=>D(n,i.axisLabelFormatter)),o.xAxis.position==="top"&&(o.xAxis.position="left"),o.xAxis.position==="bottom"&&(o.xAxis.position="right"),!(l!=null&&l.auto)){const n={xAxis:{...o.xAxis,min:l.min,max:l.max,minLimit:l.min,maxLimit:l.max,tickCount:l.splitCount}},{data:a}=e,s=a.filter(r=>r.value>=l.min);return{...o,data:s,...n}}return o}configTooltip(t,e){return super.configMultiSeriesTooltip(t,e)}configBasicStyle(t,e){const o=_(t.customAttr).basicStyle;if(o.gradient){let n=o.colors;n=n.map(a=>{const s=$(a,o.alpha);return tt(s,!0)}),e={...e,color:n}}if(o.radiusColumnBar==="roundAngle"){const n={radius:[o.columnBarRightAngleRadius,o.columnBarRightAngleRadius,o.columnBarRightAngleRadius,o.columnBarRightAngleRadius]};e={...e,barStyle:n}}let i;const l=o.columnWidthRatio??ot.columnWidthRatio;return l>=1&&l<=100?i=l/100:l<1?i=1/100:l>100&&(i=1),i&&(e.barWidthRatio=i),e}setupDefaultOptions(t){const{customAttr:e,senior:o}=t,{label:i}=e;return["left","middle","right"].includes(i.position)||(i.position="middle"),o.functionCfg.emptyDataStrategy="ignoreData",t}configLabel(t,e){var a;const o=super.configLabel(t,e);if(!o.label)return{...o,label:!1};const i=_(t.customAttr).label,l=(a=i.seriesLabelFormatter)==null?void 0:a.reduce((s,r)=>(s[r.id]=r,s),{});o.label.style.fill=Gt.color;const n={fields:[],...o.label,formatter:s=>{var c;if(!((c=i.seriesLabelFormatter)!=null&&c.length))return s.value;const r=l==null?void 0:l[s.quotaList[0].id];if(!r)return s.value;if(!r.show)return;const d=D(s.value,r.formatterCfg),f=new Ut({});return f.addShape({type:"text",attrs:{x:0,y:0,text:d,textAlign:"start",textBaseline:"top",fontSize:r.fontSize,fontFamily:t.fontFamily,fill:r.color}}),f}};return{...o,label:n}}configYAxis(t,e){const o=super.configYAxis(t,e);return o.yAxis&&(o.yAxis.position==="left"&&(o.yAxis.position="bottom"),o.yAxis.position==="right"&&(o.yAxis.position="top")),o}setupOptions(t,e){return U(this.addConditionsStyleColorToData,this.configTheme,this.configEmptyDataStrategy,this.configColor,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configSlider,this.configAnalyseHorizontal,this.configBarConditions)(t,e,{},this)}}class ki extends zi{constructor(t="bar-stack-horizontal"){super(t);w(this,"properties",ve.filter(t=>t!=="threshold"));w(this,"axisConfig",{...this.axisConfig,extStack:{name:`${le("chart.stack_item")} / ${le("chart.dimension")}`,type:"d",limit:1,allowEmpty:!0}});w(this,"propertyInner",{...this.propertyInner,"label-selector":["color","fontSize","hPosition","labelFormatter"],"tooltip-selector":["fontSize","color","backgroundColor","tooltipFormatter","show"]});this.baseOptions={...this.baseOptions,isGroup:!1,isStack:!0,meta:{category:{type:"cat"}}},this.axis=[...this.axis,"extStack"]}configLabel(t,e){const o=super.configLabel(t,e);if(!o.label)return o;const{label:i}=_(t.customAttr);o.label.style.fill=i.color;const l={...o.label,formatter:function(n){return D(n.value,i.labelFormatter)}};return{...o,label:l}}configTooltip(t,e){const o=_(t.customAttr).tooltip;if(!o.show)return{...e,tooltip:!1};const i={formatter:l=>{const n={name:l.category,value:l.value},a=D(l.value,o.tooltipFormatter);return n.value=a??"",n},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:i}}configColor(t,e){return this.configStackColor(t,e)}setupSeriesColor(t,e){return bo(t,e)}configData(t,e){var c;const{xAxis:o,extStack:i,yAxis:l}=t,n=o.some(p=>p.sort!=="none"),a=i.some(p=>p.sort!=="none");if(n||a||!(((c=l==null?void 0:l[0])==null?void 0:c.sort)!=="none")||!i.length||!l.length)return e;const{data:r}=e,d=r.reduce((p,h)=>(p[h.field]=p[h.field]?p[h.field]+h.value:h.value||0,p),{}),f=l[0].sort;return r.sort((p,h)=>f==="asc"?d[p.field]-d[h.field]:d[h.field]-d[p.field]),e}setupOptions(t,e){return U(this.configTheme,this.configEmptyDataStrategy,this.configData,this.configColor,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configSlider,this.configAnalyseHorizontal)(t,e,{},this)}}class qs extends ki{constructor(){super("percentage-bar-stack-horizontal");w(this,"propertyInner",{...this.propertyInner,"label-selector":["color","fontSize","hPosition","reserveDecimalCount"],"tooltip-selector":["color","fontSize","backgroundColor","show"]});this.baseOptions={...this.baseOptions,isPercent:!0}}configLabel(t,e){const o=super.configLabel(t,e);if(!o.label)return o;const{customAttr:i}=t,l=_(i).label,n={...o.label,formatter:function(a){return a.value?(Math.round(a.value*1e4)/100).toFixed(l.reserveDecimalCount)+"%":"0%"}};return{...o,label:n}}configTooltip(t,e){if(!_(t.customAttr).tooltip.show)return{...e,tooltip:{showContent:!1}};const{customAttr:i}=t,l=_(i).label,n={formatter:a=>{const s={name:a.category,value:a.value};return s.value=(Math.round(a.value*1e4)/100).toFixed(l.reserveDecimalCount)+"%",s},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:n}}setupOptions(t,e){return U(this.configTheme,this.configEmptyDataStrategy,this.configColor,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configSlider,this.configAnalyseHorizontal)(t,e,{},this)}}const js=Object.freeze(Object.defineProperty({__proto__:null,HorizontalBar:zi,HorizontalPercentageStackBar:qs,HorizontalStackBar:ki},Symbol.toStringTag,{value:"Module"})),{t:Jt}=Y();class Gs extends Q{constructor(){super("progress-bar",[]);w(this,"axisConfig",{xAxis:{name:`${Jt("chart.form_type")} / ${Jt("chart.dimension")}`,type:"d",limit:1},yAxis:{name:`${Jt("chart.progress_target")} / ${Jt("chart.quota")}`,type:"q",limit:1},yAxisExt:{name:`${Jt("chart.progress_current")} / ${Jt("chart.quota")}`,type:"q",limit:1}});w(this,"properties",["background-overall-component","border-style","basic-style-selector","label-selector","tooltip-selector","y-axis-selector","title-selector","function-cfg","jump-set","linkage","threshold"]);w(this,"propertyInner",{...St,"legend-selector":null,"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha","gradient","radiusColumnBar","columnWidthRatio"],"label-selector":["hPosition","color","fontSize","showQuota","showProportion"],"tooltip-selector":["fontSize","color","backgroundColor","tooltipFormatter","show"],"y-axis-selector":["name","color","fontSize","axisForm","axisLabel","showLengthLimit"],"function-cfg":["emptyDataStrategy"],threshold:["lineThreshold"]});w(this,"axis",[...ue,"yAxisExt"]);w(this,"baseOptions",{data:[],xField:"progress",yField:"title",seriesField:"type",isGroup:!1,isPercent:!0,isStack:!0,xAxis:!1,appendPadding:[0,0,10,0]})}async drawChart(t){var g,y,x,b;const{chart:e,container:o,action:i}=t;if(!((y=(g=e.data)==null?void 0:g.data)!=null&&y.length))return;const l=(S,A)=>{if(S===0)return 100;if(S>0&&A<0)return 0;if(S<0&&A>0||S<0&&A===0)return(2-A/S)*100;if(S>0&&A>0)return A/S*100;if(S<0&&A<0){const C=(2-A/S)*100;return Number(Math.max(C,0).toFixed(2))}return 0},n=G(e.data.data),a=bt((x=n[0])==null?void 0:x.data,[]),r=bt((b=n[1])==null?void 0:b.data,[]).map(S=>{var C;const A=l((C=a.find(v=>v.field===S.field))==null?void 0:C.value,S.value);return{...S,type:"current",title:S.field,id:S.quotaList[0].id,originalValue:S.value,originalProgress:A,progress:A>=100?100:A}}),d=a.map(S=>{var C;const A=100-((C=r.find(v=>v.title===S.field))==null?void 0:C.progress);return{...S,type:"target",title:S.field,id:S.quotaList[0].id,originalValue:S.value,progress:A}}),f={...this.baseOptions,data:r.concat(d).flat()},c=this.setupOptions(e,f),{Bar:p}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(S=>S._),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),h=new p(o,c);return h.on("interval:click",i),ft(e,h),Xt(e,h),h}configBasicStyle(t,e){var a;const o=_(t.customAttr).basicStyle;let i=(a=o.colors)==null?void 0:a.map((s,r)=>r===1?$(s,o.alpha>10?10:o.alpha):$(s,o.alpha));if(o.gradient&&(i=i.map((s,r)=>tt(s,!0,0))),e={...e,color:s=>s.type==="target"?"rgba(0, 0, 0, 0)":i[0],barBackground:{style:{fill:i[1]}}},o.radiusColumnBar==="roundAngle"){const s={radius:[o.columnBarRightAngleRadius,o.columnBarRightAngleRadius,o.columnBarRightAngleRadius,o.columnBarRightAngleRadius]};e={...e,barStyle:s}}let l;const n=o.columnWidthRatio??ot.columnWidthRatio;return n>=1&&n<=100?l=n/100:n<1?l=1/100:n>100&&(l=1),l&&(e.barWidthRatio=l),e}configTooltip(t,e){const o=_(t.customAttr).tooltip;if(!o.show)return{...e,tooltip:{showContent:!1}};const i=G(t.yAxis)[0],l=G(t.yAxisExt)[0];return{...e,tooltip:{showContent:!0,domStyles:{"g2-tooltip-marker":null},customItems(n){const a=[];return n.forEach(s=>{if(s.data){const r=D(s.data.value,o.tooltipFormatter);s.data.id===i.id&&a.push({...s,marker:!1,name:i.chartShowName?i.chartShowName:i.name,value:r}),s.data.id===l.id&&a.push({...s,marker:!1,name:l.chartShowName?l.chartShowName:l.name,value:r})}}),a.length==0?n:a},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0}}}configLabel(t,e){var n;const o=super.configLabel(t,e);if(!o.label)return o;(n=o.label.layout)!=null&&n[0]||(o.label.layout=[{type:"limit-in-canvas"}]);const{label:i}=_(t.customAttr);o.label.style.fill=i.color;const l={...o.label,content:a=>{if(a.type==="target")return"";let s="";if(i.showQuota&&(s+=D(a.value,i.quotaLabelFormatter)),i.showProportion){let r=a.originalProgress.toFixed(i.reserveDecimalCount)+"%";i.showQuota&&(r=` (${r}) `),s+=r}return s}};return l.position==="top"&&(l.position="right"),{...o,label:l}}configYAxis(t,e){const o=super.configYAxis(t,e);if(!o.yAxis)return o;o.yAxis.position="bottom";const i=_(t.customStyle).yAxis;if(i.axisLabel.show){const l=i.axisLabel.rotate;let n="end",a="middle";Math.abs(l)>75&&(n="center"),l>75&&(a="top"),l<-75&&(a="bottom"),o.yAxis.label.style.textBaseline=a,o.yAxis.label.style.textAlign=n}return o}setupDefaultOptions(t){return t.customStyle.yAxis={...t.customStyle.yAxis,position:"left",axisLine:{show:!1,lineStyle:t.customStyle.yAxis.axisLine.lineStyle},splitLine:{show:!1,lineStyle:t.customStyle.yAxis.axisLine.lineStyle}},t.customStyle.legend.show=!1,t.customAttr.label.show=!0,t.customAttr.label.position="right",t.customAttr.label.showQuota=!1,t.customAttr.label.showProportion=!0,t}configLegend(t,e){return{...super.configLegend(t,e),legend:!1}}configEmptyDataStrategy(t,e){const{data:o}=e;if(!(o!=null&&o.length))return e;const i=_(t.senior).functionCfg.emptyDataStrategy;if(i==="ignoreData"){const l=o.filter(n=>n.value===null).map(n=>n.field);return{...e,data:o.filter(n=>!l.includes(n.field))}}return i==="breakLine"&&o.forEach(l=>{l.value===null&&(l.value=null)}),i==="setZero"&&o.forEach(l=>{l.value===null&&(l.value=0)}),e}setupOptions(t,e){return U(this.addConditionsStyleColorToData,this.configTheme,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configYAxis,this.configEmptyDataStrategy,this.configBarConditions)(t,e)}}const Us=Object.freeze(Object.defineProperty({__proto__:null,ProgressBar:Gs},Symbol.toStringTag,{value:"Module"})),{t:Zt}=Y(),Xs=[];class Js extends Q{constructor(t="bar-range"){super(t,Xs);w(this,"axisConfig",{xAxis:{name:`${Zt("chart.drag_block_type_axis")} / ${Zt("chart.dimension")}`,type:"d"},yAxis:{name:`${Zt("chart.drag_block_value_start")} / ${Zt("chart.time_dimension_or_quota")}`,limit:1,type:"q"},yAxisExt:{name:`${Zt("chart.drag_block_value_end")} / ${Zt("chart.time_dimension_or_quota")}`,limit:1,type:"q"}});w(this,"properties",ks.filter(t=>t!=="threshold"));w(this,"propertyInner",{...St,"label-selector":["hPosition","color","fontSize","labelFormatter","showGap"],"tooltip-selector":["fontSize","color","backgroundColor","tooltipFormatter","showGap","show"],"x-axis-selector":[...St["x-axis-selector"],"axisLabelFormatter"],"y-axis-selector":["name","color","fontSize","axisLine","splitLine","axisForm","axisLabel","position","showLengthLimit"]});w(this,"axis",[...ue,"yAxisExt"]);w(this,"baseOptions",{data:[],xField:"values",yField:"field",colorField:"category",isGroup:!0})}async drawChart(t){var S,A,C,v;const{chart:e,container:o,action:i}=t;if(!((A=(S=e.data)==null?void 0:S.data)!=null&&A.length))return;const l=G(e.data.data);l.forEach(E=>{E.tempId=(Math.random()*1e7).toString()});const n=!!e.aggregate,a=!!e.data.isDate,s=e.yAxis??e.yAxisExt??[];let r;const d=((C=s[0])==null?void 0:C.datePattern)==="date_split"?"/":"-";switch((v=s[0])==null?void 0:v.dateStyle){case"y":r="YYYY";break;case"y_M":r="YYYY"+d+"MM";break;case"y_M_d":r="YYYY"+d+"MM"+d+"DD";break;case"y_M_d_H":r="YYYY"+d+"MM"+d+"DD HH";break;case"y_M_d_H_m":r="YYYY"+d+"MM"+d+"DD HH:mm";break;case"y_M_d_H_m_s":r="YYYY"+d+"MM"+d+"DD HH:mm:ss";break;default:r="YYYY-MM-dd HH:mm:ss"}const f=e.data.minTime,c=e.data.maxTime,p=e.data.min,h=e.data.max,g={...this.baseOptions,appendPadding:nt(e),data:l,seriesField:a?n?"category":void 0:"category",isGroup:a?!n:!1,isStack:a?!n:!1,meta:a?{values:{type:"time",min:f,max:c,mask:r},tempId:{key:!0}}:{values:{min:p,max:h,mask:r},tempId:{key:!0}}},y=this.setupOptions(e,g),{Bar:x}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(E=>E._),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),b=new x(o,y);return b.on("interval:click",i),ft(e,b),Xt(e,b),b}configXAxis(t,e){const o=super.configXAxis(t,e);if(!o.xAxis)return o;const i=_(t.customStyle).xAxis,l=i.axisValue,n=!!t.data.isDate;if(o.xAxis.label&&(o.xAxis.label.formatter=a=>n?a:D(a,i.axisLabelFormatter)),o.xAxis.position==="top"&&(o.xAxis.position="left"),o.xAxis.position==="bottom"&&(o.xAxis.position="right"),!(l!=null&&l.auto)){const a={xAxis:{...o.xAxis,min:l.min,max:l.max,minLimit:l.min,maxLimit:l.max,tickCount:l.splitCount}};return{...o,...a}}return o}configTooltip(t,e){const o=!!t.data.isDate;let i,l;if(t.customAttr&&(l=_(t.customAttr),l.tooltip)){const n=JSON.parse(JSON.stringify(l.tooltip));n.show?i={fields:["values","field","gap"],formatter:function(a){let s;return o?(s=a.values[0]+" ~ "+a.values[1],n.showGap&&(s=s+" ("+a.gap+")")):(s=D(a.values[0],n.tooltipFormatter)+" ~ "+D(a.values[1],n.tooltipFormatter),n.showGap&&(s=s+" ("+D(a.gap,n.tooltipFormatter)+")")),{value:s,values:a.values,name:a.field}},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0}:i=!1}return{...e,tooltip:i}}configBasicStyle(t,e){const o=!!t.data.isDate,i=!!t.aggregate,l=_(t.customAttr).basicStyle;if(o&&!i){const s=[],r=[];for(let f=0;f<t.data.data.length;f++){const c=t.data.data[f].field;r.indexOf(c)<0&&r.push(c)}for(let f=0;f<r.length;f++){const c=r[f];s.push({name:c,color:l.colors[f%l.colors.length],isCustom:!1})}e={...e,color:f=>{const c=ye(s,h=>h.name===f.field);if(c===void 0)return;const p=$(c.color,l.alpha);return l.gradient?tt(p,!0):p}}}else if(l.gradient){let s=l.colors;s=s.map(r=>{const d=$(r,l.alpha);return tt(d,!0)}),e={...e,color:s}}if(l.radiusColumnBar==="roundAngle"){const s={radius:[l.columnBarRightAngleRadius,l.columnBarRightAngleRadius,l.columnBarRightAngleRadius,l.columnBarRightAngleRadius]};e={...e,barStyle:s}}let n;const a=l.columnWidthRatio??ot.columnWidthRatio;return a>=1&&a<=100?n=a/100:a<1?n=1/100:a>100&&(n=1),n&&(e.barWidthRatio=n),e}setupDefaultOptions(t){const{customAttr:e,senior:o}=t,{label:i}=e;return["left","middle","right"].includes(i.position)||(i.position="middle"),o.functionCfg.emptyDataStrategy="ignoreData",t}configLabel(t,e){const o=!!t.data.isDate,i=!!t.aggregate,l=super.configLabel(t,e);if(!l.label)return{...l,label:!1};const n=_(t.customAttr).label;o&&!i&&(l.label.layout||(l.label.layout=[]),l.label.layout.push({type:"interval-hide-overlap"}),l.label.layout.push({type:"limit-in-plot",cfg:{action:"hide"}}));const a={fields:[],...l.label,formatter:s=>{let r;return o?n.showGap?r=s.gap:r=s.values[0]+" ~ "+s.values[1]:n.showGap?r=D(s.gap,n.labelFormatter):r=D(s.values[0],n.labelFormatter)+" ~ "+D(s.values[1],n.labelFormatter),r}};return{...l,label:a}}configYAxis(t,e){const o=super.configYAxis(t,e);return o.yAxis&&(o.yAxis.position==="left"&&(o.yAxis.position="bottom"),o.yAxis.position==="right"&&(o.yAxis.position="top")),o}setupOptions(t,e){return U(this.configTheme,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configSlider,this.configEmptyDataStrategy)(t,e)}}const Zs=Object.freeze(Object.defineProperty({__proto__:null,RangeBar:Js},Symbol.toStringTag,{value:"Module"})),{t:It}=Y();class Qs extends Q{constructor(){super("waterfall",[]);w(this,"properties",["background-overall-component","border-style","basic-style-selector","label-selector","tooltip-selector","title-selector","legend-selector","x-axis-selector","y-axis-selector","threshold"]);w(this,"propertyInner",{"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha","gradient","columnWidthRatio"],"label-selector":["fontSize","color","vPosition","labelFormatter"],"tooltip-selector":["fontSize","color","backgroundColor","seriesTooltipFormatter","show"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"legend-selector":["icon","orient","fontSize","color","hPosition","vPosition"],"x-axis-selector":["position","name","color","fontSize","axisLine","splitLine","axisForm","axisLabel"],"y-axis-selector":["position","name","color","fontSize","axisValue","splitLine","axisForm","axisLabel","axisLabelFormatter","showLengthLimit","axisLine"],threshold:["lineThreshold"]});w(this,"axis",["xAxis","yAxis","filter","drill","extLabel","extTooltip"]);w(this,"axisConfig",{xAxis:{name:`${It("chart.drag_block_type_axis")} / ${It("chart.dimension")}`,type:"d"},yAxis:{name:`${It("chart.drag_block_value_axis")} / ${It("chart.quota")}`,type:"q",limit:1}})}async drawChart(t){var d;const{chart:e,container:o,action:i}=t;if(!((d=e.data)!=null&&d.data))return;const n={data:e.data.data,xField:"field",yField:"value",seriesField:"category",appendPadding:nt(e)},a=this.setupOptions(e,n),{Waterfall:s}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(f=>f.af),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),r=new s(o,a);return r.on("interval:click",i),ft(e,r),Xt(e,r),r}configMeta(t,e){const o=t.yAxis,i={field:{type:"cat"}};if(!(o!=null&&o.length))return{...e,meta:i};const l=o[0],n=_(t.customStyle).yAxis;return i.value={alias:l.name,formatter:a=>D(a,n.axisLabelFormatter)},{...e,meta:i}}configBasicStyle(t,e){const o=_(t.customAttr),{colors:i,gradient:l,alpha:n}=o.basicStyle,[a,s,r]=i;let d;const f=o.basicStyle.columnWidthRatio??ot.columnWidthRatio;return f>=1&&f<=100?d=f/100:f<1?d=1/100:f>100&&(d=1),d&&(e.columnWidthRatio=d),{...e,total:{label:It("chart.waterfall_total"),style:{fill:tt($(r,n),l,270)}},risingFill:tt($(a,n),l,270),fallingFill:tt($(s,n),l,270)}}configYAxis(t,e){const o=super.configYAxis(t,e);if(!o.yAxis)return o;const l=_(t.customStyle).yAxis.axisValue;if(!(l!=null&&l.auto)){const n={yAxis:{...o.yAxis,min:l.min,max:l.max,minLimit:l.min,maxLimit:l.max,tickCount:l.splitCount}};return{...o,...n}}return o}configTooltip(t,e){var r;const i=_(t.customAttr).tooltip,l=t.yAxis;if(!i.show)return{...e,tooltip:!1};const n=(r=i.seriesTooltipFormatter)==null?void 0:r.filter(d=>d.show).reduce((d,f)=>(d[f.id]=f,d),{}),a=Je(e.data),s={showTitle:!0,customItems(d){var p,h;if(!((p=i.seriesTooltipFormatter)!=null&&p.length))return d;const f=[],c=d[0];return c.data.quotaList?(d.filter(g=>n[g.data.quotaList[0].id]).forEach(g=>{const y=n[g.data.quotaList[0].id],x=(g.value+"").replace(/,/g,"");y.formatterCfg.type="value";const b=D(parseFloat(x),y.formatterCfg),S=W(y.chartShowName)?y.name:y.chartShowName;f.push({...g,name:S,value:b})}),(h=c.data.dynamicTooltipValue)==null||h.forEach(g=>{const y=n[g.fieldId];if(y){const x=(g.value+"").replace(/,/g,""),b=D(parseFloat(x),y.formatterCfg),S=W(y.chartShowName)?y.name:y.chartShowName;f.push({color:"grey",name:S,value:b})}}),f.forEach(g=>{const y=To(g);g.color=y}),f):(Object.keys(n).forEach(g=>{const y=n[g];let x=a[g],b="grey";g===l[0].id&&(x=c.data.value,b=c.color);const S=D(x,y.formatterCfg),A=W(y.chartShowName)?y.name:y.chartShowName;if(g===l[0].id){f.unshift({color:b,name:A,value:S});return}f.push({color:b,name:A,value:S})}),f)},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:s}}configLegend(t,e){const o=super.configLegend(t,e);if(!o.legend)return o;const i=_(t.customAttr),{colors:l,gradient:n,alpha:a}=i.basicStyle,[s,r,d]=l;return{...o,legend:{...o.legend,items:[{name:It("chart.increase"),value:"",marker:{style:{fill:tt($(s,a),n,270)}}},{name:It("chart.decrease"),value:"",marker:{style:{fill:tt($(r,a),n,270)}}},{name:It("chart.waterfall_total"),value:"",marker:{style:{fill:tt($(d,a),n,270)}}}]}}}setupOptions(t,e){return U(this.addConditionsStyleColorToData,this.configTheme,this.configLegend,this.configBasicStyle,this.configLabel,this.configTooltip,this.configXAxis,this.configYAxis,this.configMeta,this.configBarConditions)(t,e)}}const Ks=Object.freeze(Object.defineProperty({__proto__:null,Waterfall:Qs},Symbol.toStringTag,{value:"Module"})),Oi=["background-overall-component","border-style","basic-style-selector","x-axis-selector","y-axis-selector","title-selector","legend-selector","label-selector","tooltip-selector","assist-line","function-cfg","jump-set","linkage","threshold"],jt={"background-overall-component":["all"],"border-style":["all"],"label-selector":["fontSize","color"],"tooltip-selector":["fontSize","color","backgroundColor","show"],"basic-style-selector":["colors","alpha","lineWidth","lineSymbol","lineSymbolSize","lineSmooth"],"x-axis-selector":["name","color","fontSize","position","axisLabel","axisLine","splitLine"],"y-axis-selector":["name","color","fontSize","position","axisLabel","axisLine","splitLine","axisValue","axisLabelFormatter"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"legend-selector":["icon","orient","fontSize","color","hPosition","vPosition"],"function-cfg":["slider","emptyDataStrategy"],threshold:["lineThreshold"]},Ii=["xAxis","yAxis","drill","filter","extLabel","extTooltip"],{t:se}=Y(),tn=[];class Ni extends Q{constructor(t="area"){super(t,tn);w(this,"properties",Oi);w(this,"propertyInner",{...jt,"basic-style-selector":[...jt["basic-style-selector"],"gradient","seriesColor"],"label-selector":["seriesLabelVPosition","seriesLabelFormatter","showExtremum"],"tooltip-selector":[...jt["tooltip-selector"],"seriesTooltipFormatter"]});w(this,"axis",[...Ii]);w(this,"axisConfig",{...this.axisConfig,xAxis:{name:`${se("chart.drag_block_type_axis")} / ${se("chart.dimension")}`,type:"d"},yAxis:{name:`${se("chart.drag_block_value_axis")} / ${se("chart.quota")}`,type:"q"}});w(this,"baseOptions",{data:[],xField:"field",yField:"value",seriesField:"category",isStack:!1,interactions:[{type:"legend-active",cfg:{start:[{trigger:"legend-item:mouseenter",action:["element-active:reset"]}],end:[{trigger:"legend-item:mouseleave",action:["element-active:reset"]}]}},{type:"legend-filter",cfg:{start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter","element-active:reset","element-highlight:reset"]}]}},{type:"active-region",cfg:{start:[{trigger:"element:mousemove",action:"active-region:show"}],end:[{trigger:"element:mouseleave",action:"active-region:hide"}]}}]})}async drawChart(t){var d,f;const{chart:e,container:o,action:i}=t;if(!((f=(d=e.data)==null?void 0:d.data)!=null&&f.length)){e.container=o,we(e);return}const l=G(e.data.data),n={...this.baseOptions,data:l,appendPadding:nt(e)},a=this.setupOptions(e,n),{Area:s}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(c=>c.Y),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),r=new s(o,a);return r.on("point:click",i),Eo(r,e,a,o),ft(e,r),r}configLabel(t,e){var r;const o=super.configLabel(t,e);if(!o.label)return{...o,label:!1};const{label:i,basicStyle:l}=_(t.customAttr),n=ti(t),a=(r=i.seriesLabelFormatter)==null?void 0:r.reduce((d,f)=>(d[f.id]=f,d),{});o.label.style.fill=Gt.color;const s={fields:[],...o.label,layout:i.fullDisplay?[{type:"limit-in-plot"}]:o.label.layout,formatter:(d,f)=>{var x;if(d.EXTREME)return"";if(!((x=i.seriesLabelFormatter)!=null&&x.length))return d.value;const c=a==null?void 0:a[d.quotaList[0].id];if(!c)return d.value;if(!c.show)return;const p=c.position==="top"?-2-l.lineSymbolSize:10+l.lineSymbolSize,h=D(d.value,c.formatterCfg),g=ei(n,d.value,d.quotaList[0].id)||c.color,y=new Ut({});return y.addShape({type:"text",attrs:{x:0,y:p,text:h,textAlign:"start",textBaseline:"top",fontSize:c.fontSize,fontFamily:t.fontFamily,fill:g}}),y}};return{...o,label:s}}configBasicStyle(t,e){const o=_(t.customAttr),i=JSON.parse(JSON.stringify(o.basicStyle)),l=i.lineSmooth,n={size:i.lineSymbolSize,shape:i.lineSymbol},a={style:{lineWidth:i.lineWidth}},{colors:s,alpha:r}=o.basicStyle,d=[...s,...s];let f;if(o.basicStyle.gradient){const c=new Map,h=_(t.customStyle).yAxis.axisValue,g=!(h!=null&&h.auto)&&h.min&&h.max?h.min/h.max:0;f=y=>{let x;const b=`${y.field}-${y.category}`;return c.has(b)?x=c.get(b):(x=d.shift(),c.set(b,x)),x?{fill:tt($(x,r),!0,270,g)}:{fill:"rgba(255,255,255,0)"}}}return{...e,smooth:l,line:a,point:n,areaStyle:f}}configYAxis(t,e){const o=super.configYAxis(t,e);if(!o.yAxis)return o;const i=_(t.customStyle).yAxis;o.yAxis.label&&(o.yAxis.label.formatter=n=>D(n,i.axisLabelFormatter));const l=i.axisValue;if(!(l!=null&&l.auto)){const n={yAxis:{...o.yAxis,min:l.min,max:l.max,minLimit:l.min,maxLimit:l.max,tickCount:l.splitCount}};return{...o,...n}}return o}configTooltip(t,e){return super.configMultiSeriesTooltip(t,e)}setupOptions(t,e){return U(this.configTheme,this.configEmptyDataStrategy,this.configColor,this.configLabel,this.configTooltip,this.configBasicStyle,this.configLegend,this.configXAxis,this.configYAxis,this.configSlider,this.configAnalyse,this.configConditions)(t,e,{},this)}}class en extends Ni{constructor(){super("area-stack");w(this,"propertyInner",{...this.propertyInner,"label-selector":["vPosition","fontSize","color","labelFormatter"],"tooltip-selector":["fontSize","color","tooltipFormatter","show"]});w(this,"axisConfig",{...this.axisConfig,extStack:{name:`${se("chart.stack_item")} / ${se("chart.dimension")}`,type:"d",limit:1,allowEmpty:!0}});this.baseOptions={...this.baseOptions,isStack:!0},delete this.propertyInner.threshold,this.properties=this.properties.filter(t=>t!=="threshold"),this.axis.push("extStack")}configLabel(t,e){const{label:o,basicStyle:i}=_(t.customAttr);if(!(o!=null&&o.show))return{...e,label:!1};const l=[];if(o.fullDisplay)l.push({type:"limit-in-plot"});else{const s=super.configLabel(t,e);l.push(...s.label.layout)}const n=o.position==="top"?-2-i.lineSymbolSize:8+i.lineSymbolSize,a={position:o.position,offsetY:n,layout:l,style:{fill:o.color,fontSize:o.fontSize},formatter:function(s){return D(s.value,o.labelFormatter)}};return{...e,label:a}}setupDefaultOptions(t){return t.senior.functionCfg.emptyDataStrategy="ignoreData",t}configColor(t,e){return this.configStackColor(t,e)}setupSeriesColor(t,e){return bo(t,e)}configTooltip(t,e){const i=_(t.customAttr).tooltip;if(!i.show)return{...e,tooltip:!1};const l={formatter:function(n){return{name:n.category,value:D(n.value,i.tooltipFormatter)}},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:l}}}const on=Object.freeze(Object.defineProperty({__proto__:null,Area:Ni,StackArea:en},Symbol.toStringTag,{value:"Module"})),{t:Qt}=Y(),ln=[];class sn extends Q{constructor(t="line"){super(t,ln);w(this,"properties",Oi);w(this,"propertyInner",{...jt,"basic-style-selector":[...jt["basic-style-selector"],"seriesColor"],"label-selector":["seriesLabelVPosition","seriesLabelFormatter","showExtremum"],"tooltip-selector":[...jt["tooltip-selector"],"seriesTooltipFormatter"]});w(this,"axis",[...Ii,"xAxisExt"]);w(this,"axisConfig",{...this.axisConfig,xAxis:{name:`${Qt("chart.drag_block_type_axis")} / ${Qt("chart.dimension")}`,type:"d"},xAxisExt:{name:`${Qt("chart.chart_group")} / ${Qt("chart.dimension")}`,type:"d",limit:1,allowEmpty:!0},yAxis:{name:`${Qt("chart.drag_block_value_axis")} / ${Qt("chart.quota")}`,type:"q"}})}async drawChart(t){var c,p;const{chart:e,action:o,container:i}=t;if(!((p=(c=e.data)==null?void 0:c.data)!=null&&p.length)){e.container=i,we(e);return}const l=G(e.data.data),a=_(e.customAttr).basicStyle.colors,s={data:l,xField:"field",yField:"value",seriesField:"category",appendPadding:nt(e),color:a,interactions:[{type:"legend-active",cfg:{start:[{trigger:"legend-item:mouseenter",action:["element-active:reset"]}],end:[{trigger:"legend-item:mouseleave",action:["element-active:reset"]}]}},{type:"legend-filter",cfg:{start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter","element-active:reset","element-highlight:reset"]}]}},{type:"active-region",cfg:{start:[{trigger:"element:mousemove",action:"active-region:show"}],end:[{trigger:"element:mouseleave",action:"active-region:hide"}]}}]},r=this.setupOptions(e,s),{Line:d}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(h=>h.a2),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),f=new d(i,r);return f.on("point:click",o),Eo(f,e,r,i),ft(e,f),f}configLabel(t,e){var r;const o=super.configLabel(t,e);if(!o.label)return{...o,label:!1};const{label:i,basicStyle:l}=_(t.customAttr),n=ti(t),a=(r=i.seriesLabelFormatter)==null?void 0:r.reduce((d,f)=>(d[f.id]=f,d),{});o.label.style.fill=Gt.color;const s={fields:[],...o.label,layout:i.fullDisplay?[{type:"limit-in-plot"}]:o.label.layout,formatter:(d,f)=>{var x;if(d.EXTREME)return"";if(!((x=i.seriesLabelFormatter)!=null&&x.length))return d.value;const c=a==null?void 0:a[d.quotaList[0].id];if(!c)return d.value;if(!c.show)return;const p=c.position==="top"?-2-l.lineSymbolSize:10+l.lineSymbolSize,h=D(d.value,c.formatterCfg),g=ei(n,d.value,d.quotaList[0].id)||c.color,y=new Ut({});return y.addShape({type:"text",attrs:{x:0,y:p,text:h,textAlign:"start",textBaseline:"top",fontSize:c.fontSize,fontFamily:t.fontFamily,fill:g}}),y}};return{...o,label:s}}configBasicStyle(t,e){const o=_(t.customAttr),i=JSON.parse(JSON.stringify(o.basicStyle)),l=i.lineSmooth,n={size:i.lineSymbolSize,shape:i.lineSymbol},a={lineWidth:i.lineWidth};return{...e,smooth:l,point:n,lineStyle:a}}configCustomColors(t,e){const o=_(t.customAttr).basicStyle,i=o.colors.map(l=>$(l,o.alpha));return{...e,color:i}}configYAxis(t,e){const o=super.configYAxis(t,e);if(!o.yAxis)return o;const i=_(t.customStyle).yAxis;o.yAxis.label&&(o.yAxis.label.formatter=n=>D(n,i.axisLabelFormatter));const l=i.axisValue;if(!(l!=null&&l.auto)){const n={yAxis:{...o.yAxis,min:l.min,max:l.max,minLimit:l.min,maxLimit:l.max,tickCount:l.splitCount}};return{...o,...n}}return o}configTooltip(t,e){var s;const i=_(t.customAttr).tooltip;if(!i.show)return{...e,tooltip:!1};const l=t.xAxisExt,n=(s=i.seriesTooltipFormatter)==null?void 0:s.filter(r=>r.show).reduce((r,d)=>(r[d.id]=d,r),{}),a={showTitle:!0,customItems(r){var c,p;if(!((c=i.seriesTooltipFormatter)!=null&&c.length))return r;const d=r[0];if(!d.data.quotaList)return r;const f=[];return r.filter(h=>n[h.data.quotaList[0].id]).forEach(h=>{const g=n[h.data.quotaList[0].id],y=D(parseFloat(h.value),g.formatterCfg);let x=W(g.chartShowName)?g.name:g.chartShowName;(l==null?void 0:l.length)>0&&(x=h.data.category),f.push({...h,name:x,value:y})}),(p=d.data.dynamicTooltipValue)==null||p.forEach(h=>{const g=n[h.fieldId];if(g){const y=D(parseFloat(h.value),g.formatterCfg),x=W(g.chartShowName)?g.name:g.chartShowName;f.push({color:"grey",name:x,value:y})}}),f},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:a}}setupSeriesColor(t,e){return Ko(t,e)}configLegend(t,e){var a;const o=super.configLegend(t,e);if(!o.legend)return o;const i=t.xAxisExt[0];if(((a=i==null?void 0:i.customSort)==null?void 0:a.length)>0){const s=i.customSort??[];if(s!=null&&s.length){const r=o.data;r==null||r.forEach(d=>{const f=d.category;f&&!s.includes(f)&&s.push(f)}),o.meta={...o.meta,category:{type:"cat",values:s}}}}const l=_(t.customStyle);let n;return l&&l.legend?n=ce(JSON.parse(JSON.stringify(l.legend)),Lt).size:n=Lt.size,o.legend.marker.style=s=>({r:n,fill:s.stroke}),o}setupOptions(t,e){return U(this.configTheme,this.configEmptyDataStrategy,this.configGroupColor,this.configLabel,this.configTooltip,this.configBasicStyle,this.configCustomColors,this.configLegend,this.configXAxis,this.configYAxis,this.configSlider,this.configAnalyse,this.configConditions)(t,e)}}const nn=Object.freeze(Object.defineProperty({__proto__:null,Line:sn},Symbol.toStringTag,{value:"Module"})),{t:Te}=Y(),an=[];class rn extends Q{constructor(t="stock-line"){super(t,an);w(this,"properties",["background-overall-component","border-style","basic-style-selector","legend-selector","x-axis-selector","y-axis-selector","title-selector","tooltip-selector","function-cfg","jump-set","linkage"]);w(this,"propertyInner",{...jt,"function-cfg":["emptyDataStrategy"],"y-axis-selector":["name","color","fontSize","position","axisLabel","axisLine","splitLine","axisLabelFormatter"],"legend-selector":["fontSize","color","show"]});w(this,"axis",["xAxis","yAxis","filter","extLabel","extTooltip"]);w(this,"axisConfig",{xAxis:{name:`${Te("common.component.date")} / ${Te("chart.dimension")}`,limit:1,type:"d"},yAxis:{name:`${Te("chart.k_line_yaxis_tip")} / ${Te("chart.quota")}`,limit:4,type:"q"}});w(this,"calculateMovingAverage",(t,e,o)=>{const i=o.xAxis,l=o.yAxis,n=i[0].dataeaseName,a=l[1].dataeaseName,s=[];for(let r=0;r<t.length;r++)if(r<e)s.push({[n]:t[r][n],value:null});else{const d=t.slice(r-e+1,r+1).reduce((f,c)=>f+c[a],0);s.push({[n]:t[r][n],value:parseFloat((d/e).toFixed(3))})}return s});w(this,"calculateMinMax",t=>t.reduce((e,o)=>{const l=Object.values(o).filter(n=>typeof n=="number");if(l.length>0){const n=Math.max(...l),a=Math.min(...l);e.maxValue=Math.max(e.maxValue,n),e.minValue=Math.min(e.minValue,a)}return e},{maxValue:Number.NEGATIVE_INFINITY,minValue:Number.POSITIVE_INFINITY}));w(this,"registerEvent",(t,e,o)=>{let i=!0;e.on("legend-item:click",l=>{const{value:n}=l.target.get("delegateObject").item;if(n==="k")i=!i,e.chart.geometries.forEach(a=>{a.type==="schema"&&a.changeVisible(i)});else{const a=e.chart.geometries.filter(d=>d.type==="line"),s=e.chart.geometries.filter(d=>d.type==="point");let r=0;for(const d of o.keys())r++,d===n&&(a[r-1].changeVisible(!a[r-1].visible),s[r-1].changeVisible(!s[r-1].visible))}}),e.on("afterrender",l=>{var a,s;let n=!1;if(e.chart.options.slider.start===.5&&e.chart.options.slider.end===1&&(n=!0),(s=(a=l.view)==null?void 0:a.options)!=null&&s.scales){const r=Math.floor(.5*t.length),d=Math.ceil(1*t.length),f=t.slice(r,d),{maxValue:c,minValue:p}=this.calculateMinMax(n?f:l.view.filteredData),h=l.view.options.scales;Object.keys(h).forEach(g=>{h[g].max&&(h[g].max=c),h[g].min&&(h[g].min=p)})}}),e.on("legend-item-group:click",l=>{var n,a;if((a=(n=l.view)==null?void 0:n.options)!=null&&a.scales){const{maxValue:s,minValue:r}=this.calculateMinMax(l.view.filteredData),d=l.view.options.scales;Object.keys(d).forEach(f=>{d[f].max&&(d[f].max=s),d[f].min&&(d[f].min=r)})}}),e.on("slider:valuechanged",l=>{const n=l.gEvent.currentTarget.cfg.component.cfg.start,a=l.gEvent.currentTarget.cfg.component.cfg.end;e.chart.options.slider.start=n,e.chart.options.slider.end=a;const s=Math.floor(n*t.length),r=Math.ceil(a*t.length),d=t.slice(s,r),{maxValue:f,minValue:c}=this.calculateMinMax(d),p=l.view.options.scales;Object.keys(p).forEach(h=>{p[h].max&&(p[h].max=f),p[h].min&&(p[h].min=c)})})})}async drawChart(t){var O,B,F,M,R;const{chart:e,action:o,container:i}=t;if(!((B=(O=e.data)==null?void 0:O.data)!=null&&B.length))return;const l=e.xAxis,n=e.yAxis;if(n.length!=4)return;const a=_(e.customAttr).basicStyle,s=[],r=a.alpha;a.colors.forEach(P=>{s.push($(P,r))});const d=_((F=e.data)==null?void 0:F.tableRow),f=l[0].dataeaseName,c=[5,10,20,60,120,180],p=[{name:"日K",value:"k",marker:{symbol:(P,V,X)=>{const H=X*1,q=X;return[["M",P-H-1/2,V-q/2],["L",P+H+1/2,V-q/2],["L",P+H+1/2,V+q/2],["L",P-H-1/2,V+q/2],["Z"],["M",P,V+10/2],["L",P,V-10/2]]},style:{fill:"red",stroke:"red",lineWidth:2}}}],h=new Map;c.forEach(P=>{h.set("ma"+P,this.calculateMovingAverage(d,P,e))}),d.forEach(P=>{var X;const V=P[f];for(const[H,q]of h)P[H]=(X=q.find(At=>At[f]===V))==null?void 0:X.value});const g=[];let y=0;const x=.5,b=1,S=Math.floor(x*d.length),A=Math.ceil(b*d.length),C=d.slice(S,A),{maxValue:v,minValue:E}=this.calculateMinMax(C);for(const P of h.keys())y++,g.push({type:"line",top:!0,options:{smooth:!1,xField:f,yField:P,color:s[y-1],xAxis:null,yAxis:{label:!1,min:E,max:v,grid:null,line:null},lineStyle:{lineWidth:2}}}),p.push({name:P.toUpperCase(),value:P,marker:{symbol:"hyphen",style:{stroke:s[y-1],lineWidth:2}}});const z=e.xAxis??[];let k;const N=((M=z[0])==null?void 0:M.datePattern)==="date_split"?"/":"-";switch((R=z[0])==null?void 0:R.dateStyle){case"y":k="YYYY";break;case"y_M":k="YYYY"+N+"MM";break;case"y_M_d":k="YYYY"+N+"MM"+N+"DD";break;case"y_M_d_H":k="YYYY"+N+"MM"+N+"DD HH";break;case"y_M_d_H_m":k="YYYY"+N+"MM"+N+"DD HH:mm";break;case"y_M_d_H_m_s":k="YYYY"+N+"MM"+N+"DD HH:mm:ss";break;default:k="YYYY-MM-dd HH:mm:ss"}const L=this.setupOptions(e,{data:d,slider:{start:.5,end:1,textStyle:{fontFamily:e.fontFamily}},plots:[{type:"stock",top:!0,options:{meta:{[f]:{mask:k}},stockStyle:{stroke:"black",lineWidth:.5},yAxis:{label:{},position:"left",min:E,max:v},xField:f,yField:[n[0].dataeaseName,n[1].dataeaseName,n[2].dataeaseName,n[3].dataeaseName],legend:{position:"top",custom:!0,items:p}}},...g]}),{Mix:I}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(P=>P.a5),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),T=new I(i,L);return this.registerEvent(d,T,h),T.on("schema:click",P=>{var At;const V=P.data.data[f],H=_((At=e.data)==null?void 0:At.data).filter(et=>et.field===V),q=[];if(H.forEach(et=>{q.push({...et.quotaList[0],value:et.value})}),H.length){const et={x:P.x,y:P.y,data:{data:{...P.data.data,value:q[0].value,name:V,dimensionList:H[0].dimensionList,quotaList:q}}};o(et)}}),T}configBasicStyle(t,e){const o=_(t.customAttr),i=JSON.parse(JSON.stringify(o.basicStyle)),l=i.lineSmooth,n={size:i.lineSymbolSize,shape:i.lineSymbol},a={lineWidth:i.lineWidth},s=[];return e.plots.forEach(r=>{r.type==="stock"&&s.push({...r}),r.type==="line"&&s.push({...r,options:{...r.options,smooth:l,point:n,lineStyle:a}})}),{...e,plots:s}}configTooltip(t,e){const o=_(t.customAttr).tooltip;t.xAxis;const i=[];e.plots.filter(c=>c.type==="line").forEach(c=>{i.push(c)});const n=e.plots.filter(c=>c.type==="stock")[0];if(!o.show){const c={...n.options,tooltip:{showContent:!1}};return i.push({...n,options:c}),{...e,plots:i}}const a=t.data.fields,s=c=>{var y;const p=c.map(x=>{const b=a.find(v=>v.dataeaseName===x.name),S=(b==null?void 0:b.chartShowName)||(b==null?void 0:b.name)||x.name,A=S.startsWith("ma")?S.toUpperCase():S;o.tooltipFormatter.decimalCount=3;const C=D(x.value,o.tooltipFormatter);return{...x,name:A,value:C,color:x.color}}),h=p.some(x=>!x.name.startsWith("MA")),g=p.filter(x=>!x.name.startsWith("MA"));return h?[{name:"日K",value:"",marker:!0,color:(y=g[0])==null?void 0:y.color},...g,...p.filter(x=>x.name.startsWith("MA"))]:p},r=c=>{const p=c.name.startsWith("MA")||!c.value?10:5,h=c.name.startsWith("MA")||!c.value?5:9,g=c.name.startsWith("MA")||!c.value?0:2;return`
        <li style="display: flex; align-items: center; margin-bottom: 10px;">
          <div>
            <span
              style="
                background-color: ${c.color};
                width: ${p}px;
                height: ${p}px;
                border-radius: 50%;
                display: inline-block;
                margin-right: ${h}px;
                margin-left: ${g}px;
              "></span>
          </div>
          <div style="display: flex; justify-content: space-between; width: 100%;">
            <span style="margin-right: 15px;">${c.name}</span>
            <span>${c.name.startsWith("MA")&&c.value==="0"?"-":c.value}</span>
          </div>
        </li>
      `},d=(c,p)=>`
        <div style="padding: 10px 0;">
          <div style="margin-bottom: 10px;">${c}</div>
          <ul style="list-style: none; padding: 0;">
            ${p.map(r).join("")}
          </ul>
        </div>
      `,f={...n.options,tooltip:{showMarkers:!0,showCrosshairs:!0,showNil:!0,crosshairs:{follow:!0,text:(c,p,h)=>c==="y"?{content:p&&p.toFixed(0)}:{content:h[0].title,position:"end"}},showContent:!0,customItems:s,customContent:d}};return i.push({...n,options:f}),{...e,plots:i}}configXAxis(t,e){const o=super.configXAxis(t,e);if(!o)return e;const i=[],l=e.plots.filter(s=>s.type==="line"),n=e.plots.filter(s=>s.type==="stock")[0],a={...n,options:{...n.options,xAxis:o.xAxis?{...n.options.xAxis,...o.xAxis}:{label:!1,line:null}}};return i.push(a),l.forEach(s=>{i.push(s)}),{...e,plots:i}}configYAxis(t,e){const o=super.configYAxis(t,e);if(!o)return e;const i=_(t.customStyle).yAxis,l=[],n=e.plots.filter(d=>d.type==="line"),a=e.plots.filter(d=>d.type==="stock")[0];let s=!1;o.yAxis.label&&(s={...o.yAxis.label,formatter:d=>D(d,i.axisLabelFormatter)});const r={...a,options:{...a.options,yAxis:s?{...a.options.yAxis,...o.yAxis,label:s}:{...o.yAxis,label:s,grid:null,line:null}}};return l.push(r),n.forEach(d=>{l.push(d)}),{...e,plots:l}}customConfigEmptyDataStrategy(t,e){const{data:o}=e;if(!(o!=null&&o.length))return e;const i=_(t.senior).functionCfg.emptyDataStrategy;if(i==="ignoreData")for(let n=o.length-1;n>=0;n--){const a=o[n];Object.keys(a).forEach(s=>{s.startsWith("f_")&&a[s]===null&&o.splice(n,1)})}return(i==="breakLine"||i==="setZero")&&((n,a)=>{a.forEach(s=>{Object.keys(s).forEach(r=>{r.startsWith("f_")&&s[r]===null&&(s[r]=n==="breakLine"?null:0)})})})(i,o),e}configLegend(t,e){let o={},i;const l=e.plots.filter(r=>r.type==="stock")[0];if(t.customStyle&&(i=_(t.customStyle),i.legend)){const r=JSON.parse(JSON.stringify(i.legend));r.show?o={...l.options.legend,itemName:{style:{fill:r.color,fontSize:r.fontSize}}}:o=!1}const n=[],a={...l.options,legend:o};return e.plots.filter(r=>r.type==="line").forEach(r=>{n.push(r)}),n.push({...l,options:a}),{...e,plots:n}}setupOptions(t,e){return U(this.configTheme,this.configBasicStyle,this.configXAxis,this.configYAxis,this.configTooltip,this.configLegend,this.customConfigEmptyDataStrategy)(t,e)}}const cn=Object.freeze(Object.defineProperty({__proto__:null,StockLine:rn},Symbol.toStringTag,{value:"Module"})),{t:jo}=Y(),un=[];class dn extends Q{constructor(){super("liquid",un);w(this,"properties",["background-overall-component","border-style","basic-style-selector","label-selector","misc-selector","title-selector","threshold"]);w(this,"propertyInner",{"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha"],"label-selector":["fontSize","color","labelFormatter"],"misc-selector":["liquidShape","liquidSize","liquidMaxType","liquidMaxField"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],threshold:["liquidThreshold"]});w(this,"axis",["yAxis","filter"]);w(this,"axisConfig",{yAxis:{name:`${jo("chart.drag_block_progress")} / ${jo("chart.quota")}`,type:"q",limit:1}})}async drawChart(t){var d,f;const{chart:e,container:o,action:i}=t;if(!((d=e.data)!=null&&d.series)||!e.yAxis.length)return;const l={percent:0},n=this.setupOptions(e,l),{Liquid:a}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(c=>c.aa),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),s=new a(o,n);s.on("afterrender",()=>{var c,p;i({from:"liquid",data:{type:"liquid",max:(p=(c=e.data)==null?void 0:c.series[0])==null?void 0:p.data[0]}})});const r=(f=e.data)==null?void 0:f.series.some(c=>{var p;return!((p=c.data)!=null&&p[0])});if(this.configEmptyDataStyle(r?[]:[1],o,s),!r)return s}configTheme(t,e){const o=_(t.customAttr),i=[];if(o.basicStyle){const s=o.basicStyle;s.colors.forEach(r=>{i.push($(r,s.alpha))})}const l=_(t.customStyle);let n;l.background&&(n=$(l.background.color,l.background.alpha));const a={styleSheet:{brandColor:i[0],paletteQualitative10:i,paletteQualitative20:i,backgroundColor:n}};return{...e,theme:a}}configMisc(t,e){var r,d,f;const o=_(t.customAttr);let i=0;t.data.series.length>0&&(i=t.data.series[0].data[0]);let l,n,a;if(o.misc){const c=o.misc,p=(f=(d=t.data)==null?void 0:d.series[((r=t.data)==null?void 0:r.series.length)-1])==null?void 0:f.data[0];c.liquidMaxType==="dynamic"?l=p:l=c.liquidMax?c.liquidMax:p,n=(c.liquidSize?c.liquidSize:qt.liquidSize)/100,a=c.liquidShape??qt.liquidShape}const s={percent:i/l,radius:n,shape:a};return{...e,...s}}configLabel(t,e){var a;const o=_(t.customAttr),i=e.percent;if(i>1&&(e={...e,percent:1}),!((a=o.label)!=null&&a.show))return{...e,statistic:{content:!1}};const l=o.label,n=l.labelFormatter;return{...e,statistic:{content:{style:{fontSize:l.fontSize.toString()+"px",color:l.color},formatter:()=>D(i,n)}}}}configThreshold(t,e){var i;const o=_(t.senior);if((i=o==null?void 0:o.threshold)!=null&&i.enable){const{liquidThreshold:l}=o==null?void 0:o.threshold;if(l){const{paletteQualitative10:n}=e.theme.styleSheet;return{...e,liquidStyle:()=>{const s=l.split(",");let r=0;return s.forEach((d,f)=>{e.percent>parseFloat(d)/100&&(r=f+1)}),{fill:n[r%n.length],stroke:n[r%n.length]}}}}}return e}setupDefaultOptions(t){return t.customAttr.label={...t.customAttr.label,fontSize:12,show:!0,labelFormatter:{type:"percent",thousandSeparator:!0,decimalCount:2}},t}setupOptions(t,e){return U(this.configTheme,this.configMisc,this.configLabel,this.configThreshold)(t,e)}}const fn=Object.freeze(Object.defineProperty({__proto__:null,Liquid:dn},Symbol.toStringTag,{value:"Module"}));class Bi extends Qe{configLabel(u,t){const e=Si(u);return Ft(t.label,e),t}configStyle(u,t){const e=ms(u);return Ft(t.style,e),t}configTooltip(u,t){const e=Ai(u);return Ft(t.tooltip,e),t}configLegend(u,t){const e=hs(u);return Ft(t,{legend:e}),t}configEmptyDataStrategy(u,t){var l,n;const{functionCfg:e}=_(u.senior),o=e.emptyDataStrategy;if(!o||o==="breakLine")return t;const i=G(t.source.data);if(o==="setZero"&&i.forEach(a=>{var s;a.value===null&&(a.value=0),((s=a.dynamicTooltipValue)==null?void 0:s.length)>0&&a.dynamicTooltipValue.forEach(r=>{r.value===null&&(r.value=0)})}),o==="ignoreData")for(let a=i.length-1;a>=0;a--){i[a].value===null&&i.splice(a,1);for(let s=((n=(l=i[a])==null?void 0:l.dynamicTooltipValue)==null?void 0:n.length)-1;s>=0;s--)i[a].dynamicTooltipValue[s].value===null&&i[a].dynamicTooltipValue.splice(s,1)}return t.source.data=i,t}configZoomButton(u,t){As(u,t)}constructor(u,t){super($t.L7_PLOT,u),this.defaultData=t}}const Di=["background-overall-component","border-style","basic-style-selector","title-selector","label-selector","tooltip-selector","function-cfg","map-mapping","jump-set","linkage"],Dt={"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha","areaBorderColor","zoom"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"label-selector":["color","fontSize","labelBgColor","labelShadow","labelShadowColor","showDimension","showQuota"],"tooltip-selector":["color","fontSize","backgroundColor","seriesTooltipFormatter","show"],"function-cfg":["emptyDataStrategy"],"map-mapping":[""]},Mi=["xAxis","yAxis","area","drill","filter","extLabel","extTooltip"],Ke=(m,u,t,e,o,i)=>{var l;["bubble-map","map"].includes(m.type)&&(t=(l=u.source.data.dataArray)==null?void 0:l.filter(n=>{var a;return((a=n.dimensionList)==null?void 0:a.length)>0}).reduce((n,a)=>(n.find(r=>{var d;return(d=i==null?void 0:i.areaId)!=null&&d.startsWith("custom_")?r.areaName===a.areaName:r.name===a.name||r.adcode&&r.adcode===a.adcode})||n.push(a),n),[])),ae[m.container]?ae[m.container].update(e,m,u,t,o,i):new Pi(e,m,u,t,o,i)},ae={};class Pi{constructor(u,t,e,o,i,l){w(this,"popupTimeoutId",null);w(this,"popupIntervalId",null);w(this,"isPaused",!1);w(this,"currentIndex",0);w(this,"scene");w(this,"chart");w(this,"view");w(this,"data");w(this,"stayTime");w(this,"intervalTime");w(this,"popup");w(this,"customSubArea");w(this,"drawOption");w(this,"onMouseEnterHandler");w(this,"onMouseLeaveHandler");w(this,"onVisibilityChangeHandler");w(this,"handleVisibilityChange",()=>{document.hidden?this.clearPreviousInstance(this.chart.container):this.startCarouselPopups()});w(this,"pauseCarouselPopups",()=>{var u;this.popup&&((u=this.popup)==null||u.remove()),this.removeStyle(),this.isPaused=!0,this.clearExistingTimers()});w(this,"resumeCarouselPopups",()=>{this.isPaused&&(this.isPaused=!1,this.startCarouselPopups())});w(this,"clearExistingTimers",()=>{this.popupTimeoutId!==null&&(clearTimeout(this.popupTimeoutId),this.popupTimeoutId=0),this.popupIntervalId!==null&&(clearInterval(this.popupIntervalId),this.popupIntervalId=0)});this.onMouseEnterHandler=this.pauseCarouselPopups.bind(this),this.onMouseLeaveHandler=this.resumeCarouselPopups.bind(this),this.onVisibilityChangeHandler=this.handleVisibilityChange.bind(this),this.clearExistingTimers=this.clearExistingTimers.bind(this),this.init(u,t,e,o,i,l)}update(u,t,e,o,i,l){this.init(u,t,e,o,i,l)}init(u,t,e,o,i,l){var n,a,s,r,d,f,c,p,h,g;if(this.view=e,this.chart=t,this.scene=u,this.data=o,this.popup=null,this.currentIndex=0,this.customSubArea=i,this.drawOption=l,this.clearPreviousInstance(this.chart.container),(a=(n=this.chart.customAttr)==null?void 0:n.tooltip)!=null&&a.show&&((d=(r=(s=this.chart.customAttr)==null?void 0:s.tooltip)==null?void 0:r.carousel)!=null&&d.enable)&&this.data.length>0){this.popup=new ai({closeButton:!1,maxWidth:600});const y=(c=(f=this.chart.customAttr)==null?void 0:f.tooltip)==null?void 0:c.carousel;this.stayTime=y.stayTime*1e3,this.intervalTime=y.intervalTime*1e3,this.startCarouselPopups();const x=document.getElementById(this.chart.container);x.addEventListener("mouseenter",this.pauseCarouselPopups),x.addEventListener("mouseleave",this.resumeCarouselPopups),this.chart.type==="symbolic-map"&&((h=(p=u==null?void 0:u.getLayers())==null?void 0:p[0])==null||h.addListener("touchend",()=>{this.pauseCarouselPopups()}),(g=u==null?void 0:u.getMapCanvasContainer())==null||g.addEventListener("touchend",()=>{this.resumeCarouselPopups()})),document.addEventListener("visibilitychange",this.handleVisibilityChange),ae[this.chart.container]=this}}clearPreviousInstance(u){var t;if(ae[u]){const e=ae[u];this.clearExistingTimers(),(t=e.popup)==null||t.remove(),e.removeStyle()}}startCarouselPopups(){this.clearExistingTimers(),this.carouselPopups()}carouselPopups(){const u=t=>{this.removeStyle();const e=document.getElementById(this.chart.container);if(e){if(this.chart.type==="symbolic-map"){const o=e.getElementsByClassName("l7-popup-"+this.chart.container);for(const i of Array.from(o))i.classList.add("l7-popup-hide");this.createSymbolicMapPopup(t)}else{if(this.chart.type==="map"){const o=e.getElementsByClassName("l7plot-tooltip-container");for(const i of Array.from(o)){const l=i;l.style.display="none"}}this.createPopup(t)}this.clearExistingTimers(),this.popupTimeoutId=window.setTimeout(()=>{var o;this.currentIndex++,(o=this.popup)==null||o.remove(),this.cancelHighlightLayer(t),this.currentIndex>=this.data.length&&(this.currentIndex=0),this.popupIntervalId=window.setTimeout(()=>{u(this.currentIndex)},this.intervalTime)},this.stayTime)}else this.clearExistingTimers()};u(this.currentIndex)}removeStyle(){var t;const u=document.getElementById("style-"+this.chart.container);u&&(u.remove(),(t=u.parentNode)==null||t.removeChild(u))}createPopup(u){var n,a,s,r,d,f;const t=this.view.tooltip.options.domStyles,e=t["l7plot-tooltip"]["background-color"],o=t["l7plot-tooltip"]["font-size"],i=document.createElement("style");i.id="style-"+this.chart.container,i.innerHTML=`
            #${this.chart.container} .l7-popup-content {
                background-color: ${e} !important;
                font-size: ${o};
                padding: 10px 10px 6px;
                line-height: 1.6;
            }
            #${this.chart.container} .l7-popup-tip {
                border-top-color: ${e} !important;
            }
        `,document.head.appendChild(i);const l=this.getPopupData(u);if(l.data){let c="";this.getTooltipItems(l.data).forEach(h=>{c+=`
                    <li style="list-style-type: none; margin-bottom: 4px; white-space: nowrap; display: flex; justify-content: space-between;">
                        <span style="${this.objectToSemicolonSeparated(t["l7plot-tooltip__name"])}">${h.name}</span>
                        <span style="${this.objectToSemicolonSeparated(t["l7plot-tooltip__value"])}">${h.value}</span>
                    </li>`});const p=`
                <div>
                <div style="${this.objectToSemicolonSeparated(t["l7plot-tooltip__title"])}">${l.data.name}</div>
                    <ul style="${this.objectToSemicolonSeparated(t["l7plot-tooltip__list"])}">
                        ${c}
                    </ul>
                </div>
            `;if(this.popup.setLngLat({lng:l.centroid[0],lat:l.centroid[1]}),this.popup.setHTML(p),this.popup.closeButton=!1,this.view.addLayer(this.popup),(a=(n=this.view.scene.getLayers())==null?void 0:n.find(h=>h.name==="highlightLayer"))==null||a.setData(this.getActiveData(u)),this.chart.type==="bubble-map"){const{_id:h}=(r=(s=this.view.scene.getLayers())==null?void 0:s.find(g=>g.name==="bubbleLayer"))==null?void 0:r.layerSource.data.dataArray.find(g=>g.name===this.data[u].name);(f=(d=this.view.scene.getLayers())==null?void 0:d.find(g=>g.name==="bubbleLayer"&&g.coordCenter))==null||f.setActive(h,{color:"rgba(30,90,255,1)"})}}}getActiveData(u){var t,e,o;if((e=(t=this.drawOption)==null?void 0:t.areaId)!=null&&e.startsWith("custom_")){const i={type:"FeatureCollection",features:[]},l=this.customSubArea.find(a=>a.name===this.data[u].areaName),n=this.view.currentDistrictData.features.reduce((a,s)=>(a["156"+s.properties.adcode]=s,a),{});return(o=l==null?void 0:l.scopeArr)==null||o.forEach(a=>{n[a]&&i.features.push(n[a])}),i}return{type:"FeatureCollection",features:[this.view.currentDistrictData.features.find(i=>i.properties.name===this.data[u].name)]}}getPopupData(u){var t,e,o,i;if((e=(t=this.drawOption)==null?void 0:t.areaId)!=null&&e.startsWith("custom_")){const l=this.data[u],n=(o=this.customSubArea)==null?void 0:o.find(a=>a.name===l.areaName);return l.name=l.areaName,{data:l,centroid:n.centroid}}else return{data:this.data[u],centroid:(i=this.view.currentDistrictData.features.find(l=>l.properties.name===this.data[u].name))==null?void 0:i.properties.centroid}}objectToSemicolonSeparated(u){let t="";for(const e in u)u.hasOwnProperty(e)&&(t+=`${this.convertToSnakeCase(e)}:${u[e]};`);return t}cancelHighlightLayer(u){var t,e,o,i,l,n,a,s,r,d,f,c,p;if((o=(e=(t=this.view.scene)==null?void 0:t.getLayers())==null?void 0:e.find(h=>h.name==="highlightLayer"))==null||o.setData({type:"FeatureCollection",features:[]}),this.chart.type==="bubble-map"){const{_id:h}=(n=(l=(i=this.view.scene)==null?void 0:i.getLayers())==null?void 0:l.find(g=>g.name==="bubbleLayer"))==null?void 0:n.layerSource.data.dataArray.find(g=>g.name===this.data[u].name);(s=(a=this.view.scene.getLayers())==null?void 0:a.find(g=>g.name==="bubbleLayer"&&g.coordCenter))==null||s.setActive(h,{color:this.view.scene.getLayers().find(g=>g.name==="bubbleLayer").styleAttributeService.getLayerStyleAttribute("color").scale.field})}if(this.chart.type==="symbolic-map"){const h=this.chart.xAxis[0].dataeaseName,g=this.chart.xAxis[1].dataeaseName,{_id:y}=(f=(d=(r=this.scene)==null?void 0:r.getLayers())==null?void 0:d.find(x=>x.type==="PointLayer"))==null?void 0:f.layerSource.data.dataArray.find(x=>{const b=this.data[u][h],S=this.data[u][g];return x[h]===b&&x[g]===S});(p=(c=this.scene.getLayers())==null?void 0:c.find(x=>x.type==="PointLayer"&&x.coordCenter))==null||p.setActive(y,{color:this.scene.getLayers().find(x=>x.type==="PointLayer").styleAttributeService.getLayerStyleAttribute("color").scale.field})}}convertToSnakeCase(u){return u.replace(/([A-Z])/g,t=>"-"+t.toLowerCase())}getTooltipItems(u){var a,s,r,d;const t=[],i=(a=_(this.chart.customAttr).tooltip.seriesTooltipFormatter)==null?void 0:a.filter(f=>f.show).reduce((f,c)=>(f[c.id]=c,f),{});if(W(i))return t;const l=u,n=i[(r=(s=l.quotaList)==null?void 0:s[0])==null?void 0:r.id];if(!W(n)){const f=parseFloat(l.value),c=D(f,n.formatterCfg),p=W(n.chartShowName)?n.name:n.chartShowName;t.push({...l,name:p,value:`${c??""}`})}return(d=l.dynamicTooltipValue)==null||d.forEach(f=>{const c=i[f.fieldId];if(c){const p=D(parseFloat(f.value),c.formatterCfg),h=W(c.chartShowName)?c.name:c.chartShowName;t.push({color:"grey",name:h,value:`${p??""}`})}}),t}createSymbolicMapPopup(u){const t=()=>{var l,n,a,s,r,d;const i=this.chart.customAttr?_(this.chart.customAttr):null;if((l=i==null?void 0:i.tooltip)!=null&&l.show){if(!this.popup)return;const{tooltip:f}=J(i);let c=f.showFields||[];(!f.showFields||f.showFields.length===0)&&(c=[...this.chart.xAxisExt.map(S=>`${S.dataeaseName}@${S.name}`),...this.chart.xAxis.map(S=>`${S.dataeaseName}@${S.name}`)]);const p=document.createElement("style");p.id="style-"+this.chart.container,p.innerHTML=`
          #${this.chart.container} .l7-popup-content {
            background-color: ${f.backgroundColor} !important;
            padding: 6px 10px 6px;
            line-height: 1.6;
          }
          #${this.chart.container} .l7-popup-tip {
           border-top-color: ${f.backgroundColor} !important;
          }
        `,document.head.appendChild(p);const h=this.chart.xAxis[0].dataeaseName,g=this.chart.xAxis[1].dataeaseName,y=`<div style='font-size:${f.fontSize}px;color:${f.color};'>`,x="</div>",b=this.view.sourceOption.data[u];if(b&&((n=b.details)!=null&&n.length)){const S={...b,...Object.fromEntries(o(b.details))},A=e(f,S,c),C=`${y}${A}${x}`;this.popup.setLngLat({lng:b[h],lat:b[g]}),this.popup.setHTML(C),this.popup.closeButton=!1,this.scene.addPopup(this.popup),this.popup.addTo(this.scene);const{_id:v}=(s=(a=this.scene.getLayers())==null?void 0:a.find(E=>E.type==="PointLayer"))==null?void 0:s.layerSource.data.dataArray.find(E=>{const z=this.data[u][h],k=this.data[u][g];return E[h]===z&&E[g]===k});(d=(r=this.scene.getLayers())==null?void 0:r.find(E=>E.type==="PointLayer"&&E.coordCenter))==null||d.setActive(v,{color:"rgba(30,90,255,1)"})}}},e=(i,l,n)=>{let a="";return i.customContent?(a=i.customContent,n.forEach(s=>{a=a.replace(`\${${s.split("@")[1]}}`,l[s.split("@")[0]])})):n.forEach(s=>{a+=`<span style="margin-bottom: 4px">${s.split("@")[1]}: ${l[s.split("@")[0]]}</span><br>`}),a.replace(/\n/g,"<br>")},o=i=>{const l=new Map;return i.forEach(n=>{Object.entries(n).forEach(([a,s])=>{if(l.has(a)){const r=l.get(a);r!==s&&l.set(a,`${r}, ${s}`)}else l.set(a,s)})}),l};t()}}const mn=Object.freeze(Object.defineProperty({__proto__:null,CarouselManager:Pi,carouselManagerInstances:ae,configCarouselTooltip:Ke},Symbol.toStringTag,{value:"Module"})),{t:Ee}=Y();class pn extends Bi{constructor(){super("bubble-map");w(this,"properties",[...Di,"bubble-animate"]);w(this,"propertyInner",{...Dt,"tooltip-selector":[...Dt["tooltip-selector"],"carousel"],"basic-style-selector":[...Dt["basic-style-selector"],"areaBaseColor"]});w(this,"axis",Mi);w(this,"axisConfig",{xAxis:{name:`${Ee("chart.area")} / ${Ee("chart.dimension")}`,type:"d",limit:1},yAxis:{name:`${Ee("chart.bubble_size")} / ${Ee("chart.quota")}`,type:"q",limit:1}})}async drawChart(t){var y;const{chart:e,level:o,areaId:i,container:l,action:n,scope:a}=t;if(!i)return;e.container=l;let s={},r=[],d=(y=e.data)==null?void 0:y.data;if(i.startsWith("custom_")){r=(await oi(i)).data||[],r.forEach(C=>{var v;return C.scopeArr=((v=C.scope)==null?void 0:v.split(","))||[]}),s=G(await ne("156"));const x=s.features.reduce((C,v)=>(C["156"+v.properties.adcode]=v.properties.name,C),{}),{areaMapping:b}=_(e.senior),S=r.reduce((C,v)=>{var z,k;const E=(z=b==null?void 0:b[i])==null?void 0:z[v.name];return E&&(v.name=E),C[v.name]=v,v.scopeArr=((k=v.scope)==null?void 0:k.split(","))||[],C},{}),A=[];d==null||d.forEach(C=>{const v=S[C.name];v&&v.scopeArr.forEach(E=>{A.push({...C,name:x[E],field:x[E],scope:v.scopeArr,areaName:C.name})})}),d=A}else a?(s=G(await ne("156")),s.features=s.features.filter(x=>a.includes("156"+x.properties.adcode))):s=G(await ne(i));let f={preserveDrawingBuffer:!0,map:{type:"mapbox",style:"blank"},geoArea:{type:"geojson"},source:{data:d||[],joinBy:{sourceField:"name",geoField:"name",geoData:s}},viewLevel:{level:o,adcode:"all"},autoFit:!0,chinaBorder:!1,color:{field:"value"},style:{opacity:1,lineWidth:.6,lineOpacity:1},label:{field:"_DE_LABEL_",style:{textAnchor:"center"}},tooltip:{},legend:!1,customFetchGeoData:()=>null};const c={drawOption:t,geoJson:s,customSubArea:r};f=this.setupOptions(e,f,c);const p=J(f.tooltip);f={...f,tooltip:{...p,showComponent:!1}};const h=new Pl(l,f),g=this.getDotLayer(e,s,t,r);return i.startsWith("custom_")||(g.options={...g.options,tooltip:p}),this.configZoomButton(e,h),Ae(l),h.once("loaded",()=>{h.scene.map._canvasContainer.lastElementChild.style.cursor="default";const{layers:x}=c;x&&x.forEach(b=>{h.addLayer(b)}),g.addToScene(h.scene),g.once("add",()=>{re(l)}),h.scene.map.keyboard.disable(),g.on("dotLayer:click",b=>{var v;const S=b.feature.properties;let A,C;if(i.startsWith("custom_")){A="156";const E=r.find(z=>z.name===S.name);C=E==null?void 0:E.scopeArr}else A=(v=h.currentDistrictData.features.find(E=>E.properties.name===b.feature.properties.name))==null?void 0:v.properties.adcode;n({x:b.x,y:b.y,data:{data:S,extra:{adcode:A,scope:C}}})}),g.once("loaded",()=>{e.container=l,Ke(e,h,d||[],null,r,t)})}),h}getDotLayer(t,e,o,i){var p,h,g,y,x;const{areaId:l}=o,{basicStyle:n,tooltip:a}=_(t.customAttr),{bubbleCfg:s}=_(t.senior),{offsetHeight:r,offsetWidth:d}=document.getElementById(o.container),f=[],c={source:{data:f,parser:{type:"json",x:"x",y:"y"}},shape:"circle",size:{field:"size",value:[5,Math.min(r,d)/20]},visible:!0,zIndex:.05,color:$(n.colors[0],n.alpha),name:"bubbleLayer",style:{opacity:1},state:{active:{color:"rgba(30,90,255,1)"}},tooltip:{showComponent:a.show}};if(l.startsWith("custom_")){const b=e.features.reduce((C,v)=>(v.properties.adcode&&(C["156"+v.properties.adcode]=v),C),{}),{areaMapping:S}=_(t.senior),A=i.reduce((C,v)=>{var z;const E=(z=S==null?void 0:S[l])==null?void 0:z[v.name];return E&&(v.name=E),C[v.name]=v,C},{});if((h=(p=t.data)==null?void 0:p.data)==null||h.forEach(C=>{var E;const v=A[C.name];if(v){const z=[];if((E=v.scopeArr)==null||E.forEach(k=>{const N=b[k];N&&z.push(N)}),z.length){const N=Ve({type:"FeatureCollection",features:z});v.centroid=[N.geometry.coordinates[0],N.geometry.coordinates[1]],f.push({name:v.name,size:C.value,properties:C,x:N.geometry.coordinates[0],y:N.geometry.coordinates[1]})}}}),c.tooltip&&c.tooltip.showComponent){c.tooltip.items=["name","adcode","value"],c.tooltip.customTitle=({name:v})=>v;const C=(g=a.seriesTooltipFormatter)==null?void 0:g.filter(v=>v.show).reduce((v,E)=>(v[E.id]=E,v),{});c.tooltip.customItems=v=>{var N,L,I;const E=[];if(W(C))return E;const z=v.properties,k=C[(L=(N=z.quotaList)==null?void 0:N[0])==null?void 0:L.id];if(!W(k)){const T=parseFloat(z.value),O=D(T,k.formatterCfg),B=W(k.chartShowName)?k.name:k.chartShowName;E.push({...z,name:B,value:`${O??""}`})}return(I=z.dynamicTooltipValue)==null||I.forEach(T=>{const O=C[T.fieldId];if(O){const B=D(parseFloat(T.value),O.formatterCfg),F=W(O.chartShowName)?O.name:O.chartShowName;E.push({color:"grey",name:F,value:`${B??""}`})}}),E},c.tooltip.domStyles={"l7plot-tooltip":{"background-color":a.backgroundColor,"font-size":`${a.fontSize}px`,"line-height":1.6},"l7plot-tooltip__name":{color:a.color},"l7plot-tooltip__value":{color:a.color},"l7plot-tooltip__title":{color:a.color}}}}else{const b=(x=(y=t.data)==null?void 0:y.data)==null?void 0:x.reduce((S,A)=>(S[A.field]={value:A.value,data:A},S),{});e.features.forEach(S=>{var C;const A=S.properties.name;(C=b==null?void 0:b[A])!=null&&C.value&&f.push({x:S.properties.centroid[0],y:S.properties.centroid[1],size:b[A].value,properties:b[A].data,name:A})})}return s&&s.enable?new Ho({...c,size:{field:"size",value:[10,Math.min(r,d)/10]},animate:{enable:!0,speed:s.speed,rings:s.rings}}):new Ho(c)}configBasicStyle(t,e,o){var c,p,h,g;const{areaId:i}=o.drawOption,l=o.geoJson,{basicStyle:n,label:a}=_(t.customAttr),r=(c=_(t.senior).areaMapping)==null?void 0:c[i];if(Ci(l,r),e.color=n.areaBaseColor,!((h=(p=t.data)==null?void 0:p.data)!=null&&h.length)||!((g=l==null?void 0:l.features)!=null&&g.length))return e.label&&(e.label.field="name"),e;const f=t.data.data.reduce((y,x)=>(y[x.field]=x.value,y),{});return l.features.forEach(y=>{const x=y.properties.name;if(a.show){const b=[];a.showDimension&&b.push(x),a.showQuota&&(f[x]||f[x]===0)&&b.push(D(f[x],a.quotaLabelFormatter)),y.properties._DE_LABEL_=b.join(`

`)}}),e}configCustomArea(t,e,o){var f;const{drawOption:i,customSubArea:l,geoJson:n}=o;if(!i.areaId.startsWith("custom_"))return e;const a=_(t.customAttr),{label:s}=a,r=(f=t.data)==null?void 0:f.data,d=r==null?void 0:r.reduce((c,p)=>(c[p.field]=p,c),{});if(e.label={visible:!1},s.show){const c=n.features.reduce((y,x)=>(x.properties.adcode&&(y["156"+x.properties.adcode]=x),y),{}),{areaMapping:p}=_(t.senior),h=[];l.forEach(y=>{var b,S;const x=[];if((b=y.scopeArr)==null||b.forEach(A=>{const C=c[A];C&&x.push(C)}),x.length){const A={type:"FeatureCollection",features:x},C=[];if(s.showDimension){const E=(S=p==null?void 0:p[i.areaId])==null?void 0:S[y.name];E&&(y.name=E),C.push(y.name)}s.showQuota&&d[y.name]&&C.push(D(d[y.name].value,s.quotaLabelFormatter));const v=Ve(A);h.push({name:C.join(`

`),x:v.geometry.coordinates[0],y:v.geometry.coordinates[1]})}});const g=new ri({name:"areaLabelLayer",source:{data:h,parser:{type:"json",x:"x",y:"y"}},field:"name",zIndex:.06,style:{fill:s.color,fontSize:s.fontSize,opacity:1,fontWeight:"bold",textAnchor:"center",textAllowOverlap:s.fullDisplay,padding:s.fullDisplay?void 0:[2,2]}});o.layers=[g]}return e}setupOptions(t,e,o){return U(this.configEmptyDataStrategy,this.configLabel,this.configStyle,this.configTooltip,this.configBasicStyle,this.configCustomArea)(t,e,o,this)}}const hn=Object.freeze(Object.defineProperty({__proto__:null,BubbleMap:pn},Symbol.toStringTag,{value:"Module"})),me=xl();class zt extends zs{constructor(t,e){super();w(this,"config");w(this,"scene",null);w(this,"destroy",()=>{var t;this.chartInstance&&((t=this.chartInstance)==null||t.destroy())});w(this,"render",()=>{var t;this.scene&&this.config&&(this.scene.loaded?Array.isArray(this.config)?(t=this.config)==null||t.forEach(e=>{this.handleConfig(e)}):this.handleConfig(this.config):this.scene.on("loaded",()=>{var e;Array.isArray(this.config)?(e=this.config)==null||e.forEach(o=>{this.handleConfig(o)}):this.handleConfig(this.config)}))});w(this,"handleConfig",t=>{var e;t&&(t.handleConfig?(e=t.handleConfig)==null||e.call(t,this.scene):this.scene.addLayer(t))});this.chartInstance=t,this.config=e,this.scene=t}getScene(){return this.scene}}class zo extends Qe{constructor(t,e){super($t.L7,t,e);w(this,"getMapKey",async()=>(me.mapKey.key||await es().then(t=>me.setKey(t.data)),me.mapKey.securityCode&&(window._AMapSecurityConfig={securityJsCode:me.mapKey.securityCode}),me.mapKey))}configEmptyDataStrategy(t,e){const{functionCfg:o}=_(t.senior),i=o.emptyDataStrategy;if(!i||i==="breakLine")return e;const l=G(e.sourceOption.data);if(i==="setZero"&&l.forEach(n=>{n.value===null&&(n.value=0)}),i==="ignoreData")for(let n=l.length-1;n>=0;n--)l[n].value===null&&l.splice(n,1);return e.sourceOption.data=l,e}configZoomButton(t,e){bs(t,e)}configLabel(t,e){const o=Si(t);return Ft(e.label,o),e}configTooltip(t,e){const o=Ai(t);return Ft(e.tooltip,o),e}}const{t:wt}=Y();class gn extends zo{constructor(){super("flow-map",[]);w(this,"properties",["background-overall-component","border-style","basic-style-selector","title-selector","flow-map-line-selector","flow-map-point-selector","bubble-animate"]);w(this,"propertyInner",{...Dt,"basic-style-selector":["mapBaseStyle","mapLineStyle","zoom","showLabel","autoFit","mapCenter","zoomLevel"]});w(this,"axis",["xAxis","xAxisExt","filter","flowMapStartName","flowMapEndName","yAxis"]);w(this,"axisConfig",{xAxis:{name:`${wt("chart.start_coordinates")} / ${wt("chart.dimension")}`,type:"d",limit:2},xAxisExt:{name:`${wt("chart.end_coordinates")} / ${wt("chart.dimension")}`,type:"d",limit:2},flowMapStartName:{name:`${wt("chart.start_name")} / ${wt("chart.dimension")}`,type:"d",limit:1,allowEmpty:!0},flowMapEndName:{name:`${wt("chart.end_name")} / ${wt("chart.dimension")}`,type:"d",limit:1,allowEmpty:!0},yAxis:{name:`${wt("chart.flow_map_line_width")} / ${wt("chart.quota")}`,type:"q",limit:1,tooltip:wt("chart.flow_map_line_width_tip"),allowEmpty:!0}});w(this,"lineConfig",(t,e,o,i,l)=>{var g;const n={type:l.flowMapConfig.lineConfig.mapLineType,size:l.flowMapConfig.lineConfig.mapLineType==="line"?l.flowMapConfig.lineConfig.mapLineWidth/2:l.flowMapConfig.lineConfig.mapLineWidth,animate:l.flowMapConfig.lineConfig.mapLineAnimate,animateDuration:l.flowMapConfig.lineConfig.mapLineAnimateDuration,gradient:l.flowMapConfig.lineConfig.mapLineGradient,sourceColor:l.flowMapConfig.lineConfig.mapLineSourceColor,targetColor:l.flowMapConfig.lineConfig.mapLineTargetColor,alpha:l.flowMapConfig.lineConfig.alpha},a=i.colors.map(y=>$(y,l.flowMapConfig.lineConfig.alpha));n.sourceColor=a[0],n.targetColor=a[1];let s=null;const r=J(t.yAxis);r.length>0&&(s=r[0].dataeaseName);let d=null;const f=J(t.yAxisExt);f.length>0&&(d=f[0].dataeaseName);const c="*",p=[];(g=t.data)==null||g.tableRow.forEach(y=>{const x="f_record",b=Object.keys(y).reduce((S,A)=>(A===c?S[x]=y[A]:S[A]=y[A],S),{});p.push(b)});const h=new $l({name:"line",blend:"normal",autoFit:i.autoFit!==!1}).source(p,{parser:{type:"json",x:e[0].dataeaseName,y:e[1].dataeaseName,x1:o[0].dataeaseName,y1:o[1].dataeaseName}}).size(n.size).shape(n.type).animate({enable:n.animate,duration:n.animateDuration,interval:1,trailLength:1});return s&&h.size(s===c?"f_record":s,[1,10]),d?(h.style({opacity:n.alpha/100}),h.color(d)):n.gradient?h.style({sourceColor:n.sourceColor,targetColor:n.targetColor,opacity:n.alpha/100}):h.style({opacity:n.alpha/100}).color(n.sourceColor),h});w(this,"startAndEndNameConfig",(t,e,o,i,l)=>{var f,c;const n=J(t.flowMapStartName),a=J(t.flowMapEndName),s=i.flowMapConfig.pointConfig.text.color,r=i.flowMapConfig.pointConfig.text.fontSize,d=new Map;if((n==null?void 0:n.length)>0){const p=new oe().source((f=t.data)==null?void 0:f.tableRow,{parser:{type:"json",x:e[0].dataeaseName,y:e[1].dataeaseName}}).shape(n[0].dataeaseName,h=>d.has("from-"+h)?"":(d.set("from-"+h,h),h)).size(r).color(s).style({textAnchor:"top",textOffset:[0,0],spacing:2,padding:[1,1],textAllowOverlap:!0,fontFamily:t.fontFamily?t.fontFamily:void 0});l.push(p)}if((a==null?void 0:a.length)>0){const p=new oe().source((c=t.data)==null?void 0:c.tableRow,{parser:{type:"json",x:o[0].dataeaseName,y:o[1].dataeaseName}}).shape(a[0].dataeaseName,h=>d.has("from-"+h)||d.has("to-"+h)?"":(d.set("to-"+h,h),h)).size(r).color(s).style({textAnchor:"top",textOffset:[0,0],spacing:2,padding:[1,1],textAllowOverlap:!0,fontFamily:t.fontFamily?t.fontFamily:void 0});l.push(p)}});w(this,"pointConfig",(t,e,o,i,l)=>{var f,c;const n=i.flowMapConfig.pointConfig.point.color,a=i.flowMapConfig.pointConfig.point.size,{bubbleCfg:s}=_(t.senior),r=new oe({zIndex:-1}).source((f=t.data)==null?void 0:f.tableRow,{parser:{type:"json",x:e[0].dataeaseName,y:e[1].dataeaseName}}).shape("circle").size(a).color(n).style({blur:.6}),d=new oe({zIndex:-1}).source((c=t.data)==null?void 0:c.tableRow,{parser:{type:"json",x:o[0].dataeaseName,y:o[1].dataeaseName}}).shape("circle").size(a).color(n).style({blur:.6});if(s&&s.enable){const p={enable:!0,speed:s.speed,rings:s.rings};r.size(a*2),r.animate(p),d.size(a*2),d.animate(p)}l.push(r),l.push(d)})}async drawChart(t){var y,x;const{chart:e,container:o}=t,i=document.getElementById(o),l=i==null?void 0:i.getBoundingClientRect();if((l==null?void 0:l.height)<=0)return new zt((y=t.chartObj)==null?void 0:y.getScene(),[]);const n=J(e.xAxis),a=J(e.xAxisExt),{basicStyle:s,misc:r}=J(_(e.customAttr));let d=[ot.mapCenter.longitude,ot.mapCenter.latitude];s.autoFit===!1&&(d=[s.mapCenter.longitude,s.mapCenter.latitude]);let f=s.mapStyleUrl;s.mapStyle!=="custom"&&(f=`amap://styles/${s.mapStyle?s.mapStyle:"normal"}`);const c=await this.getMapKey(),p=t.chartObj;let h=p==null?void 0:p.getScene();if(h?((x=h.getLayers())!=null&&x.length&&(await h.removeAllLayer(),h.setPitch(r.mapPitch),h.setMapStyle(f),h.map.showLabel=s.showLabel!==!1),s.autoFit===!1&&h.setZoomAndCenter(s.zoomLevel,d)):h=new vo({id:o,logoVisible:!1,map:new wo({token:(c==null?void 0:c.key)??void 0,style:f,pitch:r.mapPitch,center:s.autoFit===!1?d:void 0,zoom:s.autoFit===!1?s.zoomLevel:void 0,showLabel:s.showLabel!==!1,WebGLParams:{preserveDrawingBuffer:!0}})}),Ae(o),h.once("loaded",()=>{re(o)}),this.configZoomButton(e,h),(n==null?void 0:n.length)<2||(a==null?void 0:a.length)<2)return new zt(h,void 0);const g=[];return g.push(this.lineConfig(e,n,a,s,r)),this.startAndEndNameConfig(e,n,a,r,g),this.pointConfig(e,n,a,r,g),g[0].once("inited",()=>{re(o)}),new zt(h,g)}setupDefaultOptions(t){return t.customAttr.misc.flowMapConfig.lineConfig.mapLineAnimate=!0,t}}const yn=Object.freeze(Object.defineProperty({__proto__:null,FlowMap:gn},Symbol.toStringTag,{value:"Module"})),{t:Fe}=Y();class xn extends zo{constructor(){super("heat-map",[]);w(this,"properties",["background-overall-component","border-style","basic-style-selector","title-selector"]);w(this,"propertyInner",{...Dt,"basic-style-selector":["colors","heatMapStyle","zoom","showLabel","autoFit","mapCenter","zoomLevel"]});w(this,"axis",["xAxis","yAxis","filter"]);w(this,"axisConfig",{xAxis:{name:`${Fe("chart.longitude_and_latitude")} / ${Fe("chart.dimension")}`,type:"d",limit:2},yAxis:{name:`${Fe("chart.chart_data")} / ${Fe("chart.quota")}`,type:"q",limit:1}})}async drawChart(t){var y,x,b;const{chart:e,container:o}=t,i=document.getElementById(o),l=i==null?void 0:i.getBoundingClientRect();if((l==null?void 0:l.height)<=0)return new zt((y=t.chartObj)==null?void 0:y.getScene(),[]);const n=J(e.xAxis),a=J(e.yAxis);let s,r;e.customAttr&&(s=_(e.customAttr).basicStyle,r=_(e.customAttr).misc);let d=[ot.mapCenter.longitude,ot.mapCenter.latitude];s.autoFit===!1&&(d=[s.mapCenter.longitude,s.mapCenter.latitude]);let f=s.mapStyleUrl;s.mapStyle!=="custom"&&(f=`amap://styles/${s.mapStyle?s.mapStyle:"normal"}`);const c=await this.getMapKey(),p=t.chartObj;let h=p==null?void 0:p.getScene();if(h?(x=h.getLayers())!=null&&x.length&&(await h.removeAllLayer(),h.setPitch(r.mapPitch),h.setMapStyle(f),h.map.showLabel=s.showLabel!==!1,s.autoFit===!1&&h.setZoomAndCenter(s.zoomLevel,d)):h=new vo({id:o,logoVisible:!1,map:new wo({token:(c==null?void 0:c.key)??void 0,style:f,pitch:r.mapPitch,center:d,zoom:s.autoFit===!1?s.zoomLevel:void 0,showLabel:s.showLabel!==!1,WebGLParams:{preserveDrawingBuffer:!0}})}),Ae(o),h.once("loaded",()=>{re(o)}),this.configZoomButton(e,h),(n==null?void 0:n.length)<2||(a==null?void 0:a.length)<1)return new zt(h,void 0);const g=new Rl({name:"line",blend:"normal",autoFit:s.autoFit!==!1}).source((b=e.data)==null?void 0:b.data,{parser:{type:"json",x:"x",y:"y"}}).size("value",[0,1]).shape(s.heatMapType??ot.heatMapType);return g.style({intensity:s.heatMapIntensity??ot.heatMapIntensity,radius:s.heatMapRadius??ot.heatMapRadius,rampColors:{colors:s.colors.reverse(),positions:[0,.11,.22,.33,.44,.55,.66,.77,.88,1]}}),new zt(h,g)}setupOptions(t,e){return U(this.configEmptyDataStrategy)(t,e)}}const bn=Object.freeze(Object.defineProperty({__proto__:null,HeatMap:xn},Symbol.toStringTag,{value:"Module"})),{t:ze}=Y();let Sn=class extends Bi{constructor(){super("map",[]);w(this,"properties",[...Di,"legend-selector"]);w(this,"propertyInner",{...Dt,"basic-style-selector":["colors","alpha","areaBorderColor","areaBaseColor","zoom","gradient-color"],"legend-selector":["icon","fontSize","color"],"tooltip-selector":[...Dt["tooltip-selector"],"carousel"]});w(this,"axis",Mi);w(this,"axisConfig",{xAxis:{name:`${ze("chart.area")} / ${ze("chart.dimension")}`,type:"d",limit:1},yAxis:{name:`${ze("chart.chart_data")} / ${ze("chart.quota")}`,type:"q",limit:1}});w(this,"createLegendCustomContent",t=>{const o=xe(li).getElementsByClassName(si)[0];return t.forEach(i=>{let l="-";if(i.value!=="")if(Array.isArray(i.value))i.value.forEach((r,d)=>{i.value[d]=Number.isNaN(r)||r==="NaN"?"NaN":parseFloat(r).toFixed(0)}),l=i.value.join("-");else{const r=i.value;l=Number.isNaN(r)||r==="NaN"?"NaN":parseFloat(r).toFixed(0)}const n={...i,value:l},a=Co(ni,n),s=xe(a);s.style.setProperty("--bgColor",i.color),o.appendChild(s)}),o})}async drawChart(t){var b;const{chart:e,level:o,container:i,action:l,scope:n}=t,{areaId:a}=t;if(!a)return;e.container=i;let s=JSON.parse(JSON.stringify(((b=e.data)==null?void 0:b.data)||[]));const{misc:r}=_(e.customAttr),{legend:d}=_(e.customStyle);let f={},c=[];if(a.startsWith("custom_")){c=(await oi(a)).data||[],f=G(await ne("156"));const S=f.features.reduce((E,z)=>(E["156"+z.properties.adcode]=z.properties.name,E),{}),{areaMapping:A}=_(e.senior),C=c.reduce((E,z)=>{var N,L;const k=(N=A==null?void 0:A[a])==null?void 0:N[z.name];return k&&(z.name=k),E[z.name]=z,z.scopeArr=((L=z.scope)==null?void 0:L.split(","))||[],E},{}),v=[];s.forEach(E=>{const z=C[E.name];z&&z.scopeArr.forEach(k=>{v.push({...E,name:S[k],field:S[k],scope:z.scopeArr,areaName:E.name})})}),s=v}else n?(f=G(await ne("156")),f.features=f.features.filter(S=>n.includes("156"+S.properties.adcode))):f=G(await ne(a));let p=[];if(!r.mapAutoLegend&&d.show){let S=r.mapLegendMin,A=r.mapLegendMax,C=9;r.mapLegendRangeType==="custom"&&(A=0,S=0,C=r.mapLegendNumber),De(s,"value",A,S,(v,E)=>{A=v,S=E,l({from:"map",data:{max:A,min:S??Po(s,"value"),legendNumber:C}})}),p=co(s,A,S)}else p=s;let h={preserveDrawingBuffer:!0,map:{type:"mapbox",style:"blank"},geoArea:{type:"geojson"},source:{data:p,joinBy:{sourceField:"name",geoField:"name",geoData:f}},viewLevel:{level:o,adcode:"all"},autoFit:!0,chinaBorder:!1,color:{field:"value"},style:{opacity:1,lineWidth:.6,lineOpacity:1},label:{field:"_DE_LABEL_",style:{textAnchor:"center"}},state:{active:{stroke:"green",lineWidth:1}},tooltip:{},customFetchGeoData:()=>null};const g={drawOption:t,geoJson:f,customSubArea:c};h=this.setupOptions(e,h,g);const{Choropleth:y}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(S=>S.X),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),x=new y(i,h);return this.configZoomButton(e,x),Ae(i),x.once("loaded",()=>{re(i);const{layers:S}=g;S&&S.forEach(A=>{x.addLayer(A)}),x.scene.map.keyboard.disable(),x.on("fillAreaLayer:click",A=>{const C=A.feature.properties;a.startsWith("custom_")&&(C.name=C.areaName,C.adcode="156"),l({x:A.x,y:A.y,data:{data:C,extra:{adcode:C.adcode,scope:C.scope}}})}),e.container=i,Ke(e,x,p,null,c,t)}),x}configBasicStyle(t,e,o){var A,C,v,E;const{areaId:i}=o.drawOption,l=o.geoJson,{basicStyle:n,label:a,misc:s}=_(t.customAttr),d=(A=_(t.senior).areaMapping)==null?void 0:A[i];if(Ci(l,d),e.color={field:"value",value:[n.colors[0]],scale:{type:"quantize",unknown:n.areaBaseColor}},!((v=(C=t.data)==null?void 0:C.data)!=null&&v.length)||!((E=l==null?void 0:l.features)!=null&&E.length))return e.label&&(e.label.field="name"),e;const f=e.source.data,c=n.colors.map(z=>$(z,n.alpha)),{legend:p}=_(t.customStyle);let h=f,g=[],y=s.mapLegendMin,x=s.mapLegendMax,b=s.mapLegendNumber;p.show?(De(f,"value",x,y,(z,k)=>{x=z,y=k,b=9}),s.mapAutoLegend?b=9:h=co(f,x,y),g=bl(y,x,b,c)):g=c;const S=h.reduce((z,k)=>(z[k.field]=k.value,z),{});return l.features.forEach(z=>{const k=z.properties.name;if(a.show){const N=[];a.showDimension&&N.push(k),a.showQuota&&(S[k]||S[k]===0)&&N.push(D(S[k],a.quotaLabelFormatter)),z.properties._DE_LABEL_=N.join(`

`)}}),g.length&&(e.color.value=g.map(z=>z.color?z.color:z),g[0].value&&!s.mapAutoLegend&&(e.color.scale.domain=[y??Po(f,"value"),x])),e}customConfigLegend(t,e,o){const{basicStyle:i,misc:l}=_(t.customAttr),n=i.colors.map(d=>$(d,i.alpha));if(i.suspension===!1&&i.showZoom===void 0)return e;const{legend:a}=_(t.customStyle);if(!a.show)return e;const s={circle:{borderRadius:"50%"},square:{},triangle:{border:"unset",borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottom:"10px solid var(--bgColor)",background:"unset"},diamond:{transform:"rotate(45deg)"}},r={position:"bottomleft",domStyles:{"l7plot-legend__category-value":{fontSize:a.fontSize+"px",color:a.color,"font-family":t.fontFamily?t.fontFamily:void 0},"l7plot-legend__category-marker":{...s[a.icon],width:a.size+"px",height:a.size+"px",...a.icon==="triangle"?{...s[a.icon].triangle,borderLeft:`${a.size/2}px solid transparent`,borderRight:`${a.size/2}px solid transparent`,borderBottom:`${a.size}px solid var(--bgColor)`}:{border:"0.01px solid #f4f4f4"},...a.icon==="diamond"?{transform:"rotate(45deg)",marginBottom:`${a.size/4}px`}:{}}}};if(!l.mapAutoLegend&&l.mapLegendRangeType==="custom"&&!t.drill){const d=[],f=l.mapLegendCustomRange.slice(0,-1).map((c,p)=>[c,l.mapLegendCustomRange[p+1]]);f.forEach((c,p)=>{const h=[c[0],c[1]],g=p%n.length,y=c[0]<f[0][0]&&c[1]<f[0][0];let x=n[g];y&&(x=i.areaBaseColor),d.push({value:h,color:x})}),r.customContent=(c,p)=>d!=null&&d.length?this.createLegendCustomContent(d):"",e.color.value=({value:c})=>{const p=d.find(h=>c>=h.value[0]&&c<=h.value[1]);return p?p.color:i.areaBaseColor},e.color.scale.domain=[f[0][0],f[f.length-1][1]]}else r.customContent=(d,f)=>{const c=(f==null?void 0:f.length)>30?f.slice(0,30):f;return c!=null&&c.length?this.createLegendCustomContent(c):""};return t.drill&&De(e.source.data,"value",0,0,(d,f)=>{e.color.scale.domain=[f,d]}),Ft(e,{legend:r}),e}configCustomArea(t,e,o){var p;const{drawOption:i,customSubArea:l,geoJson:n}=o;if(!i.areaId.startsWith("custom_"))return e;const a=_(t.customAttr),{label:s}=a,r=t.data.data,d=r==null?void 0:r.reduce((h,g)=>(h[g.field]=g,h),{}),f=n.features.reduce((h,g)=>(g.properties.adcode&&(h["156"+g.properties.adcode]=g),h),{});if(l.forEach(h=>{var y;const g=[];if((y=h.scopeArr)==null||y.forEach(x=>{const b=f[x];b&&g.push(b)}),g.length){const b=Ve({type:"FeatureCollection",features:g});h.centroid=[b.geometry.coordinates[0],b.geometry.coordinates[1]]}}),e.label={visible:!1},s.show){const h=[];l.forEach(y=>{if(y.centroid){const x=[];s.showDimension&&x.push(y.name),s.showQuota&&(d[y.name]||d[y.name]===0)&&x.push(D(d[y.name].value,s.quotaLabelFormatter)),h.push({name:x.join(`

`),x:y.centroid[0],y:y.centroid[1]})}});const g=new ri({name:"areaLabelLayer",source:{data:h,parser:{type:"json",x:"x",y:"y"}},field:"name",style:{fill:s.color,fontSize:s.fontSize,opacity:1,fontWeight:"bold",textAnchor:"center",textAllowOverlap:s.fullDisplay,padding:s.fullDisplay?void 0:[2,2]}});o.layers=[g]}const c=l.reduce((h,g)=>(g.scopeArr.forEach(y=>{h[y]=g.name}),h),{});if(e.tooltip&&e.tooltip.showComponent){e.tooltip.items=["name","adcode","value"],e.tooltip.customTitle=({name:y,adcode:x})=>(x="156"+x,c[x]??y);const g=(p=a.tooltip.seriesTooltipFormatter)==null?void 0:p.filter(y=>y.show).reduce((y,x)=>(y[x.id]=x,y),{});e.tooltip.customItems=y=>{var E,z,k;const x=[];if(W(g))return x;const b=y.properties,{adcode:S}=b,A=c["156"+S],C=d[A];if(!C)return x;const v=g[(z=(E=C.quotaList)==null?void 0:E[0])==null?void 0:z.id];if(!W(v)){const N=parseFloat(C.value),L=D(N,v.formatterCfg),I=W(v.chartShowName)?v.name:v.chartShowName;x.push({...C,name:I,value:`${L??""}`})}return(k=C.dynamicTooltipValue)==null||k.forEach(N=>{const L=g[N.fieldId];if(L){const I=D(parseFloat(N.value),L.formatterCfg),T=W(L.chartShowName)?L.name:L.chartShowName;x.push({color:"grey",name:T,value:`${I??""}`})}}),x}}return e}setupDefaultOptions(t){return t.customAttr.basicStyle.areaBaseColor="#f4f4f4",t}setupOptions(t,e,o){return U(this.configEmptyDataStrategy,this.configLabel,this.configStyle,this.configTooltip,this.configBasicStyle,this.customConfigLegend,this.configCustomArea)(t,e,o,this)}};const An=Object.freeze(Object.defineProperty({__proto__:null,Map:Sn},Symbol.toStringTag,{value:"Module"})),{t:Ht}=Y();class Cn extends zo{constructor(){super("symbolic-map",[]);w(this,"properties",["background-overall-component","border-style","basic-style-selector","symbolic-style-selector","title-selector","label-selector","tooltip-selector","threshold"]);w(this,"propertyInner",{...Dt,"basic-style-selector":["colors","alpha","mapBaseStyle","zoom","showLabel","autoFit","mapCenter","zoomLevel"],"symbolic-style-selector":["symbolicMapStyle"],"label-selector":["color","fontSize","showFields","customContent"],"tooltip-selector":["color","fontSize","showFields","customContent","show","backgroundColor","carousel"],threshold:["lineThreshold"]});w(this,"axis",["xAxis","xAxisExt","extBubble","filter","extLabel","extTooltip"]);w(this,"axisConfig",{xAxis:{name:`${Ht("chart.symbolic_map_coordinates")} / ${Ht("chart.dimension")}`,type:"d",limit:2},xAxisExt:{name:`${Ht("chart.color")} / ${Ht("chart.dimension")}`,type:"d",limit:1,allowEmpty:!0},extBubble:{name:`${Ht("chart.bubble_size")} / ${Ht("chart.quota")}`,type:"q",limit:1,tooltip:Ht("chart.symbolic_map_bubble_size_tip"),allowEmpty:!0}});w(this,"buildSymbolicLayer",async(t,e)=>{var N,L;const{basicStyle:o}=_(t.customAttr),i=J(t.xAxis),l=J(t.xAxisExt),n=J(t.extBubble),{mapSymbolOpacity:a,mapSymbolSize:s,mapSymbol:r,mapSymbolStrokeWidth:d,colors:f,alpha:c,mapSymbolSizeMin:p,mapSymbolSizeMax:h}=J(o),g=f.map(I=>$(I,c));let y=0;const x=new Map,b=n.length>0?n[0].dataeaseName:"",{threshold:S}=_(t.senior);let A=[];S.enable&&(A=S.lineThreshold??[]);const C=t.extBubble.map(I=>I.id);A=Re(A,I=>C.includes(I.fieldId));const v=g[0],E=[],z=(N=t.data)!=null&&N.tableRow?t.data.tableRow.map((I,T)=>{var F;I._index="_index"+T;const O=I[(F=l[0])==null?void 0:F.dataeaseName];let B=x.get(O);if(B||(B=g[y++%g.length],x.set(O,B)),E[T]=B,A.length>0)for(let M=0;M<A.length;M++){const R=A[M],P=I[R.field.dataeaseName];for(const V of R.conditions){const X=V.value,H=Sl(V.color);if(V.term==="between"){const q=parseFloat(V.min),At=parseFloat(V.max);q<=P&&P<=At&&(B=$(H,c),E[T]=B)}else V.term==="lt"?P<X&&(B=$(H,c),E[T]=B):V.term==="le"?P<=X&&(B=$(H,c),E[T]=B):V.term==="gt"?P>X&&(B=$(H,c),E[T]=B):V.term==="ge"?P>=X&&(B=$(H,c),E[T]=B):V.term==="eq"?P===X&&(B=$(H,c),E[T]=B):V.term==="not_eq"&&P!==X&&(B=$(H,c),E[T]=B)}}return{...I,color:B,size:parseInt(I[b])??s,name:O}}):[],k=new oe({autoFit:o.autoFit!==!1}).source(z,{parser:{type:"json",x:i[0].dataeaseName,y:i[1].dataeaseName}}).active(!0);if((L=l[0])!=null&&L.dataeaseName)if(o.mapSymbol==="custom"&&o.customIcon)if(o.customIcon.startsWith("data"))e.removeImage("customIcon"),await e.addImage("customIcon",o.customIcon),k.shape("customIcon");else{const I=new DOMParser;for(let T=0;T<Math.min(E.length,y+1);T++){const O=E[T],B=/(fill="[^"]*")/g,F=o.customIcon.replace(B,""),R=I.parseFromString(F,"image/svg+xml").documentElement;R.setAttribute("fill",O),e.removeImage(`icon-${O}`),await e.addImage(`icon-${O}`,$o(R.outerHTML))}k.shape("color",T=>`icon-${T}`)}else k.shape(r).color("_index",E),k.style({stroke:{field:"color"},strokeWidth:d,opacity:a/10});else if(o.mapSymbol==="custom"&&o.customIcon)if(e.removeImage("customIcon"),o.customIcon.startsWith("data"))await e.addImage("customIcon",o.customIcon),k.shape("customIcon");else{const I=new DOMParser,T=v,O=/(fill="[^"]*")/g,B=o.customIcon.replace(O,""),M=I.parseFromString(B,"image/svg+xml").documentElement;M.setAttribute("fill",T),await e.addImage("customIcon",$o(M.outerHTML)),k.shape("customIcon")}else k.shape(r).color("_index",E).style({stroke:{field:"color"},strokeWidth:d,opacity:a/10});return b?k.size("size",[p,h]):k.size(s),k});w(this,"mergeDetailsToMap",t=>{const e=new Map;return t.forEach(o=>{Object.entries(o).forEach(([i,l])=>{if(e.has(i)){const n=e.get(i);n!==l&&e.set(i,`${n}, ${l}`)}else e.set(i,l)})}),e});w(this,"clearPopup",t=>{const e=document.getElementById(t);e==null||e.querySelectorAll(".l7-popup").forEach(o=>o.remove())});w(this,"buildTooltip",(t,e,o,i)=>{var n,a;const l=t.customAttr?_(t.customAttr):null;if(this.clearPopup(e),(n=l==null?void 0:l.tooltip)!=null&&n.show){const{tooltip:s}=J(l);let r=s.showFields||[];(!s.showFields||s.showFields.length===0)&&(r=[...t.xAxisExt.map(y=>`${y.dataeaseName}@${y.name}`),...t.xAxis.map(y=>`${y.dataeaseName}@${y.name}`)]);const d="tooltip-"+e,f=document.getElementById(d);f&&(f.remove(),(a=f.parentNode)==null||a.removeChild(f));const c=document.createElement("style");c.id=d,c.innerHTML=`
          #${e} .l7-popup-content {
            background-color: ${s.backgroundColor} !important;
            padding: 6px 10px 6px;
            line-height: 1.6;
            border-top-left-radius: 3px;
          }
          #${e} .l7-popup-tip {
           border-top-color: ${s.backgroundColor} !important;
          }
        `,document.head.appendChild(c);const p=`<div style='font-size:${s.fontSize}px;color:${s.color};font-family: ${t.fontFamily}'>`,h="</div>",g=document.getElementById(e);return g&&g.addEventListener("mousemove",y=>{const x=g.getBoundingClientRect(),b=y.clientX-x.left,S=y.clientY-x.top,A=g.getElementsByClassName("l7-popup");for(let C=0;C<(A==null?void 0:A.length);C++){const v=A[C];v.firstElementChild.style.display="none",v.style.transform="translate(15px, 12px)";const E=g.clientWidth-b<=v.clientWidth+10,z=g.clientHeight-S<=v.clientHeight;let k="";E&&(k+="translateX(-120%) translateY(15%) "),z&&(k+="translateX(15%) translateY(-80%) "),k&&(v.style.transform=k.trim())}}),o.on("touchend",y=>{if(y.lngLat){const x={...y.feature,...Object.fromEntries(this.mergeDetailsToMap(y.feature.details??[]))},b=this.buildTooltipContent(s,x,r),S=new ai({lngLat:y.lngLat,title:"",closeButton:!1,closeOnClick:!0,html:`${p}${b}${h}`});i.addPopup(S)}}),new Hl({anchor:"top-left",className:"l7-popup-"+e,items:[{layer:o,customContent:y=>{const x={...y,...Object.fromEntries(this.mergeDetailsToMap(y.details))},b=this.buildTooltipContent(s,x,r);return`${p}${b}${h}`}}],trigger:"hover"})}});w(this,"buildTooltipContent",(t,e,o)=>{let i="";return t.customContent?(i=t.customContent,o.forEach(l=>{i=i.replace(`\${${l.split("@")[1]}}`,e[l.split("@")[0]])})):o.forEach(l=>{i+=`<span style="margin-bottom: 4px">${l.split("@")[1]}: ${e[l.split("@")[0]]}</span><br>`}),i.replace(/\n/g,"<br>")});w(this,"buildLabel",(t,e)=>{var l,n;const o=J(t.xAxis),i=t.customAttr?_(t.customAttr):null;if((l=i==null?void 0:i.label)!=null&&l.show){const{label:a}=i,s=((n=t.data)==null?void 0:n.tableRow)||[];let r=a.showFields||[];(!a.showFields||a.showFields.length===0)&&(r=[...t.xAxisExt.map(d=>`${d.dataeaseName}@${d.name}`),...t.xAxis.map(d=>`${d.dataeaseName}@${d.name}`)]),s.forEach(d=>{const f={...d,...Object.fromEntries(this.mergeDetailsToMap(d.details))};let c=a.customContent||"";c?r.forEach(p=>{const[h,g]=p.split("@");c=c.replace(`\${${g}}`,f[h])}):c=r.map(p=>f[p.split("@")[0]]).join(","),c=c.replace(/\n/g,""),d.textLayerContent=c}),e.push(new oe().source(s,{parser:{type:"json",x:o[0].dataeaseName,y:o[1].dataeaseName}}).shape("textLayerContent","text").color(a.color).size(a.fontSize).style({textAllowOverlap:a.fullDisplay,textAnchor:"center",textOffset:[0,0],fontFamily:t.fontFamily?t.fontFamily:void 0}))}})}async drawChart(t){var b,S,A,C,v,E,z,k,N;const{chart:e,container:o,action:i}=t,l=document.getElementById(o),n=l==null?void 0:l.getBoundingClientRect();if((n==null?void 0:n.height)<=0)return new zt((b=t.chartObj)==null?void 0:b.getScene(),[]);const a=J(e.xAxis);let s,r;e.customAttr&&(s=_(e.customAttr).basicStyle,r=_(e.customAttr).misc);let d=s.mapStyleUrl;s.mapStyle!=="custom"&&(d=`amap://styles/${s.mapStyle?s.mapStyle:"normal"}`);const f=await this.getMapKey();let c=[ot.mapCenter.longitude,ot.mapCenter.latitude];if(s.autoFit===!1&&(c=[s.mapCenter.longitude,s.mapCenter.latitude]),(A=(S=e.chartExtRequest)==null?void 0:S.linkageFilters)!=null&&A.length&&(a==null?void 0:a.length)===2&&((C=e.data)!=null&&C.tableRow.length)){const L=(E=(v=e.data)==null?void 0:v.tableRow)==null?void 0:E[0][e.xAxis[0].dataeaseName],I=(k=(z=e.data)==null?void 0:z.tableRow)==null?void 0:k[0][e.xAxis[1].dataeaseName];c=[L,I]}const p=t.chartObj;let h=p==null?void 0:p.getScene();if(h?((N=h.getLayers())!=null&&N.length&&(await h.removeAllLayer(),h.setPitch(r.mapPitch),h.setMapStyle(d),h.map.showLabel=s.showLabel!==!1),s.autoFit===!1&&h.setZoomAndCenter(s.zoomLevel,c)):h=new vo({id:o,logoVisible:!1,map:new wo({token:(f==null?void 0:f.key)??void 0,style:d,pitch:r.mapPitch,center:c,zoom:s.autoFit===!1?s.zoomLevel:void 0,showLabel:s.showLabel!==!1,WebGLParams:{preserveDrawingBuffer:!0}})}),Ae(o),h.once("loaded",()=>{re(o)}),this.configZoomButton(e,h),(a==null?void 0:a.length)<2)return new zt(h,void 0);const g=[],y=await this.buildSymbolicLayer(e,h);g.push(y);const x=this.buildTooltip(e,o,y,h);return x&&h.addPopup(x),this.buildLabel(e,g),y.on("inited",()=>{e.container=o,Ke(e,y,y.sourceOption.data,h)}),y.on("click",L=>{const I=L.feature,T=[],O=[];e.data.fields.forEach((B,F)=>{Object.keys(I).forEach(M=>{M.startsWith("f_")&&B.dataeaseName===M&&(F===0?T.push({id:B.id,dataeaseName:B.dataeaseName,value:I[M]}):O.push({id:B.id,dataeaseName:B.dataeaseName,value:I[M]}))})}),i({x:L.x,y:L.y,data:{data:{...I,value:O[0].value,name:T[0].id,dimensionList:T,quotaList:O}}})}),new zt(h,g)}setupDefaultOptions(t){return t.customAttr.label={...t.customAttr.label,show:!1},t.customAttr.basicStyle={...t.customAttr.basicStyle,mapSymbolOpacity:5,mapStyle:"normal"},t}}const vn=Object.freeze(Object.defineProperty({__proto__:null,SymbolicMap:Cn},Symbol.toStringTag,{value:"Module"})),$i=["background-overall-component","border-style","dual-basic-style-selector","x-axis-selector","dual-y-axis-selector","title-selector","legend-selector","label-selector","tooltip-selector","assist-line","function-cfg","jump-set","linkage"],kt={"background-overall-component":["all"],"border-style":["all"],"label-selector":["fontSize","color"],"tooltip-selector":["fontSize","color","backgroundColor","show"],"dual-basic-style-selector":["colors","alpha","gradient","lineWidth","lineSymbol","lineSymbolSize","lineSmooth","radiusColumnBar","subSeriesColor","seriesColor","columnWidthRatio"],"x-axis-selector":["name","color","fontSize","position","axisLabel","axisLine","splitLine"],"dual-y-axis-selector":["name","color","fontSize","axisLabel","axisLine","splitLine","axisValue","axisLabelFormatter"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"legend-selector":["icon","orient","fontSize","color","hPosition","vPosition"],"function-cfg":["emptyDataStrategy"]},Ri=["xAxis","yAxis","drill","filter","extLabel","extTooltip"],Pe={...ot,subAlpha:100,subColorScheme:"fast",subSeriesColor:[],subColors:["#fae800","#00c039","#0482dc","#bb9581","#ff7701","#9c5ec3","#00ccdf","#00c039","#ff7701"],leftLineWidth:2,leftLineSymbol:"circle",leftLineSymbolSize:4,leftLineSmooth:!0},wn=Object.freeze(Object.defineProperty({__proto__:null,CHART_MIX_AXIS_TYPE:Ri,CHART_MIX_DEFAULT_BASIC_STYLE:Pe,CHART_MIX_EDITOR_PROPERTY:$i,CHART_MIX_EDITOR_PROPERTY_INNER:kt},Symbol.toStringTag,{value:"Module"})),{t:mt}=Y(),_n=[];class to extends Q{constructor(t="chart-mix"){super(t,_n);w(this,"properties",$i);w(this,"propertyInner",{...kt,"label-selector":["vPosition","seriesLabelFormatter"],"tooltip-selector":[...kt["tooltip-selector"],"seriesTooltipFormatter"]});w(this,"axis",[...Ri,"xAxisExtRight","yAxisExt"]);w(this,"axisConfig",{xAxis:{name:`${mt("chart.drag_block_type_axis")} / ${mt("chart.dimension")}`,type:"d"},yAxis:{name:`${mt("chart.drag_block_value_axis_left")} / ${mt("chart.column_quota")}`,limit:1,type:"q"},extBubble:{name:`${mt("chart.drag_block_type_axis_right")} / ${mt("chart.dimension")}`,limit:1,type:"d",allowEmpty:!0},yAxisExt:{name:`${mt("chart.drag_block_value_axis_right")} / ${mt("chart.line_quota")}`,limit:1,type:"q",allowEmpty:!0}})}getLeftType(){return"column"}getRightType(){return"line"}async drawChart(t){var S,A,C,v,E,z,k,N,L,I,T,O,B,F;const{chart:e,action:o,container:i}=t;if(!((C=(A=(S=e.data)==null?void 0:S.left)==null?void 0:A.data)!=null&&C.length)&&!((z=(E=(v=e.data)==null?void 0:v.right)==null?void 0:E.data)!=null&&z.length))return;const l=G((N=(k=e.data)==null?void 0:k.left)==null?void 0:N.data),n=G((I=(L=e.data)==null?void 0:L.right)==null?void 0:I.data),a=this.getLeftType(),s=this.getRightType(),r=this.name==="chart-mix-group"&&((T=e.xAxisExt)==null?void 0:T.length)>0,d=this.name==="chart-mix-stack"&&((O=e.extStack)==null?void 0:O.length)>0,f="category",c="category",p=bt((B=l[0])==null?void 0:B.data,[]),h=Ao(bt((F=n[0])==null?void 0:F.data,[]),M=>({...M,valueExt:M.value})),g={data:[p,h],xField:"field",yField:["value","valueExt"],appendPadding:nt(e),geometryOptions:[{geometry:a,color:[],isGroup:r,isStack:d,seriesField:f},{geometry:s,color:[],seriesField:c}],interactions:[{type:"legend-active",cfg:{start:[{trigger:"legend-item:mouseenter",action:["element-active:reset"]}],end:[{trigger:"legend-item:mouseleave",action:["element-active:reset"]}]}},{type:"legend-filter",cfg:{start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter","element-active:reset","element-highlight:reset"]}]}},{type:"active-region"}]},y=this.setupOptions(e,g),{DualAxes:x}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(M=>M.a8),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),b=new x(i,y);return b.on("point:click",o),b.on("interval:click",o),ft(e,b),b}configLabel(t,e){var s;const o=Se(t),i={...e};if(!o)return i.geometryOptions&&(i.geometryOptions[0].label=!1,i.geometryOptions[1].label=!1),i;const l=_(t.customAttr).label,n={};return(s=l.seriesLabelFormatter)==null||s.forEach(r=>{n[r.axisType]||(n[r.axisType]=[]),n[r.axisType].push(r)}),["yAxis","yAxisExt"].forEach(r=>{var c;const d=(c=n[r])==null?void 0:c.reduce((p,h)=>(p[h.id]=h,p),{});o.style.fill=Gt.color;const f={fields:[],...o,offsetY:-8,formatter:p=>{var x;if(!((x=l.seriesLabelFormatter)!=null&&x.length))return p.value;const h=d==null?void 0:d[p.quotaList[0].id];if(!h)return p.value;if(!h.show)return;const g=D(p.value,h.formatterCfg),y=new Ut({});return y.addShape({type:"text",attrs:{x:0,y:0,text:g,textAlign:"start",textBaseline:"top",fontSize:h.fontSize,fontFamily:t.fontFamily,fill:h.color}}),y}};i.geometryOptions&&(r==="yAxis"?i.geometryOptions[0].label=f:r==="yAxisExt"&&(i.geometryOptions[1].label=f))}),i}configBasicStyle(t,e){const o=_(t.customAttr),i=Ft(JSON.parse(JSON.stringify(o.basicStyle)),Pe),l=i.lineSmooth,n={size:i.lineSymbolSize,shape:i.lineSymbol,style:{stroke:$("#FFFFFF",i.subAlpha)}},a={lineWidth:i.lineWidth},s=i.leftLineSmooth,r={size:i.leftLineSymbolSize,shape:i.leftLineSymbol,style:{stroke:$("#FFFFFF",i.alpha)}},d={lineWidth:i.leftLineWidth},f={...e,smooth:l,point:n,lineStyle:a};if(f.geometryOptions&&(f.geometryOptions[0].smooth=s,f.geometryOptions[0].point=r,f.geometryOptions[0].lineStyle=d,f.geometryOptions[1].smooth=l,f.geometryOptions[1].point=n,f.geometryOptions[1].lineStyle=a,i.radiusColumnBar==="roundAngle")){const h={radius:[i.columnBarRightAngleRadius,i.columnBarRightAngleRadius,i.columnBarRightAngleRadius,i.columnBarRightAngleRadius]};f.geometryOptions[0].columnStyle=h,f.geometryOptions[1].columnStyle=h}let c;const p=i.columnWidthRatio??ot.columnWidthRatio;return p>=1&&p<=100?c=p/100:p<1?c=1/100:p>100&&(c=1),c&&(f.geometryOptions[0].columnWidthRatio=c),super.name!=="chart-mix-dual-line"&&(f.geometryOptions[0].appendPadding=nt(t)),f}setupDefaultOptions(t){const{customAttr:e,senior:o}=t;return(o.functionCfg.emptyDataStrategy==null||o.functionCfg.emptyDataStrategy==="ignoreData")&&(o.functionCfg.emptyDataStrategy="breakLine"),t}configCustomColors(t,e){const o={...e},i=_(t.customAttr).basicStyle,{seriesColor:l}=i;if(l!=null&&l.length){const a=l.reduce((r,d)=>(r[d.id]=d,r),{}),{yAxis:s}=t;s==null||s.forEach((r,d)=>{const f=a[r.id];f&&(d+1>i.colors.length?i.colors.push(f.color):i.colors[d]=f.color)})}const n=i.colors.map(a=>{const s=$(a,i.alpha);return i.gradient?tt(s,!0,270):s});return o.geometryOptions[0].color=n,o}configSubCustomColors(t,e){var a;const o={...e},i=Ft(_(t.customAttr).basicStyle,G(Pe)),{subSeriesColor:l}=i;if(l!=null&&l.length){const{yAxisExt:s,extBubble:r}=t,d=l.reduce((c,p)=>(c[p.id]=p,c),{}),{data:f}=e;if(r!=null&&r.length){const c=new Set;(a=f[1])==null||a.forEach(h=>h.category!==null&&c.add(h.category)),[...c].forEach((h,g)=>{const y=d[h];y&&(g+1>i.subColors.length?i.subColors.push(y.color):i.subColors[g]=y.color)})}else s==null||s.forEach((c,p)=>{const h=d[c.id];h&&(p+1>i.subColors.length?i.subColors.push(h.color):i.subColors[p]=h.color)})}const n=i.subColors.map(s=>$(s,i.subAlpha));return o.geometryOptions[1].color=n,o}setupSubSeriesColor(t,e){const o=[],i=new Set,l=t.customAttr.basicStyle.subColors??Pe.subColors,{yAxisExt:n,extBubble:a}=t;return a!=null&&a.length?e==null||e.forEach(s=>{s.value===null||s.category===null||i.has(s.category)||(i.add(s.category),o.push({id:s.category,name:s.category,color:l[(i.size-1)%l.length]}))}):n==null||n.forEach(s=>{i.has(s.id)||(i.add(s.id),o.push({id:s.id,name:s.chartShowName??s.name,color:l[(i.size-1)%l.length]}))}),o}configYAxis(t,e){const o=Xe(t),i=xi(t),l={...e};if(l.yAxis={},!o)l.yAxis.value=!1;else{l.yAxis.value=void 0,o.position="left";const n=_(t.customStyle).yAxis;o.label&&(o.label.style.textAlign="end",o.label.formatter=s=>D(s,n.axisLabelFormatter));const a=n.axisValue;a!=null&&a.auto?l.yAxis.value=o:l.yAxis.value={...o,min:a.min,max:a.max,minLimit:a.min,maxLimit:a.max,tickCount:a.splitCount}}if(!i)l.yAxis.valueExt=!1;else{l.yAxis.valueExt=void 0,i.position="right";const n=_(t.customStyle).yAxisExt;i.label&&(i.label.style.textAlign="start",i.label.formatter=s=>D(s,n.axisLabelFormatter));const a=n.axisValue;a!=null&&a.auto?l.yAxis.valueExt=i:l.yAxis.valueExt={...i,min:a.min,max:a.max,minLimit:a.min,maxLimit:a.max,tickCount:a.splitCount}}return l}configTooltip(t,e){var a;const i=_(t.customAttr).tooltip;if(!i.show)return{...e,tooltip:!1};const l=(a=i.seriesTooltipFormatter)==null?void 0:a.filter(s=>s.show).reduce((s,r)=>(s[r.id]=r,s),{}),n={shared:!0,showTitle:!0,customItems(s){var f,c;if(!((f=i.seriesTooltipFormatter)!=null&&f.length))return s;const r=s[0];if(!r.data.quotaList)return s;const d=[];return s.filter(p=>l[p.data.quotaList[0].id]).forEach(p=>{const h=l[p.data.quotaList[0].id],g=D(parseFloat(p.value),h.formatterCfg),y=p.data.category;d.push({...p,name:y,value:g})}),(c=r.data.dynamicTooltipValue)==null||c.forEach(p=>{const h=l[p.fieldId];if(h){const g=D(parseFloat(p.value),h.formatterCfg),y=W(h.chartShowName)?h.name:h.chartShowName;d.push({color:"grey",name:y,value:g})}}),d},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:n}}configLegend(t,e){var i,l,n,a;const o=super.configLegend(t,e);if(o.legend){const s=G((l=(i=t.data)==null?void 0:i.left)==null?void 0:l.data),r=G((a=(n=t.data)==null?void 0:n.right)==null?void 0:a.data);o.legend.itemName.formatter=(c,p,h)=>{var y,x;let g;return p.viewId==="left-axes-view"&&c==="value"?g=(y=s[0])==null?void 0:y.categories[0]:p.viewId==="right-axes-view"&&c==="valueExt"&&(g=(x=r[0])==null?void 0:x.categories[0]),p.id=p.id+"__"+h,g===void 0?c:g};const d=_(t.customStyle);let f;d&&d.legend?f=ce(JSON.parse(JSON.stringify(d.legend)),Lt).size:f=Lt.size,o.legend.marker.style=c=>{const p=c.fill??c.stroke;return{r:f,fill:p}}}return o}configAnalyse(t,e){var l,n,a,s;t.data.dynamicAssistLines=El(bt((n=(l=t.data)==null?void 0:l.left)==null?void 0:n.dynamicAssistLines,[]),bt((s=(a=t.data)==null?void 0:a.right)==null?void 0:s.dynamicAssistLines,[]));const o=bi(t),i={value:Re(o,r=>r.yAxisType==="left"),valueExt:Re(o,r=>r.yAxisType==="right")};return{...e,annotations:i}}setupOptions(t,e){return U(this.configTheme,this.configLabel,this.configTooltip,this.configBasicStyle,this.configCustomColors,this.configSubCustomColors,this.configLegend,this.configXAxis,this.configYAxis,this.configAnalyse,this.configEmptyDataStrategy)(t,e)}}class Ln extends to{constructor(t="chart-mix-group"){super(t);w(this,"axis",[...this.axis,"xAxisExt"]);w(this,"propertyInner",{...kt,"label-selector":["vPosition","seriesLabelFormatter"],"tooltip-selector":[...kt["tooltip-selector"],"seriesTooltipFormatter"]});w(this,"axisConfig",{...this.axisConfig,xAxisExt:{name:`${mt("chart.chart_group")} / ${mt("chart.dimension")}`,type:"d",limit:1,allowEmpty:!0}})}configCustomColors(t,e){var a;const o={...e},i=_(t.customAttr).basicStyle,{seriesColor:l}=i;if(l!=null&&l.length){const s=l.reduce((c,p)=>(c[p.id]=p,c),{}),{yAxis:r,xAxisExt:d}=t,{data:f}=e;if(d!=null&&d.length){const c=new Set;(a=f[0])==null||a.forEach(h=>h.category!==null&&c.add(h.category)),[...c].forEach((h,g)=>{const y=s[h];y&&(g+1>i.colors.length?i.colors.push(y.color):i.colors[g]=y.color)})}else r==null||r.forEach((c,p)=>{const h=s[c.id];h&&(p+1>i.colors.length?i.colors.push(h.color):i.colors[p]=h.color)})}const n=i.colors.map(s=>{const r=$(s,i.alpha);return i.gradient?tt(r,!0,270):r});return o.geometryOptions[0].color=n,o}setupSeriesColor(t,e){const o=[],i=new Set,l=t.customAttr.basicStyle.colors,{yAxis:n,xAxisExt:a}=t;return a!=null&&a.length?e==null||e.forEach(s=>{s.value===null||s.category===null||i.has(s.category)||(i.add(s.category),o.push({id:s.category,name:s.category,color:l[(i.size-1)%l.length]}))}):n==null||n.forEach(s=>{i.has(s.id)||(i.add(s.id),o.push({id:s.id,name:s.chartShowName??s.name,color:l[(i.size-1)%l.length]}))}),o}}class Tn extends to{constructor(t="chart-mix-stack"){super(t);w(this,"axis",[...this.axis,"extStack"]);w(this,"propertyInner",{...kt,"label-selector":["vPosition","seriesLabelFormatter"],"tooltip-selector":[...kt["tooltip-selector"],"seriesTooltipFormatter"]});w(this,"axisConfig",{...this.axisConfig,extStack:{name:`${mt("chart.stack_item")} / ${mt("chart.dimension")}`,type:"d",limit:1,allowEmpty:!0}})}configCustomColors(t,e){var a;const o={...e},i=_(t.customAttr).basicStyle,{seriesColor:l}=i;if(l!=null&&l.length){const s=l.reduce((c,p)=>(c[p.id]=p,c),{}),{yAxis:r,extStack:d}=t,{data:f}=e;if(d!=null&&d.length){const c=new Set;(a=f[0])==null||a.forEach(h=>h.category!==null&&c.add(h.category)),[...c].forEach((h,g)=>{const y=s[h];y&&(g+1>i.colors.length?i.colors.push(y.color):i.colors[g]=y.color)})}else r==null||r.forEach((c,p)=>{const h=s[c.id];h&&(p+1>i.colors.length?i.colors.push(h.color):i.colors[p]=h.color)})}const n=i.colors.map(s=>{const r=$(s,i.alpha);return i.gradient?tt(r,!0,270):r});return o.geometryOptions[0].color=n,o}setupSeriesColor(t,e){const o=[],i=new Set,l=t.customAttr.basicStyle.colors,{yAxis:n,extStack:a}=t;return a!=null&&a.length?e==null||e.forEach(s=>{s.value===null||s.category===null||i.has(s.category)||(i.add(s.category),o.push({id:s.category,name:s.category,color:l[(i.size-1)%l.length]}))}):n==null||n.forEach(s=>{i.has(s.id)||(i.add(s.id),o.push({id:s.id,name:s.chartShowName??s.name,color:l[(i.size-1)%l.length]}))}),o}}class En extends to{constructor(t="chart-mix-dual-line"){super(t);w(this,"axis",[...this.axis,"xAxisExt"]);w(this,"propertyInner",{...kt,"label-selector":["seriesLabelFormatter"],"tooltip-selector":[...kt["tooltip-selector"],"seriesTooltipFormatter"]});w(this,"axisConfig",{...this.axisConfig,xAxisExt:{name:`${mt("chart.drag_block_type_axis_left")} / ${mt("chart.dimension")}`,type:"d",limit:1,allowEmpty:!0}})}getLeftType(){return"line"}configCustomColors(t,e){var a;const o={...e},i=_(t.customAttr).basicStyle,{seriesColor:l}=i;if(l!=null&&l.length){const s=l.reduce((c,p)=>(c[p.id]=p,c),{}),{yAxis:r,xAxisExt:d}=t,{data:f}=e;if(d!=null&&d.length){const c=new Set;(a=f[0])==null||a.forEach(h=>h.category!==null&&c.add(h.category)),[...c].forEach((h,g)=>{const y=s[h];y&&(g+1>i.colors.length?i.colors.push(y.color):i.colors[g]=y.color)})}else r==null||r.forEach((c,p)=>{const h=s[c.id];h&&(p+1>i.colors.length?i.colors.push(h.color):i.colors[p]=h.color)})}const n=i.colors.map(s=>{const r=$(s,i.alpha);return i.gradient?tt(r,!0,270):r});return o.geometryOptions[0].color=n,o}setupSeriesColor(t,e){const o=[],i=new Set,l=t.customAttr.basicStyle.colors,{yAxis:n,xAxisExt:a}=t;return a!=null&&a.length?e==null||e.forEach(s=>{s.value===null||s.category===null||i.has(s.category)||(i.add(s.category),o.push({id:s.category,name:s.category,color:l[(i.size-1)%l.length]}))}):n==null||n.forEach(s=>{i.has(s.id)||(i.add(s.id),o.push({id:s.id,name:s.chartShowName??s.name,color:l[(i.size-1)%l.length]}))}),o}}const Fn=Object.freeze(Object.defineProperty({__proto__:null,ColumnLineMix:to,DualLineMix:En,GroupColumnLineMix:Ln,StackColumnLineMix:Tn},Symbol.toStringTag,{value:"Module"})),{t:Kt}=Y(),zn=[];class kn extends Q{constructor(){super("circle-packing",zn);w(this,"properties",["basic-style-selector","background-overall-component","border-style","label-selector","legend-selector","title-selector","tooltip-selector","jump-set","linkage"]);w(this,"propertyInner",{"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha","circleBorderStyle"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"function-cfg":["emptyDataStrategy"],"label-selector":["color","fontSize"],"legend-selector":["icon","orient","fontSize","color","hPosition","vPosition"],"tooltip-selector":["color","fontSize","backgroundColor","tooltipFormatter","show"]});w(this,"axis",["xAxis","yAxis","filter","drill"]);w(this,"axisConfig",{xAxis:{name:`${Kt("chart.circle_packing_name")} / ${Kt("chart.dimension")}`,type:"d",limit:1},yAxis:{name:`${Kt("chart.circle_packing_value")} / ${Kt("chart.quota")}`,type:"q",limit:1}})}async drawChart(t){var l,n,a;const{chart:e,container:o,action:i}=t;if((n=(l=e==null?void 0:e.data)==null?void 0:l.data)!=null&&n.length){const s=e.data.data,{xAxis:r,yAxis:d,drillFields:f}=e,c=((a=d[0])==null?void 0:a.sort)??"none",p={sort:(S,A)=>c==="asc"?S.value-A.value:c==="desc"?A.value-S.value:0},g={data:(()=>{const S=[{name:Kt("commons.all"),children:[]}],A=(C,v)=>{const E={...v,name:v.name,children:[]};C.push(E)};return s.forEach(C=>A(S[0].children,C)),S[0]})(),appendPadding:nt(e),hierarchyConfig:{...c==="none"?{}:p},interactions:[{type:"legend-active",cfg:{start:[{trigger:"legend-item:mouseenter",action:["element-active:reset"]}],end:[{trigger:"legend-item:mouseleave",action:["element-active:reset"]}]}},{type:"legend-filter",cfg:{start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter","element-active:reset","element-highlight:reset"]}]}}]},y=this.setupOptions(e,g),{CirclePacking:x}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(S=>S.a7),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),b=new x(o,y);return b.on("element:click",S=>{var v;const A=(v=S==null?void 0:S.data)==null?void 0:v.data;if((A==null?void 0:A.name)===Kt("commons.all"))return;const C={x:S.x,y:S.y,data:{data:{...A}}};i(C)}),b}}configBasicStyle(t,e){const o=_(t.customAttr),i=JSON.parse(JSON.stringify(o.basicStyle)),l={stroke:i.circleBorderColor,lineWidth:i.circleBorderWidth??0},n=i.circlePadding;return{...e,hierarchyConfig:{...e.hierarchyConfig,padding:n/100},pointStyle:l}}configLabel(t,e){const o=super.configLabel(t,e);if(!o.label)return{...o,label:!1};const{label:i}=_(t.customAttr),l={...o.label,textAlign:"center",offsetY:5,layout:i.fullDisplay?[{type:"limit-in-plot"}]:o.label.layout,formatter:(n,a)=>n.children.length===0?n.name:""};return{...o,label:l}}configTooltip(t,e){const o=super.configTooltip(t,e);if(!o.tooltip)return o;const i=_(t.customAttr).tooltip;return{...o,tooltip:{...o,fields:["name","value"],formatter:l=>{let n=l.value;return i.tooltipFormatter&&(n=D(n,i.tooltipFormatter)),{name:l.name,value:n}}}}}configEmptyDataStrategy(t,e){const{functionCfg:o}=_(t.senior),i=o.emptyDataStrategy,l=a=>{var s,r,d,f,c;if(i==="ignoreData")for(let p=a.length-1;p>=0;p--){let h=[];(s=a[p].children)!=null&&s.length&&(h=a[p].children.filter(g=>g.value!==null)),(r=a[p].children)!=null&&r.length&&h.length&&l(a[p].children),(d=a[p])!=null&&d.hasOwnProperty("value")&&a[p].value===null&&a.splice(p,1),!((f=a[p])!=null&&f.hasOwnProperty("value"))&&h.length===0&&a.splice(p,1)}else for(let p=a.length-1;p>=0;p--){let h=[];if((c=a[p].children)!=null&&c.length&&(h=a[p].children.filter(g=>g.value!==null),!h.length)){a[p].children=[];continue}l(a[p].children)}},n=G(e.data.children);return l(n),e.data.children=n,e}setupDefaultOptions(t){const{customAttr:e,customStyle:o,senior:i}=t,{label:l,basicStyle:n}=e,{legend:a}=o;return i.functionCfg.emptyDataStrategy="ignoreData",e.label={...l,show:!0},a.show=!1,n.circleBorderWidth=0,n.circleBorderColor="#fff",n.circlePadding=0,t}setupOptions(t,e){return U(this.configTheme,this.configEmptyDataStrategy,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend)(t,e)}}const On=Object.freeze(Object.defineProperty({__proto__:null,CirclePacking:kn},Symbol.toStringTag,{value:"Module"})),{t:pe}=Y();class In extends Q{constructor(){super("funnel",[]);w(this,"properties",["background-overall-component","border-style","basic-style-selector","label-selector","tooltip-selector","title-selector","legend-selector","jump-set","linkage"]);w(this,"propertyInner",{"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha","seriesColor"],"label-selector":["fontSize","color","hPosition","showQuota","conversionTag"],"tooltip-selector":["color","fontSize","backgroundColor","seriesTooltipFormatter","show"],"title-selector":["show","title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"legend-selector":["icon","orient","color","fontSize","hPosition","vPosition"]});w(this,"axis",["xAxis","yAxis","filter","drill","extLabel","extTooltip"]);w(this,"axisConfig",{xAxis:{name:`${pe("chart.drag_block_funnel_split")} / ${pe("chart.dimension")}`,type:"d"},yAxis:{name:`${pe("chart.drag_block_funnel_width")} / ${pe("chart.quota")}`,type:"q",limit:1}})}async drawChart(t){var d;const{chart:e,container:o,action:i}=t;if(!((d=e.data)!=null&&d.data))return;const n={data:e.data.data,xField:"field",yField:"value",appendPadding:nt(e),interactions:[{type:"legend-active",cfg:{start:[{trigger:"legend-item:mouseenter",action:["element-active:reset"]}],end:[{trigger:"legend-item:mouseleave",action:["element-active:reset"]}]}},{type:"legend-filter",cfg:{start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter","element-active:reset","element-highlight:reset"]}]}},{type:"tooltip",cfg:{start:[{trigger:"interval:mousemove",action:"tooltip:show"}],end:[{trigger:"interval:mouseleave",action:"tooltip:hide"}]}}],meta:{field:{type:"cat"}}},a=this.setupOptions(e,n),{Funnel:s}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(f=>f.a0),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),r=new s(o,a);return r.on("interval:click",i),ft(e,r),r}configLabel(t,e){var n;let o,i,l;if(t.customAttr){l=_(t.customAttr);const a=l.label.showQuota,s=l.label;if((n=l.label)!=null&&n.show){if(a){const d=[];s.fullDisplay||d.push({type:"hide-overlap"},{type:"limit-in-plot"}),o={position:s.position,layout:d,style:{fill:s.color,fontSize:s.fontSize},formatter:function(c){return D(c.value,s.quotaLabelFormatter)}},o.position==="right"&&(o.offsetX=-40)}const r=_(t.customAttr).label.conversionTag;r&&r.show&&(i={style:{fill:s.color,fontSize:s.fontSize},formatter:d=>{if(!d.$$conversion$$[0])return`${r.text??""} -`;const f=(d.$$conversion$$[1]/d.$$conversion$$[0]*100).toFixed(r.precision);return`${r.text??""} ${f}%`}})}return{...e,label:o,conversionTag:i,maxSize:i?.8:1}}return e}setupSeriesColor(t,e){return be(t,e)}setupOptions(t,e){return U(this.configTheme,this.configSingleDimensionColor,this.configLabel,this.configMultiSeriesTooltip,this.configLegend)(t,e)}setupDefaultOptions(t){const{customAttr:e,customStyle:o}=t,{label:i}=e;["left","middle","right"].includes(i.position)||(i.position="middle"),e.label={...i,show:!0,showQuota:!0,conversionTag:{show:!1,precision:2,text:pe("chart.conversion_rate")}};const{legend:l}=o;return l.show=!1,t}}const Nn=Object.freeze(Object.defineProperty({__proto__:null,Funnel:In},Symbol.toStringTag,{value:"Module"})),{t:so}=Y(),Bn=[];class Dn extends Q{constructor(){super("gauge",Bn);w(this,"properties",["background-overall-component","border-style","basic-style-selector","label-selector","misc-selector","title-selector","threshold"]);w(this,"propertyInner",{"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha","gradient","gaugeAxisLine","gaugePercentLabel"],"label-selector":["fontSize","color","labelFormatter"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"misc-selector":["gaugeMinType","gaugeMinField","gaugeMin","gaugeMaxType","gaugeMaxField","gaugeMax","gaugeStartAngle","gaugeEndAngle"],threshold:["gaugeThreshold"]});w(this,"axis",["yAxis","filter"]);w(this,"axisConfig",{yAxis:{name:`${so("chart.drag_block_gauge_angel")} / ${so("chart.quota")}`,type:"q",limit:1}})}async drawChart(t){var f,c;const{chart:e,container:o,scale:i,action:l}=t;if(!((f=e.data)!=null&&f.series)||!e.yAxis.length)return;const n={percent:0,appendPadding:nt(e),axis:{tickInterval:.2,label:{style:{fontSize:Rt(12,i)}},tickLine:{length:Rt(12,i)*-1,style:{lineWidth:Rt(1,i)}},subTickLine:{count:4,length:Rt(6,i)*-1,style:{lineWidth:Rt(1,i)}}}},a=this.setupOptions(e,n,{scale:i}),{Gauge:s}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(p=>p.a1),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),r=new s(o,a);r.on("afterrender",()=>{var p,h;l({from:"gauge",data:{type:"gauge",max:(h=(p=e.data)==null?void 0:p.series[0])==null?void 0:h.data[0]}})});const d=(c=e.data)==null?void 0:c.series.some(p=>{var h;return!((h=p.data)!=null&&h[0])});if(this.configEmptyDataStyle(d?[]:[1],o,r),!d)return r}configMisc(t,e,o){var c,p,h,g,y,x,b,S,A,C,v,E,z,k,N;const i=_(t.customAttr),l=t.data.series[0].data[0];let n,a,s,r;if(i.misc){const L=i.misc;L.gaugeMinType==="dynamic"&&L.gaugeMaxType==="dynamic"?(n=(h=(p=t.data)==null?void 0:p.series[((c=t.data)==null?void 0:c.series.length)-2])==null?void 0:h.data[0],a=(x=(y=t.data)==null?void 0:y.series[((g=t.data)==null?void 0:g.series.length)-1])==null?void 0:x.data[0]):L.gaugeMinType!=="dynamic"&&L.gaugeMaxType==="dynamic"?(n=L.gaugeMin||L.gaugeMin===0?L.gaugeMin:qt.gaugeMin,a=(A=(S=t.data)==null?void 0:S.series[((b=t.data)==null?void 0:b.series.length)-1])==null?void 0:A.data[0]):L.gaugeMinType==="dynamic"&&L.gaugeMaxType!=="dynamic"?(n=(E=(v=t.data)==null?void 0:v.series[((C=t.data)==null?void 0:C.series.length)-1])==null?void 0:E.data[0],a=L.gaugeMax?L.gaugeMax:qt.gaugeMax):(n=L.gaugeMin||L.gaugeMin===0?L.gaugeMin:qt.gaugeMin,a=L.gaugeMax?L.gaugeMax:(N=(k=t.data)==null?void 0:k.series[((z=t.data)==null?void 0:z.series.length)-1])==null?void 0:N.data[0]),s=L.gaugeStartAngle*Math.PI/180,r=L.gaugeEndAngle*Math.PI/180,o.min=n,o.max=a}const f={percent:(parseFloat(l)-parseFloat(n))/(parseFloat(a)-parseFloat(n)),startAngle:s,endAngle:r};return{...e,...f}}configRange(t,e,o){var c;const{scale:i}=o,l=[0];let n=0,a=!1,s=!1;const r=e.theme;if(t.senior){const h=_(t.senior).threshold??wl;if(h.enable&&h.gaugeThreshold){s=!0;const g=h.gaugeThreshold.split(",");for(let y=0;y<g.length;y++){const x=g[y],b=parseFloat(x)/100;l.push(b),!a&&e.percent<=b&&(a=!0,n=y)}a||(n=g.length)}}l.push(1);let d;if(s?d={range:{color:r.styleSheet.paletteQualitative10,ticks:l},indicator:{pointer:{style:{stroke:r.styleSheet.paletteQualitative10[n%r.styleSheet.paletteQualitative10.length]}},pin:{style:{stroke:r.styleSheet.paletteQualitative10[n%r.styleSheet.paletteQualitative10.length],r:Rt(10,i)}}}}:d={indicator:{pin:{style:{r:Rt(10,i)}}}},_(t.customAttr).basicStyle.gradient){const p=(((c=r.styleSheet)==null?void 0:c.paletteQualitative10)||[]).map(h=>tt(h,!0));d.range?d.range.color=p:d.range={color:p}}return{...e,...d}}configLabel(t,e,o){const i=_(t.customAttr),l=t.data.series[0].data[0];let n=!1,a=!1;const s=i.label,r=s.labelFormatter??Gt.labelFormatter;s.show&&s.childrenShow&&(n={style:{fontSize:`${s.fontSize}px`,color:s.color},formatter:function(){let y;return r.type==="percent"?y=e.percent:y=l,D(y,r)}});const{min:d,max:f}=o;if(s.show&&s.proportionSeriesFormatter.show){const y=s.proportionSeriesFormatter;a={offsetY:y.fontSize+s.fontSize,style:{fontSize:`${y.fontSize}px`,color:y.color},formatter:function(){const x=(parseFloat(l)-d)/(f-d)*100;return so("chart.proportion")+"： "+x.toFixed(y.formatterCfg.decimalCount)+"%"}}}const c={title:n,content:a},{gaugeAxisLine:p,gaugePercentLabel:h}=i.basicStyle;return e=xt(e,{axis:{label:{formatter:y=>{if(p===!1)return"";if(h===!1){const x=y==="0"?d:y==="1"?f:d+(f-d)*y;return r.type==="value"?D(x,r):x}return y==="0"?y:y*100+"%"}}}}),{...e,statistic:c}}setupDefaultOptions(t){return t.customAttr.label={...t.customAttr.label,show:!0,labelFormatter:{type:"value",thousandSeparator:!0,decimalCount:0,unit:1}},t}setupOptions(t,e,o){return U(this.configTheme,this.configMisc,this.configLabel,this.configRange)(t,e,o)}}const Mn=Object.freeze(Object.defineProperty({__proto__:null,Gauge:Dn},Symbol.toStringTag,{value:"Module"})),{t:Pn}=Y();class $n extends Ce{constructor(){super(Ze.CUSTOM,$t.INDICATOR,"indicator");w(this,"selectorSpec");w(this,"properties",["background-overall-component","border-style","title-selector","indicator-value-selector","indicator-name-selector","threshold","function-cfg"]);w(this,"propertyInner",{"background-overall-component":["all"],"border-style":["all"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"indicator-value-selector":["fontSize","color","hPosition","isItalic","isBolder","fontFamily","letterSpace","fontShadow"],"indicator-name-selector":["title","fontSize","color","hPosition","isItalic","isBolder","fontFamily","letterSpace","fontShadow"],"function-cfg":["emptyDataStrategy"]});w(this,"axis",["yAxis","filter"]);w(this,"axisConfig",{yAxis:{name:`${Pn("chart.quota")}`,limit:1}})}setupDefaultOptions(t){const e=_l[0].colors;return t.customAttr.basicStyle.colors=e,t.customAttr.indicator.color=e[0],t.customAttr.indicatorName.color=e[1],t}}const Rn=Object.freeze(Object.defineProperty({__proto__:null,IndicatorChartView:$n},Symbol.toStringTag,{value:"Module"})),{t:Go}=Y();class Hn extends Ce{constructor(){super(Ze.CUSTOM,$t.PICTURE_GROUP,"picture-group");w(this,"properties",["background-overall-component","border-style","threshold"]);w(this,"propertyInner",{"background-overall-component":["all"],"border-style":["all"],threshold:["tableThreshold"]});w(this,"axis",["xAxis","yAxis","filter"]);w(this,"axisConfig",{xAxis:{name:`${Go("chart.dimension")}`,type:"d"},yAxis:{name:`${Go("chart.quota")}`,type:"q"}})}}const Wn=Object.freeze(Object.defineProperty({__proto__:null,PictureGroupView:Hn},Symbol.toStringTag,{value:"Module"})),{t:Nt}=Y();class Vn extends Q{constructor(){super("quadrant",[]);w(this,"properties",["background-overall-component","border-style","basic-style-selector","x-axis-selector","y-axis-selector","title-selector","label-selector","tooltip-selector","legend-selector","jump-set","linkage","quadrant-selector"]);w(this,"propertyInner",{"basic-style-selector":["colors","alpha","scatterSymbol","scatterSymbolSize","seriesColor"],"label-selector":["fontSize","color"],"tooltip-selector":["fontSize","color","backgroundColor","seriesTooltipFormatter","show"],"x-axis-selector":["position","name","color","fontSize","axisLine","axisValue","splitLine","axisForm","axisLabel","axisLabelFormatter"],"y-axis-selector":["position","name","color","fontSize","axisValue","axisLine","splitLine","axisForm","axisLabel","axisLabelFormatter"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"legend-selector":["icon","orient","color","fontSize","hPosition","vPosition"],"quadrant-selector":["regionStyle","label","lineStyle"]});w(this,"axis",["xAxis","yAxis","yAxisExt","extBubble","filter","drill","extLabel","extTooltip"]);w(this,"axisConfig",{extBubble:{name:`${Nt("chart.bubble_size")} / ${Nt("chart.quota")}`,type:"q",limit:1,allowEmpty:!0},xAxis:{name:`${Nt("chart.form_type")} / ${Nt("chart.dimension")}`,type:"d",limit:1},yAxis:{name:`${Nt("chart.x_axis")} / ${Nt("chart.quota")}`,type:"q",limit:1},yAxisExt:{name:`${Nt("chart.y_axis")} / ${Nt("chart.quota")}`,type:"q",limit:1}})}getFieldObject(t){var n,a,s,r,d,f,c,p;const e={id:(n=t.xAxis[0])==null?void 0:n.id,name:(a=t.xAxis[0])==null?void 0:a.originName},o={id:(s=t.extBubble[0])==null?void 0:s.id,name:(r=t.extBubble[0])==null?void 0:r.originName},i={id:(d=t.yAxis[0])==null?void 0:d.id,name:(f=t.yAxis[0])==null?void 0:f.originName},l={id:(c=t.yAxisExt[0])==null?void 0:c.id,name:(p=t.yAxisExt[0])==null?void 0:p.originName};return{colorFieldObj:e,sizeFieldObj:o,xFieldObj:i,yFieldObj:l}}getUniqueObjects(t){return[...new Set(t.map(JSON.stringify))].map(JSON.parse)}async drawChart(t){var k,N,L,I;const{chart:e,container:o,action:i,quadrantDefaultBaseline:l}=t;if(!((k=e.data)!=null&&k.data))return;const n=G(e.data.data),a=bt((N=n[0])==null?void 0:N.data,[]),s=bt((L=n[1])==null?void 0:L.data,[]),r=bt((I=n[2])==null?void 0:I.data,[]),d=a.map(T=>{var O;return{...T,id:(O=T.quotaList[0])==null?void 0:O.id,field:T.field,value:T.value}}),f=s.map(T=>{var O;return{...T,id:(O=T.quotaList[0])==null?void 0:O.id,field:T.field,value:T.value}}),c=r.map(T=>{var O;return{...T,id:(O=T.quotaList[0])==null?void 0:O.id,field:T.field,value:T.value}}),p=d.map(T=>T.value),h=((Math.max(...p)+Math.min(...p))/2).toFixed(),g=f.map(T=>T.value),y=((Math.max(...g)+Math.min(...g))/2).toFixed(),x={...e.customAttr.quadrant};x.xBaseline===void 0&&(x.xBaseline=h,x.yBaseline=y);const b=T=>{var F,M;const O=(F=c.find(R=>R.field===T.field))==null?void 0:F.quotaList,B=(M=f.find(R=>R.field===T.field))==null?void 0:M.quotaList;return JSON.stringify(O)===JSON.stringify(B)?B:[...O||[],...B||[]]},S=Ao(bt(d,[]),T=>{var O,B;return{...T,yAxis:T.value,quotaList:b(T),yAxisExt:(O=f.find(F=>F.field===T.field))==null?void 0:O.value,extBubble:(B=c.find(F=>F.field===T.field))==null?void 0:B.value}}),A={colorField:"field",meta:{field:{type:"cat"}},quadrant:{...x},data:S,xField:"yAxis",yField:"yAxisExt",appendPadding:30,pointStyle:{fillOpacity:.8,stroke:"#bbb"}};e.container=o;const C=this.setupOptions(e,A),{Scatter:v}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(T=>T.a4),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),E=new v(o,C);E.on("point:click",i),E.on("click",()=>l(x)),E.on("afterrender",()=>l(x));const z=_(e.customStyle).yAxis;return z!=null&&z.name&&(ws(e,E),Xt(e,E,"axis-title")),ft(e,E),E}configBasicStyle(t,e){var l;const i=_(t.customAttr).basicStyle;return(l=t.extBubble)!=null&&l.length?{...e,size:[4,30],sizeField:"extBubble",shape:i.scatterSymbol}:{...e,size:i.scatterSymbolSize,shape:i.scatterSymbol}}configXAxis(t,e){const o=super.configXAxis(t,e);if(!o.xAxis)return o;const i=_(t.customStyle).xAxis;o.xAxis.label&&(o.xAxis.label.formatter=n=>D(n,i.axisLabelFormatter));const l=i.axisValue;if(!(l!=null&&l.auto)){const n={xAxis:{...o.xAxis,min:l.min,max:l.max,minLimit:l.min,maxLimit:l.max,tickCount:l.splitCount}};return{...o,...n}}return o}configYAxis(t,e){const o=super.configYAxis(t,e);if(!o.yAxis)return o;const i=_(t.customStyle).yAxis;o.yAxis.label&&(o.yAxis.label.formatter=n=>D(n,i.axisLabelFormatter));const l=i.axisValue;if(!(l!=null&&l.auto)){const n={yAxis:{...o.yAxis,min:l.min,max:l.max,minLimit:l.min,maxLimit:l.max,tickCount:l.splitCount}};return{...o,...n}}return o}configLabel(t,e){let o,i;if(t.customAttr&&(i=_(t.customAttr),i.label)){const l=i.label;if(l.show){const n=[];l.fullDisplay||(n.push({type:"hide-overlap"}),n.push({type:"limit-in-shape"})),o={offset:0,style:{fill:l.color,fontSize:l.fontSize},content:a=>a.name,layout:n}}else o=!1}return{...e,label:o}}configTooltip(t,e){var f;const i=_(t.customAttr).tooltip,l=t.xAxis[0],n=t.yAxis[0],a=t.yAxisExt[0];if(!i.show||!l&&!n&&!a)return{...e,tooltip:!1};const s=(f=i.seriesTooltipFormatter)==null?void 0:f.filter(c=>c.show).reduce((c,p)=>(c[p.seriesId]=p,c),{}),r=G(e.data),d={showTitle:!0,title:(c,p)=>p==null?void 0:p.name,customItems(c){var g,y;if(!((g=i.seriesTooltipFormatter)!=null&&g.length))return c;const p=[];c.forEach(x=>{Object.keys(s).forEach(b=>{if(b.endsWith(x.name)){const S=s[b];if(S){const A=S.groupType==="q"?D(parseFloat(x.value),S.formatterCfg):x.value,C=W(S.chartShowName)?S.name:S.chartShowName;p.push({color:x.color,name:C,value:A})}}})});const h=(y=r.find(x=>x.field===c[0].title))==null?void 0:y.dynamicTooltipValue;return h.length>0&&h.forEach(x=>{const b=i.seriesTooltipFormatter.filter(S=>S.id===x.fieldId);if(b&&b.length>0){const S=D(parseFloat(x.value),b[0].formatterCfg),A=W(b[0].chartShowName)?b[0].name:b[0].chartShowName;p.push({color:"grey",name:A,value:S})}}),p},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:d}}setupDefaultOptions(t){return t.customStyle.yAxis.splitLine={...t.customStyle.yAxis.splitLine,show:!1},t.customStyle.yAxisExt.splitLine={...t.customStyle.yAxisExt.splitLine,show:!1},t.customStyle.yAxis.axisLine={...t.customStyle.yAxis.axisLine,show:!0},t.customStyle.yAxisExt.axisLine={...t.customStyle.yAxisExt.axisLine,show:!0},t}configColor(t,e){const{xAxis:o,yAxis:i,yAxisExt:l}=t;return o!=null&&o.length&&(i!=null&&i.length)&&(l!=null&&l.length)?this.configSingleDimensionColor(t,e):e}setupSeriesColor(t,e){var a;const{xAxis:o,yAxis:i,yAxisExt:l}=t;if(!(o!=null&&o.length&&(i!=null&&i.length)&&(l!=null&&l.length)))return[];const n=(a=e==null?void 0:e[0])==null?void 0:a.data;return be(t,n)}configLegend(t,e){const o=super.configLegend(t,e);if(!o.legend)return o;const i=_(t.customStyle);let l;return i&&i.legend?l=ce(JSON.parse(JSON.stringify(i.legend)),Lt).size:l=Lt.size,o.legend.marker.style=n=>({r:l,fill:n.fill}),o}setupOptions(t,e){return U(this.configTheme,this.configColor,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configAnalyse,this.configSlider,this.configBasicStyle)(t,e,{},this)}}const Yn=Object.freeze(Object.defineProperty({__proto__:null,Quadrant:Vn},Symbol.toStringTag,{value:"Module"})),{t:he}=Y();class qn extends Q{constructor(){super("radar",[]);w(this,"properties",["background-overall-component","border-style","basic-style-selector","label-selector","tooltip-selector","title-selector","legend-selector","misc-style-selector","jump-set","linkage"]);w(this,"propertyInner",{"basic-style-selector":["colors","alpha","radarShape","seriesColor","radarShowPoint","radarPointSize","radarAreaColor"],"label-selector":["seriesLabelFormatter"],"tooltip-selector":["color","fontSize","backgroundColor","seriesTooltipFormatter","show"],"misc-style-selector":["showName","color","fontSize","axisColor","axisValue"],"title-selector":["show","title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"legend-selector":["icon","orient","color","fontSize","hPosition","vPosition"]});w(this,"selectorSpec",{...this.selectorSpec,"misc-style-selector":{title:`${he("chart.tooltip_axis")}`}});w(this,"axis",["xAxis","yAxis","drill","filter","extLabel","extTooltip"]);w(this,"axisConfig",{xAxis:{name:`${he("chart.drag_block_radar_label")} / ${he("chart.dimension")}`,type:"d"},yAxis:{name:`${he("chart.drag_block_radar_length")} / ${he("chart.quota")}`,type:"q"}})}async drawChart(t){var d;const{chart:e,container:o,action:i}=t;if(!((d=e.data)!=null&&d.data))return;const n={data:e.data.data,xField:"field",yField:"value",seriesField:"category",appendPadding:[10,10,10,10],interactions:[{type:"legend-active",cfg:{start:[{trigger:"legend-item:mouseenter",action:["element-active:reset"]}],end:[{trigger:"legend-item:mouseleave",action:["element-active:reset"]}]}},{type:"legend-filter",cfg:{start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter","element-active:reset","element-highlight:reset"]}]}},{type:"active-region",cfg:{start:[{trigger:"point:mousemove",action:"active-region:show"}],end:[{trigger:"point:mouseleave",action:"active-region:hide"}]}}]},a=this.setupOptions(e,n),{Radar:s}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(f=>f.ab),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),r=new s(o,a);return r.on("point:click",i),a.label&&r.on("label:click",f=>{i({x:f.x,y:f.y,data:{data:f.target.attrs.data}})}),ft(e,r),r}configBasicStyle(t,e){const{radarShowPoint:o,radarPointSize:i,radarAreaColor:l}=_(t.customAttr).basicStyle,n={};return o&&(n.point={shape:"circle",size:i,style:{fill:null}}),l&&(n.area={}),{...e,...n}}configLabel(t,e){var a;const o=super.configLabel(t,e);if(!o.label)return{...o,label:!1};const i=_(t.customAttr).label,l=(a=i.seriesLabelFormatter)==null?void 0:a.reduce((s,r)=>(s[r.id]=r,s),{});o.label.style.fill=Gt.color;const n={fields:[],...o.label,autoRotate:!1,autoHide:!0,formatter:s=>{var c;if(!((c=i.seriesLabelFormatter)!=null&&c.length))return s.value;const r=l==null?void 0:l[s.quotaList[0].id];if(!r)return s.value;if(!r.show)return;const d=D(s.value,r.formatterCfg),f=new Ut({});return f.addShape({type:"text",attrs:{data:s,x:0,y:0,text:d,textAlign:"start",textBaseline:"top",fontSize:r.fontSize,fill:r.color}}),f}};return{...o,label:n}}configAxis(t,e){const o=_(t.customAttr),i=_(t.customStyle),l=o.basicStyle,n=i.misc;let a={style:{fill:n.color,fontSize:n.fontSize}};n.showName||(a=!1);const s={line:null,tickLine:null,label:a,grid:{line:{style:{stroke:n.axisColor}}}},r={label:null,line:null,tickLine:null,grid:{line:{type:l.radarShape,style:{stroke:n.axisColor}}}},d=n.axisValue;if(!(d!=null&&d.auto)){const f={...r,min:d.min,max:d.max,minLimit:d.min,maxLimit:d.max,tickCount:d.splitCount};return{...e,xAxis:s,yAxis:f}}return{...e,xAxis:s,yAxis:r}}configLegend(t,e){const o=super.configLegend(t,e);if(!o.legend)return o;const i=_(t.customStyle);let l;return i&&i.legend?l=ce(JSON.parse(JSON.stringify(i.legend)),Lt).size:l=Lt.size,o.legend.marker.style=n=>({r:l,fill:n.stroke}),o}setupOptions(t,e){return U(this.configTheme,this.configColor,this.configLabel,this.configLegend,this.configMultiSeriesTooltip,this.configAxis,this.configBasicStyle)(t,e)}}const jn=Object.freeze(Object.defineProperty({__proto__:null,Radar:qn},Symbol.toStringTag,{value:"Module"})),{t:Uo}=Y();class Gn extends Ce{constructor(){super(Ze.CUSTOM,$t.RICH_TEXT,"rich-text");w(this,"properties",["background-overall-component","border-style","threshold","function-cfg"]);w(this,"propertyInner",{"background-overall-component":["all"],"border-style":["all"],threshold:["tableThreshold"],"function-cfg":["emptyDataStrategy"]});w(this,"axis",["xAxis","yAxis","filter"]);w(this,"axisConfig",{xAxis:{name:`${Uo("chart.dimension")}`,type:"d",allowEmpty:!0},yAxis:{name:`${Uo("chart.quota")}`,type:"q",allowEmpty:!0}})}}const Un=Object.freeze(Object.defineProperty({__proto__:null,RichTextChartView:Gn},Symbol.toStringTag,{value:"Module"})),Hi=["background-overall-component","border-style","basic-style-selector","label-selector","tooltip-selector","title-selector","jump-set","linkage"],Wi={"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha","gradient"],"label-selector":["fontSize","color","labelFormatter"],"tooltip-selector":["fontSize","color","tooltipFormatter"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"function-cfg":["slider","emptyDataStrategy"]},Vi=["xAxis","xAxisExt","yAxis","filter","extLabel","extTooltip"],Xn=Object.freeze(Object.defineProperty({__proto__:null,SANKEY_AXIS_TYPE:Vi,SANKEY_EDITOR_PROPERTY:Hi,SANKEY_EDITOR_PROPERTY_INNER:Wi},Symbol.toStringTag,{value:"Module"})),{t:te}=Y(),Jn=[];class Zn extends Q{constructor(t="sankey"){super(t,Jn);w(this,"axisConfig",{xAxis:{name:`${te("chart.drag_block_type_axis_start")} / ${te("chart.dimension")}`,limit:1,type:"d"},xAxisExt:{name:`${te("chart.drag_block_type_axis_end")} / ${te("chart.dimension")}`,limit:1,type:"d",allowEmpty:!0},yAxis:{name:`${te("chart.chart_data")} / ${te("chart.quota")}`,limit:1,type:"q"}});w(this,"properties",Hi);w(this,"propertyInner",{...Wi,"label-selector":["color","fontSize"],"tooltip-selector":["fontSize","color","backgroundColor","tooltipFormatter","show"]});w(this,"axis",[...Vi]);w(this,"baseOptions",{data:[],sourceField:"source",targetField:"target",weightField:"value",rawFields:["dimensionList","quotaList"],interactions:[{type:"legend-active",cfg:{start:[{trigger:"legend-item:mouseenter",action:["element-active:reset"]}],end:[{trigger:"legend-item:mouseleave",action:["element-active:reset"]}]}},{type:"legend-filter",cfg:{start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter","element-active:reset","element-highlight:reset"]}]}},{type:"tooltip",cfg:{start:[{trigger:"interval:mousemove",action:"tooltip:show"}],end:[{trigger:"interval:mouseleave",action:"tooltip:hide"}]}},{type:"active-region",cfg:{start:[{trigger:"interval:mousemove",action:"active-region:show"}],end:[{trigger:"interval:mouseleave",action:"active-region:hide"}]}}]})}async drawChart(t){var d,f;const{chart:e,container:o,action:i}=t;if(!((f=(d=e.data)==null?void 0:d.data)!=null&&f.length))return;const l=G(e.data.data);l.forEach(c=>{c.dimensionList&&(c.dimensionList[0]&&(c.source=c.dimensionList[0].value),c.dimensionList[1]&&(c.target=c.dimensionList[1].value))});const n={...this.baseOptions,appendPadding:nt(e),data:l,nodeSort:(c,p)=>{if(e.yAxis&&e.yAxis[0]){if(e.yAxis[0].sort==="asc")return c.value-p.value;if(e.yAxis[0].sort==="desc")return p.value-c.value}if(e.xAxis&&e.xAxis[0]&&c.sourceLinks.length>0){if(e.xAxis[0].sort==="custom_sort"&&e.xAxis[0].customSort)return e.xAxis[0].customSort.indexOf(c.name)-e.xAxis[0].customSort.indexOf(p.name);if(e.xAxis[0].sort==="asc")return c.name.localeCompare(p.name);if(e.xAxis[0].sort==="desc")return p.name.localeCompare(c.name)}if(e.xAxisExt&&e.xAxisExt[0]&&c.targetLinks.length>0){if(e.xAxisExt[0].sort==="custom_sort"&&e.xAxisExt[0].customSort)return e.xAxisExt[0].customSort.indexOf(c.name)-e.xAxisExt[0].customSort.indexOf(p.name);if(e.xAxisExt[0].sort==="asc")return c.name.localeCompare(p.name);if(e.xAxisExt[0].sort==="desc")return p.name.localeCompare(c.name)}return p.value-c.value}},a=this.setupOptions(e,n),{Sankey:s}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(c=>c.ad),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),r=new s(o,a);return r.on("edge:click",i),r}configTooltip(t,e){let o,i;if(t.customAttr&&(i=_(t.customAttr),i.tooltip)){const l=JSON.parse(JSON.stringify(i.tooltip));l.show?o={showTitle:!1,showMarkers:!1,shared:!1,showContent:n=>!st(n,[0,"data","isNode"]),formatter:n=>{const{source:a,target:s,value:r}=n;return{name:a+" -> "+s,value:D(r,l.tooltipFormatter)}}}:o=!1}return{...e,tooltip:o}}configBasicStyle(t,e){const o=_(t.customAttr).basicStyle;let i=o.colors;return i=i.map(l=>{const n=$(l,o.alpha);return o.gradient?tt(n,!0):n}),e={...e,color:i},e}setupDefaultOptions(t){const{customAttr:e,senior:o}=t,{label:i}=e;return["left","middle","right"].includes(i.position)||(i.position="middle"),o.functionCfg.emptyDataStrategy="ignoreData",t}configLabel(t,e){const o=_(t.customAttr).label;if(o.show){const i=[];return o.fullDisplay||i.push({type:"hide-overlap"},{type:"limit-in-canvas"}),{...e,label:{formatter:({name:n})=>n,callback:n=>{const a=n[1]===1;return{style:{fill:o.color,fontSize:o.fontSize,textAlign:a?"end":"start",fontFamily:t.fontFamily},offsetX:a?-8:8}},layout:i}}}else return{...e,label:!1}}setupOptions(t,e){return U(this.configTheme,this.configBasicStyle,this.configLabel,this.configTooltip,this.configLegend,this.configSlider,this.configAnalyseHorizontal,this.configEmptyDataStrategy)(t,e)}}const Qn=Object.freeze(Object.defineProperty({__proto__:null,SankeyBar:Zn},Symbol.toStringTag,{value:"Module"})),{t:ke}=Y();class Kn extends Q{constructor(){super("scatter",[]);w(this,"properties",["background-overall-component","border-style","basic-style-selector","x-axis-selector","y-axis-selector","title-selector","label-selector","tooltip-selector","legend-selector","jump-set","linkage"]);w(this,"propertyInner",{"basic-style-selector":["colors","alpha","scatterSymbol","scatterSymbolSize","seriesColor"],"label-selector":["fontSize","color","labelFormatter"],"tooltip-selector":["fontSize","color","backgroundColor","seriesTooltipFormatter","show"],"x-axis-selector":["position","name","color","fontSize","axisLine","splitLine","axisForm","axisLabel"],"y-axis-selector":["position","name","color","fontSize","axisValue","axisLine","splitLine","axisForm","axisLabel","axisLabelFormatter"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"legend-selector":["icon","orient","color","fontSize","hPosition","vPosition"]});w(this,"axis",["xAxis","yAxis","extBubble","filter","drill","extLabel","extTooltip"]);w(this,"axisConfig",{xAxis:{name:`${ke("chart.drag_block_type_axis")} / ${ke("chart.dimension")}`,type:"d"},yAxis:{...this.axisConfig.yAxis,limit:void 0,allowEmpty:!1},extBubble:{name:`${ke("chart.bubble_size")} / ${ke("chart.quota")}`,type:"q",limit:1,allowEmpty:!0}})}async drawChart(t){var d;const{chart:e,container:o,action:i}=t;if(!((d=e.data)!=null&&d.data))return;const n={data:e.data.data,xField:"field",yField:"value",colorField:"category",meta:{field:{type:"cat"}},appendPadding:nt(e),interactions:[{type:"legend-active",cfg:{start:[{trigger:"legend-item:mouseenter",action:["element-active:reset"]}],end:[{trigger:"legend-item:mouseleave",action:["element-active:reset"]}]}},{type:"legend-filter",cfg:{start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter","element-active:reset","element-highlight:reset"]}]}}]},a=this.setupOptions(e,n),{Scatter:s}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(f=>f.a4),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),r=new s(o,a);return r.on("point:click",i),ft(e,r),r}configBasicStyle(t,e){var l;const i=_(t.customAttr).basicStyle;return(l=t.extBubble)!=null&&l.length?{...e,size:[5,30],sizeField:"popSize",shape:i.scatterSymbol}:{...e,size:i.scatterSymbolSize,shape:i.scatterSymbol}}configYAxis(t,e){const o=super.configYAxis(t,e);if(!o.yAxis)return o;const i=_(t.customStyle).yAxis;o.yAxis.label&&(o.yAxis.label.formatter=n=>D(n,i.axisLabelFormatter));const l=i.axisValue;if(!(l!=null&&l.auto)){const n={yAxis:{...o.yAxis,min:l.min,max:l.max,minLimit:l.min,maxLimit:l.max,tickCount:l.splitCount}};return{...o,...n}}return o}configTooltip(t,e){var s;const i=_(t.customAttr).tooltip;if(!i.show)return{...e,tooltip:!1};const l=(s=i.seriesTooltipFormatter)==null?void 0:s.filter(r=>r.show).reduce((r,d)=>(r[d.seriesId]=d,r),{}),n=["value","popSize"],a={showTitle:!0,customItems(r){var c,p;if(!((c=i.seriesTooltipFormatter)!=null&&c.length))return r;const d=r[0];if(!d.data.quotaList)return r;const f=[];return r.filter(h=>n.includes(h.name)).forEach(h=>{let g=l[`${h.data.quotaList[0].id}-yAxis`];if(h.name==="popSize"&&(g=l[`${h.data.quotaList[1].id}-extBubble`]),!g)return;const y=D(parseFloat(h.value),g.formatterCfg),x=W(g.chartShowName)?g.name:g.chartShowName;f.push({...h,name:x,value:y})}),(p=d.data.dynamicTooltipValue)==null||p.forEach(h=>{const g=l[h.fieldId];if(g){const y=D(parseFloat(h.value),g.formatterCfg),x=W(g.chartShowName)?g.name:g.chartShowName;f.push({color:"grey",name:x,value:y})}}),f},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:a}}configLegend(t,e){const o=super.configLegend(t,e);if(!o.legend)return o;const i=_(t.customStyle);let l;return i&&i.legend?l=ce(JSON.parse(JSON.stringify(i.legend)),Lt).size:l=Lt.size,o.legend.marker.style=n=>({r:l,fill:n.fill}),o}setupOptions(t,e){return U(this.configTheme,this.configColor,this.configLabel,this.configTooltip,this.configLegend,this.configXAxis,this.configYAxis,this.configAnalyse,this.configSlider,this.configBasicStyle)(t,e)}}const ta=Object.freeze(Object.defineProperty({__proto__:null,Scatter:Kn},Symbol.toStringTag,{value:"Module"})),{t:Oe}=Y();class ea extends Q{constructor(){super("treemap",[]);w(this,"properties",["background-overall-component","border-style","basic-style-selector","title-selector","legend-selector","label-selector","tooltip-selector","jump-set","linkage"]);w(this,"propertyInner",{"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha","seriesColor"],"label-selector":["fontSize","color","showDimension","showQuota","showProportion"],"legend-selector":["icon","orient","fontSize","color","hPosition","vPosition"],"tooltip-selector":["fontSize","color","backgroundColor","seriesTooltipFormatter","show"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"]});w(this,"axis",["xAxis","yAxis","filter","drill","extLabel","extTooltip"]);w(this,"axisConfig",{xAxis:{name:`${Oe("chart.drag_block_treemap_label")} / ${Oe("chart.dimension")}`,type:"d"},yAxis:{name:`${Oe("chart.drag_block_treemap_size")} / ${Oe("chart.quota")}`,limit:1}})}async drawChart(t){var d,f;const{chart:e,container:o,action:i}=t;if(!((f=(d=e.data)==null?void 0:d.data)!=null&&f.length))return;const n={data:{name:"root",children:e.data.data},colorField:"name",appendPadding:nt(e),interactions:[{type:"legend-active",cfg:{start:[{trigger:"legend-item:mouseenter",action:["element-active:reset"]}],end:[{trigger:"legend-item:mouseleave",action:["element-active:reset"]}]}},{type:"legend-filter",cfg:{start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter","element-active:reset","element-highlight:reset"]}]}},{type:"tooltip",cfg:{start:[{trigger:"element:mousemove",action:"tooltip:show"}],end:[{trigger:"element:mouseleave",action:"tooltip:hide"}]}}]},a=this.setupOptions(e,n),{Treemap:s}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(c=>c.ae),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),r=new s(o,a);return r.on("polygon:click",i),r}configTooltip(t,e){var d;const{tooltip:o,label:i}=_(t.customAttr),{yAxis:l}=t;if(!o.show)return{...e,tooltip:!1};const n=i.reserveDecimalCount,a=Je(e.data.children),s=(d=o.seriesTooltipFormatter)==null?void 0:d.filter(f=>f.show).reduce((f,c)=>(f[c.id]=c,f),{});return{...e,tooltip:{showTitle:!0,title:()=>{},customItems(f){var g,y;let c=f;(g=o.seriesTooltipFormatter)!=null&&g.length&&(c=f.filter(x=>s[x.data.quotaList[0].id]));const p=[],h=f[0];return c.forEach(x=>{const b=s[x.data.quotaList[0].id]??l[0],S=D(parseFloat(x.value),b.formatterCfg),A=(Math.round(x.data.value/x.data.path[1].value*1e4)/100).toFixed(n),C=W(b.chartShowName)?b.name:b.chartShowName;p.push({...x,name:C,value:`${S??""} (${A}%)`})}),(y=h.data.dynamicTooltipValue)==null||y.forEach(x=>{const b=s[x.fieldId];if(b){const S=a[x.fieldId],A=(Math.round(x.value/S*1e4)/100).toFixed(n),C=D(parseFloat(x.value),b.formatterCfg),v=W(b.chartShowName)?b.name:b.chartShowName;p.push({color:"grey",name:v,value:`${C??""} (${A}%)`})}}),p}}}}configLabel(t,e){const i=_(t.customAttr).label;if(!i.show)return{...e,label:!1};const l={style:{fill:i.color,fontSize:i.fontSize},formatter:function(n){let a=n.value;const s=[];if(i.showDimension&&s.push(n.field),i.showQuota&&s.push(D(n.value,i.quotaLabelFormatter)),i.showProportion){const r=`${(n.value/n.parent.value*1e4/100).toFixed(i.reserveDecimalCount)}%`;s.push(r)}return a=s.join(`
`),a}};return i.fullDisplay&&(l.layout=[{type:"limit-in-plot"}]),{...e,label:l}}setupDefaultOptions(t){const{customAttr:e,customStyle:o}=t,{label:i}=e;e.label={...i,show:!0,showDimension:!0,showProportion:!0,reserveDecimalCount:2};const{legend:l}=o;return l.show=!1,t}setupSeriesColor(t,e){return e==null||e.sort((o,i)=>i.value-o.value),be(t,e)}configColor(t,e){const o=e.data.children;o.sort((l,n)=>n.value-l.value);const i=this.configSingleDimensionColor(t,{...e,data:o});return{...e,color:i.color}}setupOptions(t,e){return U(this.configTheme,this.configColor,this.configLabel,this.configTooltip,this.configLegend)(t,e,{},this)}}const oa=Object.freeze(Object.defineProperty({__proto__:null,Treemap:ea},Symbol.toStringTag,{value:"Module"})),{t:Ie}=Y(),ia=[];class la extends Q{constructor(){super("word-cloud",ia);w(this,"properties",["basic-style-selector","background-overall-component","border-style","title-selector","tooltip-selector","misc-selector","jump-set","linkage"]);w(this,"propertyInner",{"background-overall-component":["all"],"border-style":["all"],"basic-style-selector":["colors","alpha"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"misc-selector":["wordSizeRange","wordSpacing","wordCloudAxisValueRange"],"tooltip-selector":["color","fontSize","backgroundColor","seriesTooltipFormatter","show"]});w(this,"axis",["xAxis","yAxis","filter"]);w(this,"axisConfig",{xAxis:{name:`${Ie("chart.drag_block_word_cloud_label")} / ${Ie("chart.dimension_or_quota")}`,type:"d",limit:1},yAxis:{name:`${Ie("chart.drag_block_word_cloud_size")} / ${Ie("chart.quota")}`,type:"q",limit:1}});w(this,"setDataRange",(t,e,o)=>{t({from:"word-cloud",data:{max:e,min:o}})})}async drawChart(t){var l,n;const{chart:e,container:o,action:i}=t;if(e!=null&&e.data){let a=e.data.data;const{misc:s}=_(e.customAttr);let r=0,d=0;!((l=s.wordCloudAxisValueRange)!=null&&l.auto)&&((n=s.wordCloudAxisValueRange)==null?void 0:n.fieldId)===e.yAxis[0].id&&(r=s.wordCloudAxisValueRange.min,d=s.wordCloudAxisValueRange.max),De(a??[],"value",d,r,(g,y)=>{d=g,r=y}),a=co(a??[],d,r);const f={data:a,wordField:"field",weightField:"value",colorField:"field",wordStyle:{fontFamily:e.fontFamily?e.fontFamily:"Verdana",fontSize:s.wordSizeRange??qt.wordSizeRange,rotation:[0,0],padding:s.wordSpacing??qt.wordSpacing},random:()=>.5,appendPadding:nt(e),legend:!1,interactions:[]},c=this.setupOptions(e,f),{WordCloud:p}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(g=>g.ag),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),h=new p(o,c);return h.on("click",()=>{this.setDataRange(i,d,r)}),h.on("afterrender",()=>{this.setDataRange(i,d,r)}),h.on("point:click",g=>{i({x:g.x,y:g.y,data:{data:g.data.data.datum}})}),h}}configTooltip(t,e){var s;const i=_(t.customAttr).tooltip,l=t.yAxis;if(!i.show)return{...e,tooltip:!1};const n=(s=i.seriesTooltipFormatter)==null?void 0:s.filter(r=>r.show).reduce((r,d)=>(r[d.id]=d,r),{});return{...e,tooltip:{showTitle:!0,title:()=>{},customItems(r){var p,h;let d=r;(p=i.seriesTooltipFormatter)!=null&&p.length&&(d=r.filter(g=>n[g.data.datum.quotaList[0].id]));const f=[],c=r[0];return d.forEach(g=>{const y=n[g.data.datum.quotaList[0].id]??l[0],x=D(g.value,y.formatterCfg),b=W(y.chartShowName)?y.name:y.chartShowName;f.push({...g,name:b,value:x})}),(h=c.data.datum.dynamicTooltipValue)==null||h.forEach(g=>{const y=n[g.fieldId];if(y){const x=D(parseFloat(g.value),y.formatterCfg),b=W(y.chartShowName)?y.name:y.chartShowName;f.push({color:"grey",name:b,value:x})}}),f}}}}setupOptions(t,e){return U(this.configTheme,this.configTooltip)(t,e)}}const sa=Object.freeze(Object.defineProperty({__proto__:null,WordCloud:la},Symbol.toStringTag,{value:"Module"})),{t:Ne}=Y(),Yi=["background-overall-component","border-style","basic-style-selector","title-selector","legend-selector","label-selector","tooltip-selector","jump-set","linkage"],eo={"background-overall-component":["all"],"border-style":["all"],"label-selector":["fontSize","color","rPosition","showDimension","showQuota","showProportion"],"tooltip-selector":["fontSize","color","backgroundColor","seriesTooltipFormatter","show"],"basic-style-selector":["colors","alpha","radius","seriesColor"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"legend-selector":["icon","orient","fontSize","color","hPosition","vPosition"]},qi=["xAxis","yAxis","drill","filter","extLabel","extTooltip"],ji={xAxis:{name:`${Ne("chart.drag_block_pie_label")} / ${Ne("chart.dimension")}`,type:"d"},yAxis:{name:`${Ne("chart.drag_block_pie_angle")} / ${Ne("chart.quota")}`,type:"q",limit:1}},{t:na}=Y(),aa=[];class Gi extends Q{constructor(t="pie"){super(t,aa);w(this,"axis",qi);w(this,"properties",Yi);w(this,"propertyInner",{...eo,"basic-style-selector":["colors","alpha","radius","topN","seriesColor"]});w(this,"axisConfig",ji)}async drawChart(t){var c,p,h;const{chart:e,container:o,action:i}=t;if(this.configEmptyDataStyle((c=e.data)==null?void 0:c.data,o,null,na("chart.no_data_or_not_positive")),!((h=(p=e.data)==null?void 0:p.data)!=null&&h.length))return;const l=e.data.data,n=_(e.customAttr),a=n.basicStyle.colors.map(g=>$(g,n.basicStyle.alpha)),s={data:l,angleField:"value",colorField:"field",appendPadding:nt(e),color:a,animation:!1,pieStyle:{lineWidth:0},statistic:{title:!1,content:{style:{whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis"},content:""}},interactions:[{type:"legend-active",cfg:{start:[{trigger:"legend-item:mouseenter",action:["element-active:reset"]}],end:[{trigger:"legend-item:mouseleave",action:["element-active:reset"]}]}},{type:"legend-filter",cfg:{start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter","element-active:reset","element-highlight:reset"]}]}},{type:"tooltip",cfg:{start:[{trigger:"interval:mousemove",action:"tooltip:show"}],end:[{trigger:"interval:mouseleave",action:"tooltip:hide"}]}},{type:"active-region",cfg:{start:[{trigger:"interval:mousemove",action:"active-region:show"}],end:[{trigger:"interval:mouseleave",action:"active-region:hide"}]}}],meta:{field:{type:"cat"}}},r=this.setupOptions(e,s),{Pie:d}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(g=>g.a3),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),f=new d(o,r);return f.on("interval:click",i),ft(e,f),f}configLabel(t,e){const{label:o}=_(t.customAttr);if(!(o!=null&&o.show))return{...e,label:!1};const i=[];let l;o.position==="inner"?(l="center",o.fullDisplay?i.push({type:"limit-in-plot"}):(i.push({type:"limit-in-canvas"}),i.push({type:"hide-overlap"}))):o.fullDisplay||i.push({type:"limit-in-plot"});let n=o.position==="outer"?"spider":o.position;i.length===0&&(n="no");const a={type:n,textAlign:l,layout:i,autoRotate:!1,style:{fill:o.color,fontSize:o.fontSize},formatter:s=>{let r=s.value;const d=[];if(o.showDimension&&d.push(s.field),o.showQuota&&d.push(D(s.value,o.quotaLabelFormatter)),o.showProportion){const f=`${(Math.round(s.percent*1e4)/100).toFixed(o.reserveDecimalCount)}%`;o.showDimension&&o.showQuota?d.push(`(${f})`):d.push(f)}return r=d.join(" "),r}};return{...e,label:a}}configTooltip(t,e){var f,c;const{tooltip:o,label:i}=_(t.customAttr),{yAxis:l}=t;if(!o.show)return{...e,tooltip:!1};const n=i.reserveDecimalCount,a=Je(e.data),s=(f=e.data)==null?void 0:f.reduce((p,h)=>Ye(p,h.value??0),0),r=(c=o.seriesTooltipFormatter)==null?void 0:c.filter(p=>p.show).reduce((p,h)=>(p[h.id]=h,p),{}),d={showTitle:!0,title:()=>{},customItems(p){var x,b;let h=p;(x=o.seriesTooltipFormatter)!=null&&x.length&&(h=p.filter(S=>r[S.data.quotaList[0].id]));const g=[],y=p[0];return h.forEach(S=>{const A=r[S.data.quotaList[0].id]??l[0],C=parseFloat(S.value),v=D(C,A.formatterCfg),E=(Math.round(C/s*1e4)/100).toFixed(n),z=W(A.chartShowName)?A.name:A.chartShowName;g.push({...S,name:z,value:`${v??""} (${E}%)`})}),(b=y.data.dynamicTooltipValue)==null||b.forEach(S=>{const A=r[S.fieldId];if(A){const C=a[S.fieldId],v=(Math.round(S.value/C*1e4)/100).toFixed(n),E=D(parseFloat(S.value),A.formatterCfg),z=W(A.chartShowName)?A.name:A.chartShowName;g.push({color:"grey",name:z,value:`${E??""} (${v}%)`})}}),g},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:d}}configBasicStyle(t,e){const o=_(t.customAttr),{basicStyle:i}=o,{data:l}=e;if(l!=null&&l.length&&i.calcTopN&&l.length>i.topN){l.sort((r,d)=>d.value-r.value);const n=l.splice(i.topN),a={...l[0],dynamicTooltipValue:[],field:i.topNLabel,name:i.topNLabel,value:0},s={};n.reduce((r,d)=>{var f;return r.value+=d.value??0,(f=d.dynamicTooltipValue)==null||f.forEach(c=>{s[c.fieldId]=(s[c.fieldId]||0)+c.value}),r},a);for(const r in s)a.dynamicTooltipValue.push({fieldId:r,value:s[r]});l.push(a)}return{...e,radius:i.radius/100}}setupDefaultOptions(t){const{customAttr:e,customStyle:o}=t,{label:i}=e;["inner","outer"].includes(i.position)||(i.position="outer"),e.label={...i,show:!0,showDimension:!0,showProportion:!0,reserveDecimalCount:2};const{legend:l}=o;return l.show=!1,t}setupSeriesColor(t,e){e=G(e);const{calcTopN:o,topN:i,topNLabel:l}=t.customAttr.basicStyle;return e!=null&&e.length&&o&&e.length>i&&(e.sort((n,a)=>a.value-n.value),e.splice(i),e.push({field:l,value:0})),be(t,e)}setupOptions(t,e){return U(this.configTheme,this.configBasicStyle,this.configSingleDimensionColor,this.configLabel,this.configTooltip,this.configLegend)(t,e,{},this)}}class ra extends Gi{constructor(){super("pie-donut");w(this,"propertyInner",{...eo,"basic-style-selector":["colors","alpha","radius","innerRadius","topN","seriesColor"]})}configBasicStyle(t,e){const o=super.configBasicStyle(t,e),{basicStyle:i}=_(t.customAttr);return{...o,radius:i.radius/100,innerRadius:i.innerRadius/100}}}const ca=Object.freeze(Object.defineProperty({__proto__:null,Pie:Gi,PieDonut:ra},Symbol.toStringTag,{value:"Module"})),{t:no}=Y();class Ui extends Q{constructor(t="pie-rose"){super(t,[]);w(this,"axis",qi);w(this,"properties",Yi);w(this,"propertyInner",eo);w(this,"axisConfig",{...ji,yAxis:{name:`${no("chart.drag_block_pie_radius")} / ${no("chart.quota")}`,type:"q",limit:1}})}async drawChart(t){var d,f,c;const{chart:e,container:o,action:i}=t;if(this.configEmptyDataStyle((d=e.data)==null?void 0:d.data,o,null,no("chart.no_data_or_not_positive")),!((c=(f=e==null?void 0:e.data)==null?void 0:f.data)!=null&&c.length))return;const n={data:e.data.data,xField:"field",yField:"value",seriesField:"field",appendPadding:nt(e),interactions:[{type:"legend-active",cfg:{start:[{trigger:"legend-item:mouseenter",action:["element-active:reset"]}],end:[{trigger:"legend-item:mouseleave",action:["element-active:reset"]}]}},{type:"legend-filter",cfg:{start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter","element-active:reset","element-highlight:reset"]}]}},{type:"tooltip",cfg:{start:[{trigger:"interval:mousemove",action:"tooltip:show"}],end:[{trigger:"interval:mouseleave",action:"tooltip:hide"}]}}],meta:{field:{type:"cat"}}},a=this.setupOptions(e,n),{Rose:s}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(p=>p.ac),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),r=new s(o,a);return r.on("interval:click",i),ft(e,r),r}configBasicStyle(t,e){const{basicStyle:o}=_(t.customAttr);return{...e,radius:o.radius/100}}configLabel(t,e){var a;const{label:o}=_(t.customAttr);if(!o.show)return{...e,label:!1};const i=(a=e.data)==null?void 0:a.reduce((s,r)=>Ye(s,r.value??0),0),l=[];if(!o.fullDisplay){const s=super.configLabel(t,e);l.push(...s.label.layout)}const n={autoRotate:!0,layout:l,style:{fill:o.color,fontSize:o.fontSize},formatter:s=>{let r=s.value;const d=[];if(o.showDimension&&d.push(s.field),o.showQuota&&d.push(D(s.value,o.quotaLabelFormatter)),o.showProportion){const f=`${(Math.round(s.value/i*1e4)/100).toFixed(o.reserveDecimalCount)}%`;o.showDimension&&o.showQuota?d.push(`(${f})`):d.push(f)}return r=d.join(`
`),r}};return o.position==="inner"&&(n.offset=-10),{...e,label:n}}configTooltip(t,e){var f,c;const{tooltip:o,label:i}=_(t.customAttr),{yAxis:l}=t;if(!o.show)return{...e,tooltip:!1};const n=i.reserveDecimalCount,a=Je(e.data),s=(f=e.data)==null?void 0:f.reduce((p,h)=>Ye(p,h.value??0),0),r=(c=o.seriesTooltipFormatter)==null?void 0:c.filter(p=>p.show).reduce((p,h)=>(p[h.id]=h,p),{}),d={showTitle:!0,title:()=>{},customItems(p){var x,b;let h=p;(x=o.seriesTooltipFormatter)!=null&&x.length&&(h=p.filter(S=>r[S.data.quotaList[0].id]));const g=[],y=p[0];return h.forEach(S=>{const A=r[S.data.quotaList[0].id]??l[0],C=parseFloat(S.value),v=D(C,A.formatterCfg),E=(Math.round(C/s*1e4)/100).toFixed(n),z=W(A.chartShowName)?A.name:A.chartShowName;g.push({...S,name:z,value:`${v??""} (${E}%)`})}),(b=y.data.dynamicTooltipValue)==null||b.forEach(S=>{const A=r[S.fieldId];if(A){const C=a[S.fieldId],v=(Math.round(S.value/C*1e4)/100).toFixed(n),E=D(parseFloat(S.value),A.formatterCfg),z=W(A.chartShowName)?A.name:A.chartShowName;g.push({color:"grey",name:z,value:`${E??""} (${v}%)`})}}),g},container:at(`tooltip-${t.id}`),itemTpl:rt,enterable:!0};return{...e,tooltip:d}}setupDefaultOptions(t){const{customAttr:e,customStyle:o}=t,{label:i}=e;["inner","outer"].includes(i.position)||(i.position="outer"),e.label={...i,show:!0,showDimension:!0,showProportion:!0,reserveDecimalCount:2};const{legend:l}=o;return l.show=!1,t}setupSeriesColor(t,e){return be(t,e)}setupOptions(t,e){return U(this.configBasicStyle,this.configSingleDimensionColor,this.configTheme,this.configLabel,this.configLegend,this.configTooltip)(t,e)}}class ua extends Ui{constructor(){super("pie-donut-rose");w(this,"propertyInner",{...eo,"basic-style-selector":["colors","alpha","radius","innerRadius","seriesColor"]})}configBasicStyle(t,e){const o=_(t.customAttr);return{...e,radius:o.basicStyle.radius/100,innerRadius:o.basicStyle.innerRadius/100}}}const da=Object.freeze(Object.defineProperty({__proto__:null,Rose:Ui,RoseDonut:ua},Symbol.toStringTag,{value:"Module"})),{t:ee}=Y(),fa=[];class ma extends Q{constructor(){super("t-heatmap",fa);w(this,"properties",["basic-style-selector","background-overall-component","label-selector","legend-selector","x-axis-selector","y-axis-selector","title-selector","tooltip-selector","jump-set","linkage","border-style"]);w(this,"propertyInner",{"background-overall-component":["all"],"basic-style-selector":["colors"],"label-selector":["fontSize","color"],"x-axis-selector":["name","color","fontSize","position","axisLabel","axisLine"],"y-axis-selector":["name","color","fontSize","position","axisLabel","axisLine","showLengthLimit"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"legend-selector":["orient","color","fontSize","hPosition","vPosition"],"tooltip-selector":["show","color","fontSize","backgroundColor"],"border-style":["all"]});w(this,"axis",["xAxis","xAxisExt","extColor","filter"]);w(this,"axisConfig",{xAxis:{name:`${ee("chart.x_axis")} / ${ee("chart.dimension")}`,type:"d",limit:1},xAxisExt:{name:`${ee("chart.y_axis")} / ${ee("chart.dimension")}`,type:"d",limit:1},extColor:{name:`${ee("chart.color")} / ${ee("chart.dimension_or_quota")}`,limit:1}});w(this,"getDefaultLength",(t,e)=>{const o=document.getElementById(t.container),i=(o==null?void 0:o.clientHeight)||100,l=(o==null?void 0:o.clientWidth)||100;let n=i-i*.5;return e.orient!=="vertical"&&(n=l-l*.5),n});w(this,"sortData",(t,e)=>{const{deType:o,sort:i,customSort:l}=t;return i==="desc"?o===0?e.sort().reverse():e.sort((n,a)=>a-n):i==="asc"?o===0?e.sort():e.sort((n,a)=>n-a):l&&l.length>0?l:e})}async drawChart(t){const{chart:e,container:o,action:i}=t,l=J(e.xAxis),n=J(e.xAxisExt),a=J(e.extColor);if(!(l!=null&&l.length)||!(n!=null&&n.length)||!(a!=null&&a.length))return;const s=l[0].dataeaseName,r=n[0].dataeaseName,d=a[0].dataeaseName,f=G(e.data.tableRow);f.forEach(y=>{Object.keys(y).forEach(x=>{x==="*"&&(y["@"]=y[x])})});const c={data:f,xField:s,yField:r,colorField:d==="*"?"@":d,appendPadding:nt(e),meta:{[s]:{type:"cat",values:this.sortData(l[0],[...new Set(f.map(y=>y[[s]]))])},[r]:{type:"cat",values:this.sortData(n[0],[...new Set(f.map(y=>y[[r]]))]).reverse()}},legend:{layout:"vertical",position:"right",slidable:!0,label:{align:"left",spacing:10}}};e.container=o;const p=this.setupOptions(e,c),{Heatmap:h}=await Z(()=>import("./@antv-0.0.0-dataease.js").then(y=>y.a9),["./@antv-0.0.0-dataease.js","./eventemitter3-0.0.0-dataease.js","./@amap-0.0.0-dataease.js","./lodash-0.0.0-dataease.js","./@mapbox-0.0.0-dataease.js","./pbf-0.0.0-dataease.js","./ieee754-0.0.0-dataease.js","./supercluster-0.0.0-dataease.js","./@babel-0.0.0-dataease.js","./gl-matrix-0.0.0-dataease.js","./tslib-0.0.0-dataease.js","./topojson-client-0.0.0-dataease.js","./viewport-mercator-project-0.0.0-dataease.js","./@turf-0.0.0-dataease.js","./polygon-clipping-0.0.0-dataease.js","./splaytree-0.0.0-dataease.js","./robust-predicates-0.0.0-dataease.js","./d3-scale-0.0.0-dataease.js","./d3-collection-0.0.0-dataease.js","./d3-format-0.0.0-dataease.js","./d3-time-format-0.0.0-dataease.js","./d3-time-0.0.0-dataease.js","./d3-color-0.0.0-dataease.js","./d3-array-0.0.0-dataease.js","./earcut-0.0.0-dataease.js","./regl-0.0.0-dataease.js","./lodash-es-0.0.0-dataease.js","./mapbox-gl-0.0.0-dataease.js","./d3-dsv-0.0.0-dataease.js","./geojson-vt-0.0.0-dataease.js","./hammerjs-0.0.0-dataease.js","./element-resize-detector-0.0.0-dataease.js","./batch-processor-0.0.0-dataease.js","./d3-hexbin-0.0.0-dataease.js","./detect-browser-0.0.0-dataease.js","./d3-ease-0.0.0-dataease.js","./d3-interpolate-0.0.0-dataease.js","./d3-timer-0.0.0-dataease.js","./fecha-0.0.0-dataease.js","./size-sensor-0.0.0-dataease.js","./d3-regression-0.0.0-dataease.js","./d3-hierarchy-0.0.0-dataease.js","./fmin-0.0.0-dataease.js","./pdfast-0.0.0-dataease.js","..\\css\\@antv-0.0.0-dataease.css"],import.meta.url),g=new h(o,p);return g.on("plot:click",y=>{var S;if(!((S=y.data)!=null&&S.data))return;const x=y.data.data,b=[];e.data.fields.forEach(A=>{Object.keys(x).forEach(C=>{C.startsWith("f_")&&A.dataeaseName===C&&b.push({id:A.id,dataeaseName:A.dataeaseName,value:x[C]})})}),i({x:y.data.x,y:y.data.y,data:{data:{...y.data.data,value:b[1].value,name:b[1].id,dimensionList:b,quotaList:[b[1]]}}})}),g.on("afterrender",y=>{var b;const x=JSON.parse(JSON.stringify(_(e.customStyle).legend));if(x.show){const S=(b=y.view.getController("legend").option[a[0].dataeaseName])==null?void 0:b.rail;S&&(S.defaultLength=this.getDefaultLength(e,x))}}),Xt(e,g),g}configBasicStyle(t,e){var l;const o=_(t.customAttr).basicStyle,i=(l=o.colors)==null?void 0:l.map(n=>$(n,o.alpha));return{...e,color:i}}configTooltip(t,e){let o,i;if(t.customAttr&&(i=_(t.customAttr),i.tooltip)){const l=J(t.extColor),a=[J(t.xAxisExt),l];JSON.parse(JSON.stringify(i.tooltip)).show?o={showTitle:!0,customItems(r){const d=[],f=(c,p,h)=>{const g=c!=null&&c.chartShowName?c==null?void 0:c.chartShowName:c==null?void 0:c.name;let y=h[0].data[c.dataeaseName];isNaN(Number(y))||(y=D(y,c==null?void 0:c.formatterCfg)),p.push({...h[0],name:g,value:y})};return a.forEach(c=>{f(c[0],d,r)}),d}}:o=!1}return{...e,tooltip:o}}configXAxis(t,e){const o=yi(t);return{...e,xAxis:o?{...o,grid:null}:!1}}configYAxis(t,e){const o=Xe(t);return{...e,yAxis:o?{...o,grid:null}:!1}}configLegend(t,e){const o=super.configLegend(t,e);if(o.legend){const i=JSON.parse(JSON.stringify(_(t.customStyle).legend));o.legend.slidable=!0,o.legend.minHeight=10,o.legend.minWidth=10,o.legend.maxHeight=600,o.legend.maxWidth=600;const l=document.getElementById(t.container),n=(l==null?void 0:l.clientHeight)||100,a=(l==null?void 0:l.clientWidth)||100;let s=n-n*.5;i.orient==="vertical"?o.legend.offsetY=-5:s=a-a*.5,o.legend.rail={defaultLength:s},o.legend.label={spacing:10,style:{fill:i.color,fontSize:i.fontSize}}}return o}setupDefaultOptions(t){return t.customStyle.legend.orient="vertical",t.customStyle.legend.vPosition="center",t.customStyle.legend.hPosition="right",t.customStyle.legend.rail={defaultLength:100},t}configLabel(t,e){const o=super.configLabel(t,e);if(o.label){const i=J(t.extColor),l=[];o.label.fullDisplay||l.push(...o.label.layout);const n={...o.label,position:"middle",layout:l,formatter:a=>{var r,d;const s=a[(r=i[0])==null?void 0:r.dataeaseName];return isNaN(Number(s))?s:D(s,(d=i[0])==null?void 0:d.formatterCfg)}};return{...o,label:n}}return o}setupOptions(t,e){return U(this.configTheme,this.configXAxis,this.configYAxis,this.configBasicStyle,this.configLegend,this.configTooltip,this.configLabel)(t,e)}}const pa=Object.freeze(Object.defineProperty({__proto__:null,TableHeatmap:ma},Symbol.toStringTag,{value:"Module"})),{t:Pt}=Y();function ha(m){const u=$(K.tableHeaderBgColor,ot.alpha),t=K.tableHeaderAlign,e=$(Tt.tableItemBgColor,ot.alpha),o=Tt.tableItemAlign,i=$(ot.tableBorderColor,ot.alpha),l=ot.tableScrollBarColor,n=Ro(l,3),a=m.fontFamily&&m.fontFamily!=="inherit"?m.fontFamily:ci,s={background:{color:"#00000000"},splitLine:{horizontalBorderColor:i,horizontalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderColor:i,verticalBorderColorOpacity:1,verticalBorderWidth:1,showShadow:!1},cornerCell:{cell:{backgroundColor:u,horizontalBorderColor:i,verticalBorderColor:i},text:{fill:K.tableHeaderFontColor,fontSize:K.tableTitleFontSize,textAlign:t,fontFamily:a},bolderText:{fill:K.tableHeaderFontColor,fontSize:K.tableTitleFontSize,textAlign:t,fontFamily:a},measureText:{fill:K.tableHeaderFontColor,fontSize:K.tableTitleFontSize,textAlign:t,fontFamily:a}},rowCell:{cell:{backgroundColor:u,horizontalBorderColor:i,verticalBorderColor:i},text:{fill:K.tableHeaderFontColor,fontSize:K.tableTitleFontSize,textAlign:t,textBaseline:"middle",fontFamily:a},bolderText:{fill:K.tableHeaderFontColor,fontSize:K.tableTitleFontSize,textAlign:t,fontFamily:a},measureText:{fill:K.tableHeaderFontColor,fontSize:K.tableTitleFontSize,textAlign:t,fontFamily:a},seriesText:{fill:Tt.tableItemBgColor,fontSize:Tt.tableItemFontSize,textAlign:o,fontFamily:a}},colCell:{cell:{backgroundColor:u,horizontalBorderColor:i,verticalBorderColor:i},text:{fill:K.tableHeaderFontColor,fontSize:K.tableTitleFontSize,textAlign:t,fontFamily:a},bolderText:{fill:K.tableHeaderFontColor,fontSize:K.tableTitleFontSize,textAlign:t,fontFamily:a},measureText:{fill:K.tableHeaderFontColor,fontSize:K.tableTitleFontSize,textAlign:t,fontFamily:a}},dataCell:{cell:{backgroundColor:e,horizontalBorderColor:i,verticalBorderColor:i},text:{fill:Tt.tableFontColor,fontSize:Tt.tableItemFontSize,textAlign:o,fontFamily:a},bolderText:{fill:Tt.tableFontColor,fontSize:Tt.tableItemFontSize,textAlign:o,fontFamily:a},measureText:{fill:Tt.tableFontColor,fontSize:Tt.tableItemFontSize,textAlign:t,fontFamily:a}},scrollBar:{thumbColor:l,thumbHoverColor:n,size:8,hoverSize:12}};let r;if(m.customAttr){r=_(m.customAttr);const{basicStyle:d,tableHeader:f,tableCell:c}=r;if(d){const p=d.tableBorderColor,h=d.tableScrollBarColor,g={splitLine:{horizontalBorderColor:p,verticalBorderColor:p},cornerCell:{cell:{horizontalBorderColor:p,verticalBorderColor:p}},colCell:{cell:{horizontalBorderColor:p,verticalBorderColor:p}},dataCell:{cell:{horizontalBorderColor:p,verticalBorderColor:p,interactionState:{hoverFocus:{borderOpacity:d.showHoverStyle===!1?0:1}}}},scrollBar:{thumbColor:h,thumbHoverColor:Ro(h,1.5)}};xt(s,g)}if(f){const p=$(f.tableHeaderFontColor,d.alpha);let h=f.tableHeaderBgColor;_t(h)||(h=$(h,d.alpha));const g=f.isItalic?"italic":"normal",y=f.isBolder===!1?"normal":"bold",{tableHeaderAlign:x,tableTitleFontSize:b}=f;xt(s,{cornerCell:{cell:{backgroundColor:h},bolderText:{fill:p,fontSize:b,textAlign:x,fontStyle:g,fontWeight:y,fontFamily:a},text:{fill:p,fontSize:b,textAlign:x,fontStyle:g,fontWeight:y,fontFamily:a},measureText:{fill:p,fontSize:b,textAlign:x,fontStyle:g,fontWeight:y,fontFamily:a}},colCell:{cell:{backgroundColor:h},bolderText:{fill:p,fontSize:b,textAlign:x,fontStyle:g,fontWeight:y,fontFamily:a},text:{fill:p,fontSize:b,textAlign:x,fontStyle:g,fontWeight:y,fontFamily:a},measureText:{fill:p,fontSize:b,textAlign:x,fontStyle:g,fontWeight:y,fontFamily:a}}}),f.showHorizonBorder===!1&&f.showTableHeader!==!1&&xt(s,{splitLine:{horizontalBorderColor:h,horizontalBorderWidth:0,horizontalBorderColorOpacity:0},colCell:{cell:{horizontalBorderColor:h,horizontalBorderWidth:0}}}),f.showVerticalBorder===!1&&f.showTableHeader!==!1&&xt(s,{splitLine:{verticalBorderColor:h,verticalBorderWidth:0,verticalBorderColorOpacity:0},colCell:{cell:{verticalBorderColor:h,verticalBorderWidth:0}},cornerCell:{cell:{verticalBorderColor:h,verticalBorderWidth:0}}})}if(c){const p=$(c.tableFontColor,d.alpha);let h=c.tableItemBgColor;_t(h)||(h=$(h,d.alpha));let g=c.tableItemSubBgColor;_t(g)||(g=$(g,d.alpha));const y=c.isItalic?"italic":"normal",x=c.isBolder===!1?"normal":"bold",{tableItemAlign:b,tableItemFontSize:S,enableTableCrossBG:A}=c;xt(s,{rowCell:{cell:{backgroundColor:h,horizontalBorderColor:h,verticalBorderColor:h},bolderText:{fill:p,textAlign:b,fontSize:S,fontFamily:a},text:{fill:p,textAlign:b,fontSize:S,fontFamily:a},measureText:{fill:p,textAlign:b,fontSize:S,fontFamily:a},seriesText:{fill:p,textAlign:b,fontSize:S,fontFamily:a}},dataCell:{cell:{crossBackgroundColor:A?g:h,backgroundColor:h},bolderText:{fill:p,textAlign:b,fontSize:S,fontStyle:y,fontWeight:x,fontFamily:a},text:{fill:p,textAlign:b,fontSize:S,fontStyle:y,fontWeight:x,fontFamily:a},measureText:{fill:p,textAlign:b,fontSize:S,fontStyle:y,fontWeight:x,fontFamily:a},seriesText:{fill:p,textAlign:b,fontSize:S,fontStyle:y,fontWeight:x,fontFamily:a}}}),c.showHorizonBorder===!1&&xt(s,{dataCell:{cell:{horizontalBorderColor:h,horizontalBorderWidth:0}}}),c.showVerticalBorder===!1&&xt(s,{splitLine:{verticalBorderWidth:0,verticalBorderColorOpacity:0},dataCell:{cell:{verticalBorderColor:h,verticalBorderWidth:0}}})}}return s}function ga(m,u){var o,i,l;const t={};let e;if(m.customAttr){e=_(m.customAttr);const{basicStyle:n,tableHeader:a,tableCell:s}=e;switch(t.colCfg={height:a.tableTitleHeight},t.cellCfg={height:s.tableItemHeight},n.tableColumnMode){case"adapt":{t.layoutWidthType="compact";break}case"field":{delete t.layoutWidthType;const r=((o=n.tableFieldWidth)==null?void 0:o.reduce((p,h)=>(p[h.fieldId]=h,p),{}))||{};if(m.drill){const{xAxis:p}=_(m),h=m.drillFields[m.drillFilters.length],g=p.findIndex(x=>x.id===m.drillFilters[0].fieldId),y=p[g];r[h.dataeaseName]={width:(i=r[y.dataeaseName])==null?void 0:i.width}}const d=(l=u.meta)==null?void 0:l.reduce((p,h)=>{var g;return p+(((g=r[h.field])==null?void 0:g.width)??10)},0),f=parseInt(d.toFixed(0))===100,c=[];t.colCfg.width=p=>{var b;const h=p.spreadsheet.container.cfg.el.getBoundingClientRect().width;if(!((b=n.tableFieldWidth)!=null&&b.length)){const S=m.data.fields.length,A=a.showIndex?S+1:S;return h/A}const g=h/100,y=r[p.field]?r[p.field].width*g:g*10,x=parseInt(y.toFixed(0));if(f)if(c.length===u.meta.length-1){const S=c.reduce((C,v)=>C+v,0),A=h-S;if(c.splice(0),A<x)return A}else c.push(x);return x};break}case"custom":{t.colCfg.width=n.tableColumnWidth;break}default:delete t.layoutWidthType,t.colCfg.width=r=>{const d=r.spreadsheet.container.cfg.el.offsetWidth,f=r.spreadsheet.dataCfg.meta.length;if(!f)return 0;const c=a.showIndex?f+1:f,p=d/c;return Math.max(p,n.tableColumnWidth)}}}return t}function ya(m){const{threshold:u}=_(m.senior);if(!u.enable)return;const t={text:[],background:[]},e=u.tableThreshold??[],o=[...m.xAxis,...m.xAxisExt].map(i=>i.dataeaseName);if((e==null?void 0:e.length)>0){const{tableCell:i,basicStyle:l,tableHeader:n}=_(m.customAttr),a=m.type==="table-info"?i.enableTableCrossBG&&!i.mergeCells:i.enableTableCrossBG,s=_t(i.tableFontColor)?i.tableFontColor:$(i.tableFontColor,l.alpha),r=a?null:_t(i.tableItemBgColor)?i.tableItemBgColor:$(i.tableItemBgColor,l.alpha),d=n.tableHeaderFontColor,f=_t(n.tableHeaderBgColor)?n.tableHeaderBgColor:$(n.tableHeaderBgColor,l.alpha),c=xa(m);for(let p=0;p<e.length;p++){const h=e[p];let g=s,y=r;m.type==="table-pivot"&&o.includes(h.field.dataeaseName)&&(g=d,y=f),t.text.push({field:h.field.dataeaseName,mapping(x,b){return b!=null&&b.isTotals||b!=null&&b.id&&(b==null?void 0:b.field)===b.id?null:{fill:Xo(x,g,h,"color",c,b)}}}),t.background.push({field:h.field.dataeaseName,mapping(x,b){if(b!=null&&b.isTotals||b!=null&&b.id&&(b==null?void 0:b.field)===b.id)return null;const S=Xo(x,y,h,"backgroundColor",c,b);return Al(S)?null:{fill:S}}})}}return t}function Xo(m,u,t,e,o,i){let l=null;for(let n=0;n<t.conditions.length;n++){let a=!1;const s=t.conditions[n];let r,d,f;if(s.type==="dynamic"?s.term==="between"?(d=parseFloat(ao(s.dynamicMaxField,o,i)),f=parseFloat(ao(s.dynamicMinField,o,i))):r=ao(s.dynamicField,o,i):s.term==="between"?(f=parseFloat(s.min),d=parseFloat(s.max)):r=s.value,t.field.deType===2||t.field.deType===3||t.field.deType===4){if(r=parseFloat(r),s.term==="eq"?m===r&&(l=s[e],a=!0):s.term==="not_eq"?m!==r&&(l=s[e],a=!0):s.term==="lt"?m<r&&(l=s[e],a=!0):s.term==="gt"?m>r&&(l=s[e],a=!0):s.term==="le"?m<=r&&(l=s[e],a=!0):s.term==="ge"?m>=r&&(l=s[e],a=!0):s.term==="between"?f<=m&&m<=d&&(l=s[e],a=!0):s.term==="default"&&(l=s[e],a=!0),a)break;n===t.conditions.length-1&&(l=u)}else if(t.field.deType===0||t.field.deType===5){if(s.term==="eq"?m===r&&(l=s[e],a=!0):s.term==="not_eq"?m!==r&&(l=s[e],a=!0):s.term==="like"?m.includes(r)&&(l=s[e],a=!0):s.term==="not like"?m.includes(r)||(l=s[e],a=!0):s.term==="null"?(m==null||m==="")&&(l=s[e],a=!0):s.term==="not_null"?m!=null&&m!==""&&(l=s[e],a=!0):s.term==="default"&&(l=s[e],a=!0),a)break;n===t.conditions.length-1&&(l=u)}else{const c=t.conditions[n];r=new Date(r.replace(/-/g,"/")+" GMT+8").getTime();const p=new Date(m.replace(/-/g,"/")+" GMT+8").getTime();if(c.term==="eq"?p===r&&(l=c[e],a=!0):c.term==="not_eq"?p!==r&&(l=c[e],a=!0):c.term==="lt"?p<r&&(l=c[e],a=!0):c.term==="gt"?p>r&&(l=c[e],a=!0):c.term==="le"?p<=r&&(l=c[e],a=!0):c.term==="ge"?p>=r&&(l=c[e],a=!0):c.term==="default"&&(l=c[e],a=!0),a)break;n===t.conditions.length-1&&(l=u)}}return l}function xa(m){const u={};return m.data&&m.data.dynamicAssistLines&&m.data.dynamicAssistLines.length>0&&m.data.dynamicAssistLines.forEach(t=>{u[t.summary+"-"+t.fieldId]=t.value}),u}function ao(m,u,t){var e;return m.summary==="value"?t?t[(e=m.field)==null?void 0:e.dataeaseName]:void 0:u[m.summary+"-"+m.fieldId]}function ba(m){var l,n,a;let u=((l=m.data)==null?void 0:l.tableRow)||[],t=[];const e=_(m.senior);let o=(n=e==null?void 0:e.functionCfg)==null?void 0:n.emptyDataStrategy;o||(o="breakLine");const i=(a=e==null?void 0:e.functionCfg)==null?void 0:a.emptyDataFieldCtrl;if(o!=="breakLine"&&(i!=null&&i.length)&&(u!=null&&u.length)){const s=Ge(u[0]);t=zl(s,i)}if(t.length){u=G(u);for(let s=u.length-1;s>=0;s--)for(let r=0,d=t.length;r<d;r++){const f=t[r];if(u[s][f]===null&&(o==="setZero"&&(u[s][f]=0),o==="ignoreData")){u=Re(u,(c,p)=>p!==s);break}}}return u}class Xi extends Wl{show(u){const{iconName:t}=u;if(t){this.showSortTooltip(u);return}super.show(u)}showSortTooltip(u){var p,h;const{position:t,options:e,meta:o,event:i}=u,{enterable:l}=Vl(e),{autoAdjustBoundary:n,adjustPosition:a}=this.spreadsheet.options.tooltip||{};this.visible=!0,this.options=u;const s=this.getContainer(),r=os(ls,{table:this.spreadsheet,meta:o});this.spreadsheet.tooltip.container.innerHTML="";const d=document.createElement("div");this.spreadsheet.tooltip.container.appendChild(d),is(r,d);const{x:f,y:c}=Yl({spreadsheet:this.spreadsheet,position:t,tooltipContainer:s,autoAdjustBoundary:n});this.position=(a==null?void 0:a({position:{x:f,y:c},event:i}))??{x:f,y:c},ui(s,{style:{left:`${(p=this.position)==null?void 0:p.x}px`,top:`${(h=this.position)==null?void 0:h.y}px`,pointerEvents:l?"all":"none",zIndex:9999,position:"absolute",color:"black",background:"white",fontSize:"16px"},visible:!0})}}const Sa='<svg t="1711681787276" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4355" width="200" height="200"><path d="M922.345786 372.183628l-39.393195 38.687114L676.138314 211.079416l0 683.909301-54.713113 0L621.425202 129.010259l53.320393 0L922.345786 372.183628zM349.254406 894.989741 101.654214 651.815349l39.393195-38.687114 206.814276 199.792349L347.861686 129.010259l54.713113 0 0 765.978459L349.254406 894.988718z" fill="{fill}" p-id="4356"></path></svg>',Aa='<svg t="1711682928245" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11756" width="200" height="200"><path d="M960 704L512 256 64 704z" fill="{fill}" p-id="11757"></path></svg>',Ca='<svg t="1711681879346" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4655" width="200" height="200"><path d="M64 320l448 448 448-448z" fill="{fill}" p-id="4656"></path></svg>';function ro(m){return`data:image/svg+xml;charset=utf-8;base64,${btoa(m)}`}function va(m,u){const{tableHeaderFontColor:t,tableHeaderSort:e}=_(m.customAttr).tableHeader;if(!e)return;const o=t??"#666",i=ro(Sa.replace("{fill}",o)),l=ro(Aa.replace("{fill}",o)),n=ro(Ca.replace("{fill}",o)),a=Math.random(),s={asc:`customSortUp${a}`,desc:`customSortDown${a}`};u.customSVGIcons=[{name:`customSortDefault${a}`,svg:i},{name:`customSortUp${a}`,svg:l},{name:`customSortDown${a}`,svg:n}],u.headerActionIcons=[{iconNames:[`customSortDefault${a}`,`customSortUp${a}`,`customSortDown${a}`],belongsCell:"colCell",displayCondition:(r,d)=>{if(r.field===fi||r.colIndex===-1)return!1;const f=r.spreadsheet.store.get("sortMethodMap"),c=f==null?void 0:f[r.field];return c?d===s[c]:d===`customSortDefault${a}`},onClick:r=>{var p;const{meta:d,event:f}=r;d.spreadsheet.showTooltip({position:{x:f.clientX,y:f.clientY},event:f,...r});const c=document.getElementById(m.container);if((p=c==null?void 0:c.childNodes)!=null&&p.length){const h=Array.from(c.childNodes).filter(g=>g.nodeType===Node.ELEMENT_NODE).find(g=>g.classList.contains("antv-s2-tooltip-container"));if(h&&h.offsetLeft+h.clientWidth>c.offsetWidth){const y=c.offsetWidth-h.clientWidth-10;h.style.left=`${y}px`}}}}]}function wa(m,u){const{tooltip:t}=_(m.customAttr),e=m.fontFamily?m.fontFamily:ci;u.tooltip={...u.tooltip,style:{background:t.backgroundColor,fontSize:t.fontSize+"px",fontFamily:e,color:t.color,boxShadow:"rgba(0, 0, 0, 0.1) 0px 4px 8px 0px",borderRadius:"3px",padding:"4px 12px",opacity:.95,position:"absolute"},adjustPosition:({event:o})=>_a(o)}}function ko(m,u,t){u.preventDefault();const e=m.getCell(u.target),o=e.getMeta().valueField,i=e.getMeta(),l=m.interaction.getState();let n="";if(l.stateName===ql.SELECTED){const{cells:a}=l;if(!(a!=null&&a.length))return;if(a.length===1){const c=a[0];e.getMeta().id===c.id&&io(i.value+"",!0),m.interaction.clearState();return}const r=m.interaction.interactions.get(jl.BRUSH_SELECTION).getScrollBrushRangeCells(a);r.sort((c,p)=>{const h=c.getMeta(),g=p.getMeta();return h.rowIndex!==g.rowIndex?h.rowIndex-g.rowIndex:h.colIndex-g.colIndex});let d=!1;const f=r.reduce((c,p)=>{p.getMeta().colIndex===i.colIndex&&p.getMeta().rowIndex===i.rowIndex&&(d=!0);const h=c[p.getMeta().rowIndex];return h?h.push(p):c[p.getMeta().rowIndex]=[p],c},{});d&&(Ge(f).forEach(c=>{const p=f[c];p.forEach((h,g)=>{var A;const y=h.getMeta(),x=(A=y.data)==null?void 0:A[y.valueField],b=ye(t,C=>C.field===y.valueField);let S=x==null?void 0:x.toString();b&&(S=b.formatter(x)),S==null&&(S=""),g!==p.length-1&&(S+="	"),n+=S}),n=n+`
`}),n&&io(n,!0)),m.interaction.clearState();return}if(i!=null&&i.data){const a=i.data[o],s=ye(t,r=>r.field===o);n=a==null?void 0:a.toString(),s&&(n=s.formatter(a))}else{const a=t==null?void 0:t.reduce((s,r)=>(s[r.field]=r.name,s),{});n=i.value,a!=null&&a[n]&&(n=a[n])}n&&io(n,!0)}function _a(m){const u=m.s2Instance,{x:t,y:e}=m,o={x:t+15,y:e};if(!u)return o;const{height:i,width:l}=u.getCanvasElement().getBoundingClientRect(),{offsetHeight:n,offsetWidth:a}=u.tooltip.getContainer();return a>l&&(o.x=0),n>i&&(o.y=0),(o.x||o.y)&&(o.x&&o.x+a>l&&(o.x-=o.x+a-l),o.y&&(o.y>n?o.y-n>=15?o.y-=n+15:o.y=0:o.y+=15)),o}async function La(m,u){var z,k,N,L,I;const{layoutResult:t}=m.facet,{meta:e,fields:o}=m.dataCfg,i=((z=o==null?void 0:o.rows)==null?void 0:z.length)||0,l=((k=o==null?void 0:o.columns)==null?void 0:k.length)||0;if(t.colLeafNodes.length+i+1>16384){Lo.warning(Pt("chart.pivot_export_invalid_col_exceed"));return}const a=new hi.Workbook,s=a.addWorksheet(Pt("chart.chart_data")),r=e==null?void 0:e.reduce((T,O)=>(O.field&&(T[O.field]=O),T),{});(N=o.columns)==null||N.forEach((T,O)=>{var F;const B=s.getCell(O+1,1);B.value=((F=r[T])==null?void 0:F.name)??T,B.alignment={vertical:"middle",horizontal:"center"},i>=2&&s.mergeCells(O+1,1,O+1,i),B.border={right:{style:"thick",color:{argb:"00000000"}}}}),(L=o==null?void 0:o.rows)==null||L.forEach((T,O)=>{var F;const B=s.getCell(l+1,O+1);B.value=((F=r[T])==null?void 0:F.name)??T,B.alignment={vertical:"middle",horizontal:"center"},B.border={bottom:{style:"thick",color:{argb:"00000000"}}},O===o.rows.length-1&&(B.border.right={style:"thick",color:{argb:"00000000"}})});const{rowLeafNodes:d,rowsHierarchy:f,rowNodes:c}=t,p=f.maxLevel+1,h={};d.forEach(T=>{let O=T.parent;for(;O;){const P=h[O.id]??0;h[O.id]=P+1,O=O.parent}const{rowIndex:B}=T,F=B+1+l+1,M=T.level+1,R=s.getCell(F,M);R.value=T.label,R.alignment={vertical:"middle",horizontal:"center"},M<p&&s.mergeCells(F,M,F,p),R.border={right:{style:"thick",color:{argb:"00000000"}}}});const g=T=>{var O;return(O=T.children)!=null&&O.length?g(T.children[0]):T.rowIndex+1};c==null||c.forEach(T=>{if(T.isLeaf)return;const O=g(T),B=h[T.id],F=O+l+1,M=T.children[0].level-T.level,R=T.label,P=s.getCell(F,T.level+1);P.value=R,P.alignment={vertical:"middle",horizontal:"center"},(M>1||B>1)&&s.mergeCells(F,T.level+1,F+B-1,T.level+M)});const{colLeafNodes:y,colNodes:x,colsHierarchy:b}=t,S=b.maxLevel+1,A={};y.forEach(T=>{var V;let O=T.parent;for(;O;){const X=A[O.id]??0;A[O.id]=X+1,O=O.parent}const{colIndex:B}=T,F=T.level+1,M=B+1+i,R=s.getCell(F,M);let P=T.label;T.field==="$$extra$$"&&((V=r[P])!=null&&V.name)&&(P=r[P].name),R.value=P,R.alignment={vertical:"middle",horizontal:"center"},F<S&&s.mergeCells(F,M,S,M),R.border={bottom:{style:"thick",color:{argb:"00000000"}}}});const C=T=>{var O;return(O=T.children)!=null&&O.length?C(T.children[0]):T.colIndex+1};x.forEach(T=>{if(T.isLeaf)return;const O=C(T),B=A[T.id],F=T.level+1,M=T.children[0].level-T.level,R=T.label,P=O+i,V=s.getCell(F,P);V.value=R,V.alignment={vertical:"middle",horizontal:"center"},(M>1||B>1)&&s.mergeCells(F,P,F+M-1,P+B-1)});for(let T=0;T<d.length;T++)for(let O=0;O<y.length;O++){const B=t.getCellMeta(T,O),{fieldValue:F}=B;if(F===0||F){const M=r[B.valueField],R=s.getCell(T+S+1,i+O+1),P=((I=M==null?void 0:M.formatter)==null?void 0:I.call(M,F))||F.toString();R.alignment={vertical:"middle",horizontal:"center"},R.value=P}}const v=await a.xlsx.writeBuffer(),E=new Blob([v],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});gi.saveAs(E,`${u.title??"透视表"}.xlsx`)}async function Ta(m,u){var b,S,A,C;const t=m.facet.layoutResult;if(t.colLeafNodes.length+2>16384){Lo.warning(Pt("chart.pivot_export_invalid_col_exceed"));return}const{meta:e,fields:o}=m.dataCfg,i=((b=o==null?void 0:o.columns)==null?void 0:b.length)||0,l=new hi.Workbook,n=l.addWorksheet(Pt("chart.chart_data")),a=e==null?void 0:e.reduce((v,E)=>(E.field&&(v[E.field]=E),v),{});(S=o.columns)==null||S.forEach((v,E)=>{var k;const z=n.getCell(E+1,1);z.value=((k=a[v])==null?void 0:k.name)??v,z.alignment={vertical:"middle",horizontal:"center"},z.border={right:{style:"thick",color:{argb:"00000000"}}}});const s=t.colsHierarchy.maxLevel+1,r=(A=o==null?void 0:o.rows)==null?void 0:A.map(v=>{var E;return((E=a[v])==null?void 0:E.name)??v}).join("/"),d=n.getCell(i+1,1);d.value=r,d.alignment={vertical:"middle",horizontal:"center"},d.border={right:{style:"thick",color:{argb:"00000000"}},bottom:{style:"thick",color:{argb:"00000000"}}};const{rowLeafNodes:f}=t;f.forEach((v,E)=>{const z=n.getCell(s+E+1,1);z.value=Fl("  ",v.level)+v.label,z.alignment={vertical:"middle",horizontal:"left"},z.border={right:{style:"thick",color:{argb:"00000000"}}}});const c={},{colLeafNodes:p}=t;p.forEach(v=>{var T;let E=v.parent;for(;E;){const O=c[E.id]??0;c[E.id]=O+1,E=E.parent}const{colIndex:z}=v,k=v.level+1,N=z+1+1,L=n.getCell(k,N);let I=v.label;v.field==="$$extra$$"&&((T=a[I])!=null&&T.name)&&(I=a[I].name),L.value=I,L.alignment={vertical:"middle",horizontal:"center"},k<s&&n.mergeCells(k,N,s,N),L.border={bottom:{style:"thick",color:{argb:"00000000"}}}});const h=t.colNodes,g=v=>{var E;return(E=v.children)!=null&&E.length?g(v.children[0]):v.colIndex+1};h.forEach(v=>{if(v.isLeaf)return;const E=g(v),z=c[v.id],k=v.level+1,N=v.children[0].level-v.level,L=E+1,I=n.getCell(k,L);I.value=v.label,I.alignment={vertical:"middle",horizontal:"center"},(N>1||z>1)&&n.mergeCells(k,L,k+N-1,L+z-1)});for(let v=0;v<f.length;v++)for(let E=0;E<p.length;E++){const z=t.getCellMeta(v,E),{fieldValue:k}=z;if(k===0||k){const N=a[z.valueField],L=n.getCell(v+s+1,E+1+1),I=((C=N==null?void 0:N.formatter)==null?void 0:C.call(N,k))||k.toString();L.alignment={vertical:"middle",horizontal:"center"},L.value=I}}const y=await l.xlsx.writeBuffer(),x=new Blob([y],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});gi.saveAs(x,`${u.title??"透视表"}.xlsx`)}async function gr(m,u){var i,l;const{fields:t}=m.dataCfg,e=((i=t==null?void 0:t.rows)==null?void 0:i.length)||0,o=((l=t==null?void 0:t.values)==null?void 0:l.length)||0;if(!(e&&o)){Lo.warning(Pt("chart.pivot_export_invalid_field"));return}u.customAttr.basicStyle.tableLayoutMode!=="tree"?La(m,u):Ta(m,u)}function Ea(m,u,t){var i;const{mergeCells:e}=_(m.customAttr).tableCell,{showIndex:o}=_(m.customAttr).tableHeader;if(e){u.frozenColCount=0,u.frozenRowCount=0;const n=(m.data.fields||[]).reduce((c,p)=>(c[p.dataeaseName]=p,c),{})||{},a=t.meta.findIndex(c=>{var p;return((p=n[c.field])==null?void 0:p.groupType)==="q"}),s=(i=m.data)==null?void 0:i.tableRow;if(a===0||!(s!=null&&s.length))return;const r=[[[0,s.length-1]]],d=[];t.meta.filter((c,p)=>p<a||a===-1).forEach((c,p)=>{const h=r[p],g=[];r.push(g),h.forEach(y=>{const[x,b]=y;let S=s[x][c.field],A=x;for(let C=x;C<=b;C++){const v=s[C][c.field];if(v!==S||C===b){const E=C-A;if(E>1||C===b&&E===1&&S===v){const z=[],k=E%2===1?(E-1)/2:E/2-1;for(let N=0;N<E;N++)z.push({colIndex:o?p+1:p,rowIndex:A+N,showText:N===k});C===b&&S===v&&z.push({colIndex:o?p+1:p,rowIndex:C,showText:!1}),d.push(z),g.push([A,C===b&&S===v?C:C-1])}S=v,A=C}}})}),o&&d.filter(p=>p[0].colIndex===1).forEach(p=>{const h=G(p);h.forEach(g=>{g.colIndex=0}),d.unshift(h)}),u.mergedCellsInfo=d,u.mergedCell=(c,p,h)=>(o&&h.colIndex===0&&(h.fieldValue=Ji(d,h)),new Fa(c,p,h))}}function Ji(m,u){if(!(m!=null&&m.length))return u.rowIndex+1;let t=u.rowIndex;const e=m.reduce((o,i)=>{if(i[0].colIndex!==0)return o;const l=i[0].rowIndex,n=i[i.length-1].rowIndex,a=n-l;return u.rowIndex>=l&&u.rowIndex<=n&&(t=l),u.rowIndex>n?o+a:o},0);return t-e+1}class Fa extends mi{drawBackgroundShape(){const u=Xl(this.cells),{backgroundColor:t,backgroundColorOpacity:e}=this.getBackgroundColor(),o=this.theme.dataCell.cell;this.backgroundShape=Jl(this,{points:u,stroke:o.horizontalBorderColor,fill:t,lineHeight:o.horizontalBorderWidth})}}class _e extends di{hideInteractionShape(){this.stateShapes.forEach(u=>{de(u,fe.backgroundOpacity,0),de(u,fe.backgroundColor,"transparent"),de(u,fe.borderOpacity,0),de(u,fe.borderWidth,0),de(u,fe.borderColor,"transparent")})}drawTextShape(){this.meta.autoWrap?Zi(this,!1):super.drawTextShape()}}class za extends _o{drawTextShape(){this.meta.autoWrap?Zi(this,!0):super.drawTextShape()}}const Zi=(m,u)=>{const t=`
`,e="...",o=m.meta.maxLines??1,{options:{placeholder:i}}=m.spreadsheet,l=Gl(void 0,i),{formattedValue:n}=m.getFormattedFieldValue(),a=m.getTextStyle();let s=mo(n?n==null?void 0:n.toString():l,a,m.meta.width,m.spreadsheet);const r=s.split(t);let d=a.fontSize;if(u){const c=s.split(t);if(r.length>o){const p=c.slice(0,o),h=c[0].length;p[p.length-1]=p[p.length-1].slice(0,h-1)+e,s=p.join(t)}}else{const c=po(s.replaceAll(t,""),a,m.spreadsheet,o),p=Math.floor(m.meta.height/c),h=r.slice(0,p);s=p<1?e:h.join(t)||e;const g=s.split(t);if(!s.endsWith(e)&&(r.length>o||r.length>p)){const y=g[0].length,x=g.slice(0,Math.min(o,p));x[x.length-1]=x[x.length-1].slice(0,y-1)+e,s=x.join(t)}s===e&&(d=12)}m.actualText=s,m.actualTextWidth=m.spreadsheet.measureTextWidth(s,a);const f=m.getTextPosition();m.textShape=Ul(m,[m.textShape],f.x,f.y,s,a,{fontSize:d}),m.textShapes.push(m.textShape)},Jo=(m,u,t,e,o)=>{if(t.showTableHeader===!1)return;const i=o||u.facet.layoutResult,l=e.maxLines??1,n={...u.theme.cornerCell.text},a=m.info.meta.value;let s=po(mo(a,n,m.info.resizedWidth,i.spreadsheet),n,i.spreadsheet,l);const r=i.colLeafNodes.filter(d=>d.colIndex!==m.info.meta.colIndex).reduce((d,f)=>{const c=po(mo(f.value,n,f.width,f.spreadsheet),n,f.spreadsheet,l);return c>d.height?{height:c,colIndex:f.colIndex}:d},{height:0});s=Math.max(s,r.height)+n.fontSize+10.5,o&&(e.tableColumnMode==="adapt"&&(s-=n.fontSize-2),i.colLeafNodes.forEach(d=>d.height=s),i.colsHierarchy.height=s),u.store.set("autoCalcHeight",s)},mo=(m,u,t,e)=>{if(!m&&m!==0)return"";m=m.toString().trim();const o=a=>e.measureTextWidthRoughly(a,u);let i="",l="",n=0;for(let a=0;a<m.length;a++){const s=m[a],r=o(s);n+=r,l+=s;const d=s.charCodeAt(0)>=128?12:8;n>=t-u.fontSize-d&&(i+=l+(a!==m.length-1?`
`:""),l="",n=0)}return i+=l,i},po=(m,u,t,e)=>{let o=0;for(const l of m){const n=u.fontSize/(l.charCodeAt(0)>=128?5:2.5);o=Math.max(o,t.measureTextHeight(l,u)+n)}const i=m.split(`
`).length;return Math.min(i,e)*o},Qi=(m,u,t,e,o,i)=>{if(!i||!t.length)return;const l={};l[t.length]=e.tableTitleHeight,u.style.rowCfg={heightByField:l},u.frozenTrailingRowCount=1;const n=m.yAxis,a=m.xAxis,s=t.reduce((r,d)=>(m.type==="table-info"?a.filter(f=>[2,3,4].includes(f.deType)).forEach(f=>{r[f.dataeaseName]=(parseFloat(d[f.dataeaseName])||0)+(parseFloat(r[f.dataeaseName])||0)}):n.forEach(f=>{r[f.dataeaseName]=(parseFloat(d[f.dataeaseName])||0)+(parseFloat(r[f.dataeaseName])||0)}),r),{SUMMARY:!0});t.push(s),u.dataCell=r=>(r.autoWrap=o.autoWrap,r.maxLines=o.maxLines,r.rowIndex!==t.length-1?new _e(r,r.spreadsheet):(r.colIndex===0&&(e.showIndex||a.length)&&(r.fieldValue=o.summaryLabel??Pt("chart.total_show")),new ka(r,r.spreadsheet)))},Ki=(m,u,t,e,o)=>{!o||!u.length||m.on(j.LAYOUT_BEFORE_RENDER,()=>{const l=e.showTableHeader===!0?2:1,n=e.tableTitleHeight*l+t.tableItemHeight*(u.length-1);n<m.options.height&&(m.options.height=n<m.options.height-6?n+6:n)})};class ka extends _e{getTextStyle(){const u=G(this.theme.colCell.bolderText);return u.textAlign=this.theme.dataCell.text.textAlign,u}getBackgroundColor(){const{backgroundColor:u,backgroundColorOpacity:t}=this.theme.colCell.cell;return{backgroundColor:u,backgroundColorOpacity:t}}}const tl=(m,u,t,e)=>{const o=()=>{const i=document.getElementById(e+"_empty");i&&i.parentElement.removeChild(i)};o(),!t.length&&m.on(j.LAYOUT_AFTER_HEADER_LAYOUT,i=>{if(o(),!t.length){const l=document.createElement("div"),n=Math.min(m.options.width,i.colsHierarchy.width)/2-32;l.id=e+"_empty",l.textContent=Pt("data_set.no_data"),l.setAttribute("style",`position: absolute;
        left: ${n}px;
        top: 50%;`);const a=document.getElementById(e);a.insertBefore(l,a.firstChild)}})},Oa=m=>{const u=[],t=e=>{var o,i;if(!((o=e.children)!=null&&o.length)){u.push(e);return}for(let l=0;l<((i=e.children)==null?void 0:i.length);l++)t(e.children[l])};return m.forEach(e=>t(e)),u},el=(m,u)=>{var e;const t=[];for(let o=0;o<u.length;o++)m.includes(u[o].key)&&t.push(u[o]),(e=u[o].children)!=null&&e.length&&t.push(...el(m,u[o].children));return t};class Oo extends Qe{constructor(u,t){super($t.S2,u,t)}configTheme(u){return ha(u)}configStyle(u,t){return ga(u,t)}configEmptyDataStrategy(u){return ba(u)}configTooltip(u,t){wa(u,t)}configHeaderInteraction(u,t){va(u,t)}configConditions(u){return ya(u)}configMergeCells(u,t,e){Ea(u,t,e)}showTooltip(u,t,e){var s;const o=u.getCell(t.target),i=o.getMeta();let l="",n;switch(o.cellType){case"dataCell":case"mergedCell":if(i.valueField===fi){l=i.fieldValue.toString();break}n=ye(e,r=>r.field===i.valueField),i.fieldValue===0&&(l="0"),i.fieldValue&&(l=(s=n==null?void 0:n.formatter)==null?void 0:s.call(n,i.fieldValue));break;case"rowCell":case"colCell":l=i.label,n=ye(e,r=>r.field===l),n&&(l=n.name);break}if(!l)return;t.s2Instance=u;const a=u.options.tooltip.style;ui(u.tooltip.container,{style:a}),u.showTooltip({position:{x:t.clientX,y:t.clientY},content:l,meta:i,event:t})}configTouchEvent(u,t,e){const{touchAction:o}=t;u.once(j.LAYOUT_AFTER_RENDER,()=>{if(u.store.get("touchActionInit"))return;u.store.set("touchActionInit",!0);const l=u.getCanvasElement();let n=Date.now();l.addEventListener("touchstart",()=>{n=Date.now()}),l.addEventListener("touchend",a=>{var h;if(Date.now()-n>300)return;const r=l.getBoundingClientRect(),d=[a.changedTouches[0].pageX,a.changedTouches[0].pageY],f=[d[0]-r.x,d[1]-r.y],c=u.container.getShape(f[0],f[1]);if(((h=c.cfg)==null?void 0:h.type)==="image")return;o(()=>{if(a.preventDefault(),a.stopPropagation(),c){const g={target:c,x:f[0],y:f[1],clientX:d[0],clientY:d[1],originEvent:a};this.showTooltip(u,g,e)}})})})}}const ol=["background-overall-component","border-style","basic-style-selector","table-header-selector","table-cell-selector","title-selector","tooltip-selector","function-cfg","threshold","scroll-cfg","jump-set","linkage"],Bt={"border-style":["all"],"background-overall-component":["all"],"basic-style-selector":["tableColumnMode","tableBorderColor","tableScrollBarColor","alpha"],"table-header-selector":["tableHeaderBgColor","tableTitleFontSize","tableHeaderFontColor","tableTitleHeight","tableHeaderAlign","showIndex","indexLabel","showColTooltip","showHorizonBorder","showVerticalBorder"],"table-cell-selector":["tableItemBgColor","tableItemFontSize","tableFontColor","tableItemAlign","tableItemHeight","enableTableCrossBG","tableItemSubBgColor","showTooltip","showHorizonBorder","showVerticalBorder"],"title-selector":["title","fontSize","color","hPosition","isItalic","isBolder","remarkShow","fontFamily","letterSpace","fontShadow"],"tooltip-selector":["fontSize","color","backgroundColor","show"],"function-cfg":["emptyDataStrategy"],threshold:["tableThreshold"]},{t:Zo}=Y();class Ia extends _e{drawTextShape(){const u=new Image,{x:t,y:e,width:o,height:i,fieldValue:l}=this.meta;u.src=l,u.setAttribute("crossOrigin","anonymous"),u.onload=()=>{!this.cfg.children&&(this.cfg.children=[]);const{width:n,height:a}=u,s=Math.max(n/o,a/i),r=n/s*.8,d=a/s*.8;this.textShape=this.addShape("image",{attrs:{x:t+(r<o?(o-r)/2:0),y:e+(d<i?(i-d)/2:0),width:r,height:d,img:u}})}}}class Na extends Oo{constructor(){super("table-info",[]);w(this,"properties",ol);w(this,"propertyInner",{...Bt,"table-header-selector":[...Bt["table-header-selector"],"tableHeaderSort","showTableHeader","headerGroup"],"basic-style-selector":["tableColumnMode","tableBorderColor","tableScrollBarColor","alpha","tablePageMode","showHoverStyle","autoWrap","showSummary","summaryLabel"],"table-cell-selector":[...Bt["table-cell-selector"],"tableFreeze","tableColumnFreezeHead","tableRowFreezeHead","mergeCells"]});w(this,"axis",["xAxis","filter","drill"]);w(this,"axisConfig",{xAxis:{name:`${Zo("chart.drag_block_table_data_column")} / ${Zo("chart.dimension_or_quota")}`}})}drawChart(t){var k,N;const{container:e,chart:o,pageInfo:i,action:l,resizeAction:n}=t,a=document.getElementById(e);let s=((k=o.data)==null?void 0:k.fields)??[];const r=[],d=[],f=o.xAxis.reduce((L,I)=>(L[I.dataeaseName]=I,L),{}),c={};if(o.drill){const L=o.drillFilters.map(F=>F.fieldId),I=o.drillFields[0].id,T=o.xAxis.findIndex(F=>F.id===I),O=o.drillFields[L.length].id,B=s.find(F=>F.id===O);L.push(O),s=s.filter(F=>!L.includes(F.id)),c[B.dataeaseName]=o.drillFields[0].dataeaseName,s.splice(T,0,B)}s.forEach(L=>{const I=f[L.dataeaseName];(I==null?void 0:I.hide)!==!0&&(r.push(L.dataeaseName),d.push({field:L.dataeaseName,name:L.chartShowName??L.name,formatter:function(T){if(!I||T==null||![2,3,4].includes(I.deType)||!He(T))return T;let O=I.formatterCfg;return O||(O=je),D(T,O)}}))});const{basicStyle:p,tableCell:h,tableHeader:g,tooltip:y}=_(o.customAttr),{headerGroup:x,showTableHeader:b}=g;if(x&&b!==!1){const{headerGroupConfig:L}=g;if((N=L==null?void 0:L.columns)!=null&&N.length){const I=r.map(B=>c[B]||B),O=Oa(L.columns).map(B=>B.key);if(kl(O,I)){if(Object.keys(c).length){const B=Object.values(c)[0],F=Object.keys(c)[0],[M]=el([B],L.columns);M.key=F}r.splice(0,r.length,...L.columns),d.push(...L.meta)}}}const S=this.configEmptyDataStrategy(o),A={fields:{columns:r},meta:d,data:S},C={width:a.getBoundingClientRect().width,height:a.offsetHeight,showSeriesNumber:g.showIndex,conditions:this.configConditions(o),tooltip:{getContainer:()=>a,renderTooltip:L=>new Xi(L)},interaction:{hoverHighlight:p.showHoverStyle!==!1,scrollbarPosition:S.length?We.CONTENT:We.CANVAS}};if(C.style=this.configStyle(o,A),p.tableColumnMode==="adapt"){const L=s.filter(I=>{var T;return I.deType===7&&!((T=f[I.dataeaseName])!=null&&T.hide)});C.style.colCfg.widthByFieldValue=L==null?void 0:L.reduce((I,T)=>(I[T.chartShowName??T.name]=120,I),{})}if(h.tableFreeze&&!h.mergeCells&&(C.frozenColCount=h.tableColumnFreezeHead??0,C.frozenRowCount=h.tableRowFreezeHead??0),C.showSeriesNumber){let L=g.indexLabel;L||(L=""),C.layoutCoordinate=(I,T,O)=>{O.colIndex===0&&O.rowIndex===0&&(O.label=L,O.value=L)}}C.dataCell=L=>{var T;const I=(T=s.filter(O=>O.dataeaseName===L.valueField))==null?void 0:T[0];return(I==null?void 0:I.deType)===7&&o.showPosition!=="dialog"?new Ia(L,L==null?void 0:L.spreadsheet):(L.colIndex===0&&C.showSeriesNumber&&(h.mergeCells?L.fieldValue=Ji(C.mergedCellsInfo,L):L.fieldValue=i.pageSize*(i.currentPage-1)+L.rowIndex+1),L.autoWrap=h.mergeCells?!1:p.autoWrap,L.maxLines=p.maxLines,new _e(L,L==null?void 0:L.spreadsheet))},this.configTooltip(o,C),this.configMergeCells(o,C,A),g.showTableHeader===!1?(C.style.colCfg.height=1,h.showHorizonBorder===!1&&(C.style.colCfg.height=0),C.interaction.resize={colCellVertical:!1},C.colCell=(L,I,T)=>(L.label=" ",new _o(L,I,T))):(o.container=e,this.configHeaderInteraction(o,C),C.colCell=(L,I,T)=>(L.autoWrap=h.mergeCells?!1:p.autoWrap,L.maxLines=p.maxLines,new za(L,I,T))),Qi(o,C,S,g,p,p.showSummary);const v=new pi(a,A,C);Ki(v,S,h,g,p.showSummary),p.autoWrap&&!h.mergeCells&&(v.on(j.LAYOUT_RESIZE_COL_WIDTH,L=>{Jo(L,v,g,p,null)}),v.on(j.LAYOUT_AFTER_HEADER_LAYOUT,L=>{var T;const I=v.store.get("autoCalcHeight");if(I)L.colLeafNodes.forEach(O=>O.height=I),L.colsHierarchy.height=I,v.store.set("autoCalcHeight",void 0);else if((T=L.colLeafNodes)!=null&&T.length){const{value:O,width:B}=L.colLeafNodes[0];Jo({info:{meta:{value:O},resizedWidth:B}},v,g,p,L)}})),p.tableColumnMode==="adapt"&&(v.on(j.LAYOUT_RESIZE_COL_WIDTH,()=>{v.store.set("lastLayoutResult",v.facet.layoutResult)}),v.on(j.LAYOUT_AFTER_HEADER_LAYOUT,L=>{var V,X;const I=v.store.get("lastLayoutResult");if(I){const H=(X=(V=v.options.style)==null?void 0:V.colCfg)==null?void 0:X.widthByFieldValue,q=(I==null?void 0:I.colLeafNodes.reduce((et,yt)=>(et[yt.value]=(H==null?void 0:H[yt.value])??yt.width,et),{}))||{},At=L.colLeafNodes.reduce((et,yt)=>(yt.width=q[yt.value]||yt.width,yt.x=et,et+yt.width),0);L.colNodes.forEach(et=>{et.colIndex===-1&&(et.width=ho(et),et.x=go(et))}),L.colsHierarchy.width=At,v.store.set("lastLayoutResult",void 0);return}const T=s.filter(H=>{var q;return H.deType===7&&!((q=f[H.dataeaseName])!=null&&q.hide)}).map(H=>H.dataeaseName),O=L.colLeafNodes.reduce((H,q)=>H+(T.includes(q.field)?120:q.width),0),B=a.getBoundingClientRect().width;if(B<=O){L.colLeafNodes.reduce((H,q)=>(q.width=Math.round(q.width),q.x=H,H+q.width),0);return}const F=L.colLeafNodes.reduce((H,q)=>H+(T.includes(q.field)?0:q.width),0),R=(B-T.length*120)/F,P=L.colLeafNodes.reduce((H,q)=>(q.width=T.includes(q.field)?120:Math.round(q.width*R),q.x=H,H+q.width),0);L.colNodes.forEach(H=>{H.colIndex===-1&&(H.width=ho(H),H.x=go(H))}),P>B&&(L.colLeafNodes[L.colLeafNodes.length-1].width-=P-B),L.colsHierarchy.width=B})),tl(v,p,S,e),v.on(j.DATA_CELL_CLICK,L=>{const T=v.getCell(L.target).getMeta(),O=s.reduce((R,P)=>(R[P.dataeaseName]=P.id,R),{}),B=v.dataSet.getRowData(T),F=[];for(const R in B)O[R]&&F.push({id:O[R],value:B[R]});const M={x:L.x,y:L.y,data:{dimensionList:F,name:O[T.valueField],sourceType:"table-info",quotaList:[]}};l(M)}),v.on(j.MERGED_CELLS_CLICK,L=>v.emit(j.DATA_CELL_CLICK,L));const{show:E}=y;E&&(v.on(j.COL_CELL_HOVER,L=>this.showTooltip(v,L,d)),v.on(j.DATA_CELL_HOVER,L=>this.showTooltip(v,L,d)),v.on(j.MERGED_CELLS_HOVER,L=>this.showTooltip(v,L,d))),v.on(j.LAYOUT_RESIZE_COL_WIDTH,L=>n(L)),v.on(j.GLOBAL_CONTEXT_MENU,L=>ko(v,L,d)),this.configTouchEvent(v,t,d);const z=this.configTheme(o);return v.setThemeCfg({theme:z}),v}configTheme(t){const e=super.configTheme(t),{basicStyle:o,tableCell:i}=_(t.customAttr);if(i.mergeCells){const l=$(i.tableFontColor,o.alpha);let n=i.tableItemBgColor;_t(n)||(n=$(n,o.alpha));const{tableBorderColor:a}=o,{tableItemAlign:s,tableItemFontSize:r}=i,d=i.isItalic?"italic":"normal",f=i.isBolder===!1?"normal":"bold",c={dataCell:{cell:{crossBackgroundColor:n}},mergedCell:{cell:{backgroundColor:n,crossBackgroundColor:n,horizontalBorderColor:a,verticalBorderColor:a,horizontalBorderWidth:i.showHorizonBorder?1:0,verticalBorderWidth:i.showVerticalBorder?1:0},bolderText:{fill:l,textAlign:s,fontSize:r,fontStyle:d,fontWeight:f},text:{fill:l,textAlign:s,fontSize:r,fontStyle:d,fontWeight:f},measureText:{fill:l,textAlign:s,fontSize:r,fontStyle:d,fontWeight:f},seriesText:{fill:l,textAlign:s,fontSize:r,fontStyle:d,fontWeight:f}}};xt(e,c)}return e}}function ho(m){var u;return(u=m.children)!=null&&u.length?m.children.reduce((t,e)=>t+ho(e),0):m.width}function go(m){var u;return(u=m.children)!=null&&u.length?go(m.children[0]):m.x}const Ba=Object.freeze(Object.defineProperty({__proto__:null,TableInfo:Na},Symbol.toStringTag,{value:"Module"})),{t:Be}=Y();class Da extends Oo{constructor(){super("table-normal",[]);w(this,"properties",ol);w(this,"propertyInner",{...Bt,"table-header-selector":[...Bt["table-header-selector"],"tableHeaderSort","showTableHeader"],"basic-style-selector":[...Bt["basic-style-selector"],"showSummary","summaryLabel","showHoverStyle"],"table-cell-selector":[...Bt["table-cell-selector"],"tableFreeze","tableColumnFreezeHead","tableRowFreezeHead"]});w(this,"axis",["xAxis","yAxis","drill","filter"]);w(this,"axisConfig",{xAxis:{name:`${Be("chart.drag_block_table_data_column")} / ${Be("chart.dimension")}`,type:"d"},yAxis:{name:`${Be("chart.drag_block_table_data_column")} / ${Be("chart.quota")}`,type:"q"}})}setupDefaultOptions(t){return t.xAxis=[],t}drawChart(t){const{container:e,chart:o,action:i,resizeAction:l}=t,n=document.getElementById(e);if(!n)return;let a=o.data.fields;const s=[],r=[];if(o.drill){const C=o.drillFilters.map(N=>N.fieldId),v=o.drillFields[0].id,E=o.xAxis.findIndex(N=>N.id===v),z=o.drillFields[C.length].id,k=a.filter(N=>N.id===z);C.push(z),a=a.filter(N=>!C.includes(N.id)),a.splice(E,0,...k)}const d=[...o.xAxis,...o.yAxis].reduce((C,v)=>(C[v.dataeaseName]=v,C),{});a.forEach(C=>{const v=d[C.dataeaseName];(v==null?void 0:v.hide)!==!0&&(s.push(C.dataeaseName),r.push({field:C.dataeaseName,name:C.chartShowName??C.name,formatter:function(E){if(!v||E==null||![2,3,4].includes(v.deType)||!He(E))return E;let z=v.formatterCfg;return z||(z=je),D(E,z)}}))});const f=this.configEmptyDataStrategy(o),c={fields:{columns:s},meta:r,data:f},{basicStyle:p,tableCell:h,tableHeader:g,tooltip:y}=_(o.customAttr),x={width:n.getBoundingClientRect().width,height:n.offsetHeight,showSeriesNumber:g.showIndex,conditions:this.configConditions(o),tooltip:{getContainer:()=>n,renderTooltip:C=>new Xi(C)},interaction:{hoverHighlight:p.showHoverStyle!==!1,scrollbarPosition:f.length?We.CONTENT:We.CANVAS}};if(x.style=this.configStyle(o,c),h.tableFreeze&&(x.frozenColCount=h.tableColumnFreezeHead??0,x.frozenRowCount=h.tableRowFreezeHead??0),x.showSeriesNumber){let C=g.indexLabel;C||(C=""),x.layoutCoordinate=(v,E,z)=>{z.colIndex===0&&z.rowIndex===0&&(z.label=C,z.value=C)},x.dataCell=v=>new di(v,v.spreadsheet)}this.configTooltip(o,x),g.showTableHeader===!1?(x.style.colCfg.height=1,h.showHorizonBorder===!1&&(x.style.colCfg.height=0),x.interaction.resize={colCellVertical:!1},x.colCell=(C,v,E)=>(C.label=" ",new _o(C,v,E))):(o.container=e,this.configHeaderInteraction(o,x)),Qi(o,x,f,g,p,p.showSummary);const b=new pi(n,c,x);Ki(b,f,h,g,p.showSummary),p.tableColumnMode==="adapt"&&(b.on(j.LAYOUT_RESIZE_COL_WIDTH,()=>{b.store.set("lastLayoutResult",b.facet.layoutResult)}),b.on(j.LAYOUT_AFTER_HEADER_LAYOUT,C=>{var N,L;const v=b.store.get("lastLayoutResult");if(v){const I=(L=(N=b.options.style)==null?void 0:N.colCfg)==null?void 0:L.widthByFieldValue,T=(v==null?void 0:v.colLeafNodes.reduce((B,F)=>(B[F.value]=(I==null?void 0:I[F.value])??F.width,B),{}))||{},O=C.colLeafNodes.reduce((B,F)=>(F.width=T[F.value]||F.width,F.x=B,B+F.width),0);C.colsHierarchy.width=O,b.store.set("lastLayoutResult",void 0);return}const E=n.getBoundingClientRect().width,z=E/C.colsHierarchy.width;if(z<=1){C.colLeafNodes.reduce((I,T)=>(T.width=Math.round(T.width),T.x=I,I+T.width),0);return}const k=C.colLeafNodes.reduce((I,T)=>(T.width=Math.round(T.width*z),T.x=I,I+T.width),0);k>E&&(C.colLeafNodes[C.colLeafNodes.length-1].width-=k-E),C.colsHierarchy.width=E})),tl(b,p,f,e),b.on(j.DATA_CELL_CLICK,C=>{const E=b.getCell(C.target).getMeta(),z=a.reduce((I,T)=>(I[T.dataeaseName]=T.id,I),{}),k=b.dataSet.getRowData(E),N=[];for(const I in k)z[I]&&N.push({id:z[I],value:k[I]});const L={x:C.x,y:C.y,data:{dimensionList:N,name:z[E.valueField],sourceType:"table-normal",quotaList:[]}};i(L)});const{show:S}=y;S&&(b.on(j.COL_CELL_HOVER,C=>this.showTooltip(b,C,r)),b.on(j.DATA_CELL_HOVER,C=>this.showTooltip(b,C,r))),b.on(j.LAYOUT_RESIZE_COL_WIDTH,C=>l(C)),b.on(j.GLOBAL_CONTEXT_MENU,C=>ko(b,C,r)),this.configTouchEvent(b,t,r);const A=this.configTheme(o);return b.setThemeCfg({theme:A}),b}}const Ma=Object.freeze(Object.defineProperty({__proto__:null,TableNormal:Da},Symbol.toStringTag,{value:"Module"})),{t:Wt}=Y();class Pa extends Ql{getTotalValue(u,t){const{options:e}=this.spreadsheet,i=Nl(t)?t:this.getTotalStatus(u),{aggregation:l,calcFunc:n}=Ya(i,e==null?void 0:e.totals)||{},a=W(e==null?void 0:e.totals)&&!this.spreadsheet.isHierarchyTreeType()?ge.SUM:"",s=qa[l||a];if(s||n){const r=this.getMultiData(u,{queryType:Kl.DetailOnly});let d;return n?d=n(u,r,this.spreadsheet,i):s&&(d=s(r,Wo)),{...u,[Wo]:d,[u[dt]]:d}}}}class $a extends Oo{constructor(){super("table-pivot",[]);w(this,"properties",["border-style","background-overall-component","basic-style-selector","table-header-selector","table-cell-selector","table-total-selector","title-selector","tooltip-selector","function-cfg","threshold","linkage","jump-set"]);w(this,"propertyInner",{...Bt,"table-header-selector":["tableHeaderBgColor","tableTitleFontSize","tableHeaderFontColor","tableTitleHeight","tableHeaderAlign","showColTooltip","showRowTooltip","showHorizonBorder","showVerticalBorder"],"table-total-selector":["row","col"],"basic-style-selector":["tableColumnMode","tableBorderColor","tableScrollBarColor","alpha","tableLayoutMode","showHoverStyle"]});w(this,"axis",["xAxis","xAxisExt","yAxis","filter"]);w(this,"axisConfig",{xAxis:{name:`${Wt("chart.table_pivot_row")} / ${Wt("chart.dimension")}`,type:"d"},xAxisExt:{name:`${Wt("chart.drag_block_table_data_column")} / ${Wt("chart.dimension")}`,type:"d",allowEmpty:!0},yAxis:{name:`${Wt("chart.drag_block_table_data_column")} / ${Wt("chart.quota")}`,type:"q"}})}drawChart(t){var O,B;const{container:e,chart:o,chartObj:i,action:l}=t,n=document.getElementById(e),{xAxisExt:a,xAxis:s,yAxis:r}=o,[d,f,c]=[a,s,r].map(F=>F.map(M=>M.dataeaseName)),{fields:p,customCalc:h}=o.data;if(!p||p.length===0){i&&i.destroy();return}const g=[],y=[],x=[...o.xAxis,...o.xAxisExt,...o.yAxis].reduce((F,M)=>(F[M.dataeaseName]=M,F),{});p.forEach(F=>{const M=x[F.dataeaseName];g.push(F.dataeaseName),y.push({field:F.dataeaseName,name:F.chartShowName??F.name,formatter:R=>!M||R==null||![2,3,4].includes(M.deType)||!He(R)?R:M.formatterCfg?D(R,M.formatterCfg):D(R,je)})});const{basicStyle:b,tooltip:S,tableTotal:A}=_(o.customAttr);(!A.row.subTotalsDimensionsNew||A.row.subTotalsDimensions==null)&&(A.row.subTotalsDimensions=f),A.col.subTotalsDimensions=d;const C=[];if(A.row.totalSort&&A.row.totalSort!=="none"&&d.length>0&&A.row.showGrandTotals&&c.indexOf(A.row.totalSortField)>-1&&d.forEach(F=>{const M={sortFieldId:F,sortMethod:A.row.totalSort.toUpperCase(),sortByMeasure:lo,query:{[dt]:A.row.totalSortField}};C.push(M)}),A.col.totalSort&&A.col.totalSort!=="none"&&f.length>0&&A.col.showGrandTotals&&c.indexOf(A.col.totalSortField)>-1&&f.forEach(F=>{const M={sortFieldId:F,sortMethod:A.col.totalSort.toUpperCase(),sortByMeasure:lo,query:{[dt]:A.col.totalSortField}};C.push(M)}),!(a!=null&&a.length)){const F=r==null?void 0:r.find(M=>!["none","custom_sort"].includes(M.sort));if(F){const M={sortFieldId:f[0],sortMethod:F.sort.toUpperCase(),sortByMeasure:lo,query:{[dt]:F.dataeaseName}};C.push(M)}}const v=[A.row.calcTotals,A.row.calcSubTotals,A.col.calcTotals,A.col.calcSubTotals],E={row:o.xAxis,col:o.xAxisExt,quota:o.yAxis};(O=o.xAxisExt)!=null&&O.length||(b.tableLayoutMode==="tree"?(A.col.calcTotals=A.row.calcSubTotals,(B=A.col.calcTotals.cfg)!=null&&B.length||(A.col.calcTotals.cfg=o.yAxis.map(F=>({dataeaseName:F.dataeaseName,aggregation:"SUM"})))):A.col.calcTotals.calcFunc=()=>"-"),v.forEach(F=>{var M;if((M=F.cfg)!=null&&M.length){delete F.aggregation;const R=F.cfg.reduce((P,V)=>(P[V.dataeaseName]=V,P),{});F.calcFunc=(P,V,X,H)=>Ra(P,V,H,o,R,E,h)}});const z=this.configEmptyDataStrategy(o),k={fields:{rows:f,columns:d,values:c},meta:y,data:z,sortParams:C},N={width:n.offsetWidth,height:n.offsetHeight,totals:A,conditions:this.configConditions(o),tooltip:{getContainer:()=>n},hierarchyType:b.tableLayoutMode??"grid",dataSet:F=>new Pa(F),interaction:{hoverHighlight:b.showHoverStyle!==!1},dataCell:F=>new _e(F,F.spreadsheet)};if(N.style=this.configStyle(o,k),b.tableLayoutMode==="tree"){const{defaultExpandLevel:F}=b;He(F)&&(F>=o.xAxis.length?N.style.rowExpandDepth=F:N.style.rowExpandDepth=F-2),F==="all"&&(N.style.rowExpandDepth=o.xAxis.length),F||(N.style.hierarchyCollapse=!0)}this.configTooltip(o,N);const L=new Zl(n,k,N);b.tableColumnMode==="adapt"&&(L.on(j.LAYOUT_RESIZE_COL_WIDTH,()=>{L.store.set("lastLayoutResult",L.facet.layoutResult)}),L.on(j.LAYOUT_RESIZE_ROW_WIDTH,()=>{L.store.set("lastLayoutResult",L.facet.layoutResult)}),L.on(j.LAYOUT_RESIZE_TREE_WIDTH,()=>{L.store.set("lastLayoutResult",L.facet.layoutResult)}),L.on(j.LAYOUT_AFTER_HEADER_LAYOUT,F=>{var q,At,et,yt,No;const M=L.store.get("lastLayoutResult");if(M){const lt=(At=(q=L.options.style)==null?void 0:q.colCfg)==null?void 0:At.widthByFieldValue,pt=(yt=(et=L.options.style)==null?void 0:et.rowCfg)==null?void 0:yt.widthByField,Bo=((No=L.options.style)==null?void 0:No.treeRowsWidth)||M.rowsHierarchy.width,rl=M.colLeafNodes.reduce((ut,Ct)=>(ut[Ct.id]=(lt==null?void 0:lt[Ct.value])??Ct.width,ut),{})||{},Do=F.colLeafNodes.reduce((ut,Ct)=>(Ct.width=rl[Ct.id]||Ct.width,Ct.x=ut,ut+Ct.width),0);if(F.colNodes.forEach(ut=>{ut.isLeaf||(ut.width=this.getColWidth(ut),ut.x=this.getLeftChild(ut).x)}),b.tableLayoutMode==="tree")F.rowNodes.forEach(ut=>{ut.width=Bo}),F.rowsHierarchy.width=Bo,F.colsHierarchy.width=Do;else{const ut=M.rowNodes.reduce((ct,ht)=>(ct[ht.id]=(pt==null?void 0:pt[ht.field])??ht.width,ct),{})||{};F.rowNodes.forEach(ct=>{ct.x=0,ct.width=ut[ct.id]||ct.width;let ht=ct;for(;ht.parent.id!=="root";)ct.x+=ht.parent.width,ht=ht.parent});const Ct=F.rowsHierarchy.sampleNodesForAllLevels.reduce((ct,ht)=>ct+ht.width,0),Mo=F.rowsHierarchy.maxLevel;F.rowNodes.forEach(ct=>{if(ct.isTotalRoot||ct.isSubTotals&&ct.level<Mo){let ht=0;for(let oo=ct.level;oo<=Mo;oo++)ht+=F.rowsHierarchy.sampleNodesForAllLevels[oo].width;ct.width=ht}}),F.rowsHierarchy.width=Ct,F.colsHierarchy.width=Do}L.store.set("lastLayoutResult",void 0);return}const R=n.getBoundingClientRect().width,P=R/(F.colsHierarchy.width+F.rowsHierarchy.width);if(P<=1)return;const V=Math.round(F.rowsHierarchy.width*P);F.rowNodes.forEach(lt=>{lt.width=Math.round(lt.width*P)}),b.tableLayoutMode!=="tree"&&F.rowNodes.forEach(lt=>{lt.x=0;let pt=lt;for(;pt.parent.id!=="root";)lt.x+=pt.parent.width,pt=pt.parent});let X=F.colLeafNodes.reduce((lt,pt)=>(pt.width=Math.round(pt.width*P),pt.x=lt,lt+pt.width),0);F.colNodes.forEach(lt=>{lt.isLeaf||(lt.width=this.getColWidth(lt),lt.x=this.getLeftChild(lt).x)});const H=X+V;H>R&&(F.colLeafNodes[F.colLeafNodes.length-1].width-=H-R,X=X-(H-R)),F.colsHierarchy.width=X,F.rowsHierarchy.width=V}));const{show:I}=S;I&&(L.on(j.COL_CELL_HOVER,F=>this.showTooltip(L,F,y)),L.on(j.ROW_CELL_HOVER,F=>this.showTooltip(L,F,y)),L.on(j.DATA_CELL_HOVER,F=>this.showTooltip(L,F,y))),Ga(L,z),L.on(j.DATA_CELL_CLICK,F=>this.dataCellClickAction(o,F,L,l)),L.on(j.ROW_CELL_CLICK,F=>this.headerCellClickAction(o,F,L,l)),L.on(j.COL_CELL_CLICK,F=>this.headerCellClickAction(o,F,L,l)),L.on(j.GLOBAL_CONTEXT_MENU,F=>ko(L,F,y)),this.configTouchEvent(L,t,y);const T=this.configTheme(o);return L.setThemeCfg({theme:T}),L}getColWidth(t){var o;let e=0;return(o=t.children)!=null&&o.length?t.children.forEach(i=>{e+=this.getColWidth(i)}):e=t.width,e}getLeftChild(t){var e;return(e=t.children)!=null&&e.length?this.getLeftChild(t.children[0]):t}dataCellClickAction(t,e,o,i){const n=o.getCell(e.target).getMeta(),a=t.data.fields.reduce((f,c)=>(f[c.dataeaseName]=c.id,f),{}),s={...n.rowQuery,...n.colQuery};s[n.valueField]=n.fieldValue;const r=[];for(const f in s)a[f]&&r.push({id:a[f],value:s[f]});const d={x:e.x,y:e.y,data:{dimensionList:r,name:a[n.valueField],sourceType:"table-pivot",quotaList:[]}};i(d)}headerCellClickAction(t,e,o,i){const n=o.getCell(e.target).getMeta(),a=n.query,s=t.data.fields.reduce((f,c)=>(f[c.dataeaseName]=c.id,f),{}),r=[];for(const f in a)s[f]&&r.push({id:s[f],value:a[f]});const d={x:e.x,y:e.y,data:{dimensionList:r,name:s[n.valueField],sourceType:"table-pivot",quotaList:[]}};i(d)}configTheme(t){const e=super.configTheme(t),{basicStyle:o,tableHeader:i}=_(t.customAttr);let l=i.tableHeaderBgColor;_t(l)||(l=$(l,o.alpha));let n=i.tableHeaderCornerBgColor??K.tableHeaderCornerBgColor;_t(n)||(n=$(n,o.alpha));let a=i.tableHeaderColBgColor??K.tableHeaderColBgColor;_t(a)||(a=$(a,o.alpha));let s=o.tableBorderColor;_t(s)||(s=$(s,o.alpha));const r=$(i.tableHeaderColFontColor,o.alpha),d=$(i.tableHeaderCornerFontColor,o.alpha),f=i.isColItalic?"italic":"normal",c=i.isCornerItalic?"italic":"normal",p=i.isColBolder===!1?"normal":"bold",h=i.isCornerBolder===!1?"normal":"bold",g={rowCell:{cell:{backgroundColor:a,horizontalBorderColor:s,verticalBorderColor:s},text:{fill:r,fontSize:i.tableTitleColFontSize,textAlign:i.tableHeaderColAlign,textBaseline:"top",fontStyle:f,fontWeight:p},bolderText:{fill:r,fontSize:i.tableTitleColFontSize,textAlign:i.tableHeaderColAlign,fontStyle:f,fontWeight:p},measureText:{fill:r,fontSize:i.tableTitleColFontSize,textAlign:i.tableHeaderColAlign,fontStyle:f,fontWeight:p},seriesText:{fill:r,fontSize:i.tableTitleColFontSize,textAlign:i.tableHeaderColAlign,fontStyle:f,fontWeight:p}},cornerCell:{cell:{backgroundColor:n},text:{fill:d,fontSize:i.tableTitleCornerFontSize,textAlign:i.tableHeaderCornerAlign,fontStyle:c,fontWeight:h},bolderText:{fill:d,fontSize:i.tableTitleCornerFontSize,textAlign:i.tableHeaderCornerAlign,fontStyle:c,fontWeight:h},measureText:{fill:d,fontSize:i.tableTitleCornerFontSize,textAlign:i.tableHeaderCornerAlign,fontStyle:c,fontWeight:h}}};return xt(e,g),i.showHorizonBorder===!1&&xt(e,{cornerCell:{cell:{horizontalBorderColor:l,horizontalBorderWidth:0}},rowCell:{cell:{horizontalBorderColor:l,horizontalBorderWidth:0}}}),i.showVerticalBorder===!1&&xt(e,{cornerCell:{cell:{verticalBorderColor:l,verticalBorderWidth:0}},rowCell:{cell:{verticalBorderColor:l,verticalBorderWidth:0}}}),e}setupDefaultOptions(t){const{customAttr:e}=t;return e.basicStyle.tableColumnMode==="field"&&(e.basicStyle.tableColumnMode="custom"),t}}function Ra(m,u,t,e,o,i,l){var a;if(!(u!=null&&u.length)||!m[dt])return"-";switch(((a=o[m[dt]])==null?void 0:a.aggregation)||"SUM"){case"SUM":return u.reduce((s,r)=>s+parseFloat(r[m[dt]]??0),0);case"AVG":return u.reduce((r,d)=>r+parseFloat(d[m[dt]]??0),0)/u.length;case"MIN":{const s=Il(u,r=>parseFloat(r[m[dt]]));return s==null?void 0:s[m[dt]]}case"MAX":{const s=Ol(u,r=>parseFloat(r[m[dt]]));return s==null?void 0:s[m[dt]]}case"NONE":return"-";case"CUSTOM":{const s=Va(m,i,e,t,l||{});return s===""||s===void 0?"-":parseFloat(s)}default:return u.reduce((s,r)=>s+parseFloat(r[m[dt]]??0),0)}}function Ha(m,u,t,e){var n,a,s,r,d,f,c,p,h;const o=m[dt],{row:i,col:l}=u;if(t.isRowTotal&&t.isColTotal)return(a=(n=e.rowColTotal)==null?void 0:n.data)==null?void 0:a[o];if(t.isColTotal&&!t.isRowSubTotal){const{colTotal:g,rowSubInColTotal:y}=e,x=it(m,i);let b;if(x.length){const S=gt(m,i);if(S+1===i.length&&g&&(x.push(o),b=st(g.data,x)),S+1<i.length&&y){const A=(s=y==null?void 0:y[S])==null?void 0:s.data;x.push(o),b=st(A,x)}}return b}if(t.isColSubTotal&&!t.isRowTotal&&!t.isRowSubTotal){const{colSubTotal:g}=e,y=gt(m,l),x=it(m,i),b=it(m,l),S=[...x,...b],A=(r=g==null?void 0:g[y])==null?void 0:r.data;let C;return S.length&&A&&(S.push(o),C=st(A,S)),C}if(t.isRowTotal&&!t.isColSubTotal){const{rowTotal:g}=e,y=it(m,l);let x;return g&&(y.length&&(y.push(o),x=st(g.data,y)),!l.length&&i.length&&(x=st(g.data,o))),x}if(t.isRowSubTotal&&(!t.isColTotal&&!t.isColSubTotal||!l.length&&t.isColTotal&&t.isRowSubTotal)){const{rowSubTotal:g}=e,y=gt(m,i),x=it(m,l),b=it(m,i),S=[...x,...b],A=(d=g==null?void 0:g[y])==null?void 0:d.data;let C;return S.length&&g&&(S.push(o),C=st(A,S)),C}if(t.isRowTotal&&t.isColSubTotal){const{colSubInRowTotal:g}=e,y=gt(m,l),x=(f=g==null?void 0:g[y])==null?void 0:f.data,b=it(m,l);let S;return b.length&&g&&(b.push(o),S=st(x,b)),S}if(t.isColTotal&&t.isRowSubTotal){const{rowSubInColTotal:g}=e,y=gt(m,i),x=(c=g==null?void 0:g[y])==null?void 0:c.data,b=it(m,i);let S;return b.length&&g&&(b.push(o),S=st(x,b)),S}if(t.isColSubTotal&&t.isRowSubTotal){const{rowSubInColSub:g}=e,y=gt(m,i),x=gt(m,l),b=(h=(p=g==null?void 0:g[y])==null?void 0:p[x])==null?void 0:h.data,S=it(m,i),A=it(m,l),C=[...S,...A];let v;return C.length&&g&&(C.push(o),v=st(b,C)),v}return"-"}function Wa(m,u,t,e){var n,a,s,r,d,f,c,p;const o=m[dt],{row:i,col:l}=u;if(t.isRowTotal&&t.isColTotal)return(a=(n=e.rowColTotal)==null?void 0:n.data)==null?void 0:a[o];if(t.isColTotal&&!t.isRowSubTotal){const{colTotal:h}=e,g=it(m,i);let y;return g.length&&h&&(g.push(o),y=st(h.data,g)),y}if(t.isColSubTotal&&!t.isRowTotal&&!t.isRowSubTotal){const{colSubTotal:h}=e,g=gt(m,l),y=it(m,i),x=it(m,l),b=[...y,...x],S=(s=h==null?void 0:h[g])==null?void 0:s.data;let A;return b.length&&S&&(b.push(o),A=st(S,b)),A}if(t.isRowTotal&&!t.isColSubTotal){const{rowTotal:h}=e,g=it(m,l);let y;return h&&(g.length&&(g.push(o),y=st(h.data,g)),!l.length&&i.length&&(y=st(h.data,o))),y}if(t.isRowSubTotal&&!t.isColTotal&&!t.isColSubTotal){const{rowSubTotal:h}=e,g=gt(m,i),y=it(m,l),x=it(m,i),b=[...y,...x],S=(r=h==null?void 0:h[g])==null?void 0:r.data;let A;return b.length&&h&&(b.push(o),A=st(S,b)),A}if(t.isRowTotal&&t.isColSubTotal){const{colSubInRowTotal:h}=e,g=gt(m,l),y=(d=h==null?void 0:h[g])==null?void 0:d.data,x=it(m,l);let b;return x.length&&h&&(x.push(o),b=st(y,x)),b}if(t.isColTotal&&t.isRowSubTotal){const{rowSubInColTotal:h}=e,g=gt(m,i),y=(f=h==null?void 0:h[g])==null?void 0:f.data,x=it(m,i);let b;return x.length&&h&&(x.push(o),b=st(y,x)),b}if(t.isColSubTotal&&t.isRowSubTotal){const{rowSubInColSub:h}=e,g=gt(m,i),y=gt(m,l),x=(p=(c=h==null?void 0:h[g])==null?void 0:c[y])==null?void 0:p.data,b=it(m,i),S=it(m,l),A=[...b,...S];let C;return A.length&&h&&(A.push(o),C=st(x,A)),C}}function Va(m,u,t,e,o){const{tableLayoutMode:i}=t.customAttr.basicStyle;return i==="tree"?Ha(m,u,e,o):Wa(m,u,e,o)}function gt(m,u){const t=u.map(i=>i.dataeaseName);let e=-1;const o=Ge(m);for(let i=t.length-1;i>=0;i--){const l=t[i];o.findIndex(a=>a===l)!==-1&&e++}return e}function it(m,u){const t=[],e=Ge(m);return u.forEach(o=>{e.findIndex(l=>l===o.dataeaseName)!==-1&&t.push(m[o.dataeaseName])}),t}function Ya(m,u){const{isRowTotal:t,isRowSubTotal:e,isColTotal:o,isColSubTotal:i}=m,{row:l,col:n}=u||{},{calcTotals:a={},calcSubTotals:s={}}=l||{},{calcTotals:r={},calcSubTotals:d={}}=n||{},f=(c,p)=>{if((c.aggregation||c.calcFunc)&&p)return{aggregation:c.aggregation,calcFunc:c.calcFunc}};return f(r,o)||f(d,i)||f(a,t)||f(s,e)}const il=m=>typeof m=="number"?Number.isNaN(m):m&&typeof m=="string"?Number.isNaN(Number(m)):!0,Io=(m,u,t=!1)=>m!=null&&m.length?m.reduce((e,o)=>{const i=st(o,u),l=il(i);if(t&&l)return e;const n=l?0:i;return e.push(new Ue(n)),e},[]):[],ll=(m,u)=>{const t=Io(m,u);return t.length?Ue.sum(...t).toNumber():0},yo=(m,u,t)=>{const e=Io(u,t,!0);if(e!=null&&e.length)return Ue[m](...e).toNumber()},sl=(m,u)=>{const t=Io(m,u);return t!=null&&t.length?Ue.sum(...t).dividedBy(t.length).toNumber():0},qa={[ge.SUM]:ll,[ge.MIN]:(m,u)=>yo("min",m,u),[ge.MAX]:(m,u)=>yo("max",m,u),[ge.AVG]:sl};class ja extends mi{drawTextShape(){this.meta.fieldValue=" ",super.drawTextShape();const{rowHeader:u,columnHeader:t}=this.spreadsheet.facet,e=t.getConfig().viewportWidth/2,o=u.getConfig().viewportHeight/2,l={attrs:{...this.getTextStyle(),x:e,y:o,text:Wt("data_set.no_data"),opacity:1,textAlign:"center",textBaseline:"middle"}};this.addShape("text",l)}drawBackgroundShape(){const u=this.theme.dataCell.cell;u.backgroundColor=nl(u.backgroundColor,1),super.drawBackgroundShape()}}function nl(m,u){if(m.indexOf("rgba")!==-1){const t=m.split(",");return t[3]=`${u})`,t.join(",")}if(m.indexOf("rgb")!==-1)return`${m.replace("rgb","rgba").replace(")",`,${u})`)}`;if(m.indexOf("#")!==-1){if(m.length===7)return`${m}${Math.round(u*255).toString(16)}`;if(m.length===9)return m.slice(0,7)+Math.round(u*255).toString(16)}return m}function Ga(m,u){u!=null&&u.length||m.on(j.LAYOUT_AFTER_RENDER,()=>{var i;const{colLeafNodes:t,rowLeafNodes:e}=((i=m.facet)==null?void 0:i.layoutResult)||{};if(!(t!=null&&t.length)||!(e!=null&&e.length))return;const o=[];t.forEach((l,n)=>{e.forEach((a,s)=>{o.push({rowIndex:s,colIndex:n})})}),m.options.mergedCell=(l,n,a)=>new ja(l,n,a),m.interaction.mergeCells(o)})}const Ua=Object.freeze(Object.defineProperty({__proto__:null,TablePivot:$a,getDataAvgByField:sl,getDataExtremumByField:yo,getDataSumByField:ll,isNotNumber:il,setColorOpacity:nl},Symbol.toStringTag,{value:"Module"})),Vt=class Vt{registerChartView(u,t,e){Vt.CHART_VIEW_MAP.has(u)?Vt.CHART_VIEW_MAP.get(u).set(t,e):Vt.CHART_VIEW_MAP.set(u,new Map([[t,e]]))}getChartView(u,t){var e;return(e=Vt.CHART_VIEW_MAP.get(u))==null?void 0:e.get(t)}};w(Vt,"CHART_VIEW_MAP",new Map);let xo=Vt;const al=new xo,Qo=Object.assign({"./charts/bar/bar.ts":Hs,"./charts/bar/bidirectional-bar.ts":Vs,"./charts/bar/horizontal-bar.ts":js,"./charts/bar/progress-bar.ts":Us,"./charts/bar/range-bar.ts":Zs,"./charts/bar/waterfall.ts":Ks,"./charts/line/area.ts":on,"./charts/line/line.ts":nn,"./charts/line/stock-line.ts":cn,"./charts/liquid/liquid.ts":fn,"./charts/map/bubble-map.ts":hn,"./charts/map/flow-map.ts":yn,"./charts/map/heat-map.ts":bn,"./charts/map/map.ts":An,"./charts/map/symbolic-map.ts":vn,"./charts/map/tooltip-carousel.ts":mn,"./charts/others/chart-mix-common.ts":wn,"./charts/others/chart-mix.ts":Fn,"./charts/others/circle-packing.ts":On,"./charts/others/funnel.ts":Nn,"./charts/others/gauge.ts":Mn,"./charts/others/indicator.ts":Rn,"./charts/others/picture-group.ts":Wn,"./charts/others/quadrant.ts":Yn,"./charts/others/radar.ts":jn,"./charts/others/rich-text.ts":Un,"./charts/others/sankey-common.ts":Xn,"./charts/others/sankey.ts":Qn,"./charts/others/scatter.ts":ta,"./charts/others/treemap.ts":oa,"./charts/others/word-cloud.ts":sa,"./charts/pie/pie.ts":ca,"./charts/pie/rose.ts":da,"./charts/table/t-heatmap.ts":pa,"./charts/table/table-info.ts":Ba,"./charts/table/table-normal.ts":Ma,"./charts/table/table-pivot.ts":Ua});for(const m in Qo){const u=Qo[m];Object.getOwnPropertyNames(u).forEach(t=>{if(Cl(u[t],Ce)){const e=new u[t];al.registerChartView(e.render,e.name,e)}})}const yr=al;export{$t as C,we as a,Pe as b,yr as c,Fs as d,gr as e,ha as f,Oa as g,el as h,Xo as m,pr as n,Is as s};

import{T as P,a4 as k}from"./element-plus-secondary-0.0.0-dataease.js";import{E as R}from"./EmptyBackground-0.0.0-dataease.js";import{p as n}from"./index-0.0.0-dataease.js";import{j as B}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as j,U as G,R as L,l as W,k as _,r as F,w as E,ak as O,o as c,c as v,W as U,Z as C,_ as y,T as w,am as z,u as D,a0 as x,Y as N,z as V,S as H,n as T}from"./@vue-0.0.0-dataease.js";import{_ as M}from"./_plugin-vue_export-helper-0.0.0-dataease.js";const Y=(o,f)=>{const p=[],{columns:e}=o,[i]=f.slots.default(),{children:d=[]}=i||{};return e!=null&&e.length?(d.forEach(u=>{const{prop:h,key:b,type:S}=u.props||{};(e.includes(h)||b==="_operation"||S==="selection")&&p.push(u)}),p):d},Z={key:1,style:{width:"100%"}},$={key:0,class:"pagination-cont"},q=j({__name:"GridTable",props:{columns:n.arrayOf(n.string),isSearch:n.bool.def(!1),showPagination:n.bool.def(!0),multipleSelection:n.array.def(()=>[]),pagination:n.object,isRememberSelected:n.bool.def(!1),selectedFlags:n.string.def("id"),tableData:n.array,emptyDesc:n.string,emptyImg:n.string,border:n.bool.def(!1),showEmptyImg:n.bool.def(!0),dataLoading:n.bool.def(!1)},setup(o,{expose:f}){const{t:p}=B(),e=o,i=G(),d=()=>{Object.keys(i).forEach(a=>{a.startsWith("on")?["onSizeChange","onCurrentChange"].includes(a)?t.paginationEvent[a.slice(2)]=i[a]:t.tableEvent[a.slice(2)]=i[a]:t.tableAttrs[a]=i[a]})},u=a=>{s.value.toggleRowSelection(a,!0)},h=()=>{s.value.toggleAllSelection()},b=()=>{s.value.clearSelection()},S=a=>{t.multipleSelectionCache=[...t.multipleSelectionCache,...a];const r=t.multipleSelectionCache.map(l=>l[e.selectedFlags]),g=[];e.tableData.forEach(l=>{const m=r.indexOf(l[e.selectedFlags]);m!==-1&&(s.value.toggleRowSelection(l,!0),g.push(m))}),g.sort().reduceRight((l,m)=>{t.multipleSelectionCache.splice(m,1)},0)};L(()=>{d()});const t=W({paginationEvent:{},paginationDefault:{currentPage:1,pageSizes:[10,20,50,100],pageSize:10,layout:"total, prev, pager, next, sizes, jumper",total:0},multipleSelectionCache:[],tableEvent:{},tableAttrs:{}}),A=_(()=>e.emptyImg?e.emptyImg:e.isSearch?"tree":"noneWhite"),s=F(null),I=_(()=>[...t.multipleSelectionCache,...e.multipleSelection]);return E(e.pagination,()=>{t.paginationDefault={...t.paginationDefault,...e.pagination}},{deep:!0,immediate:!0}),E(e.tableData,()=>{if(T(()=>{s.value.doLayout()}),!e.isRememberSelected)return;const a=[...e.multipleSelection];T(()=>{S(a)})},{deep:!0}),f({toggleRowSelection:u,clearSelection:b,toggleAllSelection:h,multipleSelectionAll:I}),(a,r)=>{const g=O("loading");return c(),v("div",{class:V(["flex-table",!o.tableData.length&&"no-data"])},[U((c(),C(D(P),w({"header-cell-class-name":"header-cell",ref_key:"table",ref:s,border:o.border},t.tableAttrs,{data:o.tableData,style:{width:"100%",height:"100%"}},z(t.tableEvent)),{empty:y(()=>[e.showEmptyImg?(c(),C(R,{key:0,description:e.emptyDesc?e.emptyDesc:D(p)("data_set.no_data"),"img-type":A.value||"noneWhite"},null,8,["description","img-type"])):(c(),v("div",Z))]),default:y(()=>[x(Y,{columns:o.columns},{default:y(()=>[H(a.$slots,"default",{},void 0,!0)]),_:3},8,["columns"])]),_:3},16,["border","data"])),[[g,e.dataLoading]]),o.showPagination&&o.tableData.length?(c(),v("div",$,[x(D(k),w({"current-page":t.paginationDefault.currentPage,"onUpdate:currentPage":r[0]||(r[0]=l=>t.paginationDefault.currentPage=l),"page-size":t.paginationDefault.pageSize,"onUpdate:pageSize":r[1]||(r[1]=l=>t.paginationDefault.pageSize=l),background:""},t.paginationDefault,z(t.paginationEvent)),null,16,["current-page","page-size"])])):N("",!0)],2)}}});const ae=M(q,[["__scopeId","data-v-61c57436"]]);export{ae as G};

import{p as o}from"./index-0.0.0-dataease.js";import{E as P}from"./el-table-column-0.0.0-dataease.js";import"./el-checkbox-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as k}from"./el-pagination-0.0.0-dataease.js";import{o as B}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./el-select-0.0.0-dataease.js";import{E as R}from"./EmptyBackground-0.0.0-dataease.js";import{d as G,ag as L,ak as j,Z as F,G as E,r as O,w as _,aa as U,f as c,L as v,T as W,g as C,i as y,a4 as w,aC as x,j as D,k as z,a0 as N,U as V,$,n as T}from"./vue-0.0.0-dataease.js";import{_ as H}from"./_plugin-vue_export-helper-0.0.0-dataease.js";const M=(n,f)=>{const p=[],{columns:e}=n,[i]=f.slots.default(),{children:d=[]}=i||{};return e!=null&&e.length?(d.forEach(u=>{const{prop:h,key:b,type:S}=u.props||{};(e.includes(h)||b==="_operation"||S==="selection")&&p.push(u)}),p):d},Z={key:1,style:{width:"100%"}},q={key:0,class:"pagination-cont"},J=G({__name:"GridTable",props:{columns:o.arrayOf(o.string),isSearch:o.bool.def(!1),showPagination:o.bool.def(!0),multipleSelection:o.array.def(()=>[]),pagination:o.object,isRememberSelected:o.bool.def(!1),selectedFlags:o.string.def("id"),tableData:o.array,emptyDesc:o.string,emptyImg:o.string,border:o.bool.def(!1),showEmptyImg:o.bool.def(!0),dataLoading:o.bool.def(!1)},setup(n,{expose:f}){const{t:p}=B(),e=n,i=L(),d=()=>{Object.keys(i).forEach(a=>{a.startsWith("on")?["onSizeChange","onCurrentChange"].includes(a)?t.paginationEvent[a.slice(2)]=i[a]:t.tableEvent[a.slice(2)]=i[a]:t.tableAttrs[a]=i[a]})},u=a=>{s.value.toggleRowSelection(a,!0)},h=()=>{s.value.toggleAllSelection()},b=()=>{s.value.clearSelection()},S=a=>{t.multipleSelectionCache=[...t.multipleSelectionCache,...a];const r=t.multipleSelectionCache.map(l=>l[e.selectedFlags]),g=[];e.tableData.forEach(l=>{const m=r.indexOf(l[e.selectedFlags]);m!==-1&&(s.value.toggleRowSelection(l,!0),g.push(m))}),g.sort().reduceRight((l,m)=>{t.multipleSelectionCache.splice(m,1)},0)};j(()=>{d()});const t=F({paginationEvent:{},paginationDefault:{currentPage:1,pageSizes:[10,20,50,100],pageSize:10,layout:"total, prev, pager, next, sizes, jumper",total:0},multipleSelectionCache:[],tableEvent:{},tableAttrs:{}}),A=E(()=>e.emptyImg?e.emptyImg:e.isSearch?"tree":"noneWhite"),s=O(null),I=E(()=>[...t.multipleSelectionCache,...e.multipleSelection]);return _(e.pagination,()=>{t.paginationDefault={...t.paginationDefault,...e.pagination}},{deep:!0,immediate:!0}),_(e.tableData,()=>{if(T(()=>{s.value.doLayout()}),!e.isRememberSelected)return;const a=[...e.multipleSelection];T(()=>{S(a)})},{deep:!0}),f({toggleRowSelection:u,clearSelection:b,toggleAllSelection:h,multipleSelectionAll:I}),(a,r)=>{const g=U("loading");return c(),v("div",{class:V(["flex-table",!n.tableData.length&&"no-data"])},[W((c(),C(D(P),w({"header-cell-class-name":"header-cell",ref_key:"table",ref:s,border:n.border},t.tableAttrs,{data:n.tableData,style:{width:"100%",height:"100%"}},x(t.tableEvent)),{empty:y(()=>[e.showEmptyImg?(c(),C(R,{key:0,description:e.emptyDesc?e.emptyDesc:D(p)("data_set.no_data"),"img-type":A.value||"noneWhite"},null,8,["description","img-type"])):(c(),v("div",Z))]),default:y(()=>[z(M,{columns:n.columns},{default:y(()=>[$(a.$slots,"default",{},void 0,!0)]),_:3},8,["columns"])]),_:3},16,["border","data"])),[[g,e.dataLoading]]),n.showPagination&&n.tableData.length?(c(),v("div",q,[z(D(k),w({"current-page":t.paginationDefault.currentPage,"onUpdate:currentPage":r[0]||(r[0]=l=>t.paginationDefault.currentPage=l),"page-size":t.paginationDefault.pageSize,"onUpdate:pageSize":r[1]||(r[1]=l=>t.paginationDefault.pageSize=l),background:""},t.paginationDefault,x(t.paginationEvent)),null,16,["current-page","page-size"])])):N("",!0)],2)}}});const re=H(J,[["__scopeId","data-v-61c57436"]]);export{re as G};

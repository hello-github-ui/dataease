import"./translate-0.0.0-dataease.js";import{D,g as z,A as p}from"./chart-0.0.0-dataease.js";import{d as b}from"./dvMain-0.0.0-dataease.js";import{u as f}from"./index-0.0.0-dataease.js";import{n as y,x as w}from"./lodash-es-0.0.0-dataease.js";const r=b(),c="#000000",g="#CCCCCC",U="#f5f6f7",R="#FFFFFF",S="#FFFFFF",v="#858383",K="#030B2E",M="#5a5c62",W={basicStyle:["barWidth","lineWidth","lineSymbolSize","leftLineWidth","leftLineSymbolSize","tableColumnWidth"],tableHeader:["tableTitleFontSize","tableTitleColFontSize","tableTitleCornerFontSize","tableTitleHeight"],tableCell:["tableItemFontSize","tableItemHeight"],misc:["nameFontSize","valueFontSize","spaceSplit","scatterSymbolSize","radarSize","wordSizeRange","wordSpacing"],label:{fontSize:"",seriesLabelFormatter:["fontSize"],proportionSeriesFormatter:["fontSize"]},tooltip:{fontSize:"",seriesTooltipFormatter:["fontSize"]},indicator:["fontSize","suffixFontSize"],indicatorName:["fontSize","nameValueSpacing"]},Y={text:["fontSize"],legend:["fontSize"],xAxis:{fontSize:"fontSize",axisLabel:["fontSize"],splitLine:{lineStyle:["width"]},axisLine:{lineStyle:["width"]}},yAxis:{fontSize:"fontSize",axisLabel:["fontSize"],splitLine:{lineStyle:["width"]},axisLine:{lineStyle:["width"]}},yAxisExt:{fontSize:"fontSize",axisLabel:["fontSize"],splitLine:{lineStyle:["width"]},axisLine:{lineStyle:["width"]}},misc:{fontSize:"fontSize",axisLine:{lineStyle:["width"]},axisTick:{lineStyle:["width"]},axisLabel:["margin","fontSize"],splitLine:{lineStyle:["width"]}}},E={legend:["color"],xAxis:{color:"color",axisLabel:["color"]},yAxis:{color:"",axisLabel:["color"]},yAxisExt:{color:"",axisLabel:["color"]},misc:{color:"color",axisTick:{lineStyle:["color"]},axisLabel:["color"]}},A={xAxis:{splitLine:{lineStyle:["color"]}},yAxis:{splitLine:{lineStyle:["color"]}},yAxisExt:{splitLine:{lineStyle:["color"]}},misc:{splitLine:{lineStyle:["color"]},axisLine:{lineStyle:["color"]}}},m={label:{color:"color",proportionSeriesFormatter:["color"]},tooltip:["color"]},u={tooltip:["backgroundColor"]},_={lineWidth:2,lineSymbolSize:8};function d(e,o){if(e instanceof Array)return e.forEach((i,n)=>{const a=Math.round(i*o);e[n]=a>1?a:1}),e;const t=Math.round(e*o);return t>1?t:1}function x(e,o){var t,i,n,a;(i=(t=e.label)==null?void 0:t.seriesLabelFormatter)==null||i.forEach(s=>{s.color=o}),(a=(n=e.label)==null?void 0:n.seriesTooltipFormatter)==null||a.forEach(s=>{s.color=o})}function H(e,o,t,i){for(const n in e)e[n]instanceof Array?e[n].filter(a=>a!=="wordSizeRange").forEach(a=>{o[n]&&(o[n][a]||o[n].length)&&(i==="mobile"&&_[a]!==void 0?o[n][a]=_[a]:o[n]instanceof Array?o[n].forEach(s=>{s[a]=d(s[a],t)}):o[n][a]=d(o[n][a],t))}):typeof e[n]=="string"?o[n]=d(o[n],t):o[n]&&H(e[n],o[n],t,i)}function l(e,o,t){for(const i in e)e[i]instanceof Array?e[i].forEach(n=>{o[i]&&(o[i][n]=t)}):typeof e[i]=="string"?o[i]=t:o[i]&&l(e[i],o[i],t)}function V(e,o){const t=r.canvasStyleData;t.dashboard.themeColor==="light"?(l(E,e,c),l(A,e,g),l(m,o,c),l(u,o,R),x(o,c),y(o,D,t.component.chartColor)):(l(E,e,S),l(A,e,v),l(m,o,S),l(u,o,M),x(o,S),y(o,z,t.component.chartColor)),e.text={...t.component.chartTitle,title:e.text.title,show:e.text.show,remarkShow:e.text.remarkShow,remark:e.text.remark}}function h(e,o){if(o){const t=w(p[e],e);o.customStyle.text.fontFamily=t,o.type==="indicator"&&(o.customAttr.indicator.fontFamily=e,o.customAttr.indicator.suffixFontFamily=e,o.customAttr.indicatorName.fontFamily=e)}}function Q(e){r.componentData.forEach(t=>{if(t.component==="UserView"){const i=r.canvasViewInfo[t.id];h(e,i),f().emitter.emit("renderChart-"+t.id,i)}else t.component==="Group"?t.propValue.forEach(i=>{if(i.component==="UserView"){const n=r.canvasViewInfo[i.id];h(e,n),f().emitter.emit("renderChart-"+i.id,n)}}):t.component==="DeTabs"&&t.propValue.forEach(i=>{i.componentData.forEach(n=>{if(n.component==="UserView"){const a=r.canvasViewInfo[n.id];h(e,a),f().emitter.emit("renderChart-"+n.id,a)}})})})}function T(e){if(["DeTabs"].includes(e.component)&&(e.commonBackground.innerPadding=0),r.dvInfo.type==="dataV"&&["CanvasBoard","CanvasIcon","Picture","Group","SvgTriangle","SvgStar"].includes(e.component))e.commonBackground.backgroundColorSelect=!1,e.commonBackground.innerPadding=0;else{const o=r.canvasStyleData.component.chartCommonStyle;for(const t in o)e.commonBackground[t]=o[t]}if(e.style.color&&(r.canvasStyleData.dashboard.themeColor==="light"?e.style.color=c:e.style.color=S),e.component==="UserView"){const o=r.canvasViewInfo[e.id];V(o.customStyle,o.customAttr),f().emitter.emit("renderChart-"+e.id,o)}else if(e.component==="Group")e.propValue.forEach(o=>{T(o)});else if(e.component==="DeTabs")r.canvasStyleData.dashboard.themeColor==="light"?(e.style.headFontColor=c,e.style.headFontActiveColor=c):(e.style.headFontColor=S,e.style.headFontActiveColor=S),e.propValue.forEach(o=>{o.componentData.forEach(t=>{T(t)})});else if(e.component==="VQuery"){const o=r.canvasViewInfo[e.id];o&&N(o)}return e}function q(){r.componentData.forEach(o=>{T(o)})}const C=["labelColor","borderColor","text","bgColor"],L=["borderShow","textColorShow","bgColorShow"];function N(e){if(F(e.type)){const o=r.canvasStyleData.component.filterStyle;C.forEach(t=>{e.customStyle.component[t]=o[t];const i=C.indexOf(t);i!==-1&&(e.customStyle.component[L[i]]=!0)})}}function J(e){const o=Object.values(r.canvasViewInfo),t=r.canvasStyleData.component.filterStyle;o.forEach(i=>{if(F(i.type)){i.customStyle.component[e]=t[e];const n=C.indexOf(e);n!==-1&&(i.customStyle.component[L[n]]=!0)}})}function F(e){return["VQuery"].includes(e)}export{K as D,U as L,Q as a,T as b,q as c,J as d,W as e,Y as f,H as r};

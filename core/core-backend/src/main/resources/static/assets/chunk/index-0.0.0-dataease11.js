import{d as kt,e as Ct,g as bt,o as yt,p as gt}from"./element-plus-secondary-0.0.0-dataease.js";import{a as St,u as xt,t as Ft,j as Tt,h as At}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{o as m,c as _,aW as Mt,d as Et,k as w,r as k,x as Nt,l as Ut,w as Dt,ak as Pt,W as C,u as i,a,a0 as s,_ as c,a2 as l,Y as A,M as b,ab as M,z as E,Z as N,a3 as O,a4 as $,X as U,$ as Rt}from"./@vue-0.0.0-dataease.js";import{i as Lt,a as qt}from"./ShareGrid-0.0.0-dataease.js";import{i as Bt}from"./icon_dashboard_outlined-0.0.0-dataease.js";import{i as It}from"./icon_operation-analysis_outlined-0.0.0-dataease.js";import{u as Vt}from"./user-img-0.0.0-dataease.js";import{s as Ot,n as $t}from"./templateMarket-0.0.0-dataease.js";import{i as Ht}from"./interactive-0.0.0-dataease.js";import Wt from"./ShortcutTable-0.0.0-dataease.js";import{b as H}from"./vue-router-0.0.0-dataease.js";import Zt from"./TemplateBranchItem-0.0.0-dataease.js";import{a as zt,b as jt}from"./index-0.0.0-dataease.js";import{_ as Jt}from"./DeResourceCreateOptV2.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import{g as Xt}from"./js-base64-0.0.0-dataease.js";import{useAppStoreWithOut as Yt}from"./app-0.0.0-dataease.js";import{u as Gt}from"./share-0.0.0-dataease.js";import{q as Kt}from"./dataVisualization-0.0.0-dataease.js";import{_ as Qt}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./@vueuse-0.0.0-dataease.js";import"./@element-plus-0.0.0-dataease.js";import"./lodash-es-0.0.0-dataease.js";import"./dayjs-0.0.0-dataease.js";import"./@amap-0.0.0-dataease.js";import"./async-validator-0.0.0-dataease.js";import"./@ctrl-0.0.0-dataease.js";import"./@popperjs-0.0.0-dataease.js";import"./escape-html-0.0.0-dataease.js";import"./normalize-wheel-es-0.0.0-dataease.js";import"./memoize-one-0.0.0-dataease.js";import"./pinia-0.0.0-dataease.js";import"./vue-demi-0.0.0-dataease.js";import"./jspdf-0.0.0-dataease.js";import"./@babel-0.0.0-dataease.js";import"./fflate-0.0.0-dataease.js";import"./vue-i18n-0.0.0-dataease.js";import"./@intlify-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./qs-0.0.0-dataease.js";import"./side-channel-0.0.0-dataease.js";import"./es-errors-0.0.0-dataease.js";import"./object-inspect-0.0.0-dataease.js";import"./crypto-js-0.0.0-dataease.js";import"./side-channel-list-0.0.0-dataease.js";import"./side-channel-map-0.0.0-dataease.js";import"./get-intrinsic-0.0.0-dataease.js";import"./es-object-atoms-0.0.0-dataease.js";import"./math-intrinsics-0.0.0-dataease.js";import"./gopd-0.0.0-dataease.js";import"./es-define-property-0.0.0-dataease.js";import"./has-symbols-0.0.0-dataease.js";import"./get-proto-0.0.0-dataease.js";import"./dunder-proto-0.0.0-dataease.js";import"./call-bind-apply-helpers-0.0.0-dataease.js";import"./function-bind-0.0.0-dataease.js";import"./hasown-0.0.0-dataease.js";import"./call-bound-0.0.0-dataease.js";import"./side-channel-weakmap-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./vue-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./zrender-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./web-storage-cache-0.0.0-dataease.js";import"./icon_search-outline_outlined-0.0.0-dataease.js";import"./dv-dashboard-spine-mobile-0.0.0-dataease.js";import"./icon_pc_outlined-0.0.0-dataease.js";import"./GridTable-0.0.0-dataease.js";import"./EmptyBackground-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./ShareHandler-0.0.0-dataease.js";import"./de-copy-0.0.0-dataease.js";import"./icon_refresh_outlined-0.0.0-dataease.js";import"./icon_edit_outlined-0.0.0-dataease.js";import"./icon_close_outlined-0.0.0-dataease.js";import"./icon_done_outlined-0.0.0-dataease.js";import"./ShareTicket-0.0.0-dataease.js";import"./dv-info-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./vue-clipboard3-0.0.0-dataease.js";import"./clipboard-0.0.0-dataease.js";import"./TicketEdit-0.0.0-dataease.js";import"./CustomLinkPwd-0.0.0-dataease.js";import"./TicketDialog-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./datasource-0.0.0-dataease.js";import"./visual-star-0.0.0-dataease.js";import"./ShortcutOption-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./html2canvas-0.0.0-dataease.js";import"./dvMain-0.0.0-dataease.js";import"./chart-0.0.0-dataease.js";import"./formatter-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./snowflake-id-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./util-0.0.0-dataease2.js";import"./chart-0.0.0-dataease2.js";import"./@antv-0.0.0-dataease.js";import"./eventemitter3-0.0.0-dataease.js";import"./@mapbox-0.0.0-dataease.js";import"./pbf-0.0.0-dataease.js";import"./ieee754-0.0.0-dataease.js";import"./supercluster-0.0.0-dataease.js";import"./gl-matrix-0.0.0-dataease.js";import"./tslib-0.0.0-dataease.js";import"./topojson-client-0.0.0-dataease.js";import"./viewport-mercator-project-0.0.0-dataease.js";import"./@turf-0.0.0-dataease.js";import"./polygon-clipping-0.0.0-dataease.js";import"./splaytree-0.0.0-dataease.js";import"./robust-predicates-0.0.0-dataease.js";import"./d3-scale-0.0.0-dataease.js";import"./d3-collection-0.0.0-dataease.js";import"./d3-format-0.0.0-dataease.js";import"./d3-time-format-0.0.0-dataease.js";import"./d3-time-0.0.0-dataease.js";import"./d3-color-0.0.0-dataease.js";import"./d3-array-0.0.0-dataease.js";import"./earcut-0.0.0-dataease.js";import"./regl-0.0.0-dataease.js";import"./mapbox-gl-0.0.0-dataease.js";import"./d3-dsv-0.0.0-dataease.js";import"./geojson-vt-0.0.0-dataease.js";import"./hammerjs-0.0.0-dataease.js";import"./element-resize-detector-0.0.0-dataease.js";import"./batch-processor-0.0.0-dataease.js";import"./d3-hexbin-0.0.0-dataease.js";import"./detect-browser-0.0.0-dataease.js";import"./d3-ease-0.0.0-dataease.js";import"./d3-interpolate-0.0.0-dataease.js";import"./d3-timer-0.0.0-dataease.js";import"./fecha-0.0.0-dataease.js";import"./size-sensor-0.0.0-dataease.js";import"./d3-regression-0.0.0-dataease.js";import"./d3-hierarchy-0.0.0-dataease.js";import"./fmin-0.0.0-dataease.js";import"./pdfast-0.0.0-dataease.js";import"./mathjs-0.0.0-dataease.js";import"./decimal.js-0.0.0-dataease.js";import"./typed-function-0.0.0-dataease.js";import"./complex.js-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./exceljs-0.0.0-dataease.js";import"./file-saver-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";import"./less-0.0.0-dataease.js";import"./copy-anything-0.0.0-dataease.js";import"./is-what-0.0.0-dataease.js";import"./html-to-image-0.0.0-dataease.js";import"./mitt-0.0.0-dataease.js";import"./vue-types-0.0.0-dataease.js";import"./is-plain-object-0.0.0-dataease.js";import"./index-0.0.0-dataease13.js";import"./MarketPreviewV2-0.0.0-dataease.js";import"./icon_left_outlined-0.0.0-dataease.js";import"./icon-filter-0.0.0-dataease.js";import"./TemplateMarketPreviewItem-0.0.0-dataease.js";import"./CategoryTemplateV2-0.0.0-dataease.js";import"./TemplateMarketV2Item-0.0.0-dataease.js";import"./TemplateSkeleton-0.0.0-dataease.js";const te={width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"};function ee(W,y){return m(),_("svg",te,y[0]||(y[0]=[Mt('<path d="M4 2.66666C4 1.93028 4.59695 1.33333 5.33333 1.33333H21.1477C21.3265 1.33333 21.4979 1.40515 21.6232 1.53267L27.8088 7.82587C27.9313 7.95055 28 8.11838 28 8.2932V29.3333C28 30.0697 27.403 30.6667 26.6667 30.6667H5.33333C4.59695 30.6667 4 30.0697 4 29.3333V2.66666Z" fill="#FF8800"></path><path d="M9.33398 11.3333C9.33398 10.9651 9.63246 10.6667 10.0007 10.6667H22.0007C22.3688 10.6667 22.6673 10.9651 22.6673 11.3333V12.6667C22.6673 13.0349 22.3688 13.3333 22.0007 13.3333H10.0007C9.63246 13.3333 9.33398 13.0349 9.33398 12.6667V11.3333Z" fill="white"></path><path d="M14.6673 16.6667C14.6673 16.2985 14.9658 16 15.334 16H22.0007C22.3688 16 22.6673 16.2985 22.6673 16.6667V23.3333C22.6673 23.7015 22.3688 24 22.0007 24H15.334C14.9658 24 14.6673 23.7015 14.6673 23.3333V16.6667Z" fill="white"></path><path d="M10.0007 16C9.63246 16 9.33398 16.2985 9.33398 16.6667V23.3333C9.33398 23.7015 9.63246 24 10.0007 24H11.334C11.7022 24 12.0007 23.7015 12.0007 23.3333V16.6667C12.0007 16.2985 11.7022 16 11.334 16H10.0007Z" fill="white"></path><path d="M21.334 1.33333C21.4429 1.36489 21.5429 1.424 21.6238 1.50632L27.8094 7.79952C27.8601 7.85104 27.9015 7.90993 27.9327 7.97364H22.8475C22.0116 7.97364 21.334 7.29602 21.334 6.46013V1.33333Z" fill="#D97400"></path>',5)]))}const ae={render:ee},oe={class:"workbranch"},re={class:"info-quick-creation"},ie={class:"user-info"},se={class:"info"},ne={class:"name-role flex-align-center"},me={class:"name"},le={key:0,class:"id"},pe={class:"name"},ce={class:"num"},ue={class:"quick-creation"},de={class:"label"},_e={class:"item-creation"},ve=["onClick"],he={class:"name"},fe={class:"name"},we={class:"template-market-dashboard"},ke={class:"label"},Ce={class:"expand-all"},be={class:"tab-btn"},ye=["onClick"],ge={class:"template-list"},Se={style:{"text-align":"center"}},xe={class:"no-result-tips"},Fe=Et({__name:"index",setup(W){const y=Gt(),D=St(),Z=Ht(),z=xt(),j=Ft(),{t:n}=Tt(),g=w(()=>Z.getData),P=k([]),{wsCache:R}=zt(),{push:J}=H(),X=H(),L=k(null),Y=jt(),G=Yt(),h=R.get("open-backend")==="1"?"_self":"_blank",u=Nt([{icon:Bt,name:"panel",color:"#3370ff"},{icon:It,name:"screen",color:"#00d6b9"},{icon:Lt,name:"dataset",color:"#16c0ff"},{icon:qt,name:"datasource",color:"#7f3bf6"}]),f=k("fold"),K=()=>{f.value=f.value==="expand"?"fold":"expand"},Q=w(()=>({PANEL:S.value,SCREEN:x.value})),S=w(()=>u.value[0].menuAuth&&u.value[0].anyManage),x=w(()=>u.value[1].menuAuth&&u.value[1].anyManage),tt=t=>{F.value=t},et=[{name:n("work_branch.recommended_dashboard"),value:"PANEL"},{name:n("auth.screen"),value:"SCREEN"}],F=k("PANEL");u.value.map(t=>t.name).unshift("all_types");const e=Ut({templateType:"PANEL",baseUrl:null,marketTemplatePreviewShowList:[],hasResult:!1,networkStatus:!0,loading:!1,dvCreateForm:{resourceName:null,templateId:null,name:null,pid:null,nodeType:"panel",templateUrl:null,newFrom:"new_market_template",panelType:"self",panelStyle:{},panelData:"[]"}});Dt(()=>F.value,()=>{q()});const at=async()=>{await Ot().then(t=>{e.baseUrl=t.data.baseUrl,e.marketTemplatePreviewShowList=t.data.contents,e.hasResult=!0,q()}).catch(()=>{e.networkStatus=!1})},q=()=>{e.hasResult=!1,e.marketTemplatePreviewShowList.forEach(t=>{t.showFlag=ot(t),t.showFlag&&(e.hasResult=!0)})},ot=t=>{let r=!1;return F.value===t.templateType&&(r=!0),r},rt=()=>{for(const t in g.value)t!=="3"&&P.value.push(g.value[t]),u.value[t]&&(u.value[t].menuAuth=g.value[t].menuAuth,u.value[t].anyManage=g.value[t].anyManage)},it=(t,r)=>{if(r)switch(t){case 0:st();break;case 1:nt();break;case 2:mt();break;case 3:lt();break}},st=()=>{const t="#/dashboard?opt=create";window.open(t,h)},nt=()=>{const t="#/dvCanvas?opt=create";window.open(t,h)},mt=()=>{let t=X.resolve({path:"/dataset-form"});window.open(t.href,h)},lt=()=>{const t="#/data/datasource?opt=create";window.open(t,h)},pt=t=>{R.set("template-preview-id",t),B()},ct=t=>{e.dvCreateForm.name=t.title,e.dvCreateForm.nodeType=t.templateType,t.source==="market"?(e.dvCreateForm.newFrom="new_market_template",e.dvCreateForm.templateUrl=t.metas.theme_repo,e.dvCreateForm.resourceName=t.id):(e.dvCreateForm.newFrom="new_inner_template",e.dvCreateForm.templateId=t.id),dt()},ut=w(()=>G.getIsDataEaseBi),dt=()=>{if(e.dvCreateForm.newFrom==="new_market_template"&&!e.dvCreateForm.templateUrl)return gt.warning(n("work_branch.template_market_official")),!1;const t={newFrom:e.dvCreateForm.newFrom,templateUrl:e.dvCreateForm.templateUrl,resourceName:e.dvCreateForm.resourceName,templateId:e.dvCreateForm.templateId},r=(["dataV","SCREEN"].includes(e.dvCreateForm.nodeType)?"#/dvCanvas?opt=create&createType=template":"#/dashboard?opt=create&createType=template")+"&templateParams="+encodeURIComponent(Xt.encode(JSON.stringify(t)));let p=null,d="";ut.value&&(d=Y.baseUrl),e.pid?p=window.open(d+r+`&pid=${e.pid}`,h):p=window.open(d+r,h),_t(p)},T=k(null),_t=t=>{if(T!=null&&T.value){const r={methodName:"initOpenHandler",args:t};T.value.invokeMethod(r)}},B=()=>{J("/template-market/index")},vt=()=>{if(S.value||x.value){const t={curPosition:"branchCreate",templateType:"all"};L.value.optInit(t)}},ht=()=>{Kt().then(t=>{var p,d;const r={shareDisable:(p=t.data)==null?void 0:p.disable,sharePeRequire:(d=t.data)==null?void 0:d.peRequire};y.setData(r)})};return rt(),at(),ht(),(t,r)=>{const p=At,d=kt,I=Ct,ft=bt,V=yt,wt=Pt("loading");return C((m(),_("div",oe,[a("div",re,[a("div",ie,[s(d,{class:"main-color user-icon-container"},{default:c(()=>[s(p,{name:"user-img"},{default:c(()=>[s(i(Vt),{class:"svg-icon"})]),_:1})]),_:1}),a("div",se,[a("div",ne,[a("span",me,l(i(D).getName),1),r[0]||(r[0]=a("span",{class:"role main-btn"},null,-1))]),i(D).getUid?(m(),_("span",le,l(`ID: ${i(D).getUid}`),1)):A("",!0)]),(m(!0),_(b,null,M(P.value,(o,v)=>(m(),_("div",{class:E(["item",{"de-item-hidden":!o.menuAuth}]),key:v},[a("span",pe,l(i(n)(`auth.${u.value[v].name}`)),1),a("span",ce,l(o.menuAuth?o.leafNodeCount:"*"),1)],2))),128))]),a("div",ue,[a("span",de,l(i(n)("work_branch.create_quickly")),1),a("div",_e,[(m(!0),_(b,null,M(u.value,(o,v)=>(m(),_("div",{key:o.name,class:E(["item",{"quick-create-disabled":!o.menuAuth||!o.anyManage}]),onClick:Ae=>it(v,o.menuAuth&&o.anyManage)},[!o.menuAuth||!o.anyManage?(m(),N(I,{key:0,class:"box-item",effect:"dark",content:i(n)("work_branch.template_market_official"),placement:"top"},{default:c(()=>r[1]||(r[1]=[a("div",{class:"empty-tooltip-container"},null,-1)])),_:1},8,["content"])):A("",!0),s(d,{class:"main-color",style:O({backgroundColor:o.color})},{default:c(()=>[s(p,null,{default:c(()=>[(m(),N(Rt(o.icon),{class:"svg-icon"}))]),_:2},1024)]),_:2},1032,["style"]),a("span",he,l(i(n)(`auth.${o.name}`)),1)],10,ve))),128)),a("div",{class:E(["item item-quick",{"quick-create-disabled":!(S.value||x.value)}]),onClick:vt},[S.value||x.value?A("",!0):(m(),N(I,{key:0,class:"box-item",effect:"dark",content:i(n)("work_branch.permission_to_create"),placement:"top"},{default:c(()=>r[2]||(r[2]=[a("div",{class:"empty-tooltip-container-template"},null,-1)])),_:1},8,["content"])),s(d,{class:"main-color-quick template-create"},{default:c(()=>[s(p,{name:"icon_template_colorful"},{default:c(()=>[s(i(ae),{class:"svg-icon"})]),_:1})]),_:1}),a("span",fe,l(i(n)("work_branch.new_using_template")),1)],2)])])]),a("div",we,[a("div",{class:"template-market",style:O({paddingBottom:f.value!=="fold"?"24px":0})},[a("div",ke,[$(l(i(n)("work_branch.template_center"))+" ",1),a("div",Ce,[a("button",{class:"all flex-center",onClick:B},l(i(n)("work_branch.view_all")),1),s(ft,{direction:"vertical"}),a("button",{onClick:K,class:"expand flex-center"},l(i(n)(`visualization.${f.value}`)),1)])]),f.value==="fold"?(m(),_(b,{key:0},[a("div",be,[(m(),_(b,null,M(et,o=>a("div",{key:o.value,class:E([F.value===o.value&&"active","main-btn"]),onClick:v=>tt(o.value)},l(o.name),11,ye)),64))]),C(a("div",ge,[(m(!0),_(b,null,M(e.marketTemplatePreviewShowList,(o,v)=>C((m(),N(Zt,{key:v,template:o,"base-url":e.baseUrl,"create-auth":Q.value,onTemplateApply:ct,onTemplatePreview:pt},null,8,["template","base-url","create-auth"])),[[U,o.showFlag]])),128))],512),[[U,e.networkStatus&&e.hasResult]]),C(s(V,{class:"template-empty"},{default:c(()=>[a("div",Se,[s(p,{name:"no_result",class:"no-result"},{default:c(()=>[s(i($t),{class:"svg-icon no-result"})]),_:1}),r[3]||(r[3]=a("br",null,null,-1)),a("span",xe,l(i(n)("work_branch.relevant_templates_found")),1)])]),_:1},512),[[U,e.networkStatus&&!e.hasResult]]),C(s(V,{class:"template-empty"},{default:c(()=>[$(l(i(n)("visualization.market_network_tips")),1)]),_:1},512),[[U,!e.networkStatus]])],64)):A("",!0)],4),s(Wt,{expand:f.value==="expand"},null,8,["expand"])]),s(Jt,{ref_key:"resourceCreateOpt",ref:L},null,512)])),[[wt,i(j).loadingMap[i(z).currentPath]]])}}});const Pr=Qt(Fe,[["__scopeId","data-v-f8dba761"]]);export{Pr as default};

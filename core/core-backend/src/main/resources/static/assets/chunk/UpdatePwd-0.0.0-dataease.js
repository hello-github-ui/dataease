import"./index-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{o as y,x as P,D as b,y as h}from"./ConfigGlobal.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{E as v,a as x}from"./el-form-item-0.0.0-dataease.js";import{r as w}from"./encryption-0.0.0-dataease.js";import{l as V}from"./logout-0.0.0-dataease.js";import{_ as d}from"./CustomPassword.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as E}from"./lodash-0.0.0-dataease.js";import{d as q,Z as F,r as U,f as C,g as $,i as p,k as m,j as s,a5 as k,a6 as B}from"./vue-0.0.0-dataease.js";import{_ as D}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./base64-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./interactive-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./datasource-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./icon_invisible_outlined-0.0.0-dataease.js";const I=q({__name:"UpdatePwd",setup(Z){const{t:e}=y(),t=F(E({pwd:"",newPwd:"",confirm:""})),_=(l,o,r)=>{o===t.pwd&&r(new Error(e("system.be_the_same")));const n=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[~!@#$%^&*()_+\-\={}|":<>?`[\];',.\/])[a-zA-Z0-9~!@#$%^&*()_+\-\={}|":<>?`[\];',.\/]{8,20}$/;if(new RegExp(n).test(o))r();else{const a=e("user.pwd_pattern_error");r(new Error(a))}},c=(l,o,r)=>{o!==t.newPwd?r(new Error(e("system.twice_are_inconsistent"))):r()},f={pwd:[{required:!0,message:e("common.require"),trigger:"blur"},{min:6,max:20,message:e("commons.input_limit",[6,20]),trigger:"blur"}],newPwd:[{required:!0,message:e("common.require"),trigger:"blur"},{validator:_,trigger:"blur"}],confirm:[{required:!0,message:e("common.require"),trigger:"blur"},{min:8,max:20,message:e("commons.input_limit",[8,20]),trigger:"blur"},{validator:c,trigger:"blur"}]},i=U(),g=()=>{i.value.validate(l=>{if(l){const o=w(t.pwd),r=w(t.newPwd);P.post({url:"/user/modifyPwd",data:{pwd:o,newPwd:r}}).then(()=>{b.success(e("system.log_in_again")),V()})}})};return(l,o)=>{const r=x,n=h,u=v;return C(),$(u,{ref_key:"updatePwdForm",ref:i,"require-asterisk-position":"right",model:t,rules:f,class:"mt16","label-width":"80px","label-position":"top"},{default:p(()=>[m(r,{label:s(e)("system.original_password"),prop:"pwd"},{default:p(()=>[m(s(d),{modelValue:t.pwd,"onUpdate:modelValue":o[0]||(o[0]=a=>t.pwd=a),"show-password":"",type:"password",placeholder:s(e)("system.the_original_password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(r,{label:s(e)("system.new_password"),prop:"newPwd"},{default:p(()=>[m(s(d),{modelValue:t.newPwd,"onUpdate:modelValue":o[1]||(o[1]=a=>t.newPwd=a),"show-password":"",type:"password",placeholder:s(e)("system.the_new_password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(r,{label:s(e)("system.confirm_password"),prop:"confirm"},{default:p(()=>[m(s(d),{modelValue:t.confirm,"onUpdate:modelValue":o[2]||(o[2]=a=>t.confirm=a),"show-password":"",type:"password",placeholder:s(e)("system.the_confirmation_password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(n,{onClick:g,type:"primary"},{default:p(()=>[k(B(s(e)("common.save")),1)]),_:1})]),_:1},8,["model"])}}});const me=D(I,[["__scopeId","data-v-52c9744e"]]);export{me as default};
